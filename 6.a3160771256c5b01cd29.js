(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1120:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(35);var n=a(6),s=a.n(n),i=a(320),r=a(33),o=a.n(r),l=a(71),c=a.n(l),d=a(1127);class m extends c.a.Renderer{constructor(e=!1){super(),this.disableLinks=e}link(e,t,a){return this.disableLinks?a:"!"===e[0]?'<a href="'.concat(e.substring(1,e.length),'" rel="noreferrer" target="_blank">').concat(a,"</a>"):'<a href="'.concat(e,'">').concat(a,"</a>")}paragraph(e){return e}}class u extends s.a.PureComponent{static get propTypes(){return{intl:d.a.isRequired,id:o.a.string.isRequired,defaultMessage:o.a.string.isRequired,values:o.a.object,disableLinks:o.a.bool}}render(){const e=this.props.intl.formatMessage({id:this.props.id,defaultMessage:this.props.defaultMessage},this.props.values),t=c()(e,{breaks:!0,sanitize:!0,renderer:new m(this.props.disableLinks)});return s.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}})}}var h,p,g;g={disableLinks:!1},(p="defaultProps")in(h=u)?Object.defineProperty(h,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[p]=g,t.b=Object(i.c)(u)},1123:function(e,t,a){"use strict";a(176);var n=a(6),s=a.n(n),i=a(1302),r=a(320);function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const l=s.a.forwardRef((e,t)=>{const{overlay:a}=e,n=o(e,["overlay"]),l=e=>{let{intl:t}=e,n=o(e,["intl"]);return s.a.createElement(r.a.Provider,{value:t},s.a.cloneElement(a,n))};return s.a.createElement(r.a.Consumer,null,e=>s.a.createElement(i.a,Object.assign({},n,{ref:t,overlay:s.a.createElement(l,Object.assign({},a.props,{intl:e}))})))});l.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},l.displayName="OverlayTrigger",t.a=l},1125:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.PureComponent{constructor(e){super(e),this.state={}}render(){let e=r.a.createElement(o.a,{id:"loading_screen.loading",defaultMessage:"Loading"});return this.props.message&&(e=this.props.message),r.a.createElement("div",{className:"loading-screen",style:c({position:this.props.position},this.props.style)},r.a.createElement("div",{className:"loading__content"},r.a.createElement("h3",null,e),r.a.createElement("div",{className:"round round-1"}),r.a.createElement("div",{className:"round round-2"}),r.a.createElement("div",{className:"round round-3"})))}}d(m,"propTypes",{position:s.a.oneOf(["absolute","fixed","relative","static","inherit"]),style:s.a.object,message:s.a.node}),d(m,"defaultProps",{position:"relative",style:{}})},1126:function(e,t,a){"use strict";a(54),a(35);var n=a(83),s=a(38),i=a(17),r=a(16),o=a(19),l=a(9),c=a(12),d=a(5),m=a(87),u=a(319),h=a(69),p=a(181),g=a(180),b=a(544),f=a(1207),_=a(1223),E=a(1305),v=a(182),y=a(42),C=a(1229),w=a(20),O=a(123),T=a(1359),S=a(0),P=a(1230),M=a(15),N=a(33),I=a.n(N),j=a(6),A=a.n(j),R=a(1365),k=a(1137),L=a(1130);a(1567);function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends A.a.PureComponent{constructor(e){super(e),D(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){let e;return this.props.elements&&(e=this.props.elements.map(e=>A.a.createElement(L.a.ItemSubMenu,{key:e.id,id:e.id,text:e.text,subMenu:e.subMenu,action:e.action,filter:e.filter,xOffset:0,root:!1}))),A.a.createElement(R.a,{dialogClassName:"SubMenuModal a11y__modal mobile-sub-menu",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,enforceFocus:!1,id:"submenuModal",role:"dialog"},A.a.createElement(R.a.Body,{onClick:this.onHide},A.a.createElement(k.a,null,A.a.createElement(L.a,{openLeft:!0,ariaLabel:M.lb("post_info.submenu.mobile","mobile submenu").toLowerCase()},e),A.a.createElement("div",null))))}}D(x,"propTypes",{elements:I.a.arrayOf(I.a.any),onHide:I.a.func.isRequired});var U=a(1132);a.d(t,"b",(function(){return F})),a.d(t,"o",(function(){return B})),a.d(t,"c",(function(){return G})),a.d(t,"m",(function(){return V})),a.d(t,"i",(function(){return W})),a.d(t,"j",(function(){return z})),a.d(t,"k",(function(){return K})),a.d(t,"l",(function(){return Y})),a.d(t,"h",(function(){return Q})),a.d(t,"g",(function(){return Z})),a.d(t,"d",(function(){return X})),a.d(t,"e",(function(){return $})),a.d(t,"n",(function(){return ee})),a.d(t,"a",(function(){return te})),a.d(t,"f",(function(){return ne}));const q=w.a.dispatch,H=w.a.getState;function F(e){function t(e){const t=H(),a=Object(l.getCurrentUserId)(t),i=e.team_id||Object(o.getCurrentTeamId)(t),r=Object(y.c)(t),m=Object(y.k)(t)===S.C.PIN,u=Object(c.getMyChannelMember)(t,e.id);if(q(Object(s.getChannelStats)(e.id)),0===e.delete_at){const t=O.a.getPreviousChannelName(a,i);t!==e.name&&(O.a.setPenultimateChannelName(a,i,t),O.a.setPreviousChannelName(a,i,e.name))}r&&m&&q(Object(g.u)(S.C.PIN,e.id)),Object(p.l)(),q(Object(n.batchActions)([{type:d.ChannelTypes.SELECT_CHANNEL,data:e.id},{type:S.f.SELECT_CHANNEL_WITH_MEMBER,data:e.id,channel:e,member:u||{}}]))}e.fake?async function(e,t,a){const n=H(),i=Object(l.getCurrentUserId)(n),r=M.K(e),{data:o}=await Object(s.createDirectChannel)(i,r)(q,H);o?t(o):a()}(e,e=>{t(e)},()=>{m.a.push("/"+this.state.currentTeam.name)}):t(e)}function B(e,t=Date.now()){return{type:S.f.UPDATE_CHANNEL_LAST_VIEWED_AT,channel_id:e,last_viewed_at:t}}function G(){q(Object(g.b)())}function V(){E.a.handleViewAction({type:S.f.TOGGLE_SHORTCUTS_MODAL,value:!0})}function W(e){E.a.handleViewAction({type:S.f.TOGGLE_CHANNEL_NAME_UPDATE_MODAL,value:!0,channel:e})}function z(e){E.a.handleViewAction({type:S.f.TOGGLE_GET_PUBLIC_LINK_MODAL,value:!0,fileId:e})}function K(e){E.a.handleViewAction({type:S.f.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,value:e})}function Y(e){const t={ModalId:S.u.MOBILE_SUBMENU,dialogType:x,dialogProps:{elements:e}};q(Object(U.b)(t))}function Q(e,t,a){const n=M.I(),s={id:M.p(),user_id:"0",channel_id:t||Object(c.getCurrentChannelId)(H()),message:e,type:S.A.EPHEMERAL,create_at:n,update_at:n,root_id:a,parent_id:a,props:{}};q(Object(u.f)(s))}function Z(e,t,a,n,s="",i){const r={id:M.p(),user_id:e.id,channel_id:n||Object(c.getCurrentChannelId)(H()),message:"",type:S.A.EPHEMERAL_ADD_TO_CHANNEL,create_at:i,update_at:i,root_id:s,parent_id:s,props:{username:e.username,addedUsername:t,addedUserId:a}};q(Object(u.f)(r))}let J=0;function X(e,t){return q(async(a,n)=>{const s=n(),i=Object(r.getConfig)(s),o=Date.now(),l=Object(c.getCurrentChannelStats)(s),d=l?l.member_count:0;return o-J>i.TimeBetweenUserTypingUpdatesMilliseconds&&d<i.MaxNotificationsPerChannel&&"true"===i.EnableUserTypingMessages&&(T.a.userTyping(e,t),J=o),{data:!0}})}function $(e="/",t=!0,a=!0){a&&O.a.setWasLoggedIn(!1),q(Object(i.logout)()).then(()=>{t&&C.a.signalLogout(),C.a.clear(),Object(h.e)(),_.a(),Object(b.a)(),m.a.push(e)}).catch(()=>{m.a.push(e)})}function ee(){return e=>{e(Object(g.b)()),e(Object(f.a)()),e(Object(g.a)())}}function te(e){q({type:S.f.BROWSER_CHANGE_FOCUS,focus:e})}async function ae(e,t){let a=H(),n=null;const i=Object(o.getMyTeamMember)(a,t.id);if(!i||0===Object.keys(i).length)return null;let r=Object(c.getChannelsNameMapInTeam)(a,t.id);r&&0!==Object.keys(r).length||(await q(Object(s.fetchMyChannelsAndMembers)(t.id)),a=H(),r=Object(c.getChannelsNameMapInTeam)(a,t.id));const l=O.a.getPreviousChannelName(e.id,t.id);if(n=r[l],void 0===n){n=Object(c.getAllDirectChannels)(a).find(e=>e.name===l)}let d=Object(c.getMyChannelMember)(a,n&&n.id);if(n&&d||(await q(Object(s.getChannelByNameAndTeamName)(t.name,l)),a=H(),r=Object(c.getChannelsNameMapInTeam)(a,t.id),n=r[l],d=Object(c.getMyChannelMember)(a,n&&n.id)),!n||!d){n=r[Object(c.getRedirectChannelNameForTeam)(a,t.id)],d=Object(c.getMyChannelMember)(a,n&&n.id)}return n&&d?n:null}async function ne(){let e=H(),t=Object(l.getCurrentUser)(e);if((M.U(Object(o.getTeamMemberships)(e))||!t)&&(await q(Object(i.loadMe)()),e=H(),t=Object(l.getCurrentUser)(e)),!t)return;const a=Object(v.a)(e),n=O.a.getPreviousTeamId(t.id);let r=Object(o.getMyTeams)(e);if(0===r.length)return void m.a.push("/select_team");const c=Object(o.getTeam)(e,n);if(c){const e=await ae(t,c);if(e)return q(Object(s.selectChannel)(e.id)),void m.a.push("/".concat(c.name,"/channels/").concat(e.name))}r=Object(P.a)(r,a);for(const e of r){const a=await ae(t,e);if(a)return q(Object(s.selectChannel)(a.id)),void m.a.push("/".concat(e.name,"/channels/").concat(a.name))}m.a.push("/select_team")}},1127:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(33),s=a.n(n);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={locale:s.a.string,timeZone:s.a.string,formats:s.a.object,messages:s.a.object,textComponent:s.a.any,defaultLocale:s.a.string,defaultFormats:s.a.object,onError:s.a.func},l={formatDate:s.a.func.isRequired,formatTime:s.a.func.isRequired,formatRelativeTime:s.a.func.isRequired,formatNumber:s.a.func.isRequired,formatPlural:s.a.func.isRequired,formatMessage:s.a.func.isRequired,formatHTMLMessage:s.a.func.isRequired},c=s.a.shape(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,{},l,{formatters:s.a.object}))},1128:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1365),l=a(1113);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.Component{constructor(e){super(e),c(this,"handleKeypress",e=>{if("Enter"===e.key&&this.props.show){const e=document.getElementById("cancelModalButton");e&&e===document.activeElement?this.handleCancel():this.handleConfirm()}}),c(this,"handleCheckboxChange",e=>{this.setState({checked:e.target.checked})}),c(this,"handleConfirm",()=>{this.props.onConfirm(this.state.checked)}),c(this,"handleCancel",()=>{this.props.onCancel(this.state.checked)}),this.state={checked:!1}}componentDidMount(){this.props.show&&document.addEventListener("keydown",this.handleKeypress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeypress)}shouldComponentUpdate(e,t){return e.show!==this.props.show||t.checked!==this.state.checked}componentDidUpdate(e){e.show&&!this.props.show?document.removeEventListener("keydown",this.handleKeypress):!e.show&&this.props.show&&document.addEventListener("keydown",this.handleKeypress)}render(){let e,t,a;return this.props.showCheckbox&&(e=r.a.createElement("div",{className:"checkbox text-right mb-0"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.handleCheckboxChange,checked:this.state.checked}),this.props.checkboxText))),t=this.props.cancelButtonText?this.props.cancelButtonText:r.a.createElement(l.a,{id:"confirm_modal.cancel",defaultMessage:"Cancel"}),this.props.hideCancel||(a=r.a.createElement("button",{type:"button",className:"btn btn-link btn-cancel",onClick:this.handleCancel,id:"cancelModalButton"},t)),r.a.createElement(o.a,{className:"modal-confirm "+this.props.modalClass,dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onCancel,onExited:this.props.onExited,id:"confirmModal",role:"dialog","aria-modal":!0,"aria-labelledby":"confirmModalLabel","aria-describedby":"confirmModalBody"},r.a.createElement(o.a.Header,{closeButton:!1},r.a.createElement(o.a.Title,{componentClass:"h1",id:"confirmModalLabel"},this.props.title)),r.a.createElement(o.a.Body,{id:"confirmModalBody"},this.props.message,e),r.a.createElement(o.a.Footer,null,a,r.a.createElement("button",{autoFocus:!0,type:"button",className:this.props.confirmButtonClass,onClick:this.handleConfirm,id:"confirmModalButton"},this.props.confirmButtonText)))}}c(d,"propTypes",{show:s.a.bool.isRequired,title:s.a.node,message:s.a.node,confirmButtonClass:s.a.string,modalClass:s.a.string,confirmButtonText:s.a.node,cancelButtonText:s.a.node,showCheckbox:s.a.bool,checkboxText:s.a.node,onConfirm:s.a.func.isRequired,onCancel:s.a.func.isRequired,onExited:s.a.func,hideCancel:s.a.bool}),c(d,"defaultProps",{title:"",message:"",confirmButtonClass:"btn btn-primary",confirmButtonText:"",modalClass:""})},1130:function(e,t,a){"use strict";a(1257),a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(15),l=a(1126);a(1388);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{constructor(e){super(e),c(this,"node",void 0),c(this,"show",()=>{this.setState({show:!0})}),c(this,"hide",()=>{this.setState({show:!1})}),c(this,"onClick",e=>{const{id:t,postId:a,subMenu:n,action:s,root:i}=this.props,r=o.cb(),c=Object.entries(e.nativeEvent).find(([e])=>"path"===e);let d;c&&(d=c[1]),r?n&&n.length?(i||e.stopPropagation(),Object(l.l)(n)):s&&s(a):d&&d.slice(0,2).find(e=>e.id===t)&&s?s(a):d||e.nativeEvent.composedPath||!s?!d&&e.nativeEvent.composedPath().slice(0,2).find(e=>e.id===t)&&s&&s(a):s(a)}),this.node=r.a.createRef(),this.state={show:!1}}render(){const{id:e,postId:t,text:a,subMenu:n,root:s,icon:i,filter:l,xOffset:c,ariaLabel:m}=this.props,u=o.cb();if(l&&!l(e))return"";let h=a;i&&(h=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon"},i),a));const p=n&&n.length,g=this.node&&this.node.current?this.node.current.getBoundingClientRect().width:0,b=r.a.isValidElement(a)?20:0,f=s?2:b,_={visibility:this.state.show&&p&&!u?"visible":"hidden",right:parseInt(String(c),10)-f+"px"};let E="";return u||(E=r.a.createElement("ul",{className:"a11y__popup Menu dropdown-menu SubMenu",style:_},p?n.map(e=>r.a.createElement(d,{key:e.id,id:e.id,postId:t,text:e.text,subMenu:e.subMenu,action:e.action,filter:e.filter,xOffset:g,ariaLabel:m,root:!1})):"")),r.a.createElement("li",{className:"SubMenuItem MenuItem",role:"menuitem",id:e+"_menuitem",ref:this.node},r.a.createElement("div",{id:e,"aria-label":m,onMouseEnter:this.show,onMouseLeave:this.hide,onClick:this.onClick},r.a.createElement("span",{id:"channelHeaderDropdownIconLeft_"+e,className:"fa fa-angle-left SubMenu__icon-left"+(p&&!u?"":"-empty"+(u?" mobile":"")),"aria-label":o.lb("post_info.submenu.icon","submenu icon").toLowerCase()}),h,r.a.createElement("span",{id:"channelHeaderDropdownIconRight_"+e,className:"fa fa-angle-right SubMenu__icon-right"+(p&&u?"":"-empty"),"aria-label":o.lb("post_info.submenu.icon","submenu icon").toLowerCase()}),E))}}c(d,"propTypes",{id:s.a.string,postId:s.a.string,text:s.a.node.isRequired,subMenu:s.a.arrayOf(s.a.shape({id:s.a.string,postId:s.a.string,text:s.a.node.isRequired,subMenu:s.a.arrayOf(s.a.shape({id:s.a.string,postId:s.a.string,text:s.a.node.isRequired,subMenu:s.a.arrayOf(s.a.shape({id:s.a.string,postId:s.a.string,text:s.a.node.isRequired,subMenu:s.a.arrayOf(s.a.object),icon:s.a.node,action:s.a.func,filter:s.a.func,xOffset:s.a.number,ariaLabel:s.a.string,root:s.a.bool,show:s.a.bool})),icon:s.a.node,action:s.a.func,filter:s.a.func,xOffset:s.a.number,ariaLabel:s.a.string,root:s.a.bool,show:s.a.bool})),icon:s.a.node,action:s.a.func,filter:s.a.func,xOffset:s.a.number,ariaLabel:s.a.string,root:s.a.bool,show:s.a.bool})),icon:s.a.node,action:s.a.func,filter:s.a.func,xOffset:s.a.number,ariaLabel:s.a.string,root:s.a.bool,show:s.a.bool}),c(d,"defaultProps",{show:!0});a(1565);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.PureComponent{constructor(...e){super(...e),m(this,"handleDividerClick",e=>{e.preventDefault(),e.stopPropagation()})}render(){const{children:e}=this.props,t=this.props.divider||r.a.createElement("li",{className:"MenuGroup menu-divider",onClick:this.handleDividerClick});return r.a.createElement(r.a.Fragment,null,t,e)}}m(u,"propTypes",{divider:s.a.node,children:s.a.node});var h=a(1231);const p=({onClick:e,ariaLabel:t,text:a,extraText:n,id:s,buttonClass:i,isDangerous:o})=>r.a.createElement("button",{"data-testid":s,id:s,"aria-label":t,className:"style--none"+(n?" MenuItem__with-help":"")+(i?" "+i:"")+(o?" MenuItem__dangerous":""),onClick:e},a&&r.a.createElement("span",{className:"MenuItem__primary-text"},a),n&&r.a.createElement("span",{className:"MenuItem__help-text"},n));p.propTypes={onClick:s.a.func.isRequired,ariaLabel:s.a.string,text:s.a.node.isRequired,extraText:s.a.string,id:s.a.string,buttonClass:s.a.string,isDangerous:s.a.bool};const g=Object(h.a)(p);g.displayName="MenuItemAction";var b=g;const f=({url:e,text:t,onClick:a})=>r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e,onClick:a},t);f.propTypes={url:s.a.string.isRequired,text:s.a.node.isRequired,onClick:s.a.func};const _=Object(h.a)(f);_.displayName="MenuItemExternalLink";var E=_,v=a(1111);const y=({to:e,text:t})=>r.a.createElement(v.a,{to:e},r.a.createElement("span",{className:"MenuItem__primary-text"},t));y.propTypes={to:s.a.string.isRequired,text:s.a.node.isRequired};const C=Object(h.a)(y);C.displayName="MenuItemLink";var w=C,O=a(1280);const T=({modalId:e,dialogType:t,dialogProps:a,text:n,extraText:s})=>r.a.createElement(O.a,{accessibilityLabel:n,modalId:e,dialogType:t,dialogProps:a,className:s&&"MenuItem__with-help"},n&&r.a.createElement("span",{className:"MenuItem__primary-text"},n),s&&r.a.createElement("span",{className:"MenuItem__help-text"},s));T.propTypes={modalId:s.a.string.isRequired,dialogType:s.a.elementType.isRequired,dialogProps:s.a.object,extraText:s.a.string,text:s.a.string.isRequired};const S=Object(h.a)(T);S.displayName="MenuItemToggleModalRedux";var P=S;a(1566);function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return N}));class N extends r.a.PureComponent{constructor(e){super(e),M(this,"node",void 0),M(this,"observer",void 0),M(this,"hideUnneededDividers",()=>{if(null===this.node.current)return;this.observer.disconnect();const e=Object.values(this.node.current.children).slice(0,this.node.current.children.length);let t=!1,a=!0;for(const n of e)n.classList.contains("menu-divider")||n.classList.contains("mobile-menu-divider")?(n.style.display="block",(a||t)&&(n.style.display="none"),t=!0):(a=!1,t=!1);for(const t of e.reverse()){if(!t.classList.contains("menu-divider")&&!t.classList.contains("mobile-menu-divider"))break;t.style.display="none"}this.observer.observe(this.node.current,{attributes:!0,childList:!0,subtree:!0})}),M(this,"handleMenuClick",e=>{e.target===this.node.current&&(e.preventDefault(),e.stopPropagation())}),this.node=r.a.createRef(),this.observer=new MutationObserver(this.hideUnneededDividers)}componentDidMount(){this.hideUnneededDividers()}componentDidUpdate(){this.hideUnneededDividers()}componentWillUnmount(){this.observer.disconnect()}rect(){return this.node&&this.node.current?this.node.current.getBoundingClientRect():null}render(){const{children:e,openUp:t,openLeft:a,id:n,ariaLabel:s,customStyles:i}=this.props;let l={};return i?l=i:(a&&!Object(o.cb)()&&(l.left="inherit",l.right=0),t&&!Object(o.cb)()&&(l.bottom="100%",l.top="auto")),r.a.createElement("div",{"aria-label":s,className:"a11y__popup Menu",id:n,role:"menu"},r.a.createElement("ul",{ref:this.node,style:l,className:"Menu__content dropdown-menu",onClick:this.handleMenuClick},e))}}M(N,"propTypes",{children:s.a.node,openLeft:s.a.bool,openUp:s.a.bool,id:s.a.string,ariaLabel:s.a.string.isRequired,customStyles:s.a.object}),M(N,"Group",u),M(N,"ItemAction",b),M(N,"ItemExternalLink",E),M(N,"ItemLink",w),M(N,"ItemToggleModalRedux",P),M(N,"ItemSubMenu",d)},1131:function(e,t,a){"use strict";a.d(t,"B",(function(){return f})),a.d(t,"b",(function(){return _})),a.d(t,"o",(function(){return E})),a.d(t,"w",(function(){return v})),a.d(t,"u",(function(){return y})),a.d(t,"y",(function(){return C})),a.d(t,"a",(function(){return w})),a.d(t,"p",(function(){return O})),a.d(t,"c",(function(){return T})),a.d(t,"k",(function(){return S})),a.d(t,"l",(function(){return P})),a.d(t,"x",(function(){return M})),a.d(t,"L",(function(){return N})),a.d(t,"h",(function(){return I})),a.d(t,"O",(function(){return j})),a.d(t,"N",(function(){return A})),a.d(t,"M",(function(){return R})),a.d(t,"E",(function(){return k})),a.d(t,"D",(function(){return L})),a.d(t,"C",(function(){return D})),a.d(t,"s",(function(){return x})),a.d(t,"m",(function(){return U})),a.d(t,"n",(function(){return q})),a.d(t,"q",(function(){return H})),a.d(t,"t",(function(){return F})),a.d(t,"j",(function(){return B})),a.d(t,"H",(function(){return G})),a.d(t,"i",(function(){return V})),a.d(t,"d",(function(){return W})),a.d(t,"F",(function(){return z})),a.d(t,"g",(function(){return K})),a.d(t,"e",(function(){return Y})),a.d(t,"f",(function(){return Q})),a.d(t,"v",(function(){return Z})),a.d(t,"J",(function(){return J})),a.d(t,"A",(function(){return X})),a.d(t,"K",(function(){return $})),a.d(t,"I",(function(){return ee})),a.d(t,"z",(function(){return te})),a.d(t,"r",(function(){return ae})),a.d(t,"G",(function(){return ne}));a(54);var n=a(1160),s=a(17),i=a(178),r=a(22),o=a(63),l=a(1126),c=a(1208),d=a(20),m=a(0);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=d.a.dispatch,b=d.a.getState;async function f(e,t){const{data:a,error:s}=await g(n.reloadConfig());a&&e?(g(n.getConfig()),g(n.getEnvironmentConfig()),e(a)):s&&t&&t(h({id:s.server_error_id},s))}async function _(e,t,a){const{data:n,error:i}=await s.updateUserMfa(e,!1)(g,b);n&&t?t(n):i&&a&&a(h({id:i.server_error_id},i))}async function E(e,t){const{data:a,error:s}=await n.getClusterStatus()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function v(e,t){const{data:a,error:s}=await n.testLdap()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function y(e,t){const{data:a,error:s}=await n.invalidateCaches()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function C(e,t){const{data:a,error:s}=await n.recycleDatabase()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function w(e,t,a){const{data:n,error:i}=await s.patchUser(e)(g,b);n&&t?t(n):i&&a&&a(h({id:i.server_error_id},i))}function O(e){return Object(o.bindClientFunc)({clientFunc:r.Client4.getOAuthAppInfo,params:[e]})}function T({responseType:e,clientId:t,redirectUri:a,state:n,scope:s}){return Object(o.bindClientFunc)({clientFunc:r.Client4.authorizeOAuthApp,params:[e,t,a,n,s]})}async function S(e,t,a,n,i,r,o){const{data:l,error:c}=await s.switchEmailToLdap(e,t,n,i,a)(g,b);l&&r?r(l):c&&o&&o(h({id:c.server_error_id},c))}async function P(e,t,a,n,i,r){const{data:o,error:l}=await s.switchEmailToOAuth(n,e,t,a)(g,b);o&&i?i(o):l&&r&&r(h({id:l.server_error_id},l))}async function M(e,t,a,n,i){const{data:r,error:o}=await s.switchOAuthToEmail(e,t,a)(g,b);r?(r.follow_link&&Object(l.e)(r.follow_link),n&&n(r)):o&&i&&i(h({id:o.server_error_id},o))}async function N(e,t,a){const{data:s,error:i}=await n.uploadBrandImage(e)(g,b);s&&t?t(s):i&&a&&a(h({id:i.server_error_id},i))}async function I(e,t){const{data:a,error:s}=await n.deleteBrandImage()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function j(e,t,a){const{data:s,error:i}=await n.uploadPublicSamlCertificate(e)(g,b);s&&t?t("saml-public.crt"):i&&a&&a(h({id:i.server_error_id},i))}async function A(e,t,a){const{data:s,error:i}=await n.uploadPrivateSamlCertificate(e)(g,b);s&&t?t("saml-private.key"):i&&a&&a(h({id:i.server_error_id},i))}async function R(e,t,a){const{data:s,error:i}=await n.uploadIdpSamlCertificate(e)(g,b);s&&t?t("saml-idp.crt"):i&&a&&a(h({id:i.server_error_id},i))}async function k(e,t){const{data:a,error:s}=await n.removePublicSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function L(e,t){const{data:a,error:s}=await n.removePrivateSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function D(e,t){const{data:a,error:s}=await n.removeIdpSamlCertificate()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function x(e){await n.getStandardAnalytics(e)(g,b)}async function U(e){await n.getAdvancedAnalytics(e)(g,b)}async function q(e){await n.getBotPostsPerDayAnalytics(e)(g,b)}async function H(e){await n.getPostsPerDayAnalytics(e)(g,b)}async function F(e){await n.getUsersPerDayAnalytics(e)(g,b)}async function B(e,t,a){const{data:s,error:i}=await n.testElasticsearch(e)(g,b);s&&t?t(s):i&&a&&a(h({id:i.server_error_id},i))}async function G(e,t){const{data:a,error:s}=await n.testS3Connection()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function V(e,t){const{data:a,error:s}=await n.purgeElasticsearchIndexes()(g,b);a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}async function W(e,t){const a=Object(o.bindClientFunc)({clientFunc:r.Client4.purgeBleveIndexes,params:[]}),{data:n,error:s}=await g(a);n&&e?e(n):s&&t&&t(h({id:s.server_error_id},s))}function z(e){return{type:m.f.SET_NAVIGATION_BLOCKED,blocked:e}}function K(e){return{type:m.f.DEFER_NAVIGATION,onNavigationConfirmed:e}}function Y(){return{type:m.f.CANCEL_NAVIGATION}}function Q(){return(e,t)=>{const a=Object(c.b)(t());a&&a(),e({type:m.f.CONFIRM_NAVIGATION})}}async function Z(e,t){const{data:a,error:n}=await g(i.invalidateAllEmailInvites());a&&e?e(a):n&&t&&t(h({id:n.server_error_id},n))}async function J(e,t){const{data:a,error:s}=await g(n.testEmail());a&&e?e(a):s&&t&&t(h({id:s.server_error_id},s))}function X(e,t){return a=>{a({type:m.f.RECEIVED_ADMIN_CONSOLE_REDUCER,data:{pluginId:e,reducer:t}})}}function $(e){return t=>{t({type:m.f.REMOVED_ADMIN_CONSOLE_REDUCER,data:{pluginId:e}})}}async function ee(e,t,a){const{data:s,error:i}=await g(n.testSiteURL(a));s&&e?e(s):i&&t&&t(h({id:i.server_error_id},i))}function te(e,t,a,{showTitle:n}){return s=>{s({type:m.f.RECEIVED_ADMIN_CONSOLE_CUSTOM_COMPONENT,data:{pluginId:e,key:t,component:a,options:{showTitle:n}}})}}async function ae(e,t,a){const{data:s,error:i}=await g(n.getSamlMetadataFromIdp(a));s&&e?e(s):i&&t&&t(h({id:i.server_error_id},i))}async function ne(e,t,a){const{data:s,error:i}=await n.setSamlIdpCertificateFromMetadata(a)(g,b);s&&e?e("saml-idp.crt"):i&&t&&t(h({id:i.server_error_id},i))}},1132:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));var n=a(0);function s(e){return t=>(t({type:n.f.MODAL_OPEN,modalId:e.modalId,dialogProps:e.dialogProps,dialogType:e.dialogType}),{data:!0})}function i(e){return t=>(t({type:n.f.MODAL_CLOSE,modalId:e}),{data:!0})}},1134:function(e,t,a){"use strict";a(176),a(35);var n=a(6),s=a.n(n),i=a(1113);function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const o=s.a.forwardRef((e,t)=>{const{placeholder:a}=e,n=r(e,["placeholder"]);return s.a.createElement(i.a,{id:a.id,defaultMessage:a.defaultMessage,values:a.values},e=>s.a.createElement("input",Object.assign({},n,{ref:t,placeholder:e})))});o.displayName="LocalizedInput",t.a=o},1135:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.a.PureComponent{render(){const{error:e=null,errors:t=[],iconClassName:a,margin:n,textClassName:s,type:i}=this.props;if(!e&&0===t.length)return null;let o=e;if(!o)for(const e of t)e&&(o=e);return o?"modal"===i?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-12 has-error"},o)):"backstage"===i?r.a.createElement("div",{className:"pull-left has-error"},r.a.createElement("label",{className:"control-label"},o)):n?r.a.createElement("div",{className:"form-group has-error"},r.a.createElement("label",{className:"control-label"},o)):r.a.createElement("div",{className:"col-sm-12 ".concat(s||"has-error")},r.a.createElement("label",{className:"control-label"},r.a.createElement("i",{className:"fa ".concat(a||"fa-exclamation-circle")})," ",o)):null}}o(l,"propTypes",{type:s.a.node,error:s.a.node,textClassName:s.a.string,iconClassName:s.a.string,margin:s.a.bool,errors:s.a.arrayOf(s.a.node)}),o(l,"defaultProps",{error:null,errors:[]})},1137:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(0),l=(a(176),a(35),a(1994)),c=a(2022),d=a(15);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.PureComponent{constructor(...e){super(...e),m(this,"onEntering",e=>{const t=Object(l.c)(e);Object(l.b)(Object(l.a)(({update:e,complete:t})=>{e({display:"block"}),t()}),Object(l.d)({from:{opacity:0},to:{opacity:1},duration:80})).start(t.set)}),m(this,"onExiting",e=>{const t=Object(l.c)(e);Object(l.b)(Object(l.d)({from:{opacity:1},to:{opacity:0},duration:80}),Object(l.a)(({update:e,complete:t})=>{e({display:"none"}),t()})).start(t.set)})}render(){return r.a.createElement(c.a,Object.assign({in:this.props.show,classNames:"MenuWrapperAnimation",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0},Object(d.cb)()?{}:{onEntering:this.onEntering,onExiting:this.onExiting},{timeout:{enter:80,exit:80}}),this.props.children)}}m(u,"propTypes",{children:s.a.node,show:s.a.bool.isRequired});a(1564);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return p}));class p extends r.a.PureComponent{constructor(e){if(super(e),h(this,"node",void 0),h(this,"keyboardClose",e=>{e.key===o.Q.KeyCodes.ESCAPE[0]&&this.close(),e.key===o.Q.KeyCodes.TAB[0]&&this.closeOnBlur(e)}),h(this,"closeOnBlur",e=>{this.node&&this.node.current&&e.target&&this.node.current.contains(e.target)||this.close()}),h(this,"close",()=>{this.state.open&&(this.setState({open:!1}),this.props.onToggle&&this.props.onToggle(!1))}),h(this,"toggle",()=>{const e=!this.state.open;this.setState({open:e}),this.props.onToggle&&this.props.onToggle(e)}),!Array.isArray(e.children)||2!==e.children.length)throw new Error("MenuWrapper needs exactly 2 children");this.state={open:!1},this.node=r.a.createRef()}componentDidMount(){document.addEventListener("click",this.closeOnBlur,!0),document.addEventListener("keyup",this.keyboardClose,!0)}componentWillUnmount(){document.removeEventListener("click",this.closeOnBlur,!0),document.removeEventListener("keyup",this.keyboardClose,!0)}render(){const{children:e}=this.props,t=this.props.animationComponent;return r.a.createElement("div",{id:this.props.id,className:"MenuWrapper "+this.props.className,onClick:this.toggle,ref:this.node},e?Object.values(e)[0]:{},r.a.createElement(t,{show:this.state.open},e?Object.values(e)[1]:{}))}}h(p,"propTypes",{children:s.a.node,className:s.a.string,onToggle:s.a.func,animationComponent:s.a.any,id:s.a.string}),h(p,"defaultProps",{className:"",animationComponent:u})},1141:function(e,t,a){"use strict";a.d(t,"b",(function(){return T})),a.d(t,"c",(function(){return S})),a.d(t,"n",(function(){return P})),a.d(t,"m",(function(){return M})),a.d(t,"d",(function(){return N})),a.d(t,"e",(function(){return I})),a.d(t,"f",(function(){return j})),a.d(t,"a",(function(){return A})),a.d(t,"j",(function(){return R})),a.d(t,"i",(function(){return k})),a.d(t,"g",(function(){return L})),a.d(t,"h",(function(){return D})),a.d(t,"o",(function(){return x})),a.d(t,"l",(function(){return U})),a.d(t,"k",(function(){return q})),a.d(t,"p",(function(){return H}));a(54);var n=a(83),s=a(38),i=a(31),r=a(5),o=a(17),l=a(178),c=a(10),d=a(12),m=a(19),u=a(9),h=a(21),p=a(89),g=a(321),b=a.n(g),f=a(1156),_=a(1251),E=a(1363),v=a(1364),y=a(87),C=a(0),w=a(15),O=a(123);function T(){return e=>{e({type:C.f.UPDATE_MOBILE_VIEW,data:Object(w.cb)()})}}function S(){return async(e,t)=>{const a=t(),n=Object(d.getCurrentChannel)(a),s=Object(d.getChannelsNameMapInCurrentTeam)(a);let i=Object(p.getChannelByName)(s,Object(_.a)(a));return n.id===i.id&&(i=Object(p.getChannelByName)(s,Object(d.getRedirectChannelNameForTeam)(a,Object(m.getCurrentTeamId)(a)))),e(M(i))}}function P(e){return async(t,a)=>{const n=a();return t(M(Object(d.getChannel)(n,e)))}}function M(e){return async(t,a)=>{const n=a(),s=Object(m.getCurrentRelativeTeamUrl)(n);if(e.fake||e.userId){const a=e.userId?e.name:e.display_name,i=Object(u.getUserByUsername)(n,a);if(!i)return{error:!0};if((await t(Object(f.e)(i.id))).error)return{error:!0};y.a.push("".concat(s,"/messages/@").concat(e.name))}else if(e.type===C.j.GM_CHANNEL){const t=Object(d.getChannel)(n,e.id);y.a.push("".concat(s,"/channels/").concat(t.name))}else y.a.push("".concat(s,"/channels/").concat(e.name));return{data:!0}}}function N(e){return async(t,a)=>{const n=a(),i=Object(u.getCurrentUserId)(n),r=Object(m.getCurrentTeamId)(n);return t(Object(s.joinChannel)(i,r,e))}}function I(e){return async(t,a)=>{let n=a();const i=Object(h.getMyPreferences)(n),o=Object(u.getCurrentUserId)(n),c=Object(m.getCurrentTeam)(n);Object(p.isFavoriteChannel)(i,e)&&t(Object(s.unfavoriteChannel)(e));const g=Object(m.getCurrentRelativeTeamUrl)(n);O.a.removePreviousChannelName(o,c.id,n);const{error:b}=await t(Object(s.leaveChannel)(e));if(b)return{error:b};n=a();const f=O.a.getPreviousChannelName(o,c.id,n),_=Object(d.getChannelsNameMapInCurrentTeam)(n),E=Object(p.getChannelByName)(_,f);return E&&Object(d.getMyChannelMemberships)(n)[E.id]||O.a.removePreviousChannelName(o,c.id,n),0===Object(d.getMyChannels)(a()).filter(e=>e.type===C.j.OPEN_CHANNEL||e.type===C.j.PRIVATE_CHANNEL).length?(O.a.removePreviousChannelName(o,c.id,n),t(Object(l.selectTeam)("")),t({type:r.TeamTypes.LEAVE_TEAM,data:c}),y.a.push("/")):y.a.push(g),{data:!0}}}function j(e){return async(t,a)=>{const n=a(),s=Object(u.getCurrentUserId)(n),i=Object(m.getCurrentTeam)(n),r=O.a.getPreviousChannelName(s,i.id,n),o=O.a.getPenultimateChannelName(s,i.id,n);e!==r&&e!==o||O.a.removePreviousChannelName(s,i.id,n)}}function A(e,t){return async(a,n)=>{const s=n(),i=Object(m.getCurrentTeamId)(s);return a(Object(o.autocompleteUsers)(e,i,t))}}function R(e){return async t=>{const a=Date.now(),{data:n,error:s}=await t(i.getPostsUnread(e));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(t({type:C.f.INCREASE_POST_VISIBILITY,data:e,amount:n.order.length}),""===n.next_post_id&&t({type:C.f.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:a}),{atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function k(e,t){return async a=>{const{data:n,error:s}=await a(i.getPostsAround(e,t,c.Posts.POST_CHUNK_SIZE/2));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(a({type:C.f.INCREASE_POST_VISIBILITY,data:e,amount:n.order.length}),{atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function L(e){return async t=>{const a=Date.now(),{data:n,error:s}=await t(i.getPosts(e,0,c.Posts.POST_CHUNK_SIZE/2));return s?{error:s,atLatestMessage:!1,atOldestmessage:!1}:(t({type:C.f.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:a}),{data:n,atLatestMessage:""===n.next_post_id,atOldestmessage:""===n.prev_post_id})}}function D({channelId:e,postId:t,type:a}){return async s=>{const r=C.j.POST_CHUNK_SIZE/2;s({type:C.f.LOADING_POSTS,data:!0,channelId:e});let o;o=a===C.z.BEFORE_ID?await s(i.getPostsBefore(e,t,0,r)):await s(i.getPostsAfter(e,t,0,r));const{data:l}=o,c=[{type:C.f.LOADING_POSTS,data:!1,channelId:e}];return o.error?{error:o.error,moreToLoad:!0}:(c.push({type:C.f.INCREASE_POST_VISIBILITY,data:e,amount:l.order.length}),s(Object(n.batchActions)(c)),{moreToLoad:a===C.z.BEFORE_ID?""!==l.prev_post_id:""!==l.next_post_id})}}function x(e,t){return async(a,n)=>{const s=Date.now(),r=n(),o=Object(v.a)(r);let l=t;const c=Object(E.a)(r,e);c&&c<o.lastDisconnectAt&&(l=c);const{data:d,error:m}=await a(i.getPostsSince(e,l));return d&&a({type:C.f.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:s}),{data:d,error:m}}}function U(){return()=>{b.a.emit(C.m.POST_LIST_SCROLL_TO_BOTTOM)}}function q(e){return(t,a)=>{Object(d.isManuallyUnread)(a(),e)||t(Object(s.markChannelAsRead)(e))}}function H(e){return t=>{t({type:C.f.UPDATE_TOAST_STATUS,data:e})}}},1142:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1226);const c=e=>r.a.createElement(l.a,{className:"BotBadge "+e.className,show:e.show},r.a.createElement(o.a,{id:"post_info.bot",defaultMessage:"BOT"}));c.propTypes={className:s.a.string,show:s.a.bool},c.defaultProps={show:!0,className:""},t.a=c},1143:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1158),c=a(0),d=a(15);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.PureComponent{constructor(e){super(e),m(this,"onKeyDown",e=>{this.props.shiftEnter&&e.keyCode===c.Q.KeyCodes.ENTER&&e.shiftKey||!0!==this.props.disableEnterSubmit&&Object(d.Z)(e,c.Q.KeyCodes.ENTER)&&this.props.submit&&"SELECT"!==e.target.tagName&&e.target.parentElement&&"react-select__input"!==e.target.parentElement.className&&!e.target.classList.contains("btn-cancel")&&this.settingList.current&&this.settingList.current.contains(e.target)&&this.handleSubmit(e)}),m(this,"handleSubmit",e=>{e.preventDefault(),this.props.setting?this.props.submit(this.props.setting):this.props.submit()}),m(this,"handleUpdateSection",e=>{this.props.updateSection(this.props.section),e.preventDefault()}),this.settingList=r.a.createRef()}componentDidMount(){if(this.settingList.current){const e=this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-cancel), input.form-control, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0?e[0].focus():this.settingList.current.focus()}document.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}render(){let e=null;this.props.clientError&&(e=r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{id:"clientError",className:"col-sm-12 has-error"},this.props.clientError)));let t=null;this.props.serverError&&(t=r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{id:"serverError",className:"col-sm-12 has-error"},this.props.serverError)));let a=null,n="setting-list__hint";"top"===this.props.infoPosition&&(n="pb-3"),this.props.extraInfo&&(a=r.a.createElement("div",{id:"extraInfo",className:n},this.props.extraInfo));let s="";this.props.submit&&(s=r.a.createElement(l.a,{defaultMessage:this.props.saveButtonText,saving:this.props.saving,disabled:this.props.saving,onClick:this.handleSubmit}));const i=this.props.inputs;let c,d;c="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",this.props.title&&(d=r.a.createElement("h4",{id:"settingTitle",className:"col-sm-12 section-title"},this.props.title));let m,u=r.a.createElement("div",{className:"setting-list-item"},i,a);return"top"===this.props.infoPosition&&(u=r.a.createElement("div",null,a,i)),m=this.props.cancelButtonText?this.props.cancelButtonText:r.a.createElement(o.a,{id:"setting_item_max.cancel",defaultMessage:"Cancel"}),r.a.createElement("section",{className:"section-max form-horizontal ".concat(this.props.containerStyle)},d,r.a.createElement("div",{className:c},r.a.createElement("div",{tabIndex:"-1",ref:this.settingList,className:"setting-list"},u,r.a.createElement("div",{className:"setting-list-item"},r.a.createElement("hr",null),this.props.submitExtra,t,e,s,r.a.createElement("button",{id:"cancelSetting",className:"btn btn-sm btn-cancel cursor--pointer style--none",onClick:this.handleUpdateSection},m)))))}}m(u,"defaultProps",{infoPosition:"bottom",saving:!1,section:"",containerStyle:""}),m(u,"propTypes",{inputs:s.a.node,containerStyle:s.a.string,clientError:s.a.oneOfType([s.a.string,s.a.object]),serverError:s.a.string,extraInfo:s.a.element,infoPosition:s.a.string,section:s.a.string,updateSection:s.a.func,setting:s.a.string,submit:s.a.func,disableEnterSubmit:s.a.bool,submitExtra:s.a.node,saving:s.a.bool,title:s.a.node,width:s.a.string,cancelButtonText:s.a.node,shiftEnter:s.a.bool,saveButtonText:s.a.string})},1145:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i);a(1555);const o=({url:e,username:t,size:a="md"})=>r.a.createElement("img",{className:"Avatar Avatar-".concat(a),alt:"".concat(t||"user"," profile image"),src:e});o.propTypes={url:s.a.string.isRequired,username:s.a.string,size:s.a.string},o.defaultProps={size:"md"},t.a=o},1148:function(e,t,a){"use strict";a(176),a(35);var n=a(6),s=a.n(n),i=a(1113);function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const o=s.a.forwardRef((e,t)=>{const{component:a,title:n}=e,o=r(e,["component","title"]);if("i"!==a&&"span"!==a)return null;const l=a;return s.a.createElement(i.a,{id:n.id,defaultMessage:n.defaultMessage,values:n.values},e=>s.a.createElement(l,Object.assign({},o,{ref:t,title:e})))});o.defaultProps={component:"i"},o.displayName="LocalizedIcon",t.a=o},1151:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(){this.latestPrefix="",this.latestComplete=!0,this.disableDispatches=!1,this.requestStarted=!1}handlePretextChanged(e){}resetRequest(){this.requestStarted=!1}startNewRequest(e){this.latestPrefix=e,this.latestComplete=!1,this.requestStarted=!0}shouldCancelDispatch(e){if(this.disableDispatches)return!0;if(!this.requestStarted)return!0;if(e===this.latestPrefix)this.latestComplete=!0;else if(this.latestComplete)return!0;return!1}allowDividers(){return!0}presentationType(){return"text"}}},1152:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.a.PureComponent{constructor(...e){super(...e),o(this,"handleClick",e=>{e.preventDefault(),this.props.onClick(this.props.term,this.props.matchedPretext)}),o(this,"handleMouseMove",e=>{e.preventDefault(),this.props.onMouseMove(this.props.term)})}static get propTypes(){return{item:s.a.oneOfType([s.a.object,s.a.string]).isRequired,term:s.a.string.isRequired,matchedPretext:s.a.string.isRequired,isSelection:s.a.bool,onClick:s.a.func,onMouseMove:s.a.func}}}o(l,"baseProps",{role:"button",tabIndex:-1})},1154:function(e,t,a){"use strict";var n=a(315),s=a(11);function i(e){return e.views.settings.previousActiveSection}var r=a(0);function o(e){return{type:r.f.UPDATE_ACTIVE_SECTION,data:e}}a(35);var l=a(33),c=a.n(l),d=a(6),m=a.n(d),u=a(1113),h=a(15),p=a(1440);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends m.a.PureComponent{constructor(...e){super(...e),g(this,"edit",null),g(this,"getEdit",e=>{this.edit=e}),g(this,"handleUpdateSection",e=>{e.preventDefault(),this.props.actions.updateActiveSection(this.props.section),this.props.updateSection(this.props.section)})}componentDidMount(){this.props.previousActiveSection===this.props.section&&this.edit&&this.edit.focus()}render(){let e=null,t=null;return!this.props.disableOpen&&Object(h.cb)()?e=m.a.createElement("div",{className:"section-min__edit"},m.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},m.a.createElement(p.a,null),this.props.describe)):this.props.disableOpen||(e=m.a.createElement("div",{className:"section-min__edit"},m.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none text-left",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},m.a.createElement(p.a,null),m.a.createElement(u.a,{id:"setting_item_min.edit",defaultMessage:"Edit"}))),t=m.a.createElement("div",{id:this.props.section+"Desc",className:"section-min__describe"},this.props.describe)),m.a.createElement("div",{className:"section-min",onClick:this.handleUpdateSection},m.a.createElement("div",{className:"d-flex"},m.a.createElement("h4",{id:this.props.section+"Title",className:"section-min__title"},this.props.title),e),t)}}g(b,"propTypes",{title:c.a.oneOfType([c.a.element,c.a.string]).isRequired,disableOpen:c.a.bool,section:c.a.string.isRequired,updateSection:c.a.func.isRequired,describe:c.a.oneOfType([c.a.element,c.a.string]),previousActiveSection:c.a.string,actions:c.a.shape({updateActiveSection:c.a.func.isRequired}).isRequired});t.a=Object(n.connect)((function(e){return{previousActiveSection:i(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({updateActiveSection:o},e)}}))(b)},1155:function(e,t,a){"use strict";a(176);var n=a(315),s=a(23),i=a(10),r=a(12),o=a(16),l=a(21),c=a(19),d=a(1320),m=a(90),u=a(179),h=a(33),p=a.n(h),g=a(6),b=a.n(g),f=a(1356),_=a(37);function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends b.a.PureComponent{render(){if(!this.props.enableFormatting)return b.a.createElement("span",null,this.props.message);const e=Object.assign({autolinkedUrlSchemes:this.props.autolinkedUrlSchemes,siteURL:this.props.siteURL,mentionKeys:this.props.mentionKeys,atMentions:!0,channelNamesMap:this.props.channelNamesMap,proxyImages:this.props.hasImageProxy&&this.props.proxyImages,team:this.props.team,minimumHashtagLength:this.props.minimumHashtagLength},this.props.options),t=Object(_.f)(this.props.message,e,this.props.emojiMap);return Object(f.a)(t,this.props.isRHS,{imageProps:this.props.imageProps,imagesMetadata:this.props.imagesMetadata,hasPluginTooltips:this.props.hasPluginTooltips,postId:this.props.postId,postType:this.props.postType,mentionHighlight:this.props.options.mentionHighlight,disableGroupHighlight:this.props.options.disableGroupHighlight})}}E(v,"propTypes",{channelNamesMap:p.a.any,autolinkedUrlSchemes:p.a.any,enableFormatting:p.a.bool,isRHS:p.a.bool,mentionKeys:p.a.any,message:p.a.string.isRequired,options:p.a.any,siteURL:p.a.string,team:p.a.any,hasImageProxy:p.a.bool,minimumHashtagLength:p.a.number,proxyImages:p.a.bool,imageProps:p.a.object,imagesMetadata:p.a.any,hasPluginTooltips:p.a.bool,postId:p.a.string,postType:p.a.any,emojiMap:p.a.any.isRequired}),E(v,"defaultProps",{options:{},isRHS:!1,proxyImages:!0,imagesMetadata:{},postId:""});t.a=Object(n.connect)((function(){const e=Object(s.createSelector)(r.getChannelsNameMapInCurrentTeam,(e,t)=>t&&t.channelNamesMap,(e,t)=>t?Object.assign({},t,e):e);return function(t,a){const n=Object(o.getConfig)(t);return{autolinkedUrlSchemes:Object(o.getAutolinkedUrlSchemes)(t),channelNamesMap:e(t,a),enableFormatting:Object(l.getBool)(t,i.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),mentionKeys:a.mentionKeys||Object(d.getAllUserMentionKeys)(t),siteURL:Object(u.e)(),team:Object(c.getCurrentTeam)(t),hasImageProxy:"true"===n.HasImageProxy,minimumHashtagLength:parseInt(n.MinimumHashtagLength||"",10),emojiMap:Object(m.a)(t)}}}))(v)},1156:function(e,t,a){"use strict";a.d(t,"e",(function(){return E})),a.d(t,"f",(function(){return v})),a.d(t,"d",(function(){return y})),a.d(t,"g",(function(){return C})),a.d(t,"b",(function(){return w})),a.d(t,"c",(function(){return O})),a.d(t,"a",(function(){return T}));a(54),a(99),a(35);var n=a(83),s=a(5),i=a(38),r=a(74),o=a(105),l=a(12),c=a(19),d=a(9),m=a(317),u=a(181),h=a(87),p=a(0),g=a(15);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e){return async(t,a)=>{const o=a(),c=Object(d.getCurrentUserId)(o),u=Object(g.u)(c,e),h=Object(l.getChannelByName)(o,u);if(!h)return t(i.createDirectChannel(c,e));Object(m.d)("api","api_channels_join_direct");const b=Date.now(),_={category:p.B.CATEGORY_DIRECT_CHANNEL_SHOW,name:e,value:"true"},E={category:p.B.CATEGORY_CHANNEL_OPEN_TIME,name:h.id,value:b.toString()},v=[{type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[_]},{type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[E]}];return t(Object(n.batchActions)(v)),t(Object(r.savePreferences)(c,[f({user_id:c},_),f({user_id:c},E)])),{data:h}}}function v(e){return async(t,a)=>{const n=await t(i.createGroupChannel(e));return n.error&&h.a.push(Object(c.getCurrentTeamUrl)(a())),n}}function y(){return async(e,t)=>{const a=t(),n=Object(l.getUnreadChannelIds)(a);await e(i.fetchMyChannelsAndMembers(Object(c.getCurrentTeamId)(a)));for(const t of n){const n=Object(l.getChannel)(a,t);n&&n.type===p.j.DM_CHANNEL?e(Object(u.d)(n.id)):n&&n.type===p.j.GM_CHANNEL&&e(Object(u.e)(n.id))}Object(u.l)()}}function C(e,t){return async(a,n)=>{const s=n(),r=Object(c.getCurrentTeamId)(s);if(!r)throw new Error("No team id");const{data:l,error:d}=await a(i.searchChannels(r,e,t));if(l){const e=Object(o.getMyChannelMemberships)(s);return{data:t?l:l.filter(t=>!e[t.id])}}return{error:d}}}function w(e,t,a){return async(n,s)=>{const r=s(),o=Object(c.getCurrentTeamId)(r);if(!o)return;const{data:l,error:d}=await n(i.autocompleteChannels(o,e));l&&t?t(l):d&&a&&a(f({id:d.server_error_id},d))}}function O(e,t,a){return async(n,s)=>{const r=s(),o=Object(c.getCurrentTeamId)(r);if(!o)return;const{data:l,error:d}=await n(i.autocompleteChannelsForSearch(o,e));l&&t?t(l):d&&a&&a(f({id:d.server_error_id},d))}}function T(e,t){return async a=>{try{const n=t.map(t=>a(i.addChannelMember(e,t)));return await Promise.all(n)}catch(e){return{error:e}}}}},1157:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1148),l=a(13);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{render(){return r.a.createElement("span",{id:"loadingSpinner",className:"LoadingSpinner"+(this.props.text?" with-text":"")},r.a.createElement(o.a,{className:"fa fa-spinner fa-fw fa-pulse spinner",component:"span",title:{id:Object(l.b)("generic_icons.loading"),defaultMessage:"Loading Icon"}}),this.props.text)}}c(d,"propTypes",{text:s.a.node}),c(d,"defaultProps",{text:null})},1158:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1168);function c(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.PureComponent{render(){const e=this.props,{saving:t,disabled:a,savingMessage:n,defaultMessage:s,btnClass:i,extraClasses:o}=e,d=c(e,["saving","disabled","savingMessage","defaultMessage","btnClass","extraClasses"]);let m="save-button btn";return a&&!t||(m+=" "+i),o&&(m+=" "+o),r.a.createElement("button",Object.assign({type:"submit",id:"saveSetting",className:m,disabled:a},d),r.a.createElement(l.a,{loading:t,text:n},r.a.createElement("span",null,s)))}}d(m,"propTypes",{saving:s.a.bool.isRequired,disabled:s.a.bool,id:s.a.string,onClick:s.a.func,savingMessage:s.a.node,defaultMessage:s.a.node,btnClass:s.a.string,extraClasses:s.a.string}),d(m,"defaultProps",{btnClass:"btn-primary",defaultMessage:r.a.createElement(o.a,{id:"save_button.save",defaultMessage:"Save"}),disabled:!1,extraClasses:"",savingMessage:r.a.createElement(o.a,{id:"save_button.saving",defaultMessage:"Saving"})})},1167:function(e,t,a){"use strict";var n=a(315),s=a(21),i=(a(176),a(33)),r=a.n(i),o=a(6),l=a.n(o);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends l.a.PureComponent{render(){const e=this.props.pluggableName;let t;if(this.props.children)t=l.a.Children.only(this.props.children).type;else if(!e)return null;const a=this.props.components,n=t?this.props.children.props:{},s=e||t.getComponentName();let i=d({},this.props);if(Reflect.deleteProperty(i,"children"),Reflect.deleteProperty(i,"components"),Reflect.deleteProperty(i,"pluggableName"),i=d({},i,{},n),a.hasOwnProperty(s)){let e=a[s];this.props.pluggableId&&(e=e.filter(e=>e.id===this.props.pluggableId));const t=e.map(e=>{const t=e.component;return l.a.createElement(t,Object.assign({},i,{theme:this.props.theme,key:s+e.id}))});return l.a.createElement(l.a.Fragment,null,t)}return null==t?null:l.a.cloneElement(this.props.children,d({},i))}}m(u,"propTypes",{children:r.a.element,pluggableName:r.a.string,components:r.a.object.isRequired,theme:r.a.object.isRequired,pluggableId:r.a.string});t.a=Object(n.connect)((function(e){return{components:e.plugins.components,theme:Object(s.getTheme)(e)}}))(u)},1168:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1157);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.a.PureComponent{render(){const{text:e,loading:t,children:a}=this.props;return t?r.a.createElement(o.a,{text:e}):a}}l(c,"propTypes",{loading:s.a.bool,text:s.a.node,children:s.a.node}),l(c,"defaultProps",{loading:!0,text:null,children:null})},1169:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1226);const c=e=>r.a.createElement(l.a,{className:"GuestBadge "+e.className,show:e.show},r.a.createElement(o.a,{id:"post_info.guest",defaultMessage:"GUEST"}));c.propTypes={className:s.a.string,show:s.a.bool},c.defaultProps={show:!0,className:""},t.a=c},1172:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1148),l=a(13);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{render(){const e="fa fa-warning"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return r.a.createElement(o.a,{className:e,title:{id:Object(l.b)("generic_icons.warning"),defaultMessage:"Warning Icon"}})}}c(d,"propTypes",{additionalClassName:s.a.oneOfType([s.a.string,s.a.oneOf([null])])}),c(d,"defaultProps",{additionalClassName:null})},1176:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return m}));a(1623),a(118),a(101);var n=a(1628),s=a(0),i=a(18);function r(e){const t="true"===e.EnableFileAttachments,a="true"===e.EnableMobileFileUpload;return!!t&&(!i.o()||a)}function o(e){return!i.o()||"true"===e.EnableMobileFileDownload}function l(e){let t=e;return e.length>s.Q.MAX_FILENAME_LENGTH&&(t=e.substring(0,Math.min(s.Q.MAX_FILENAME_LENGTH,e.length))+"..."),t}function c(e){const t=e.split("/"),a=t[0],n=t[1];if("video"===a)return"video";if("audio"===a)return"audio";if("image"===a)return"image";if(n){if("pdf"===n)return"pdf";if(n.includes("vnd.ms-excel")||n.includes("spreadsheetml")||n.includes("vnd.sun.xml.calc")||n.includes("opendocument.spreadsheet"))return"spreadsheet";if(n.includes("vnd.ms-powerpoint")||n.includes("presentationml")||n.includes("vnd.sun.xml.impress")||n.includes("opendocument.presentation"))return"presentation";if("msword"===n||n.includes("vnd.ms-word")||n.includes("officedocument.wordprocessingml")||n.includes("application/x-mswrite"))return"word"}return"other"}function d(e){var t=new DataView(e);if(65496!==t.getUint16(0,!1))return-2;for(var a=t.byteLength,n=2;n<a;){var s=t.getUint16(n,!1);if(n+=2,65505===s){if(1165519206!==t.getUint32(n+=2,!1))return-1;var i=18761===t.getUint16(n+=6,!1);n+=t.getUint32(n+4,i);var r=t.getUint16(n,i);n+=2;for(var o=0;o<r;o++)if(274===t.getUint16(n+12*o,i))return t.getUint16(n+12*o+8,i)}else{if(65280!=(65280&s))break;n+=t.getUint16(n,!1)}}return-1}function m(e){const{transform:t,"transform-origin":a}=Object(n.a)(e);return{transform:t,transformOrigin:a}}},1177:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1123),l=a(1357),c=a(1247),d=a(1145);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.PureComponent{constructor(...e){super(...e),m(this,"overlay",r.a.createRef()),m(this,"hideProfilePopover",()=>{this.overlay.current&&this.overlay.current.hide()})}render(){const e="string"==typeof this.props.profileSrc&&""!==this.props.profileSrc?this.props.profileSrc:this.props.src,t="profile-icon ".concat(this.props.isEmoji?"emoji":"");return this.props.userId?r.a.createElement(o.a,{ref:this.overlay,trigger:"click",placement:"right",rootClose:!0,overlay:r.a.createElement(l.a,{className:"user-profile-popover",userId:this.props.userId,src:e,isBusy:this.props.isBusy,hide:this.hideProfilePopover,isRHS:this.props.isRHS,hasMention:this.props.hasMention,overwriteIcon:this.props.overwriteIcon,overwriteName:this.props.overwriteName})},r.a.createElement("button",{className:"status-wrapper style--none ".concat(this.props.wrapperClass),tabIndex:-1},r.a.createElement("span",{className:t},r.a.createElement(d.a,{username:this.props.username,size:this.props.size,url:this.props.src})),r.a.createElement(c.a,{status:this.props.status}))):r.a.createElement("span",{className:"status-wrapper"},r.a.createElement("span",{className:t},r.a.createElement(d.a,{size:this.props.size,url:this.props.src})),r.a.createElement(c.a,{status:this.props.status}))}}m(u,"propTypes",{hasMention:s.a.bool,isBusy:s.a.bool,isEmoji:s.a.bool,isRHS:s.a.bool,profileSrc:s.a.string,size:s.a.string,src:s.a.string.isRequired,status:s.a.string,userId:s.a.string,username:s.a.string,wrapperClass:s.a.string,overwriteIcon:s.a.string,overwriteName:s.a.string}),m(u,"defaultProps",{size:"md",isRHS:!1,isEmoji:!1,hasMention:!1,wrapperClass:""})},1178:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));a(54);var n=a(0);function s(e){return async t=>(t({type:n.D.SET_MODAL_SEARCH,data:e}),{data:!0})}function i(e,t,a=""){return async s=>(s({type:n.D.SET_SYSTEM_USERS_SEARCH,data:{term:e,team:t,filter:a}}),{data:!0})}},1182:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));a(35);var n=a(100),s=a.n(n),i=a(33),r=a.n(i),o=a(6),l=a.n(o),c=a(316),d=a.n(c),m=a(1113),u=a(15),h=a(0),p=a(1120),g=a(1157);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E extends l.a.PureComponent{constructor(e){super(e),_(this,"getContent",()=>s()(this.contentRef.current)),_(this,"scrollToItem",e=>{const t=this.getContent();if(!t||0===t.length)return;const a=t[0].clientHeight;if(a<t[0].scrollHeight){const n=t.scrollTop(),i=parseInt(t.css("padding-top"),10),r=parseInt(t.css("padding-top"),10),o=s()(d.a.findDOMNode(this.itemRefs.get(e)));if(0===o.length)return;const l=o[0].offsetTop-parseInt(o.css("margin-top"),10),c=parseInt(o.css("margin-bottom"),10)+parseInt(o.css("padding-bottom"),10),m=o[0].offsetTop+o.height()+c;l-i<n?t.scrollTop(l-i):m+i+r>n+a&&t.scrollTop(m-a+i+r)}}),this.contentRef=l.a.createRef(),this.itemRefs=new Map,this.suggestionReadOut=l.a.createRef(),this.currentLabel="",this.currentItem={}}componentDidUpdate(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),Object(u.U)(this.currentItem)||this.generateLabel(this.currentItem)}componentWillUnmount(){this.removeLabel()}announceLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}removeLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderDivider(e){return l.a.createElement("div",{key:e+"-divider",className:"suggestion-list__divider"},l.a.createElement("span",null,l.a.createElement(m.a,{id:"suggestion."+e})))}renderNoResults(){return l.a.createElement("div",{key:"list-no-results",className:"suggestion-list__no-results",ref:this.contentRef},l.a.createElement(p.b,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}}))}render(){if(!this.props.open||this.props.cleared)return null;const e=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;e.push(this.renderNoResults())}let t;for(let a=0;a<this.props.items.length;a++){const n=this.props.items[a],s=this.props.terms[a],i=s===this.props.selection,r=this.props.components[a];this.props.renderDividers&&n.type!==t&&(e.push(this.renderDivider(n.type)),t=n.type),n.loading?e.push(l.a.createElement(g.a,{key:n.type})):(i&&(this.currentItem=n),e.push(l.a.createElement(r,{key:s,ref:e=>this.itemRefs.set(s,e),item:this.props.items[a],term:s,matchedPretext:this.props.matchedPretext[a],isSelection:i,onClick:this.props.onCompleteWord,onMouseMove:this.props.onItemHover})))}const a="suggestion-list suggestion-list--"+this.props.location,n="suggestion-list__content suggestion-list__content--"+this.props.location;let s=h.j.SUGGESTION_LIST_MAXHEIGHT;this.props.wrapperHeight&&(s=Math.min(Object(u.vb)()-(this.props.wrapperHeight+h.j.SUGGESTION_LIST_MAXHEIGHT),h.j.SUGGESTION_LIST_MAXHEIGHT));const i={maxHeight:s};return this.props.suppressLoadingSpinner?"":l.a.createElement("div",{className:a},l.a.createElement("div",{id:"suggestionList",ref:this.contentRef,style:f({},i),className:n,onMouseDown:this.props.preventClose},e))}}_(E,"propTypes",{ariaLiveRef:r.a.object,open:r.a.bool.isRequired,location:r.a.string,renderDividers:r.a.bool,renderNoResults:r.a.bool,onCompleteWord:r.a.func.isRequired,preventClose:r.a.func,onItemHover:r.a.func.isRequired,pretext:r.a.string.isRequired,cleared:r.a.bool.isRequired,matchedPretext:r.a.array.isRequired,items:r.a.array.isRequired,terms:r.a.array.isRequired,selection:r.a.string.isRequired,components:r.a.array.isRequired,wrapperHeight:r.a.number,suppressLoadingSpinner:r.a.bool}),_(E,"defaultProps",{renderDividers:!1,renderNoResults:!1})},1183:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1406);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c={xs:"xsmall",sm:"small",md:"medium",lg:"large"};class d extends r.a.PureComponent{render(){const{placement:e,popoverSize:t,children:a,popoverStyle:n,title:s,id:i,onMouseOut:l,onMouseOver:d,className:m,style:u}=this.props;return r.a.createElement(o.a,{id:i,style:u,className:m,bsStyle:n,placement:e,bsClass:"popover",title:s,bsSize:t&&c[t],onMouseOut:l,onMouseOver:d},a)}}l(d,"propTypes",{id:s.a.string,children:s.a.node,popoverStyle:s.a.oneOf(["info"]),popoverSize:s.a.oneOf(["xs","sm","md","lg"]),title:s.a.node,placement:s.a.oneOf(["bottom","top","right","left"]),className:s.a.string,style:s.a.any,onMouseOut:s.a.func,onMouseOver:s.a.func}),l(d,"defaultProps",{placement:"right",popoverStyle:"info",popoverSize:"sm"})},1186:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.search",defaultMessage:"Search Icon"},e=>s.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 17 17",role:"img","aria-label":e},s.a.createElement("path",{d:"M16.398 15.138L13.014 11.754C13.458 11.178 13.8 10.548 14.04 9.86399C14.28 9.14399 14.4 8.40599 14.4 7.64999C14.4 6.42599 14.094 5.29199 13.482 4.24799C12.882 3.22799 12.072 2.41799 11.052 1.81799C10.008 1.20599 8.874 0.899988 7.65 0.899988C6.426 0.899988 5.292 1.20599 4.248 1.81799C3.228 2.41799 2.418 3.22799 1.818 4.24799C1.206 5.29199 0.9 6.42599 0.9 7.64999C0.9 8.87399 1.206 10.008 1.818 11.052C2.418 12.072 3.228 12.882 4.248 13.482C5.292 14.094 6.426 14.4 7.65 14.4C8.406 14.4 9.138 14.274 9.846 14.022C10.53 13.794 11.16 13.458 11.736 13.014L15.138 16.398C15.306 16.566 15.516 16.65 15.768 16.65C16.02 16.65 16.23 16.56 16.398 16.38C16.566 16.212 16.65 16.008 16.65 15.768C16.65 15.528 16.566 15.318 16.398 15.138ZM2.7 7.64999C2.7 6.74999 2.922 5.92199 3.366 5.16599C3.81 4.40999 4.41 3.80999 5.166 3.36599C5.922 2.92199 6.75 2.69999 7.65 2.69999C8.55 2.69999 9.378 2.92199 10.134 3.36599C10.89 3.80999 11.49 4.40999 11.934 5.16599C12.378 5.92199 12.6 6.74999 12.6 7.64999C12.6 8.54999 12.378 9.37799 11.934 10.134C11.49 10.89 10.89 11.49 10.134 11.934C9.378 12.378 8.55 12.6 7.65 12.6C6.75 12.6 5.922 12.378 5.166 11.934C4.41 11.49 3.81 10.89 3.366 10.134C2.922 9.37799 2.7 8.54999 2.7 7.64999Z"}))))}}},1187:function(e,t,a){"use strict";function n(e,t){return e.views.modals.modalState[t]&&e.views.modals.modalState[t].open}a.d(t,"a",(function(){return n}))},1191:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(9),r=a(103),o=a(10),l=a(16),c=a(1647),d=a(44),m=a(1160),u=a(1319),h=(a(73),a(6)),p=a.n(h),g=a(33),b=a.n(g),f=a(0),_=a(179),E=(a(35),a(1113)),v=a(320);function y(e){if("true"!==e.IsLicensed)return!1;return Date.now()-parseInt(e.ExpiresAt,10)>864e6}var C=a(1127),w=a(13),O=a(1120);function T(){return{type:f.f.TRACK_ANNOUNCEMENT_BAR}}function S(){return{type:f.f.DISMISS_ANNOUNCEMENT_BAR}}var P=a(1416),M=a(1387),N=a(1123);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends p.a.PureComponent{constructor(...e){super(...e),I(this,"handleClose",e=>{e.preventDefault(),this.props.handleClose&&this.props.handleClose()})}componentDidMount(){this.props.actions.incrementAnnouncementBarCount(),document.body.classList.add("announcement-bar--fixed")}componentWillUnmount(){1===this.props.announcementBarCount&&document.body.classList.remove("announcement-bar--fixed"),this.props.actions.decrementAnnouncementBarCount()}render(){if(!this.props.message)return null;let e="announcement-bar";const t={},a={};let n;this.props.color&&this.props.textColor?(t.backgroundColor=this.props.color,t.color=this.props.textColor,a.color=this.props.textColor):this.props.type===f.i.DEVELOPER?e="announcement-bar announcement-bar-developer":this.props.type===f.i.CRITICAL?e="announcement-bar announcement-bar-critical":this.props.type===f.i.SUCCESS&&(e="announcement-bar announcement-bar-success"),this.props.showCloseButton&&(n=p.a.createElement("a",{href:"#",className:"announcement-bar__close",style:a,onClick:this.handleClose},"×"));let s=this.props.message;"string"==typeof s&&(s=p.a.createElement(O.b,{id:this.props.message}));const i=p.a.createElement(M.a,{id:"announcement-bar__tooltip"},s);return p.a.createElement("div",{className:e,style:t},p.a.createElement(N.a,{delayShow:f.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:i},p.a.createElement("span",null,s)),n)}}I(j,"propTypes",{showCloseButton:b.a.bool,color:b.a.string,textColor:b.a.string,type:b.a.string,message:b.a.node.isRequired,handleClose:b.a.func,announcementBarCount:b.a.number.isRequired,actions:b.a.shape({incrementAnnouncementBarCount:b.a.func.isRequired,decrementAnnouncementBarCount:b.a.func.isRequired}).isRequired}),I(j,"defaultProps",{showCloseButton:!1,color:"",textColor:"",type:f.i.CRITICAL,handleClose:null});var A=Object(n.connect)((function(e){return{announcementBarCount:Object(P.a)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({incrementAnnouncementBarCount:T,decrementAnnouncementBarCount:S},e)}}))(j),R=(a(176),a(317)),k=a(1155);function L(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends p.a.PureComponent{constructor(e){super(e),D(this,"handleDismiss",()=>{this.props.allowDismissal&&(Object(R.d)("signup","click_dismiss_bar"),localStorage.setItem("__announcement__"+this.props.text,!0),this.setState({dismissed:!0}),this.props.onDismissal&&this.props.onDismissal())}),this.state={dismissed:!0}}static getDerivedStateFromProps(e){return{dismissed:localStorage.getItem("__announcement__"+e.text)}}render(){if(this.state.dismissed)return null;const e=this.props,{allowDismissal:t,text:a}=e,n=L(e,["allowDismissal","text"]);return p.a.createElement(A,Object.assign({},n,{showCloseButton:t,handleClose:this.handleDismiss,message:p.a.createElement(k.a,{message:a,options:{singleline:!0,mentionHighlight:!1}})}))}}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}D(x,"propTypes",{allowDismissal:b.a.bool.isRequired,text:b.a.string.isRequired,onDismissal:b.a.func});class q extends p.a.PureComponent{constructor(...e){super(...e),U(this,"dismissExpiringLicense",()=>{this.props.actions.dismissNotice(f.h.LICENSE_EXPIRING)})}render(){if(this.props.canViewSystemErrors){const t="https://licensing.mattermost.com/renew?id="+this.props.license.id+"&user_count="+this.props.totalUsers;if(y(this.props.license))return p.a.createElement(A,{type:f.i.CRITICAL,message:p.a.createElement(O.b,{id:f.h.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:t}})});if("true"===(e=this.props.license).IsLicensed&&parseInt(e.ExpiresAt,10)-Date.now()<0)return p.a.createElement(A,{type:f.i.CRITICAL,message:p.a.createElement(O.b,{id:f.h.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:t}})});if(function(e){return"true"===e.IsLicensed&&parseInt(e.ExpiresAt,10)-Date.now()<=5184e6}(this.props.license)&&!this.props.dismissedExpiringLicense)return p.a.createElement(A,{showCloseButton:!0,handleClose:this.dismissExpiringLicense,type:f.i.ANNOUNCEMENT,message:p.a.createElement(O.b,{id:f.h.LICENSE_EXPIRING,defaultMessage:"Enterprise license expires on {date, date, long}. [Please renew](!{link}).",values:{date:new Date(parseInt(this.props.license.ExpiresAt,10)),link:t}})})}else if(y(this.props.license))return p.a.createElement(A,{type:f.i.CRITICAL,message:p.a.createElement(E.a,{id:f.h.LICENSE_PAST_GRACE,defaultMessage:"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details."})});var e;const{formatMessage:t}=this.props.intl;if("true"!==this.props.config.SendEmailNotifications&&"true"===this.props.config.EnablePreviewModeBanner){const e=t({id:f.h.PREVIEW_MODE,defaultMessage:"Preview Mode: Email notifications have not been configured"});return p.a.createElement(x,{allowDismissal:!0,text:e,type:f.i.ANNOUNCEMENT})}if(this.props.canViewSystemErrors&&""===this.props.config.SiteURL){let e,a;"true"===this.props.config.EnableSignUpWithGitLab?(e=Object(w.b)("announcement_bar.error.site_url_gitlab.full"),a="Please configure your [site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) either on the [System Console](/admin_console/environment/web_server) or, if you're using GitLab Mattermost, in gitlab.rb."):(e=Object(w.b)("announcement_bar.error.site_url.full"),a="Please configure your [site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) on the [System Console](/admin_console/environment/web_server).");const n=t({id:e,defaultMessage:a},{siteURL:this.props.siteURL});return p.a.createElement(x,{allowDismissal:!0,text:n,type:f.i.ANNOUNCEMENT})}return null}}U(q,"propTypes",{config:b.a.object,intl:C.a.isRequired,license:b.a.object,user:b.a.object,canViewSystemErrors:b.a.bool.isRequired,totalUsers:b.a.number,dismissedExpiringLicense:b.a.bool,siteURL:b.a.string.isRequired,actions:b.a.shape({dismissNotice:b.a.func.isRequired}).isRequired});var H=Object(v.c)(q);var F=Object(n.connect)((function(e){return{siteURL:Object(_.e)(e),dismissedExpiringLicense:Boolean(e.views.notice.hasBeenDismissed[f.h.LICENSE_EXPIRING])}}),(function(e){return{actions:Object(s.bindActionCreators)({dismissNotice:u.a},e)}}))(H),B=a(1417);function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class V extends p.a.PureComponent{constructor(e){super(e),G(this,"reloadPage",()=>{window.location.reload()}),this.state={serverVersionOnAppLoad:e.serverVersion}}static getDerivedStateFromProps(e,t){return!t.serverVersionOnAppLoad&&e.serverVersion?{serverVersionOnAppLoad:e.serverVersion}:null}render(){const{serverVersionOnAppLoad:e}=this.state,{serverVersion:t}=this.props;return e?Object(B.a)(e,t)?null:p.a.createElement(A,{type:f.i.ANNOUNCEMENT,message:p.a.createElement(p.a.Fragment,null,p.a.createElement(E.a,{id:"version_bar.new",defaultMessage:"A new version of Mattermost is available."})," ",p.a.createElement("a",{onClick:this.reloadPage},p.a.createElement(E.a,{id:"version_bar.refresh",defaultMessage:"Refresh the app now"})),".")}):null}}G(V,"propTypes",{serverVersion:b.a.string});var W,z,K,Y=Object(n.connect)((function(e){return{serverVersion:e.entities.general.serverVersion}}))(V);class Q extends p.a.PureComponent{render(){let e=null;"true"===this.props.config.EnableBanner&&this.props.config.BannerText.trim()&&(e=p.a.createElement(x,{color:this.props.config.BannerColor,textColor:this.props.config.BannerTextColor,allowDismissal:"true"===this.props.config.AllowBannerDismissal,text:this.props.config.BannerText}));let t=null;return this.props.latestError&&(t=p.a.createElement(A,{type:this.props.latestError.error.type,message:this.props.latestError.error.message,showCloseButton:!0,handleClose:this.props.actions.dismissError})),p.a.createElement(p.a.Fragment,null,e,t,p.a.createElement(Y,null),p.a.createElement(F,{config:this.props.config,license:this.props.license,canViewSystemErrors:this.props.canViewSystemErrors,totalUsers:this.props.totalUsers,user:this.props.user}))}}W=Q,z="propTypes",K={license:b.a.object,config:b.a.object,user:b.a.shape({email:b.a.string.isRequired,email_verified:b.a.bool}),canViewSystemErrors:b.a.bool.isRequired,latestError:b.a.object,totalUsers:b.a.number,actions:b.a.shape({dismissError:b.a.func.isRequired}).isRequired},z in W?Object.defineProperty(W,z,{value:K,enumerable:!0,configurable:!0,writable:!0}):W[z]=K;t.a=Object(n.connect)((function(e){const t=Object(r.haveISystemPermission)(e,{permission:o.Permissions.MANAGE_SYSTEM}),a=Object(l.getLicense)(e),n=Object(l.getConfig)(e),s=Object(i.getCurrentUser)(e),d=Object(c.getDisplayableErrors)(e),m=e.entities.admin.analytics.TOTAL_USERS;let u=null;return d&&d.length>=1&&(u=d[0]),{license:a,config:n,user:s,canViewSystemErrors:t,latestError:u,totalUsers:m}}),(function(e){const t=d.dismissError.bind(null,0);return{actions:Object(s.bindActionCreators)({getStandardAnalytics:m.getStandardAnalytics,dismissError:t,dismissNotice:u.a},e)}}))(Q)},1192:function(e,t,a){"use strict";a(35);var n=a(315),s=a(103),i=a(33),r=a.n(i),o=a(6),l=a.n(o);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends l.a.PureComponent{render(){return this.props.hasPermission&&!this.props.invert||!this.props.hasPermission&&this.props.invert?this.props.children:null}}c(d,"defaultProps",{invert:!1}),c(d,"propTypes",{permissions:r.a.arrayOf(r.a.string).isRequired,hasPermission:r.a.bool,invert:r.a.bool.isRequired,children:r.a.node.isRequired});t.a=Object(n.connect)((function(e,t){for(const a of t.permissions)if(Object(s.haveISystemPermission)(e,{permission:a}))return{hasPermission:!0};return{hasPermission:!1}}))(d)},1193:function(e,t,a){"use strict";a(35);var n=a(315),s=a(103),i=a(33),r=a.n(i),o=a(6),l=a.n(o);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends l.a.PureComponent{render(){return this.props.hasPermission&&!this.props.invert||!this.props.hasPermission&&this.props.invert?this.props.children:null}}c(d,"propTypes",{teamId:r.a.string,permissions:r.a.any.isRequired,hasPermission:r.a.bool.isRequired,invert:r.a.bool,children:r.a.node.isRequired}),c(d,"defaultProps",{invert:!1});t.a=Object(n.connect)((function(e,t){if(!t.teamId)return{hasPermission:!1};for(const a of t.permissions)if(Object(s.haveITeamPermission)(e,{team:t.teamId,permission:a}))return{hasPermission:!0};return{hasPermission:!1}}))(d)},1194:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1168);function l(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends i.PureComponent{render(){const e=this.props,{spinning:t,spinningText:a,children:n}=e,s=l(e,["spinning","spinningText","children"]);return r.a.createElement("button",Object.assign({className:"btn btn-primary",disabled:t},s),r.a.createElement(o.a,{loading:t,text:a},n))}}c(d,"propTypes",{children:s.a.node,spinning:s.a.bool,spinningText:s.a.node.isRequired,onClick:s.a.func}),c(d,"defaultProps",{spinning:!1})},1195:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(176),a(187),a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(321),l=a.n(o),c=a(1227),d=a(0),m=a(18),u=a(15);function h(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=d.Q.KeyCodes;class b extends r.a.PureComponent{constructor(e){super(e),p(this,"handleMentionKeyClick",(e,t)=>{if(this.props.isRHS!==t)return;let a="@"+e;this.props.value&&/[^\s]$/.test(this.props.value)&&(a=" "+a),this.addTextAtCaret(a,"")}),p(this,"getTextbox",()=>{if(!this.inputRef.current)return null;const e=this.inputRef.current.getInput();return e.getDOMNode?e.getDOMNode():e}),p(this,"recalculateSize",()=>{const e=this.inputRef.current.getInput();e.recalculateSize&&e.recalculateSize()}),p(this,"handleEmitClearSuggestions",(e=0)=>{setTimeout(()=>{this.clear()},e)}),p(this,"preventSuggestionListClose",()=>{this.preventSuggestionListCloseFlag=!0}),p(this,"handleFocusOut",e=>{this.preventSuggestionListCloseFlag?this.preventSuggestionListCloseFlag=!1:this.container.contains(e.relatedTarget)||m.h()&&!e.relatedTarget||(this.handleEmitClearSuggestions(),this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur())}),p(this,"handleFocusIn",e=>{this.container.contains(e.relatedTarget)||this.preventSuggestionListCloseFlag||(this.setState({focused:!0}),(this.props.openOnFocus||this.props.openWhenEmpty)&&setTimeout(()=>{const e=this.getTextbox();if(e){const t=e.value.substring(0,e.selectionEnd);(this.props.openWhenEmpty||t.length>=this.props.requiredCharacters)&&this.handlePretextChanged(t)}}),this.props.onFocus&&this.props.onFocus())}),p(this,"handleChange",e=>{const t=this.getTextbox(),a=t.value.substring(0,t.selectionEnd).toLowerCase();this.composing||this.pretext===a||this.handlePretextChanged(a),this.props.onChange&&this.props.onChange(e)}),p(this,"handleCompositionStart",()=>{this.composing=!0,this.props.onComposition&&this.props.onComposition()}),p(this,"handleCompositionUpdate",e=>{if(!e.data)return;const t=this.getTextbox(),a=t.value.substring(0,t.selectionStart)+e.data;this.handlePretextChanged(a),this.props.onComposition&&this.props.onComposition()}),p(this,"handleCompositionEnd",()=>{this.composing=!1,this.props.onComposition&&this.props.onComposition()}),p(this,"addTextAtCaret",(e,t)=>{const a=this.getTextbox(),n=a.selectionEnd,s=this.props.value,i=a.value.substring(0,a.selectionEnd);let r,o=!1;if(i.toLowerCase().endsWith(t.toLowerCase()))r=i.substring(0,i.length-t.length);else{const a=e.substring(t.length),n=b.findOverlap(i,a);o=0===n.length,r=i.substring(0,i.length-n.length-t.length)}const l=s.substring(n);let c;if(c=o?i:r+e+" "+l,a.value=c,this.props.onChange){const e={target:a};this.props.onChange(e)}window.requestAnimationFrame(()=>{a.value===c&&u.sb(a,r.length+e.length+1)})}),p(this,"replaceText",e=>{const t=this.getTextbox();if(t.value=e,this.props.onChange){const e={target:t};this.props.onChange(e)}}),p(this,"handleCompleteWord",(e,t)=>{if(this.props.replaceAllInputOnSelect?this.replaceText(e):this.addTextAtCaret(e,t),this.props.onItemSelected){const t=this.state.items,a=this.state.terms;for(let n=0;n<a.length;n++)if(a[n]===e){this.props.onItemSelected(t[n]);break}}this.clear(),this.inputRef.current.focus();for(const a of this.props.providers)a.handleCompleteWord&&a.handleCompleteWord(e,t,this.handlePretextChanged)}),p(this,"selectNext",()=>{this.setSelectionByDelta(1)}),p(this,"selectPrevious",()=>{this.setSelectionByDelta(-1)}),p(this,"setSelectionByDelta",e=>{let t=this.state.terms.indexOf(this.state.selection);-1!==t?(t+=e,t<0?t=0:t>this.state.terms.length-1&&(t=this.state.terms.length-1),this.setState({selection:this.state.terms[t]})):this.setState({selection:""})}),p(this,"setSelection",e=>{this.setState({selection:e})}),p(this,"clear",()=>{this.state.cleared||this.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[],selection:""})}),p(this,"hasSuggestions",()=>this.state.items.some(e=>!e.loading)),p(this,"handleKeyDown",e=>{if((this.props.openWhenEmpty||this.props.value)&&this.hasSuggestions())if(u.Z(e,g.UP))this.selectPrevious(),e.preventDefault();else if(u.Z(e,g.DOWN))this.selectNext(),e.preventDefault();else if(u.Z(e,g.ENTER)||this.props.completeOnTab&&u.Z(e,g.TAB)){let t="";for(let e=0;e<this.state.terms.length;e++)this.state.terms[e]===this.state.selection&&(t=this.state.matchedPretext[e]);this.pretext.endsWith(t)?this.handleCompleteWord(this.state.selection,t):(clearTimeout(this.timeoutId),this.nonDebouncedPretextChanged(this.pretext,!0)),this.props.onKeyDown&&this.props.onKeyDown(e),e.preventDefault()}else u.Z(e,g.ESCAPE)?(this.clear(),this.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):this.props.onKeyDown&&this.props.onKeyDown(e);else this.props.onKeyDown&&this.props.onKeyDown(e)}),p(this,"handleReceivedSuggestions",e=>{const t=[],a=[];this.props.onSuggestionsReceived&&this.props.onSuggestionsReceived(e);for(let n=0;n<e.terms.length;n++)t.push(e.component),a.push(e.matchedPretext);const n=e.terms,s=e.items;let i=this.state.selection;return n.length>0?this.state.selection&&-1!==n.indexOf(this.state.selection)||(i=n[0]):this.state.selection&&(i=""),this.setState({cleared:!1,selection:i,terms:n,items:s,components:t,matchedPretext:a}),{selection:i,matchedPretext:e.matchedPretext}}),p(this,"handleReceivedSuggestionsAndComplete",e=>{const{selection:t,matchedPretext:a}=this.handleReceivedSuggestions(e);t&&this.handleCompleteWord(t,a)}),p(this,"nonDebouncedPretextChanged",(e,t=!1)=>{this.pretext=e;let a=!1,n=this.handleReceivedSuggestions;t&&(n=this.handleReceivedSuggestionsAndComplete);for(const t of this.props.providers)if(a=t.handlePretextChanged(e,n)||a,a){this.setState({presentationType:t.presentationType(),allowDividers:t.allowDividers()});break}a||this.clear()}),p(this,"debouncedPretextChanged",e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>this.nonDebouncedPretextChanged(e),d.Q.SEARCH_TIMEOUT_MILLISECONDS)}),p(this,"handlePretextChanged",e=>{this.pretext=e,this.debouncedPretextChanged(e)}),p(this,"blur",()=>{this.inputRef.current.blur()}),p(this,"focus",()=>{const e=this.inputRef.current.input;'""'===e.value||e.value.endsWith('""')?(e.selectionStart=e.value.length-1,e.selectionEnd=e.value.length-1):e.selectionStart=e.value.length,e.focus(),this.handleChange({target:this.inputRef.current})}),p(this,"setContainerRef",e=>{this.container&&(this.container.removeEventListener("focusin",this.handleFocusIn),this.container.removeEventListener("focusout",this.handleFocusOut)),e&&(e.addEventListener("focusin",this.handleFocusIn),e.addEventListener("focusout",this.handleFocusOut)),this.container=e}),this.suggestionReadOut=r.a.createRef(),this.composing=!1,this.pretext="",this.timeoutId="",this.preventSuggestionListCloseFlag=!1,this.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text"},this.inputRef=r.a.createRef()}componentDidMount(){this.props.listenForMentionKeyClick&&l.a.addListener("mention_key_click",this.handleMentionKeyClick)}componentWillUnmount(){l.a.removeListener("mention_key_click",this.handleMentionKeyClick)}componentDidUpdate(e){const{value:t}=this.props;if(""!==t||this.pretext===t){if(e.contextId!==this.props.contextId){const e=this.getTextbox(),t=e.value.substring(0,e.selectionEnd).toLowerCase();this.handlePretextChanged(t)}}else this.handlePretextChanged(t)}render(){const e=this.props,{listComponent:t,dateComponent:a,listStyle:n,renderNoResults:s}=e,i=h(e,["listComponent","dateComponent","listStyle","renderNoResults"]),o=this.props.renderDividers&&this.state.allowDividers;Reflect.deleteProperty(i,"providers"),Reflect.deleteProperty(i,"onChange"),Reflect.deleteProperty(i,"onComposition"),Reflect.deleteProperty(i,"onItemSelected"),Reflect.deleteProperty(i,"completeOnTab"),Reflect.deleteProperty(i,"isRHS"),Reflect.deleteProperty(i,"requiredCharacters"),Reflect.deleteProperty(i,"openOnFocus"),Reflect.deleteProperty(i,"openWhenEmpty"),Reflect.deleteProperty(i,"onFocus"),Reflect.deleteProperty(i,"onBlur"),Reflect.deleteProperty(i,"containerClass"),Reflect.deleteProperty(i,"replaceAllInputOnSelect"),Reflect.deleteProperty(i,"renderDividers"),Reflect.deleteProperty(i,"contextId"),Reflect.deleteProperty(i,"listenForMentionKeyClick"),Reflect.deleteProperty(i,"wrapperHeight");const l=t,d=a;return r.a.createElement("div",{ref:this.setContainerRef,className:this.props.containerClass},r.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:"alert",className:"sr-only"}),r.a.createElement(c.a,Object.assign({ref:this.inputRef,autoComplete:"off"},i,{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown})),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"text"===this.state.presentationType&&r.a.createElement("div",{style:{width:this.state.width}},r.a.createElement(l,{ariaLiveRef:this.suggestionReadOut,open:this.state.focused,pretext:this.pretext,location:n,renderDividers:o,renderNoResults:s,onCompleteWord:this.handleCompleteWord,preventClose:this.preventSuggestionListClose,onItemHover:this.setSelection,cleared:this.state.cleared,matchedPretext:this.state.matchedPretext,items:this.state.items,terms:this.state.terms,selection:this.state.selection,components:this.state.components,wrapperHeight:this.props.wrapperHeight,inputRef:this.inputRef,onLoseVisibility:this.blur,suppressLoadingSpinner:this.props.suppressLoadingSpinner})),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"date"===this.state.presentationType&&r.a.createElement(d,{items:this.state.items,terms:this.state.terms,components:this.state.components,matchedPretext:this.state.matchedPretext,onCompleteWord:this.handleCompleteWord}))}static findOverlap(e,t){const a=e.toLowerCase(),n=t.toLowerCase();for(let e=n.length;e>0;e--){const t=n.substring(0,e);if(a.endsWith(t))return t}return""}}p(b,"propTypes",{listComponent:s.a.func.isRequired,dateComponent:s.a.func,value:s.a.string.isRequired,providers:s.a.arrayOf(s.a.object),listStyle:s.a.string,containerClass:s.a.string,renderDividers:s.a.bool,renderNoResults:s.a.bool,completeOnTab:s.a.bool,onFocus:s.a.func,onBlur:s.a.func,onChange:s.a.func,onKeyDown:s.a.func,onComposition:s.a.func,onItemSelected:s.a.func,isRHS:s.a.bool,requiredCharacters:s.a.number,openOnFocus:s.a.bool,disabled:s.a.bool,openWhenEmpty:s.a.bool,replaceAllInputOnSelect:s.a.bool,contextId:s.a.string,listenForMentionKeyClick:s.a.bool,wrapperHeight:s.a.number,onSuggestionsReceived:s.a.func,suppressLoadingSpinner:s.a.bool}),p(b,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1})},1199:function(e,t,a){"use strict";a.d(t,"d",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return f})),a.d(t,"c",(function(){return _})),a.d(t,"e",(function(){return E})),a.d(t,"f",(function(){return v}));a(54);var n=a(5),s=a(38),i=a(178),r=a(12),o=a(17),l=a(74),c=a(9),d=a(87),m=a(0);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){return async(a,n)=>{const l=await a(i.removeUserFromTeam(e,t));return a(Object(o.getUser)(t)),a(i.getTeamStats(e)),a(Object(s.getChannelStats)(Object(r.getCurrentChannelId)(n()))),l}}function b(e,t){return async a=>{const{data:s,error:r}=await a(i.addUserToTeamFromInvite(e,t));if(s){const{data:e}=await a(i.getTeam(s.team_id));return a({type:n.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:h({},s,{delete_at:0,msg_count:0,mention_count:0})}),{data:e}}return{error:r}}}function f(e,t){return async a=>{const{data:s,error:r}=await a(i.addUserToTeam(e,t));if(s){const{data:e}=await a(i.getTeam(s.team_id));return a({type:n.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:h({},s,{delete_at:0,msg_count:0,mention_count:0})}),{data:e}}return{error:r}}}function _(e,t){return async(a,n)=>{const{data:o,error:l}=await a(i.addUsersToTeamGracefully(e,t));return l?{error:l}:(a(Object(s.getChannelStats)(Object(r.getCurrentChannelId)(n()))),{data:o})}}function E(e){return(t,a)=>{const n=a(),i=Object(r.getCurrentChannelId)(n);Object(r.isManuallyUnread)(n,i)||t(Object(s.viewChannel)(i)),d.a.push(e)}}function v(e){return async(t,a)=>{const n=a(),s=Object(c.getCurrentUserId)(n),i=[{user_id:s,name:"",category:m.B.TEAMS_ORDER,value:e.join(",")}];t(Object(l.savePreferences)(s,i))}}},1202:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i);function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.a.PureComponent{constructor(e){super(e),l(this,"show",e=>{e&&e.preventDefault(),this.setState({show:!0})}),l(this,"hide",()=>{this.setState({show:!1})}),this.state={show:!1}}render(){const e=this.props,{children:t,dialogType:a,dialogProps:n,onClick:s,id:i}=e,l=o(e,["children","dialogType","dialogProps","onClick","id"]);let c,d=this.show;return s&&(d=e=>{s(),this.show(e)}),this.state.show&&(c=r.a.createElement(a,Object.assign({},n,{onHide:()=>{this.hide(),n.onHide&&n.onHide()}}))),r.a.createElement("button",Object.assign({},l,{className:"style--none "+l.className,onClick:d,"data-testid":i}),t,c)}}c.propTypes={children:s.a.node.isRequired,dialogType:s.a.func.isRequired,dialogProps:s.a.object,onClick:s.a.func,className:s.a.string,id:s.a.string},c.defaultProps={dialogProps:{},className:""}},1205:function(e,t,a){"use strict";var n=a(315),s=a(9),i=(a(35),a(33)),r=a.n(i),o=a(6),l=a.n(o),c=a(15),d=a(1123),m=a(1357),u=a(1142),h=a(1169);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends o.PureComponent{constructor(...e){super(...e),p(this,"hideProfilePopover",()=>{this.overlay&&this.overlay.hide()}),p(this,"setOverlaynRef",e=>{this.overlay=e})}render(){const{disablePopover:e,displayName:t,displayUsername:a,isBusy:n,isRHS:s,hasMention:i,hideStatus:r,overwriteName:o,overwriteIcon:p,user:g,userId:b}=this.props;let f;if(f=a?"@".concat(g.username):o||t||"...",e)return l.a.createElement("div",{className:"user-popover"},f);let _="right";s&&!Object(c.cb)()&&(_="left");let E="";return g&&(E=Object(c.O)(g.id,g.last_picture_update)),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{ref:this.setOverlaynRef,trigger:"click",placement:_,rootClose:!0,overlay:l.a.createElement(m.a,{className:"user-profile-popover",userId:b,src:E,isBusy:n,hide:this.hideProfilePopover,hideStatus:r,isRHS:s,hasMention:i,overwriteName:o,overwriteIcon:p})},l.a.createElement("button",{"aria-label":f.toLowerCase(),className:"user-popover style--none"},f)),l.a.createElement(u.a,{show:Boolean(g&&g.is_bot),className:"badge-popoverlist"}),l.a.createElement(h.a,{show:Boolean(g&&Object(c.Y)(g)),className:"badge-popoverlist"}))}}p(g,"propTypes",{disablePopover:r.a.bool,displayName:r.a.string,displayUsername:r.a.bool,hasMention:r.a.bool,hideStatus:r.a.bool,isBusy:r.a.bool,isRHS:r.a.bool,overwriteName:r.a.node,overwriteIcon:r.a.node,user:r.a.object,userId:r.a.string}),p(g,"defaultProps",{disablePopover:!1,displayUsername:!1,hasMention:!1,hideStatus:!1,isRHS:!1,overwriteImage:"",overwriteName:""});t.a=Object(n.connect)((function(){const e=Object(s.makeGetDisplayName)();return(t,a)=>({displayName:e(t,a.userId),user:Object(s.getUser)(t,a.userId)})}))(g)},1206:function(e,t,a){"use strict";a(176),a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1235),c=a(0),d=a(1158),m=(a(99),a(15)),u=a(1125);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=c.Q.KeyCodes;class g extends r.a.PureComponent{constructor(e){super(e),h(this,"toSelect",-1),h(this,"listRef",r.a.createRef()),h(this,"selectedRef",r.a.createRef()),h(this,"setSelected",e=>{this.setState({selected:e})}),h(this,"handleArrowPress",e=>{if(Object(m.e)(e)&&e.shiftKey)return;const t=this.props.options;if(0===t.length)return;let a;switch(e.key){case p.DOWN[0]:if(-1===this.state.selected){a=0;break}a=Math.min(this.state.selected+1,t.length-1);break;case p.UP[0]:if(-1===this.state.selected){a=0;break}a=Math.max(this.state.selected-1,0);break;default:return}e.preventDefault(),this.setState({selected:a}),this.props.onSelect(t[a])}),h(this,"defaultOptionRenderer",(e,t,a,n)=>{let s="";return t&&(s="more-modal__row--selected"),r.a.createElement("div",{ref:t?"selected":e.value,className:s,key:"multiselectoption"+e.value,onClick:()=>a(e),onMouseMove:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>n(e))},e.label)}),h(this,"onMouseMove",e=>{const t=this.props.options.indexOf(e);-1!==t&&this.state.selected!==t&&this.setSelected(t)}),this.state={selected:-1}}componentDidMount(){document.addEventListener("keydown",this.handleArrowPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleArrowPress)}componentDidUpdate(e,t){const a=this.props.options;if(a&&a.length>0&&this.state.selected>=0&&this.props.onSelect(a[this.state.selected]),t.selected!==this.state.selected&&this.listRef.current&&this.selectedRef.current){const e=this.selectedRef.current.getBoundingClientRect().top,t=this.selectedRef.current.getBoundingClientRect().bottom,a=this.listRef.current.getBoundingClientRect().top;t>this.listRef.current.getBoundingClientRect().bottom?this.selectedRef.current.scrollIntoView(!1):e<a&&this.selectedRef.current.scrollIntoView(!0)}}render(){const e=this.props.options;let t;if(this.props.loading)t=r.a.createElement("div",{"aria-hidden":!0},r.a.createElement(u.a,{position:"absolute",key:"loading"}));else if(null==e||0===e.length)t=r.a.createElement("div",{key:"no-users-found",className:"no-channel-message"},r.a.createElement("p",{className:"primary-message"},r.a.createElement(o.a,{id:"multiselect.list.notFound",defaultMessage:"No items found"})));else{let a;a=this.props.optionRenderer?this.props.optionRenderer:this.defaultOptionRenderer;const n=e.map((e,t)=>a(e,this.state.selected===t,this.props.onAdd,this.onMouseMove)),s=e[this.state.selected],i=this.props.ariaLabelRenderer(s);t=r.a.createElement("div",{className:"more-modal__list"},r.a.createElement("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true"},i),r.a.createElement("div",{ref:"list",id:"multiSelectList",role:"presentation","aria-hidden":!0},n))}return r.a.createElement("div",{className:"multi-select__wrapper","aria-live":"polite"},t)}}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}h(g,"propTypes",{ariaLabelRenderer:s.a.any.isRequired,loading:s.a.bool,onAdd:s.a.func.isRequired,onPageChange:s.a.func,onSelect:s.a.func.isRequired,optionRenderer:s.a.func.isRequired,options:s.a.arrayOf(s.a.any),page:s.a.number.isRequired,perPage:s.a.number}),h(g,"defaultProps",{options:[],perPage:50,onAction:()=>null}),a.d(t,"a",(function(){return _}));const f=c.j.KeyCodes;class _ extends r.a.PureComponent{constructor(e){super(e),b(this,"listRef",r.a.createRef()),b(this,"reactSelectRef",r.a.createRef()),b(this,"selected",null),b(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),b(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),b(this,"nextPage",()=>{this.props.handlePageChange&&this.props.handlePageChange(this.state.page+1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page+1})}),b(this,"prevPage",()=>{0!==this.state.page&&(this.props.handlePageChange&&this.props.handlePageChange(this.state.page-1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page-1}))}),b(this,"resetPaging",()=>{this.setState({page:0})}),b(this,"onSelect",e=>{this.selected=e}),b(this,"onAdd",e=>{if(this.props.maxValues&&this.props.values.length>=this.props.maxValues)return;for(let t=0;t<this.props.values.length;t++)if(this.props.values[t].id===e.id)return;this.props.handleAdd(e),this.selected=null,this.reactSelectRef.current&&(this.reactSelectRef.current.select.handleInputChange({currentTarget:{value:""}}),this.onInput(""),this.reactSelectRef.current.focus());const t=this.props.submitImmediatelyOn;t&&t(e)&&this.props.handleSubmit([e])}),b(this,"onInput",(e,t={action:""})=>{t&&"input-blur"!==t.action&&"menu-close"!==t.action&&this.state.input!==e&&(this.setState({input:e}),this.listRef.current&&(""===e?this.listRef.current.setSelected(-1):this.listRef.current.setSelected(0)),this.selected=null,this.props.handleInput(e,this))}),b(this,"onInputKeyDown",e=>{switch(e.key){case f.ENTER[0]:e.preventDefault()}}),b(this,"handleEnterPress",e=>{switch(e.key){case f.ENTER[0]:if(null==this.selected)return void this.props.handleSubmit();this.onAdd(this.selected)}}),b(this,"handleOnClick",e=>{e.preventDefault(),this.props.handleSubmit()}),b(this,"onChange",(e,t)=>{if("remove-value"!==t.action&&"pop-value"!==t.action)return;const a=[...this.props.values];for(let e=0;e<a.length;e++)if(a[e].id===t.removedValue.id){a.splice(e,1);break}this.props.handleDelete(a)}),this.state={a11yActive:!1,page:0,input:""}}componentDidMount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;document.addEventListener("keydown",this.handleEnterPress),e&&"function"==typeof e.addEventListener&&(e.addEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),e.addEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent),this.reactSelectRef.current.focus())}componentWillUnmount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;e&&"function"==typeof e.addEventListener&&(e.removeEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),e.removeEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent)),document.removeEventListener("keydown",this.handleEnterPress)}render(){const e=Object.assign([...this.props.options]),{totalCount:t,users:a,values:n}=this.props;let s,i;this.props.numRemainingText?s=this.props.numRemainingText:null!=this.props.maxValues&&(s=r.a.createElement(o.a,{id:"multiselect.numRemaining",defaultMessage:"You can add {num, number} more. ",values:{num:this.props.maxValues-this.props.values.length}})),this.props.buttonSubmitText?i=this.props.buttonSubmitText:null!=this.props.maxValues&&(i=r.a.createElement(o.a,{id:"multiselect.go",defaultMessage:"Go"}));let c,m,u,h=[];this.props.noteText&&(u=r.a.createElement("div",{className:"multi-select__note"},r.a.createElement("div",{className:"note__icon"},r.a.createElement(o.a,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>r.a.createElement("span",{className:"fa fa-info",title:e}))),r.a.createElement("div",null,this.props.noteText)));const p={};for(let e=0;e<n.length;e++)p[n[e].id]=!0;for(let t=e.length-1;t>=0;t--)p[e[t].id]&&e.splice(t,1);if(e&&e.length>this.props.perPage){const t=this.state.page*this.props.perPage,a=t+this.props.perPage;h=e.slice(t,a),this.props.loading||(e.length>a&&(c=r.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage},r.a.createElement(o.a,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.state.page>0&&(m=r.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.prevPage},r.a.createElement(o.a,{id:"filtered_user_list.prev",defaultMessage:"Previous"}))))}else h=e;let b;return a&&a.length&&t&&(b=r.a.createElement(o.a,{id:"multiselect.numMembers",defaultMessage:"{memberOptions, number} of {totalCount, number} members",values:{memberOptions:h.length,totalCount:this.props.totalCount}})),r.a.createElement("div",{className:"filtered-user-list"},r.a.createElement("div",{className:"filter-row filter-row--full"},r.a.createElement("div",{className:"multi-select__container react-select"},r.a.createElement(l.b,{id:"selectItems",ref:this.reactSelectRef,isMulti:!0,options:this.props.options,styles:y,components:{Menu:E,IndicatorsContainer:E,MultiValueLabel:v(this.props.valueRenderer)},isClearable:!1,openMenuOnFocus:!1,menuIsOpen:!1,onInputChange:this.onInput,onKeyDown:this.onInputKeyDown,onChange:this.onChange,value:this.props.values,placeholder:this.props.placeholderText,inputValue:this.state.input,getOptionValue:e=>e.id,getOptionLabel:this.props.ariaLabelRenderer,"aria-label":this.props.placeholderText,className:this.state.a11yActive?"multi-select__focused":"",classNamePrefix:"react-select-auto react-select"}),r.a.createElement(d.a,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:i,savingMessage:this.props.buttonSubmitLoadingText})),r.a.createElement("div",{className:"multi-select__help"},s,b),r.a.createElement("div",{className:"multi-select__help"},u)),r.a.createElement(g,{ref:this.listRef,options:h,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading}),r.a.createElement("div",{className:"filter-controls"},m,c))}}b(_,"propTypes",{ariaLabelRenderer:s.a.any,buttonSubmitLoadingText:s.a.oneOfType([s.a.element,s.a.string]),buttonSubmitText:s.a.oneOfType([s.a.element,s.a.string]),handleAdd:s.a.func.isRequired,handleDelete:s.a.func.isRequired,handleInput:s.a.func.isRequired,handlePageChange:s.a.func,handleSubmit:s.a.func.isRequired,loading:s.a.bool,maxValues:s.a.number,noteText:s.a.element,numRemainingText:s.a.element,optionRenderer:s.a.func.isRequired,options:s.a.arrayOf(s.a.any).isRequired,perPage:s.a.number.isRequired,placeholderText:s.a.string,saving:s.a.bool,submitImmediatelyOn:s.a.func,totalCount:s.a.number,users:s.a.array,valueRenderer:s.a.func.isRequired,values:s.a.arrayOf(s.a.any).isRequired}),b(_,"defaultProps",{ariaLabelRenderer:function(e){if(!e)return null;return e.label}});const E=()=>null,v=e=>t=>r.a.createElement("div",{style:{paddingLeft:"10px"}},r.a.createElement(e,t)),y={container:()=>({display:"table-cell",paddingRight:"15px",verticalAlign:"top",width:"100%"})}},1207:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}));var n=a(0);const s=()=>e=>e({type:n.f.TOGGLE_LHS}),i=()=>e=>e({type:n.f.OPEN_LHS}),r=()=>e=>e({type:n.f.CLOSE_LHS})},1208:function(e,t,a){"use strict";function n(e){return e.views.admin.navigationBlock.blocked}function s(e){return e.views.admin.navigationBlock.showNavigationPrompt}function i(e){return e.views.admin.navigationBlock.onNavigationConfirmed}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i}))},1214:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.channel.public",defaultMessage:"Public Channel Icon"},e=>s.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 16 16",role:"presentation","aria-label":e},s.a.createElement("path",{d:"M8 -2.47955e-05C6.56 -2.47955e-05 5.216 0.367975 3.968 1.10398C2.76267 1.80798 1.808 2.76264 1.104 3.96797C0.368 5.21598 0 6.55998 0 7.99998C0 9.43998 0.368 10.784 1.104 12.032C1.808 13.2373 2.76267 14.192 3.968 14.896C5.216 15.632 6.56 16 8 16C9.44 16 10.784 15.632 12.032 14.896C13.2373 14.192 14.192 13.2373 14.896 12.032C15.632 10.784 16 9.43998 16 7.99998C16 6.55998 15.632 5.21598 14.896 3.96797C14.192 2.76264 13.2373 1.80798 12.032 1.10398C10.784 0.367975 9.44 -2.47955e-05 8 -2.47955e-05ZM14.4 8.39998C14.2507 8.59198 13.92 8.80531 13.408 9.03998C12.768 9.31731 12.032 9.53064 11.2 9.67998V6.95998C12.288 6.77864 13.168 6.53864 13.84 6.23998C13.872 6.20798 13.9253 6.18131 14 6.15998C14.0853 6.12798 14.1387 6.10131 14.16 6.07998C14.32 6.63464 14.4 7.27464 14.4 7.99998V8.39998ZM6.8 11.52C6.93867 11.52 7.14133 11.536 7.408 11.568C7.67467 11.5893 7.872 11.6 8 11.6C8.53333 11.6 8.93333 11.5733 9.2 11.52C9.008 12.2773 8.8 12.912 8.576 13.424C8.36267 13.8933 8.17067 14.192 8 14.32C7.808 14.1813 7.61067 13.8826 7.408 13.424C7.152 12.8906 6.94933 12.256 6.8 11.52ZM8 9.99998C7.63733 9.99998 7.376 9.99464 7.216 9.98398C6.93867 9.97331 6.69333 9.95198 6.48 9.91998C6.48 9.74931 6.46933 9.46664 6.448 9.07198C6.416 8.61331 6.4 8.25598 6.4 7.99998V7.11998C6.77333 7.17331 7.30667 7.19998 8 7.19998C8.69333 7.19998 9.22667 7.17331 9.6 7.11998V7.99998C9.6 8.25598 9.584 8.61331 9.552 9.07198C9.53067 9.46664 9.52 9.74931 9.52 9.91998C9.30667 9.95198 9.06133 9.97331 8.784 9.98398C8.624 9.99464 8.36267 9.99998 8 9.99998ZM9.44 5.51998C9.12 5.57331 8.64 5.59998 8 5.59998C7.36 5.59998 6.88 5.57331 6.56 5.51998C6.656 4.82664 6.8 4.18131 6.992 3.58397C7.14133 3.07198 7.31733 2.62931 7.52 2.25597C7.69067 1.93598 7.85067 1.71731 8 1.59997C8.14933 1.71731 8.30933 1.93598 8.48 2.25597C8.68267 2.62931 8.85867 3.07198 9.008 3.58397C9.2 4.18131 9.344 4.82664 9.44 5.51998ZM13.44 4.63998C12.5867 5.00264 11.7867 5.24264 11.04 5.35997C10.9653 4.71997 10.848 4.11198 10.688 3.53598C10.5387 2.95998 10.3627 2.44798 10.16 1.99998C11.5573 2.49064 12.6507 3.37064 13.44 4.63998ZM2.56 4.63998C2.976 4.02131 3.456 3.49331 4 3.05597C4.576 2.58664 5.216 2.23464 5.92 1.99998C5.52533 2.87464 5.20533 3.99464 4.96 5.35997C3.92533 5.11464 3.12533 4.87464 2.56 4.63998ZM1.92 6.07998C1.952 6.11198 2.00533 6.14398 2.08 6.17598L2.24 6.23998C2.96533 6.55998 3.84533 6.79998 4.88 6.95998C4.848 7.09864 4.82667 7.26398 4.816 7.45598C4.80533 7.56264 4.8 7.74398 4.8 7.99998C4.8 8.74664 4.82667 9.30664 4.88 9.67998C4.048 9.53064 3.31733 9.31731 2.688 9.03998C2.16533 8.80531 1.82933 8.59198 1.68 8.39998V7.99998C1.63733 7.67998 1.63733 7.34931 1.68 7.00798C1.72267 6.66664 1.80267 6.35731 1.92 6.07998ZM2.16 10.56C3.14133 10.9546 4.128 11.2213 5.12 11.36C5.248 12.2133 5.51467 13.0933 5.92 14C5.088 13.7226 4.34133 13.2853 3.68 12.688C3.02933 12.08 2.52267 11.3706 2.16 10.56ZM13.84 10.56C13.4773 11.3706 12.9653 12.08 12.304 12.688C11.6533 13.2853 10.912 13.7226 10.08 14C10.4853 13.0933 10.752 12.2133 10.88 11.36C12.1493 11.1786 13.136 10.912 13.84 10.56Z"}))))}}},1215:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.channel.private",defaultMessage:"Private Channel Icon"},e=>s.a.createElement("svg",{width:"12px",height:"13px",viewBox:"0 0 13 15",role:"presentation",title:e},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-116.000000, -175.000000)",fillRule:"nonzero",fill:"inherit"},s.a.createElement("g",{transform:"translate(95.000000, 0.000000)"},s.a.createElement("g",{transform:"translate(20.000000, 113.000000)"},s.a.createElement("g",{transform:"translate(1.000000, 62.000000)"},s.a.createElement("path",{d:"M12.0714286,6.5 L11.1428571,6.5 L11.1428571,4.64285714 C11.1428571,2.07814286 9.06471429,0 6.5,0 C3.93528571,0 1.85714286,2.07814286 1.85714286,4.64285714 L1.85714286,6.5 L0.928571429,6.5 C0.415071429,6.5 0,7.00792857 0,7.52142857 L0,13.9285714 C0,14.4420714 0.415071429,14.8571429 0.928571429,14.8571429 L12.0714286,14.8571429 C12.5849286,14.8571429 13,14.4420714 13,13.9285714 L13,7.52142857 C13,7.00792857 12.5849286,6.5 12.0714286,6.5 Z M6.5,1.85714286 C8.03585714,1.85714286 9.28571429,3.107 9.28571429,4.64285714 L9.28571429,6.5 L8.35714286,6.5 L4.64285714,6.5 L3.71428571,6.5 L3.71428571,4.64285714 C3.71428571,3.107 4.96414286,1.85714286 6.5,1.85714286 Z"})))))))))}}},1216:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>s.a.createElement("i",{className:"fa fa-plus",title:e}))}}},1217:function(e,t,a){"use strict";a(62);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(15);a(1739);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.a.PureComponent{render(){const{name:e,url:t,size:a,withHover:n}=this.props,s=n?"":"no-hover",i=t||Object(o.N)({display_name:e});let l;return l=i?r.a.createElement("div",{"data-testid":"teamIconImage",className:"TeamIcon__image TeamIcon__".concat(a),"aria-label":"Team Icon",style:{backgroundImage:"url('".concat(i,"')")}}):r.a.createElement("div",{"data-testid":"teamIconInitial",className:"TeamIcon__initials TeamIcon__initials__".concat(a),"aria-label":"Team Initials"},e?e.replace(/\s/g,"").substring(0,2):"??"),r.a.createElement("div",{className:"TeamIcon ".concat(s," TeamIcon__").concat(a)},r.a.createElement("div",{className:"TeamIcon__content ".concat(s)},l))}}l(c,"propTypes",{url:s.a.oneOfType([s.a.string,s.a.oneOf([null])]),name:s.a.string.isRequired,size:s.a.oneOf(["sm","md","lg"]),withHover:s.a.bool}),l(c,"defaultProps",{size:"md"}),t.a=c},1223:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return K})),a.d(t,"a",(function(){return Y})),a.d(t,"d",(function(){return Z})),a.d(t,"i",(function(){return J})),a.d(t,"c",(function(){return X})),a.d(t,"f",(function(){return ee})),a.d(t,"g",(function(){return te})),a.d(t,"e",(function(){return ae})),a.d(t,"j",(function(){return ne})),a.d(t,"h",(function(){return se}));a(54),a(99),a(118),a(62),a(101),a(104),a(35),a(606);var n=a(83),s=a(5),i=a(10),r=a(38),o=a(142),l=a(607),c=a(31),d=a(44),m=a(178),u=a(17),h=a(1524),p=a(22),g=a(9),b=a(19),f=a(16),_=a(12),E=a(27),v=a(103),y=a(42),C=a(1132),w=a(1526),O=a(180),T=a(1141),S=a(87),P=a(1156),M=a(1126),N=a(319),I=a(69),j=a(181),A=a(20),R=a(1359),k=a(1512),L=a(0),D=a(318),x=a(179),U=a(15),q=a(2014),H=a(1510);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){G(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const V=A.a.dispatch,W=A.a.getState,z={};function K(){if(!window.WebSocket)return void console.log("Browser does not support websocket");const e=Object(f.getConfig)(W());let t="";e.WebsocketURL?t=e.WebsocketURL:(t=new URL(Object(x.e)()),"https:"===t.protocol?t.protocol="wss:":t.protocol="ws:",/:\d+$/.test(t.host)||("wss:"===t.protocol?t.host+=":"+e.WebsocketSecurePort:t.host+=":"+e.WebsocketPort),t=t.toString()),t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t+=p.Client4.getUrlVersion()+"/websocket",R.a.setEventCallback(oe),R.a.setFirstConnectCallback(ie),R.a.setReconnectCallback(()=>X(!1)),R.a.setMissedEventCallback(()=>X(!1)),R.a.setCloseCallback(re),R.a.initialize(t)}function Y(){R.a.close()}const Q={};function Z(e,t){Q[e]=t}function J(e){Reflect.deleteProperty(Q,e)}function X(e=!0){e&&(Y(),K()),V({type:s.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()}),Object(k.c)(),Object.values(Q).forEach(e=>{e&&"function"==typeof e&&e()});const t=W();if(t.entities.teams.currentTeamId){const e=Object(_.getCurrentChannelId)(t),a=Object(E.getMostRecentPostIdInChannel)(t,e),n=Object(E.getPost)(t,a);V(Object(P.d)()),V(n?Object(T.o)(e,n.create_at):Object(c.getPosts)(e)),I.a(),V(m.getMyTeamUnreads())}t.websocket.lastDisconnectAt&&V(Object(u.checkForModifiedUsers)()),V(Object(w.b)()),V(Object(d.clearErrors)())}let $="";function ee(){clearInterval($),$=setInterval(()=>{null!=Object(g.getCurrentUser)(W())&&X(!1)},9e5)}function te(){clearInterval($)}function ae(e,t,a){z[e]||(z[e]={}),z[e][t]=a}function ne(e,t){const a=z[e];a&&Reflect.deleteProperty(a,t)}function se(e){Reflect.deleteProperty(z,e)}function ie(){V(Object(n.batchActions)([{type:s.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()},Object(d.clearErrors)()]))}function re(e){e>7&&V(Object(d.logError)({type:"critical",message:L.h.WEBSOCKET_PORT_ERROR},!0)),V(Object(n.batchActions)([{type:s.GeneralTypes.WEBSOCKET_FAILURE,timestamp:Date.now()},Object(w.a)()]))}function oe(t){switch(t.event){case L.G.POSTED:case L.G.EPHEMERAL_MESSAGE:le(t);break;case L.G.POST_EDITED:!function(e){const t=JSON.parse(e.data.post);V(Object(c.receivedPost)(t)),Object(c.getProfilesAndStatusesForPosts)([t],V,W);const a=Object(_.getCurrentChannelId)(W());a===e.broadcast.channel_id&&(V(Object(r.getChannelStats)(a)),window.isActive&&V(Object(r.viewChannel)(a)))}(t);break;case L.G.POST_DELETED:!function(e){const t=JSON.parse(e.data.post);V(Object(c.postDeleted)(t)),t.is_pinned&&V(Object(r.getChannelStats)(t.channel_id))}(t);break;case L.G.POST_UNREAD:!function(e){V({type:L.f.POST_UNREAD_SUCCESS,data:{lastViewedAt:e.data.last_viewed_at,channelId:e.broadcast.channel_id,msgCount:e.data.msg_count,mentionCount:e.data.mention_count}})}(t);break;case L.G.LEAVE_TEAM:!function(t){const a=W(),i=[{type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:t.data.team_id,user_id:t.data.user_id}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:t.data.team_id,user_id:t.data.user_id}}],r=Object(_.getChannelsInTeam)(a),o=r&&r[t.data.team_id]||[];for(const e of o)i.push({type:s.ChannelTypes.REMOVE_MEMBER_FROM_CHANNEL,data:{id:e,user_id:t.data.user_id}});V(Object(n.batchActions)(i));const l=Object(g.getCurrentUser)(a);if(l.id===t.data.user_id)V({type:s.TeamTypes.LEAVE_TEAM,data:{id:t.data.team_id}}),Object(b.getCurrentTeamId)(a)===t.data.team_id&&(e.location.pathname.startsWith("/admin_console")||Object(M.f)()),Object(U.Y)(l)&&V(Object(h.removeNotVisibleUsers)());else{const e=Object(b.getTeam)(a,t.data.team_id),i=Object(_.getChannelMembersInChannels)(a),r=Object.values(i).some(e=>e[t.data.user_id]);e&&Object(U.Y)(l)&&!r&&V(Object(n.batchActions)([{type:s.UserTypes.PROFILE_NO_LONGER_VISIBLE,data:{user_id:t.data.user_id}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:e.id,user_id:t.data.user_id}}]))}}(t);break;case L.G.UPDATE_TEAM:!function(e){V({type:s.TeamTypes.UPDATED_TEAM,data:JSON.parse(e.data.team)})}(t);break;case L.G.UPDATE_TEAM_SCHEME:V(m.getMyTeamMembers());break;case L.G.DELETE_TEAM:!function(e){const t=JSON.parse(e.data.team),a=A.a.getState(),{teams:i}=a.entities.teams;if(t&&i&&i[t.id]&&0===i[t.id].delete_at){const{currentUserId:e}=a.entities.users,{currentTeamId:i,myMembers:r}=a.entities.teams,o=Object.values(r),l=o.find(t=>t.user_id===e&&t.team_id===i);let c="";if(t&&l&&t.id===l.team_id){const e={};Object(b.getMyTeams)(a).forEach(t=>{e[t.id]=t});for(let a=0;a<o.length;a++){const n=o[a].team_id;if(e&&e[n]&&0===e[n].delete_at&&t.id!==n){c=n;break}}}if(V(Object(n.batchActions)([{type:s.TeamTypes.RECEIVED_TEAM_DELETED,data:{id:t.id}},{type:s.TeamTypes.UPDATED_TEAM,data:t}])),c){V({type:s.TeamTypes.SELECT_TEAM,data:c});const e=W(),t=Object(_.getRedirectChannelNameForTeam)(e,c);S.a.push("".concat(Object(b.getCurrentTeamUrl)(e),"/channels/").concat(t))}else S.a.push("/")}}(t);break;case L.G.ADDED_TO_TEAM:!async function(e){await V(m.getTeam(e.data.team_id)),await V(m.getMyTeamMembers()),await V(m.getMyTeamUnreads())}(t);break;case L.G.USER_ADDED:!function(e){const t=W(),a=Object(f.getConfig)(t),n=Object(f.getLicense)(t),i="true"===a.ExperimentalTimezone,o=Object(_.getCurrentChannelId)(t);o===e.broadcast.channel_id&&(V(Object(r.getChannelStats)(o)),V({type:s.UserTypes.RECEIVED_PROFILE_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}),"true"===(null==n?void 0:n.IsLicensed)&&"true"===(null==n?void 0:n.LDAPGroups)&&V(Object(r.getChannelMemberCountsByGroup)(o,i)));const l=Object(b.getCurrentTeamId)(W()),c=Object(g.getCurrentUserId)(W());l===e.data.team_id&&c===e.data.user_id&&V(Object(r.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case L.G.USER_REMOVED:!async function(e){const t=W(),a=Object(_.getCurrentChannel)(t)||{},o=Object(g.getCurrentUser)(t),l=Object(f.getConfig)(t),c=Object(f.getLicense)(t),d="true"===l.ExperimentalTimezone;if(e.broadcast.user_id===o.id){V(Object(P.d)());const n=Object(y.n)(t);if(e.data.channel_id===n&&V(Object(O.b)()),e.data.channel_id===a.id)if(e.data.remover_id===e.broadcast.user_id)S.a.push(Object(b.getCurrentRelativeTeamUrl)(t)),await V({type:s.ChannelTypes.LEAVE_CHANNEL,data:{id:e.data.channel_id,user_id:e.broadcast.user_id}});else{Object(g.getUser)(t,e.data.remover_id)||V(Object(u.getUser)(e.data.remover_id)),V(Object(C.b)({modalId:L.u.REMOVED_FROM_CHANNEL,dialogType:q.a,dialogProps:{channelName:a.display_name,removerId:e.data.remover_id}})),await V({type:s.ChannelTypes.LEAVE_CHANNEL,data:{id:e.data.channel_id,user_id:e.broadcast.user_id}}),Object(M.f)()}Object(U.Y)(o)&&V(Object(h.removeNotVisibleUsers)())}else e.broadcast.channel_id===a.id&&(V(Object(r.getChannelStats)(a.id)),V({type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}),"true"===(null==c?void 0:c.IsLicensed)&&"true"===(null==c?void 0:c.LDAPGroups)&&V(Object(r.getChannelMemberCountsByGroup)(a.id,d)));if(e.broadcast.user_id!==o.id){const a=Object(_.getChannel)(t,e.broadcast.channel_id),i=Object(_.getChannelMembersInChannels)(t),r=Object.values(i).some(t=>t[e.data.user_id]);if(a&&Object(U.Y)(o)&&!r){const t=[{type:s.UserTypes.PROFILE_NO_LONGER_VISIBLE,data:{user_id:e.data.user_id}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:a.team_id,user_id:e.data.user_id}}];V(Object(n.batchActions)(t))}}const m=e.broadcast.channel_id||e.data.channel_id,p=e.broadcast.user_id||e.data.user_id,E=Object(_.getChannel)(t,m);!E||Object(v.haveISystemPermission)(t,{permission:i.Permissions.VIEW_MEMBERS})||Object(v.haveITeamPermission)(t,{permission:i.Permissions.VIEW_MEMBERS,team:E.team_id})||V(Object(n.batchActions)([{type:s.UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:E.team_id,user_id:p}},{type:s.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:E.team_id,user_id:p}}]))}(t);break;case L.G.USER_UPDATED:!async function(e){const t=W(),a=Object(g.getCurrentUser)(t),n=e.data.user,i=Object(f.getConfig)(t),o=Object(f.getLicense)(t),l=Object(U.Y)(n),c="true"===i.ExperimentalTimezone,d="true"===(null==o?void 0:o.IsLicensed)&&"true"===(null==o?void 0:o.LDAPGroups);if(l||c&&d){let e=Object(_.getMembersInCurrentChannel)(t);const a=Object(_.getCurrentChannelId)(t);let s=e&&e[n.id];s||(await V(Object(r.getChannelMember)(a,n.id)),e=Object(_.getMembersInCurrentChannel)(W()),s=e&&e[n.id]),s&&(d&&c&&V(Object(r.getChannelMemberCountsByGroup)(a,!0)),Object(U.Y)(n)&&V(Object(r.getChannelStats)(a)))}a.id===n.id?n.update_at>a.update_at&&Object(u.getMe)()(V,W):V({type:s.UserTypes.RECEIVED_PROFILE,data:n})}(t);break;case L.G.ROLE_ADDED:!function(e){const t=JSON.parse(e.data.role);V({type:s.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case L.G.ROLE_REMOVED:!function(e){const t=JSON.parse(e.data.role);V({type:s.RoleTypes.ROLE_DELETED,data:t})}(t);break;case L.G.CHANNEL_SCHEME_UPDATED:!function(e){V(Object(r.getMyChannelMember)(e.broadcast.channel_id))}(t);break;case L.G.MEMBERROLE_UPDATED:!function(e){const t=JSON.parse(e.data.member),a=t.roles.split(" ");V(Object(o.loadRolesIfNeeded)(a)),V({type:s.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:t})}(t);break;case L.G.ROLE_UPDATED:!function(e){const t=JSON.parse(e.data.role);V({type:s.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case L.G.CHANNEL_CREATED:!function(e){const t=e.data.channel_id,a=e.data.team_id,n=W();Object(b.getCurrentTeamId)(n)!==a||Object(_.getChannel)(n,t)||V(Object(r.getChannelAndMyMember)(t))}(t);break;case L.G.CHANNEL_DELETED:!function(e){const t=W(),a="true"===Object(f.getConfig)(t).ExperimentalViewArchivedChannels;if(Object(_.getCurrentChannelId)(t)===e.data.channel_id&&!a){const e=Object(b.getCurrentRelativeTeamUrl)(t),a=Object(b.getCurrentTeamId)(t),n=Object(_.getRedirectChannelNameForTeam)(t,a);S.a.push(e+"/channels/"+n)}V({type:s.ChannelTypes.RECEIVED_CHANNEL_DELETED,data:{id:e.data.channel_id,team_id:e.broadcast.team_id,deleteAt:e.data.delete_at,viewArchivedChannels:a}})}(t);break;case L.G.CHANNEL_UNARCHIVED:!function(e){const t=W(),a="true"===Object(f.getConfig)(t).ExperimentalViewArchivedChannels;V({type:s.ChannelTypes.RECEIVED_CHANNEL_UNARCHIVED,data:{id:e.data.channel_id,team_id:e.broadcast.team_id,viewArchivedChannels:a}})}(t);break;case L.G.CHANNEL_CONVERTED:!function(e){const t=e.data.channel_id;if(t){const e=Object(_.getChannel)(W(),t);e&&V({type:s.ChannelTypes.RECEIVED_CHANNEL,data:B({},e,{type:i.General.PRIVATE_CHANNEL})})}}(t);break;case L.G.CHANNEL_UPDATED:V(function(e){return(t,a)=>{const n=JSON.parse(e.data.channel);t({type:s.ChannelTypes.RECEIVED_CHANNEL,data:n});const i=a();n.id===Object(_.getCurrentChannelId)(i)&&S.a.replace("".concat(Object(b.getCurrentRelativeTeamUrl)(i),"/channels/").concat(n.name))}}(t));break;case L.G.CHANNEL_MEMBER_UPDATED:!function(e){const t=JSON.parse(e.data.channelMember),a=t.roles.split(" ");V(Object(o.loadRolesIfNeeded)(a)),V({type:s.ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER,data:t})}(t);break;case L.G.DIRECT_ADDED:!function(e){V(Object(r.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case L.G.PREFERENCE_CHANGED:!function(e){const t=JSON.parse(e.data.preference);V({type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:[t]}),ce(t)&&Object(j.l)()}(t);break;case L.G.PREFERENCES_CHANGED:!function(e){const t=JSON.parse(e.data.preferences);V({type:s.PreferenceTypes.RECEIVED_PREFERENCES,data:t}),-1!==t.findIndex(ce)&&Object(j.l)()}(t);break;case L.G.PREFERENCES_DELETED:!function(e){const t=JSON.parse(e.data.preferences);V({type:s.PreferenceTypes.DELETED_PREFERENCES,data:t})}(t);break;case L.G.TYPING:V(function(e){return async(t,a)=>{const n=a(),s=Object(f.getConfig)(n),r=Object(g.getCurrentUserId)(n),o=e.data.user_id,l={id:e.broadcast.channel_id+e.data.parent_id,userId:o,now:Date.now()};if(t({type:i.WebsocketEvents.TYPING,data:l}),setTimeout(()=>{t({type:i.WebsocketEvents.STOP_TYPING,data:l})},parseInt(s.TimeBetweenUserTypingUpdatesMilliseconds,10)),o!==r){const e=await t(Object(u.getMissingProfilesByIds)([o]));if(e.data&&e.data.length>0)return}Object(g.getStatusForUserId)(n,o)!==i.General.ONLINE&&t(Object(u.getStatusesByIds)([o]))}}(t));break;case L.G.STATUS_CHANGED:!function(e){V({type:s.UserTypes.RECEIVED_STATUSES,data:[{user_id:e.data.user_id,status:e.data.status}]})}(t);break;case L.G.HELLO:!function(e){Object(l.setServerVersion)(e.data.server_version)(V,W)}(t);break;case L.G.REACTION_ADDED:!function(e){const t=JSON.parse(e.data.reaction);V(Object(c.getCustomEmojiForReaction)(t.emoji_name)),V({type:s.PostTypes.RECEIVED_REACTION,data:t})}(t);break;case L.G.REACTION_REMOVED:!function(e){const t=JSON.parse(e.data.reaction);V({type:s.PostTypes.REACTION_DELETED,data:t})}(t);break;case L.G.EMOJI_ADDED:!function(e){const t=JSON.parse(e.data.emoji);V({type:s.EmojiTypes.RECEIVED_CUSTOM_EMOJI,data:t})}(t);break;case L.G.CHANNEL_VIEWED:!function(e){window.isActive&&Object(_.getCurrentChannelId)(W())===e.data.channel_id||Object(g.getCurrentUserId)(W())!==e.broadcast.user_id||V(Object(r.markChannelAsRead)(e.data.channel_id,"",!1))}(t);break;case L.G.PLUGIN_ENABLED:!function(e){const t=e.data.manifest;Object(k.b)(t).catch(e=>{console.error(e.message)})}(t);break;case L.G.PLUGIN_DISABLED:!function(e){const t=e.data.manifest;Object(k.d)(t)}(t);break;case L.G.USER_ROLE_UPDATED:!function(t){const a=A.a.getState().entities.users.profiles[t.data.user_id];if(a){const n=t.data.roles,i=n.split(" "),r=a.roles.includes(L.j.PERMISSIONS_SYSTEM_ADMIN)&&!n.includes(L.j.PERMISSIONS_SYSTEM_ADMIN);A.a.dispatch({type:s.UserTypes.RECEIVED_PROFILE,data:B({},a,{roles:n})}),V(Object(o.loadRolesIfNeeded)(i)),r&&e.location.pathname.startsWith("/admin_console")&&Object(M.f)()}}(t);break;case L.G.CONFIG_CHANGED:!function(e){A.a.dispatch({type:s.GeneralTypes.CLIENT_CONFIG_RECEIVED,data:e.data.config})}(t);break;case L.G.LICENSE_CHANGED:!function(e){A.a.dispatch({type:s.GeneralTypes.CLIENT_LICENSE_RECEIVED,data:e.data.license})}(t);break;case L.G.PLUGIN_STATUSES_CHANGED:!function(e){A.a.dispatch({type:s.AdminTypes.RECEIVED_PLUGIN_STATUSES,data:e.data.plugin_statuses})}(t);break;case L.G.OPEN_DIALOG:!function(e){const t=e.data&&e.data.dialog||{},a=JSON.parse(t);A.a.dispatch({type:s.IntegrationTypes.RECEIVED_DIALOG,data:a});const n=W().entities.integrations.dialogTriggerId;if(a.trigger_id!==n)return;A.a.dispatch(Object(C.b)({modalId:L.u.INTERACTIVE_DIALOG,dialogType:H.a}))}(t);break;case L.G.RECEIVED_GROUP:!function(e){const t=JSON.parse(e.data.group);V(Object(n.batchActions)([{type:s.GroupTypes.RECEIVED_GROUP,data:t},{type:s.GroupTypes.RECEIVED_MY_GROUPS,data:[t]}]))}(t);break;case L.G.RECEIVED_GROUP_ASSOCIATED_TO_TEAM:!function(e){A.a.dispatch({type:s.GroupTypes.RECEIVED_GROUP_ASSOCIATED_TO_TEAM,data:{teamID:e.broadcast.team_id,groups:[{id:e.data.group_id}]}})}(t);break;case L.G.RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM:!function(e){A.a.dispatch({type:s.GroupTypes.RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM,data:{teamID:e.broadcast.team_id,groups:[{id:e.data.group_id}]}})}(t);break;case L.G.RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL:!function(e){A.a.dispatch({type:s.GroupTypes.RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL,data:{channelID:e.broadcast.channel_id,groups:[{id:e.data.group_id}]}})}(t);break;case L.G.RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL:!function(e){A.a.dispatch({type:s.GroupTypes.RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL,data:{channelID:e.broadcast.channel_id,groups:[{id:e.data.group_id}]}})}(t)}Object.values(z).forEach(e=>{e&&e.hasOwnProperty(t.event)&&"function"==typeof e[t.event]&&e[t.event](t)})}const le=function(e){let t,a=[],i=0;const r=()=>{t=null,a.length>0&&V(function(e){return(t,a)=>{const s=e.map(e=>JSON.parse(e.data.post)),i=s.map(c.receivedNewPost);t(Object(n.batchActions)(i)),t(Object(c.getThreadsForPosts)(s)),Object(c.getProfilesAndStatusesForPosts)(s,t,a)}}(a)),a=[],i=0};return function(n){t&&i>2?(a.push(n)>200&&(a=[],console.log("channel broken because of too many incoming messages")),clearTimeout(t),t=setTimeout(r,e)):(i+=1,V(function(e){return(t,a)=>{const n=JSON.parse(e.data.post);t(Object(N.f)(n,e)),Object(c.getProfilesAndStatusesForPosts)([n],t,a),n.user_id===Object(g.getCurrentUserId)(a())||Object(D.e)(n)||Object(g.getIsManualStatusForUserId)(a(),n.user_id)||t({type:s.UserTypes.RECEIVED_STATUSES,data:[{user_id:n.user_id,status:L.O.ONLINE}]})}}(n)),clearTimeout(t),t=setTimeout(r,e))}}(100);function ce(e){return e.category===L.j.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW&&"true"===e.value}}).call(this,a(26))},1226:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i);a(1554);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.a.PureComponent{render(){return this.props.show?r.a.createElement("div",{className:"Badge"},r.a.createElement("div",{className:"Badge__box "+this.props.className},this.props.children)):null}}o(l,"propTypes",{show:s.a.bool,children:s.a.node.isRequired,className:s.a.string}),o(l,"defaultProps",{show:!0,className:""})},1227:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1387),c=a(1123),d=a(0);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends r.a.PureComponent{constructor(...e){super(...e),h(this,"updateInputFromProps",()=>{this.input&&this.input.value!==this.props.value&&(this.input.value=this.props.value)}),h(this,"getInput",()=>this.input),h(this,"setInput",e=>{this.input=e}),h(this,"onClear",()=>{this.props.onClear&&this.props.onClear(),this.focus()})}componentDidUpdate(e){e.value!==this.props.value&&(this.props.delayInputUpdate?requestAnimationFrame(this.updateInputFromProps):this.updateInputFromProps())}get value(){return this.input.value}set value(e){this.input.value=e}focus(){this.input.focus()}blur(){this.input.blur()}render(){let e=this.props.clearableTooltipText;e||(e=r.a.createElement(o.a,{id:"input.clear",defaultMessage:"Clear"}));const t=r.a.createElement(l.a,{id:"InputClearTooltip"},e),a=this.props,{value:n,inputComponent:s,clearable:i}=a,p=u(a,["value","inputComponent","clearable"]);Reflect.deleteProperty(p,"delayInputUpdate"),Reflect.deleteProperty(p,"onClear"),Reflect.deleteProperty(p,"clearableTooltipText");const g=r.a.createElement(s||"input",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p,{ref:this.setInput,defaultValue:n}));return r.a.createElement("div",null,g,i&&n&&this.props.onClear&&r.a.createElement("div",{className:"input-clear visible",onClick:this.onClear},r.a.createElement(c.a,{delayShow:d.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:t},r.a.createElement("span",{className:"input-clear-x","aria-hidden":"true"},r.a.createElement("i",{className:"icon icon-close-circle"})))))}}h(p,"propTypes",{delayInputUpdate:s.a.bool,inputComponent:s.a.elementType,value:s.a.string.isRequired,clearable:s.a.bool,clearableTooltipText:s.a.oneOfType([s.a.string,s.a.element]),onClear:s.a.func}),h(p,"defaultProps",{delayInputUpdate:!1,value:"",clearable:!1})},1229:function(e,t,a){"use strict";var n=a(87),s=a(115),i=a(82),r=a(20),o=a(0),l=a(15);const c=r.a.dispatch,d=r.a.getState;var m=new class{setItem(e,t){c(i.f(e,t))}getItem(e,t){return s.d(e,t)(d())}removeItem(e){c(i.d(e))}setGlobalItem(e,t){c(i.e(e,t))}getGlobalItem(e,t=null){return s.c(e,t)(d())}removeGlobalItem(e){c(i.c(e))}signalLogout(){if(this.isLocalStorageSupported()){const e=l.p();l.pb(o.I.ANNOUNCEMENT),sessionStorage.setItem(o.I.LOGOUT,e),localStorage.setItem(o.I.LOGOUT,e),localStorage.removeItem(o.I.LOGOUT)}}isSignallingLogout(e){return e===sessionStorage.getItem(o.I.LOGOUT)}signalLogin(){if(this.isLocalStorageSupported()){const e=l.p();sessionStorage.setItem(o.I.LOGIN,e),localStorage.setItem(o.I.LOGIN,e),localStorage.removeItem(o.I.LOGIN)}}isSignallingLogin(e){return e===sessionStorage.getItem(o.I.LOGIN)}clear(e){c(i.b(e))}isLocalStorageSupported(){if(this.hasCheckedLocalStorage)return this.localStorageSupported;this.localStorageSupported=!1;try{localStorage.setItem("__testLocal__","1"),"1"===localStorage.getItem("__testLocal__")&&(this.localStorageSupported=!0),localStorage.removeItem("__testLocal__","1")}catch(e){this.localStorageSupported=!1}try{sessionStorage.setItem("__testSession__","1"),sessionStorage.removeItem("__testSession__")}catch(e){n.a.push("/error?type="+o.l.LOCAL_STORAGE)}return this.hasCheckedLocalStorage=!0,this.localStorageSupported}hasSeenLandingPage(){return localStorage.getItem(o.I.LANDING_PAGE_SEEN)}setLandingPageSeen(e){localStorage.setItem(o.I.LANDING_PAGE_SEEN,e)}getLandingPreference(e){return localStorage.getItem(o.I.LANDING_PREFERENCE+String(e))}setLandingPreferenceToMattermostApp(e){localStorage.setItem(o.I.LANDING_PREFERENCE+String(e),o.s.MATTERMOSTAPP)}setLandingPreferenceToBrowser(e){localStorage.setItem(o.I.LANDING_PREFERENCE+String(e),o.s.BROWSER)}clearLandingPreference(e){localStorage.removeItem(o.I.LANDING_PREFERENCE+String(e))}};t.a=m},1230:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(118),a(101),a(35);function n(e,t,a=""){if(!e)return[];const n=a.split(",");return[...e.filter(e=>null!==e&&n.includes(e.id)).sort((e,t)=>n.indexOf(e.id)-n.indexOf(t.id)),...e.filter(e=>null!==e&&!n.includes(e.id)).sort((e,a)=>function(e,t,a){return null!==t.display_name&&t.display_name!==a.display_name?t.display_name.localeCompare(a.display_name,e,{numeric:!0}):t.name.localeCompare(a.name,e,{numeric:!0})}(t,e,a))].filter(e=>e&&!e.delete_at>0&&null!=e.display_name)}},1231:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i);a(1388);function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e){class t extends r.a.PureComponent{render(){const t=this.props,{id:a,show:n,icon:s,text:i}=t,l=o(t,["id","show","icon","text"]);if(!n)return null;let c=i;return s&&(c=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon"},s),i)),r.a.createElement("li",{className:"MenuItem",role:"menuitem",id:a},r.a.createElement(e,Object.assign({text:c},l)))}}return l(t,"propTypes",{show:s.a.bool,id:s.a.string,icon:s.a.node,text:s.a.node}),l(t,"defaultProps",{show:!0}),l(t,"displayName",void 0),t}},1233:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(15),l=a(1409);function c(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.PureComponent{constructor(e){super(e),d(this,"dimensionsAvailable",e=>e&&e.width&&e.height),d(this,"isSmallImage",(e,t)=>e<48||t<48),d(this,"handleLoad",e=>{if(this.mounted){const t=e.target,a=this.isSmallImage(t.naturalWidth,t.naturalHeight);this.setState({loaded:!0,error:!1,isSmallImage:a,imageWidth:t.naturalWidth},()=>{this.props.onImageLoaded&&t.naturalHeight&&this.props.onImageLoaded({height:t.naturalHeight,width:t.naturalWidth})})}}),d(this,"handleError",()=>{this.mounted&&(this.props.onImageLoadFail&&this.props.onImageLoadFail(),this.setState({error:!0}))}),d(this,"onEnterKeyDown",e=>{"Enter"===e.key&&this.props.onClick(e)}),d(this,"renderImageLoaderIfNeeded",()=>this.state.loaded||!this.props.showLoader||this.state.error?null:r.a.createElement("div",{style:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"}},r.a.createElement(l.a,{containerClass:"file__image-loading"}))),d(this,"renderImageWithContainerIfNeeded",()=>{const e=this.props,{fileInfo:t,src:a}=e,n=c(e,["fileInfo","src"]);Reflect.deleteProperty(n,"showLoader"),Reflect.deleteProperty(n,"onImageLoaded"),Reflect.deleteProperty(n,"onImageLoadFail"),Reflect.deleteProperty(n,"dimensions"),Reflect.deleteProperty(n,"handleSmallImageContainer");let s=Object(o.lb)("file_attachment.thumbnail","file thumbnail");t&&(s+=" ".concat(t.name).toLowerCase());const i=r.a.createElement("img",Object.assign({},n,{"aria-label":s,tabIndex:"0",onKeyDown:this.onEnterKeyDown,className:this.props.className+(this.props.handleSmallImageContainer&&this.state.isSmallImage?" small-image--inside-container":""),src:a,onError:this.handleError,onLoad:this.handleLoad}));if(this.props.handleSmallImageContainer&&this.state.isSmallImage){let e="small-image__container cursor--pointer a11y--active";return this.state.imageWidth<48&&(e+=" small-image__container--min-width"),r.a.createElement("div",{onClick:this.props.onClick,className:e,style:this.state.imageWidth>48?{width:this.state.imageWidth+2}:{}},i)}return i}),d(this,"renderImageOrPlaceholder",()=>{const{dimensions:e}=this.props;let t;this.dimensionsAvailable(e)&&!this.state.loaded&&(t=r.a.createElement("div",{className:"image-loading__container ".concat(this.props.className),style:{maxWidth:e.width}},this.renderImageLoaderIfNeeded(),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(e.width," ").concat(e.height),style:{maxHeight:e.height,maxWidth:e.width,verticalAlign:"middle"}})));const a=!this.dimensionsAvailable(e)||this.state.loaded;return r.a.createElement(r.a.Fragment,null,t,r.a.createElement("div",{className:"file-preview__button",style:{display:a?"initial":"none"}},this.renderImageWithContainerIfNeeded()))});const{dimensions:t}=e;this.state={loaded:!1,isSmallImage:!!this.dimensionsAvailable(t)&&this.isSmallImage(t.width,t.height)},this.heightTimeout=0}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return this.renderImageOrPlaceholder()}}d(m,"propTypes",{src:s.a.string.isRequired,dimensions:s.a.object,fileInfo:s.a.object,showLoader:s.a.bool,onImageLoaded:s.a.func,onImageLoadFail:s.a.func,onClick:s.a.func,className:s.a.string,handleSmallImageContainer:s.a.bool})},1234:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.success",defaultMessage:"Success Icon"},e=>s.a.createElement("i",{className:"fa fa-check",title:e}))}}},1236:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>s.a.createElement("i",{className:"fa fa-angle-down",title:e}))}}},1237:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>s.a.createElement("i",{className:"fa fa-angle-left",title:e}))}}},1247:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113);class l extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},e=>r.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 12 12",style:c,role:"img","aria-label":e},r.a.createElement("path",{className:"away--icon",d:"M9.081,5.712C9.267,5.712 9.417,5.863 9.417,6.048L9.417,9.086L11.864,10.499C12.025,10.592 12.08,10.797 11.987,10.958L11.482,11.832C11.39,11.993 11.184,12.048 11.023,11.955L7.904,10.154C7.788,10.087 7.727,9.961 7.737,9.836C7.736,9.827 7.736,9.818 7.736,9.809L7.736,6.048C7.736,5.863 7.886,5.712 8.072,5.712L9.081,5.712ZM4.812,11.513L4.605,11.513C2.325,11.41 0.253,10.374 0.046,9.027C-0.058,8.923 0.046,8.509 0.046,8.405C0.15,7.576 0.357,6.437 0.771,5.815C0.978,5.401 2.015,5.297 2.015,5.297C2.015,5.297 2.015,7.369 4.605,7.369L5.019,7.369C4.915,7.784 4.812,8.198 4.812,8.612C4.812,9.648 5.226,10.581 5.848,11.41C5.537,11.513 5.123,11.513 4.812,11.513ZM4.605,0.117C6.034,0.117 7.195,1.277 7.195,2.707C7.195,4.136 6.034,5.297 4.605,5.297C3.175,5.297 2.015,4.136 2.015,2.707C2.015,1.277 3.175,0.117 4.605,0.117Z"}))))}}const c={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class d extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},e=>r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:m,role:"img","aria-label":e},r.a.createElement("path",{className:"away--icon",d:"M10,0C15.519,0 20,4.481 20,10C20,15.519 15.519,20 10,20C4.481,20 0,15.519 0,10C0,4.481 4.481,0 10,0ZM10.27,3C10.949,3 11.5,3.586 11.5,4.307L11.5,9.379L15.002,12.881C15.492,13.37 15.499,14.158 15.019,14.638L14.638,15.019C14.158,15.499 13.37,15.492 12.881,15.002L8.887,11.008C8.739,10.861 8.636,10.686 8.576,10.501C8.528,10.402 8.5,10.299 8.5,10.193L8.5,4.307C8.5,3.586 9.051,3 9.73,3L10.27,3Z"}))))}}const m={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class u extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},e=>r.a.createElement("svg",{x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:h,role:"img","aria-label":e},r.a.createElement("g",null,r.a.createElement("ellipse",{className:"dnd--icon",cx:"-294.6",cy:"394",rx:"2.5",ry:"2.5"}),r.a.createElement("path",{className:"dnd--icon",d:"M-293.8,399.4c0-0.4,0.1-0.7,0.2-1c-0.3,0.1-0.6,0.2-1,0.2c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0.7,0,1.4-0.1,2-0.3 C-293.3,401.5-293.8,400.5-293.8,399.4z"})),r.a.createElement("path",{className:"dnd--icon",d:"M-287,400c0,0.1-0.1,0.1-0.1,0.1l-4.9,0c-0.1,0-0.1-0.1-0.1-0.1v-1.6c0-0.1,0.1-0.1,0.1-0.1l4.9,0c0.1,0,0.1,0.1,0.1,0.1 V400z"}))))}}const h={enableBackground:"new -299 391 12 12"};class p extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},e=>r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:g,role:"img","aria-label":e},r.a.createElement("path",{className:"dnd--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm5.25,8.5l-10.5,0c-0.414,0 -0.75,0.336 -0.75,0.75l0,1.5c0,0.414 0.336,0.75 0.75,0.75l10.5,0c0.414,0 0.75,-0.336 0.75,-0.75l0,-1.5c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))))}}const g={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class b extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},e=>r.a.createElement("svg",{x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:f,role:"img","aria-label":e},r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("ellipse",{className:"offline--icon",cx:"-294.5",cy:"394",rx:"2.5",ry:"2.5"}),r.a.createElement("path",{className:"offline--icon",d:"M-294.3,399.7c0-0.4,0.1-0.8,0.2-1.2c-0.1,0-0.2,0-0.4,0c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4h0.1h0.1c0.3,0,0.7,0,1-0.1C-293.9,401.6-294.3,400.7-294.3,399.7z"}))),r.a.createElement("g",null,r.a.createElement("path",{className:"offline--icon",d:"M-288.9,399.4l1.8-1.8c0.1-0.1,0.1-0.3,0-0.3l-0.7-0.7c-0.1-0.1-0.3-0.1-0.3,0l-1.8,1.8l-1.8-1.8c-0.1-0.1-0.3-0.1-0.3,0 l-0.7,0.7c-0.1,0.1-0.1,0.3,0,0.3l1.8,1.8l-1.8,1.8c-0.1,0.1-0.1,0.3,0,0.3l0.7,0.7c0.1,0.1,0.3,0.1,0.3,0l1.8-1.8l1.8,1.8 c0.1,0.1,0.3,0.1,0.3,0l0.7-0.7c0.1-0.1,0.1-0.3,0-0.3L-288.9,399.4z"})))))}}const f={enableBackground:"new -299 391 12 12"};class _ extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},e=>r.a.createElement("svg",{width:"100%",height:"100%",className:"offline--icon",viewBox:"0 0 20 20",style:E,role:"img","aria-label":e},r.a.createElement("path",{d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm0,2c4.415,0 8,3.585 8,8c0,4.415 -3.585,8 -8,8c-4.415,0 -8,-3.585 -8,-8c0,-4.415 3.585,-8 8,-8Z"}))))}}const E={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};class v extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},e=>r.a.createElement("svg",{x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-243 245 12 12",style:y,role:"img","aria-label":e},r.a.createElement("g",null,r.a.createElement("path",{className:"online--icon",d:"M-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5z"}),r.a.createElement("ellipse",{className:"online--icon",cx:"-238.5",cy:"248",rx:"2.5",ry:"2.5"})),r.a.createElement("path",{className:"online--icon",d:"M-238.9,253.8c0-0.4,0.1-0.9,0.2-1.3c-2.2-0.2-2.2-2-2.2-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5c0,0.1-0.1,0.5,0,0.6 c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0C-238.7,255.7-238.9,254.8-238.9,253.8z"}),r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{className:"online--icon",d:"M-232.3,250.1l1.3,1.3c0,0,0,0.1,0,0.1l-4.1,4.1c0,0,0,0-0.1,0c0,0,0,0,0,0l-2.7-2.7c0,0,0-0.1,0-0.1l1.2-1.2 c0,0,0.1,0,0.1,0l1.4,1.4l2.9-2.9C-232.4,250.1-232.3,250.1-232.3,250.1z"}))))))}}const y={enableBackground:"new -243 245 12 12"};class C extends r.a.PureComponent{render(){return r.a.createElement("span",this.props,r.a.createElement(o.a,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},e=>r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:w,role:"img","aria-label":e},r.a.createElement("path",{className:"online--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm6.19,7.18c0,0.208 -0.075,0.384 -0.224,0.53l-5.782,5.64l-1.087,1.059c-0.149,0.146 -0.33,0.218 -0.543,0.218c-0.213,0 -0.394,-0.072 -0.543,-0.218l-1.086,-1.059l-2.891,-2.82c-0.149,-0.146 -0.224,-0.322 -0.224,-0.53c0,-0.208 0.075,-0.384 0.224,-0.53l1.086,-1.059c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l2.348,2.298l5.24,-5.118c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l1.086,1.059c0.149,0.146 0.224,0.322 0.224,0.53Z"}))))}}const w={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return T}));class T extends r.a.PureComponent{render(){const{button:e,status:t,type:a}=this.props;if(!t)return null;let n="status "+this.props.className;e&&(n=this.props.className||"");let s="span";const i={className:n};return s="avatar"===a?"online"===t?v:"away"===t?l:"dnd"===t?u:b:"online"===t?C:"away"===t?d:"dnd"===t?p:_,r.a.createElement(s,i)}}O(T,"propTypes",{button:s.a.bool,status:s.a.string,className:s.a.string,type:s.a.string}),O(T,"defaultProps",{className:"",button:!1})},1249:function(e,t,a){"use strict";var n=a(315),s=a(16),i=(a(35),a(33)),r=a.n(i),o=a(6),l=a.n(o),c=a(318);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends l.a.PureComponent{constructor(...e){super(...e),d(this,"isSVGImage",()=>this.props.imageMetadata?"svg"===this.props.imageMetadata.format:-1!==this.props.src.indexOf(".svg")),d(this,"shouldRenderImage",()=>this.props.enableSVGs||!this.isSVGImage())}render(){let e=Object(c.f)(this.props.src,this.props.hasImageProxy);return this.shouldRenderImage()||(e=""),this.props.children(e)}}d(m,"propTypes",{children:r.a.func.isRequired,enableSVGs:r.a.bool.isRequired,hasImageProxy:r.a.bool.isRequired,imageMetadata:r.a.object,src:r.a.string.isRequired});t.a=Object(n.connect)((function(e){const t=Object(s.getConfig)(e);return{enableSVGs:"true"===t.EnableSVGs,hasImageProxy:"true"===t.HasImageProxy}}))(m)},1250:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return g}));a(176),a(54),a(35);var n=a(607),s=a(17),i=a(22),r=a(0),o=a(1521),l=a(182);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(){return async e=>{const t=[e(Object(n.getClientConfig)()),e(Object(n.getLicenseConfig)())],a=await Promise.all(t);return document.cookie.indexOf("MMUSERID=")>-1&&a.push(await e(s.loadMe())),a}}const u={};function h(e,t){return u[e]=t,(e,a)=>{const n=a(),s=Object(l.a)(n),i=Object(l.b)(n,s),o={};Object.assign(o,i),i&&(Object.assign(o,t(s)),e({type:r.f.RECEIVED_TRANSLATIONS,data:{locale:s,translations:o}}))}}function p(e){Reflect.deleteProperty(u,e)}function g(e,t){return async a=>{const n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o);if(Object.values(u).forEach(t=>{Object.assign(n,t(e))}),"en"!==e)try{const e=await i.Client4.getTranslations(t);Object.assign(n,e)}catch(e){console.error(e)}a({type:r.f.RECEIVED_TRANSLATIONS,data:{locale:e,translations:n}})}}},1251:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c}));var n=a(19),s=a(9),i=a(123);const r=e=>{const t=Object(s.getCurrentUserId)(e),a=Object(n.getCurrentTeamId)(e);return i.a.getPreviousChannelName(t,a)},o=e=>{const t=Object(s.getCurrentUserId)(e),a=Object(n.getCurrentTeamId)(e);return i.a.getPenultimateChannelName(t,a)},l=(e,t)=>{const a=Object(s.getCurrentUserId)(e),r=Object(n.getTeamByName)(e,t),o=r&&r.id;return i.a.getPreviousChannelName(a,o)},c=e=>{const t=Object(s.getCurrentUserId)(e);return i.a.getPreviousTeamId(t)}},1268:function(e,t,a){e.exports=a.p+"files/3016ce0ae94452c478603f87473e9a87.png"},1269:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.menu",defaultMessage:"Menu Icon"},e=>s.a.createElement("svg",{width:"16px",height:"10px",viewBox:"0 0 16 10",version:"1.1",role:"img",title:e},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(-188.000000, -38.000000)",fillRule:"nonzero",fill:"inherit"},s.a.createElement("g",null,s.a.createElement("g",null,s.a.createElement("g",{transform:"translate(188.000000, 38.000000)"},s.a.createElement("path",{d:"M15.5,0 C15.776,0 16,0.224 16,0.5 L16,1.5 C16,1.776 15.776,2 15.5,2 L0.5,2 C0.224,2 0,1.776 0,1.5 L0,0.5 C0,0.224 0.224,0 0.5,0 L15.5,0 Z M15.5,4 C15.776,4 16,4.224 16,4.5 L16,5.5 C16,5.776 15.776,6 15.5,6 L0.5,6 C0.224,6 0,5.776 0,5.5 L0,4.5 C0,4.224 0.224,4 0.5,4 L15.5,4 Z M15.5,8 C15.776,8 16,8.224 16,8.5 L16,9.5 C16,9.776 15.776,10 15.5,10 L0.5,10 C0.224,10 0,9.776 0,9.5 L0,8.5 C0,8.224 0.224,8 0.5,8 L15.5,8 Z"})))))))))}}},1279:function(e,t,a){"use strict";var n=a(315),s=a(16),i=a(27),r=a(1176),o=(a(54),a(35),a(33)),l=a.n(o),c=a(6),d=a.n(c),m=a(1365),u=a(1163),h=a(1126),p=a(0),g=a(15),b=a(100),f=a.n(b),_=a(316),E=a.n(_),v=a(1281);function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends d.a.PureComponent{constructor(e){super(e),y(this,"handleFileInfoChanged",e=>{let t=E.a.findDOMNode(this.refs.video);t||(t=document.createElement("video"));const a=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===a||"maybe"===a})}),y(this,"handleLoadError",()=>{this.setState({canPlay:!1})}),y(this,"stop",()=>{if(this.refs.video){const e=E.a.findDOMNode(this.refs.video);e.pause(),e.currentTime=0}}),this.state={canPlay:!0}}componentDidMount(){this.handleFileInfoChanged(this.props.fileInfo),this.refs.source&&f()(E.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}componentDidUpdate(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(this.props.fileInfo),this.refs.source&&f()(E.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}render(){if(!this.state.canPlay)return d.a.createElement(v.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});let e=p.Q.WEB_VIDEO_WIDTH,t=p.Q.WEB_VIDEO_HEIGHT;return g.cb()&&(e=p.Q.MOBILE_VIDEO_WIDTH,t=p.Q.MOBILE_VIDEO_HEIGHT),d.a.createElement("video",{key:this.props.fileInfo.id,ref:"video","data-setup":"{}",controls:"controls",width:e,height:t},d.a.createElement("source",{ref:"source",src:this.props.fileUrl}))}}y(C,"propTypes",{fileInfo:l.a.object.isRequired,fileUrl:l.a.string.isRequired});a(119);var w=a(141),O=a(1157);function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class S extends d.a.PureComponent{constructor(e){super(e),T(this,"updateStateFromProps",e=>{const t=w.b(e.fileInfo.extension);!t||e.fileInfo.size>p.Q.CODE_PREVIEW_MAX_FILE_SIZE?this.setState({code:"",lang:"",loading:!1,success:!1}):(this.setState({code:"",lang:t,loading:!0}),f.a.ajax({async:!0,url:e.fileUrl,type:"GET",dataType:"text",error:this.handleReceivedError,success:this.handleReceivedCode}))}),T(this,"handleReceivedCode",e=>{let t=e;"#document"===e.nodeName&&(t=(new XMLSerializer).serializeToString(e)),this.setState({code:t,loading:!1,success:!0})}),T(this,"handleReceivedError",()=>{this.setState({loading:!1,success:!1})}),this.state={code:"",lang:"",loading:!0,success:!0}}componentDidMount(){this.updateStateFromProps(this.props)}UNSAFE_componentWillReceiveProps(e){this.props.fileUrl!==e.fileUrl&&this.updateStateFromProps(e)}static supports(e){return Boolean(w.b(e.extension))}render(){if(this.state.loading)return d.a.createElement("div",{className:"view-image__loading"},d.a.createElement(O.a,null));if(!this.state.success)return d.a.createElement(v.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});const e=this.state.code.match(/\r\n|\r|\n|$/g).length;let t="";for(let a=1;a<=e;a++)t+=t?"\n"+a:a;const a=w.c(this.state.lang),n=w.d(this.state.lang,this.state.code);return d.a.createElement("div",{className:"post-code"},d.a.createElement("span",{className:"post-code__language"},"".concat(this.props.fileInfo.name," - ").concat(a)),d.a.createElement("div",{className:"post-code__container"},d.a.createElement("code",{className:"hljs"},d.a.createElement("table",null,d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("td",{className:"post-code__lineno"},t),d.a.createElement("td",{dangerouslySetInnerHTML:{__html:n}})))))))}}S.propTypes={fileInfo:l.a.object.isRequired,fileUrl:l.a.string.isRequired};var P=a(1409);function M({fileInfo:e,canDownloadFiles:t}){const a=!e.id;let n,s;return a?(n=e.link,s=e.link):(n=Object(u.getFileDownloadUrl)(e.id),s=e.has_preview_image?Object(u.getFilePreviewUrl)(e.id):n),t?d.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",download:!a},d.a.createElement("img",{"data-testid":"imagePreview",alt:"preview url image",src:s})):d.a.createElement("img",{src:s})}M.propTypes={fileInfo:l.a.object.isRequired,canDownloadFiles:l.a.bool.isRequired};a(176);var N=a(1113);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends d.a.PureComponent{render(){var e="";this.props.enablePublicLink&&this.props.showPublicLink&&(e=d.a.createElement("div",null,d.a.createElement("a",{href:"#",className:"public-link text","data-title":"Public Image",onClick:this.props.onGetPublicLink},d.a.createElement(N.a,{id:"view_image_popover.publicLink",defaultMessage:"Get a public link"})),d.a.createElement("span",{className:"text"}," | ")));let t=null;if(this.props.canDownloadFiles){let a;const n={};this.props.isExternalFile?a=d.a.createElement(N.a,{id:"view_image_popover.open",defaultMessage:"Open"}):(a=d.a.createElement(N.a,{id:"view_image_popover.download",defaultMessage:"Download"}),n.download=this.props.filename),t=d.a.createElement("div",{className:"image-links"},e,d.a.createElement("a",Object.assign({href:this.props.fileURL,className:"text",target:"_blank",rel:"noopener noreferrer"},n),a))}return d.a.createElement("div",{"data-testid":"fileCountFooter",ref:"imageFooter",className:"modal-button-bar"},d.a.createElement("span",{className:"pull-left text"},d.a.createElement(N.a,{id:"view_image_popover.file",defaultMessage:"File {count, number} of {total, number}",values:{count:this.props.fileIndex+1,total:this.props.totalFiles}})),t)}}I(j,"propTypes",{fileIndex:l.a.number.isRequired,totalFiles:l.a.number.isRequired,filename:l.a.string.isRequired,fileURL:l.a.string.isRequired,showPublicLink:l.a.bool,enablePublicLink:l.a.bool.isRequired,canDownloadFiles:l.a.bool.isRequired,isExternalFile:l.a.bool.isRequired,onGetPublicLink:l.a.func}),I(j,"defaultProps",{fileIndex:0,totalFiles:0,filename:"",fileURL:"",showPublicLink:!0});var A=j;function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){L(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const D=d.a.lazy(()=>a.e(29).then(a.bind(null,2019))),x=p.Q.KeyCodes;class U extends d.a.PureComponent{constructor(e){super(e),L(this,"handleNext",e=>{e&&e.stopPropagation();let t=this.state.imageIndex+1;t>this.props.fileInfos.length-1&&(t=0),this.showImage(t)}),L(this,"handlePrev",e=>{e&&e.stopPropagation();let t=this.state.imageIndex-1;t<0&&(t=this.props.fileInfos.length-1),this.showImage(t)}),L(this,"handleKeyPress",e=>{g.Z(e,x.RIGHT)?this.handleNext():g.Z(e,x.LEFT)&&this.handlePrev()}),L(this,"onModalShown",e=>{document.addEventListener("keyup",this.handleKeyPress),this.showImage(e.startIndex)}),L(this,"onModalHidden",()=>{document.removeEventListener("keyup",this.handleKeyPress),this.refs.video&&this.refs.video.stop()}),L(this,"showImage",e=>{this.setState({imageIndex:e});const t=window.innerHeight-100;this.setState({imageHeight:t}),this.state.loaded[e]||this.loadImage(e)}),L(this,"loadImage",e=>{const t=this.props.fileInfos[e];if(g.z(t.extension)===p.n.IMAGE&&Boolean(t.id)){let a;a=t.has_image_preview?Object(u.getFilePreviewUrl)(t.id):Object(u.getFileUrl)(t.id),g.kb(a,()=>this.handleImageLoaded(e),t=>this.handleImageProgress(e,t))}else this.handleImageLoaded(e)}),L(this,"handleImageLoaded",e=>{this.setState(t=>({loaded:k({},t.loaded,{[e]:!0})}))}),L(this,"handleImageProgress",(e,t)=>{this.setState(a=>({progress:k({},a.progress,{[e]:t})}))}),L(this,"handleGetPublicLink",()=>{this.props.onModalDismissed(),h.j(this.props.fileInfos[this.state.imageIndex].id)}),L(this,"onMouseEnterImage",()=>{this.setState({showCloseBtn:!0})}),L(this,"onMouseLeaveImage",()=>{this.setState({showCloseBtn:!1})}),this.state={imageIndex:this.props.startIndex,imageHeight:"100%",loaded:g.o(!1,this.props.fileInfos.length),progress:g.o(0,this.props.fileInfos.length),showCloseBtn:!1}}UNSAFE_componentWillReceiveProps(e){!0===e.show&&!1===this.props.show?this.onModalShown(e):!1===e.show&&!0===this.props.show&&this.onModalHidden(),this.props.fileInfos.length!==e.fileInfos.length&&this.setState({loaded:g.o(!1,e.fileInfos.length),progress:g.o(0,e.fileInfos.length)})}render(){if(this.props.fileInfos.length<1||this.props.fileInfos.length-1<this.state.imageIndex)return null;const e=this.props.fileInfos[this.state.imageIndex],t=!e.link,a=e.link||e.name,n=e.link||Object(u.getFileUrl)(e.id),s=e.link||Object(u.getFileDownloadUrl)(e.id),i=!e.id;let r,o="a11y__modal modal-image";if(this.state.loaded[this.state.imageIndex]){const t=g.z(e.extension);t===p.n.IMAGE||t===p.n.SVG?r=d.a.createElement(M,{fileInfo:e,canDownloadFiles:this.props.canDownloadFiles}):t===p.n.VIDEO||t===p.n.AUDIO?r=d.a.createElement(C,{fileInfo:e,fileUrl:n}):e&&e.extension&&e.extension===p.n.PDF?r=d.a.createElement(d.a.Suspense,{fallback:null},d.a.createElement(D,{fileInfo:e,fileUrl:n})):S.supports(e)?(o+=" modal-code",r=d.a.createElement(S,{fileInfo:e,fileUrl:n})):r=d.a.createElement(v.a,{fileInfo:e,fileUrl:n})}else{const e=g.lb("view_image.loading","Loading"),t=Math.floor(this.state.progress[this.state.imageIndex]);r=d.a.createElement(P.a,{loading:e,progress:t})}for(const t of this.props.pluginFilePreviewComponents)if(t.override(e,this.props.post)){r=d.a.createElement(t.component,{fileInfo:e,post:this.props.post});break}let l=null,c=null;this.props.fileInfos.length>1&&(l=d.a.createElement("a",{id:"previewArrowLeft",ref:"previewArrowLeft",className:"modal-prev-bar",href:"#",onClick:this.handlePrev},d.a.createElement("i",{className:"image-control image-prev"})),c=d.a.createElement("a",{id:"previewArrowRight",ref:"previewArrowRight",className:"modal-next-bar",href:"#",onClick:this.handleNext},d.a.createElement("i",{className:"image-control image-next"})));let h="modal-close";return this.state.showCloseBtn&&(h+=" modal-close--show"),d.a.createElement(m.a,{show:this.props.show,onHide:this.props.onModalDismissed,className:"modal-image",dialogClassName:o,role:"dialog","aria-labelledby":"viewImageModalLabel"},d.a.createElement(m.a.Body,null,d.a.createElement("div",{className:"modal-image__wrapper",onClick:this.props.onModalDismissed},d.a.createElement("div",{onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:e=>e.stopPropagation()},d.a.createElement(m.a.Title,{componentClass:"h1",id:"viewImageModalLabel",className:"hide"},a),d.a.createElement("div",{className:h,onClick:this.props.onModalDismissed}),d.a.createElement("div",{className:"modal-image__content"},r),d.a.createElement(A,{showPublicLink:t,fileIndex:this.state.imageIndex,totalFiles:this.props.fileInfos.length,filename:a,fileURL:s,enablePublicLink:this.props.enablePublicLink,canDownloadFiles:this.props.canDownloadFiles,isExternalFile:i,onGetPublicLink:this.handleGetPublicLink}))),l,c))}}L(U,"propTypes",{post:l.a.object.isRequired,show:l.a.bool.isRequired,onModalDismissed:l.a.func.isRequired,fileInfos:l.a.arrayOf(l.a.object).isRequired,startIndex:l.a.number.isRequired,canDownloadFiles:l.a.bool.isRequired,enablePublicLink:l.a.bool.isRequired,pluginFilePreviewComponents:l.a.arrayOf(l.a.object)}),L(U,"defaultProps",{show:!1,fileInfos:[],startIndex:0,pluginFilePreviewComponents:[],post:{}});t.a=Object(n.connect)((function(e,t){const a=Object(s.getConfig)(e);return{canDownloadFiles:Object(r.a)(a),enablePublicLink:"true"===a.EnablePublicLink,pluginFilePreviewComponents:e.plugins.components.FilePreview,post:t.post||Object(i.getPost)(e,t.postId)}}))(U)},1280:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(1132),r=(a(176),a(33)),o=a.n(r),l=a(6),c=a.n(l),d=a(320),m=a(1127);function u(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends c.a.PureComponent{show(e){e&&e.preventDefault();const{modalId:t,dialogProps:a,dialogType:n}=this.props,s={modalId:t,dialogProps:a,dialogType:n};this.props.actions.openModal(s)}render(){const e=this.props,{children:t,onClick:a}=e,n=u(e,["children","onClick"]),{formatMessage:s}=this.props.intl,i=s({id:"accessibility.button.dialog",defaultMessage:"{dialogName} dialog"},{dialogName:n.accessibilityLabel});delete n.modalId,delete n.dialogType,delete n.dialogProps,delete n.accessibilityLabel;let r=()=>this.show();return a&&(r=e=>{a(),this.show(e)}),c.a.createElement("button",Object.assign({},n,{className:"style--none "+n.className,"data-toggle":"modal toggle","aria-label":i,onClick:r}),t)}}h(p,"propTypes",{accessibilityLabel:o.a.string,children:o.a.node.isRequired,modalId:o.a.string.isRequired,dialogType:o.a.func.isRequired,dialogProps:o.a.object,intl:m.a.isRequired,onClick:o.a.func,className:o.a.string,actions:o.a.shape({openModal:o.a.func.isRequired}).isRequired}),h(p,"defaultProps",{dialogProps:{},className:""});var g=Object(d.c)(p);t.a=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({openModal:i.b},e)}}))(g)},1281:function(e,t,a){"use strict";var n,s,i,r=a(315),o=a(16),l=a(1176),c=a(33),d=a.n(c),m=a(6),u=a.n(m),h=a(15);class p extends u.a.PureComponent{render(){const e=this.props.fileInfo,t=this.props.fileUrl,a=[];""!==e.extension&&a.push(h.lb("file_info_preview.type","File type ")+e.extension.toUpperCase()),e.size&&a.push(h.lb("file_info_preview.size","Size ")+h.n(e.size));const n=a.join(", ");let s=null;return s=this.props.canDownloadFiles?u.a.createElement("a",{className:"file-details__preview",href:t,target:"_blank",rel:"noopener noreferrer"},u.a.createElement("span",{className:"file-details__preview-helper"}),u.a.createElement("img",{alt:"file preview",src:h.y(e)})):u.a.createElement("span",{className:"file-details__preview"},u.a.createElement("span",{className:"file-details__preview-helper"}),u.a.createElement("img",{alt:"file preview",src:h.y(e)})),u.a.createElement("div",{className:"file-details__container"},s,u.a.createElement("div",{className:"file-details"},u.a.createElement("div",{className:"file-details__name"},e.name),u.a.createElement("div",{className:"file-details__info"},n)))}}n=p,s="propTypes",i={fileInfo:d.a.shape({name:d.a.string.isRequired,extension:d.a.string.isRequired,size:d.a.number.isRequired}).isRequired,fileUrl:d.a.string.isRequired,canDownloadFiles:d.a.bool.isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;t.a=Object(r.connect)((function(e){const t=Object(o.getConfig)(e);return{canDownloadFiles:Object(l.a)(t)}}))(p)},1282:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(17),r=a(16),o=a(9),l=(a(54),a(33)),c=a.n(l),d=a(6),m=a.n(d),u=a(1365),h=a(316),p=a.n(h),g=a(1405),b=a(1113),f=a(320),_=a(0),E=a(15),v=a(13),y=a(1128);function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=m.a.lazy(()=>Promise.all([a.e(1),a.e(21),a.e(17)]).then(a.bind(null,2021))),O=m.a.lazy(()=>a.e(3).then(a.bind(null,2017))),T=Object(g.defineMessages)({general:{id:Object(v.b)("user.settings.modal.general"),defaultMessage:"General"},security:{id:Object(v.b)("user.settings.modal.security"),defaultMessage:"Security"},notifications:{id:Object(v.b)("user.settings.modal.notifications"),defaultMessage:"Notifications"},display:{id:Object(v.b)("user.settings.modal.display"),defaultMessage:"Display"},sidebar:{id:Object(v.b)("user.settings.modal.sidebar"),defaultMessage:"Sidebar"},advanced:{id:Object(v.b)("user.settings.modal.advanced"),defaultMessage:"Advanced"},checkEmail:{id:"user.settings.general.checkEmail",defaultMessage:"Check your email at {email} to verify the address. Cannot find the email?"},confirmTitle:{id:Object(v.b)("user.settings.modal.confirmTitle"),defaultMessage:"Discard Changes?"},confirmMsg:{id:Object(v.b)("user.settings.modal.confirmMsg"),defaultMessage:"You have unsaved changes, are you sure you want to discard them?"},confirmBtns:{id:Object(v.b)("user.settings.modal.confirmBtns"),defaultMessage:"Yes, Discard"}});class S extends m.a.PureComponent{constructor(e){super(e),C(this,"requireConfirm",void 0),C(this,"customConfirmAction",void 0),C(this,"modalBodyRef",void 0),C(this,"afterConfirm",void 0),C(this,"handleResend",e=>{this.setState({resendStatus:"sending"}),this.props.actions.sendVerificationEmail(e).then(({data:e,error:t})=>{e?this.setState({resendStatus:"success"}):t&&this.setState({resendStatus:"failure"})})}),C(this,"handleKeyDown",e=>{E.e(e)&&e.shiftKey&&E.Z(e,_.Q.KeyCodes.A)&&this.handleHide()}),C(this,"handleHide",()=>{this.requireConfirm?this.showConfirmModal(()=>this.handleHide()):this.setState({show:!1})}),C(this,"handleHidden",()=>{this.setState({active_tab:"general",active_section:""}),this.props.onHide()}),C(this,"handleCollapse",()=>{p.a.findDOMNode(this.modalBodyRef.current).closest(".modal-dialog").classList.remove("display--content"),this.setState({active_tab:"",active_section:""})}),C(this,"handleConfirm",()=>{this.setState({showConfirmModal:!1,enforceFocus:!0}),this.requireConfirm=!1,this.customConfirmAction=null,this.afterConfirm&&(this.afterConfirm(),this.afterConfirm=null)}),C(this,"handleCancelConfirmation",()=>{this.setState({showConfirmModal:!1,enforceFocus:!0}),this.afterConfirm=null}),C(this,"showConfirmModal",e=>{e&&(this.afterConfirm=e),this.customConfirmAction?this.customConfirmAction(this.handleConfirm):this.setState({showConfirmModal:!0,enforceFocus:!1})}),C(this,"closeModal",()=>{this.requireConfirm?this.showConfirmModal(this.closeModal):this.handleHide()}),C(this,"collapseModal",()=>{this.requireConfirm?this.showConfirmModal(this.collapseModal):this.handleCollapse()}),C(this,"updateTab",(e,t)=>{!t&&this.requireConfirm?this.showConfirmModal(()=>this.updateTab(e,!0)):this.setState({active_tab:e,active_section:""})}),C(this,"updateSection",(e,t)=>{!t&&this.requireConfirm?this.showConfirmModal(()=>this.updateSection(e,!0)):this.setState({active_section:e})}),this.state={active_tab:"general",active_section:"",showConfirmModal:!1,enforceFocus:!0,show:!0,resendStatus:""},this.requireConfirm=!1,this.customConfirmAction=null,this.afterConfirm=null,this.modalBodyRef=m.a.createRef()}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e,t){if(this.state.active_tab!==t.active_tab){p.a.findDOMNode(this.modalBodyRef.current).scrollTop=0}}render(){const{formatMessage:e}=this.props.intl;if(null==this.props.currentUser)return m.a.createElement("div",null);const t=[];return t.push({name:"general",uiName:e(T.general),icon:"icon fa fa-gear",iconTitle:E.lb("user.settings.general.icon","General Settings Icon")}),t.push({name:"security",uiName:e(T.security),icon:"icon fa fa-lock",iconTitle:E.lb("user.settings.security.icon","Security Settings Icon")}),t.push({name:"notifications",uiName:e(T.notifications),icon:"icon fa fa-exclamation-circle",iconTitle:E.lb("user.settings.notifications.icon","Notification Settings Icon")}),t.push({name:"display",uiName:e(T.display),icon:"icon fa fa-eye",iconTitle:E.lb("user.settings.display.icon","Display Settings Icon")}),t.push({name:"sidebar",uiName:e(T.sidebar),icon:"icon fa fa-columns",iconTitle:E.lb("user.settings.sidebar.icon","Sidebar Settings Icon")}),t.push({name:"advanced",uiName:e(T.advanced),icon:"icon fa fa-list-alt",iconTitle:E.lb("user.settings.advance.icon","Advanced Settings Icon")}),m.a.createElement(u.a,{id:"accountSettingsModal",dialogClassName:"a11y__modal settings-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHidden,enforceFocus:this.state.enforceFocus,role:"dialog","aria-labelledby":"accountSettingsModalLabel"},m.a.createElement(u.a.Header,{id:"accountSettingsHeader",closeButton:!0},m.a.createElement(u.a.Title,{componentClass:"h1",id:"accountSettingsModalLabel"},m.a.createElement(b.a,{id:"user.settings.modal.title",defaultMessage:"Account Settings"}))),m.a.createElement(u.a.Body,{ref:this.modalBodyRef},m.a.createElement("div",{className:"settings-table"},m.a.createElement("div",{className:"settings-links"},m.a.createElement(m.a.Suspense,{fallback:null},m.a.createElement(O,{tabs:t,activeTab:this.state.active_tab,updateTab:this.updateTab}))),m.a.createElement("div",{className:"settings-content minimize-settings"},m.a.createElement(m.a.Suspense,{fallback:null},m.a.createElement(w,{activeTab:this.state.active_tab,activeSection:this.state.active_section,updateSection:this.updateSection,updateTab:this.updateTab,closeModal:this.closeModal,collapseModal:this.collapseModal,setEnforceFocus:e=>this.setState({enforceFocus:e}),setRequireConfirm:(e,t)=>{this.requireConfirm=e,this.customConfirmAction=t}}))))),m.a.createElement(y.a,{title:e(T.confirmTitle),message:e(T.confirmMsg),confirmButtonText:e(T.confirmBtns),show:this.state.showConfirmModal,onConfirm:this.handleConfirm,onCancel:this.handleCancelConfirmation}))}}C(S,"propTypes",{currentUser:c.a.any.isRequired,onHide:c.a.func.isRequired,intl:c.a.any.isRequired,actions:c.a.shape({sendVerificationEmail:c.a.func.isRequired}).isRequired});var P=Object(f.c)(S);t.a=Object(n.connect)((function(e){const t=Object(r.getConfig)(e),a="true"===t.CloseUnusedDirectMessages,n="true"===t.ExperimentalChannelOrganization,s="true"===t.SendEmailNotifications,i="true"===t.RequireEmailVerification;return{currentUser:Object(o.getCurrentUser)(e),closeUnusedDirectMessages:a,experimentalChannelOrganization:n,sendEmailNotifications:s,requireEmailVerification:i}}),(function(e){return{actions:Object(s.bindActionCreators)({sendVerificationEmail:i.sendVerificationEmail},e)}}))(P)},1283:function(e,t,a){"use strict";a(122),a(99),a(177);var n=a(315),s=a(11),i=a(1184),r=a(1171),o=a(19),l=a(1178),c=(a(176),a(54),a(35),a(33)),d=a.n(c),m=a(6),u=a.n(m),h=a(1365),p=a(1113),g=a(10),b=a(0),f=a(15),_=a(1206),E=a(1268),v=a.n(E),y=a(1216);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends u.a.PureComponent{constructor(e){super(e),w(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),w(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),w(this,"handleResponse",e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})}),w(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=this.state.values.map(e=>e.id);if(0!==t.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(t),void this.handleHide();this.setState({saving:!0}),t.forEach(async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentTeamId,g.Groups.SYNCABLE_TYPE_TEAM,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})}}),w(this,"addValue",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);e&&e.id&&-1===a.indexOf(e.id)&&t.push(e),this.setState({values:t})}),w(this,"setGroupsLoadingState",e=>{this.setState({loadingGroups:e})}),w(this,"handlePageChange",(e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,this.props.searchTerm,e,51).then(()=>{this.setGroupsLoadingState(!1)}))}),w(this,"handleDelete",e=>{this.setState({values:e})}),w(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0}}componentDidMount(){Promise.all([this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,"",0,51),this.props.actions.getAllGroupsAssociatedToTeam(this.props.currentTeamId)]).then(()=>{this.setGroupsLoadingState(!1)})}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=setTimeout(async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,e),this.setGroupsLoadingState(!1)},b.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a,n){const s=t?"more-modal__row--selected":"";return u.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+s,onClick:()=>a(e),onMouseMove:()=>n(e)},u.a.createElement("img",{className:"more-modal__image",src:v.a,alt:"group picture",width:"32",height:"32"}),u.a.createElement("div",{className:"more-modal__details"},u.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",u.a.createElement("span",{className:"more-modal__name_sub"},u.a.createElement(p.a,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),u.a.createElement("div",{className:"more-modal__actions"},u.a.createElement("div",{className:"more-modal__actions--round"},u.a.createElement(y.a,null))))}renderValue(e){return e.data.display_name}render(){const e=u.a.createElement("div",{id:"numGroupsRemaining"},u.a.createElement(p.a,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),t=Object(f.lb)("multiselect.add","Add"),a=Object(f.lb)("multiselect.adding","Adding...");let n=null;this.state.addError&&(n=u.a.createElement("div",{className:"has-error col-sm-12"},u.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let s=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find(t=>t.id===e.id);s=s.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find(t=>t.id===e.id);s=[...s,...this.props.includeGroups.filter(e)]}return s=s.map(e=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({label:e.display_name,value:e.id},e)),u.a.createElement(h.a,{id:"addGroupsToTeamModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},u.a.createElement(h.a.Header,{closeButton:!0},u.a.createElement(h.a.Title,{componentClass:"h1"},u.a.createElement(p.a,{id:"add_groups_to_team.title",defaultMessage:"Add New Groups to {teamName} Team",values:{teamName:u.a.createElement("strong",null,this.props.currentTeamName)}}))),u.a.createElement(h.a.Body,null,n,u.a.createElement(_.a,{key:"addGroupsToTeamKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:a,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(f.lb)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}w(O,"propTypes",{currentTeamName:d.a.string.isRequired,currentTeamId:d.a.string.isRequired,searchTerm:d.a.string.isRequired,groups:d.a.array.isRequired,excludeGroups:d.a.arrayOf(d.a.object),includeGroups:d.a.arrayOf(d.a.object),onHide:d.a.func,skipCommit:d.a.bool,onAddCallback:d.a.func,actions:d.a.shape({getGroupsNotAssociatedToTeam:d.a.func.isRequired,setModalSearchTerm:d.a.func.isRequired,linkGroupSyncable:d.a.func.isRequired,getAllGroupsAssociatedToTeam:d.a.func.isRequired}).isRequired});t.a=Object(n.connect)((function(e,t){const a=e.views.search.modalSearch,n=t.team||Object(o.getCurrentTeam)(e)||{};let s=Object(r.getGroupsNotAssociatedToTeam)(e,n.id);if(a){const e=RegExp(a,"i");s=s.filter(t=>e.test(t.display_name)||e.test(t.name))}return{currentTeamName:n.display_name,currentTeamId:n.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:a,groups:s}}),(function(e){return{actions:Object(s.bindActionCreators)({getGroupsNotAssociatedToTeam:i.getGroupsNotAssociatedToTeam,setModalSearchTerm:l.a,linkGroupSyncable:i.linkGroupSyncable,getAllGroupsAssociatedToTeam:i.getAllGroupsAssociatedToTeam},e)}}))(O)},1284:function(e,t,a){"use strict";a(122),a(99),a(177);var n=a(315),s=a(11),i=a(1184),r=a(178),o=a(1171),l=a(12),c=a(1178),d=(a(176),a(54),a(35),a(33)),m=a.n(d),u=a(6),h=a.n(u),p=a(1365),g=a(1113),b=a(10),f=a(0),_=a(15),E=a(1206),v=a(1268),y=a.n(v),C=a(1216);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends h.a.PureComponent{constructor(e){super(e),O(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})}),O(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),O(this,"handleResponse",e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})}),O(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=this.state.values.map(e=>e.id);if(0!==t.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(t),void this.handleHide();this.setState({saving:!0}),t.forEach(async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentChannelId,b.Groups.SYNCABLE_TYPE_CHANNEL,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})}}),O(this,"addValue",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);e&&e.id&&-1===a.indexOf(e.id)&&t.push(e),this.setState({values:t})}),O(this,"setGroupsLoadingState",e=>{this.setState({loadingGroups:e})}),O(this,"handlePageChange",(e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,this.props.searchTerm,e,51,!0).then(()=>{this.setGroupsLoadingState(!1)}))}),O(this,"handleDelete",e=>{this.setState({values:e})}),O(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0}}componentDidMount(){Promise.all([this.props.actions.getTeam(this.props.teamID),this.props.actions.getAllGroupsAssociatedToTeam(this.props.teamID),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,"",0,51,!0),this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId)]).then(()=>{this.setGroupsLoadingState(!1)})}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=setTimeout(async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,e,null,null,!0),this.setGroupsLoadingState(!1)},f.Q.SEARCH_TIMEOUT_MILLISECONDS)}}renderOption(e,t,a,n){const s=t?"more-modal__row--selected":"";return h.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+s,onClick:()=>a(e),onMouseMove:()=>n(e)},h.a.createElement("img",{className:"more-modal__image",src:y.a,alt:"group picture",width:"32",height:"32"}),h.a.createElement("div",{className:"more-modal__details"},h.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",h.a.createElement("span",{className:"more-modal__name_sub"},h.a.createElement(g.a,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),h.a.createElement("div",{className:"more-modal__actions"},h.a.createElement("div",{className:"more-modal__actions--round"},h.a.createElement(C.a,null))))}renderValue(e){return e.data.display_name}render(){const e=h.a.createElement("div",{id:"numGroupsRemaining"},h.a.createElement(g.a,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),t=Object(_.lb)("multiselect.add","Add"),a=Object(_.lb)("multiselect.adding","Adding...");let n=null;this.state.addError&&(n=h.a.createElement("div",{className:"has-error col-sm-12"},h.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let s=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find(t=>t.id===e.id);s=s.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find(t=>t.id===e.id);s=[...s,...this.props.includeGroups.filter(e)]}return s=s.map(e=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({label:e.display_name,value:e.id},e)),h.a.createElement(p.a,{id:"addGroupsToChannelModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},h.a.createElement(p.a.Header,{closeButton:!0},h.a.createElement(p.a.Title,null,h.a.createElement(g.a,{id:"add_groups_to_channel.title",defaultMessage:"Add New Groups to {channelName} Channel",values:{channelName:h.a.createElement("strong",null,this.props.currentChannelName)}}))),h.a.createElement(p.a.Body,null,n,h.a.createElement(E.a,{key:"addGroupsToChannelKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:a,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(_.lb)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}O(T,"propTypes",{currentChannelName:m.a.string.isRequired,currentChannelId:m.a.string.isRequired,teamID:m.a.string.isRequired,searchTerm:m.a.string.isRequired,groups:m.a.array.isRequired,excludeGroups:m.a.arrayOf(m.a.object),includeGroups:m.a.arrayOf(m.a.object),onHide:m.a.func,skipCommit:m.a.bool,onAddCallback:m.a.func,actions:m.a.shape({getGroupsNotAssociatedToChannel:m.a.func.isRequired,setModalSearchTerm:m.a.func.isRequired,linkGroupSyncable:m.a.func.isRequired,getAllGroupsAssociatedToChannel:m.a.func.isRequired,getTeam:m.a.func.isRequired,getAllGroupsAssociatedToTeam:m.a.func.isRequired}).isRequired});t.a=Object(n.connect)((function(e,t){const a=e.views.search.modalSearch,n=t.channel||Object(l.getCurrentChannel)(e)||{};let s=Object(o.getGroupsNotAssociatedToChannel)(e,n.id,n.team_id);if(a){const e=RegExp(a,"i");s=s.filter(t=>e.test(t.display_name)||e.test(t.name))}return{currentChannelName:n.display_name,currentChannelId:n.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:a,groups:s,teamID:n.team_id}}),(function(e){return{actions:Object(s.bindActionCreators)({getGroupsNotAssociatedToChannel:i.getGroupsNotAssociatedToChannel,setModalSearchTerm:c.a,linkGroupSyncable:i.linkGroupSyncable,getAllGroupsAssociatedToChannel:i.getAllGroupsAssociatedToChannel,getTeam:r.getTeam,getAllGroupsAssociatedToTeam:i.getAllGroupsAssociatedToTeam},e)}}))(T)},1285:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(178),r=a(17),o=a(9),l=a(1156),c=(a(176),a(54),a(118),a(177),a(73),a(35),a(33)),d=a.n(c),m=a(6),u=a.n(m),h=a(1365),p=a(1113),g=a(22),b=a(39),f=a(15),_=a(1177),E=a(1206),v=a(1216),y=a(1169),C=a(1142),w=a(0);function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends u.a.PureComponent{constructor(e){super(e),O(this,"addValue",e=>{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})}),O(this,"onHide",()=>{this.setState({show:!1})}),O(this,"handleInviteError",e=>{e&&this.setState({saving:!1,inviteError:e.message})}),O(this,"handleDelete",e=>{this.setState({values:e})}),O(this,"setUsersLoadingState",e=>{this.setState({loadingUsers:e})}),O(this,"handlePageChange",(e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,e+1,50).then(()=>{this.setUsersLoadingState(!1)}))}),O(this,"handleSubmit",e=>{const{actions:t,channel:a}=this.props;e&&e.preventDefault();const n=this.state.values.map(e=>e.id);if(0!==n.length){if(this.props.skipCommit&&this.props.onAddCallback)return this.props.onAddCallback(this.state.values),this.setState({saving:!1,inviteError:null}),void this.onHide();this.setState({saving:!0}),t.addUsersToChannel(a.id,n).then(e=>{e.error?this.handleInviteError(e.error):(this.setState({saving:!1,inviteError:null}),this.onHide())})}}),O(this,"search",e=>{const t=e.trim();clearTimeout(this.searchTimeoutId),this.setState({term:t}),this.searchTimeoutId=setTimeout(async()=>{if(!t)return;this.setUsersLoadingState(!0);const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)},w.Q.SEARCH_TIMEOUT_MILLISECONDS)}),O(this,"renderAriaLabel",e=>e?e.username:null),O(this,"renderOption",(e,t,a,n)=>{var s="";return t&&(s="more-modal__row--selected"),u.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+s,onClick:()=>a(e),onMouseMove:()=>n(e)},u.a.createElement(_.a,{src:g.Client4.getProfilePictureUrl(e.id,e.last_picture_update),size:"md"}),u.a.createElement("div",{className:"more-modal__details"},u.a.createElement("div",{className:"more-modal__name"},Object(f.k)(e),u.a.createElement(C.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"}),u.a.createElement(y.a,{show:Object(f.Y)(e),className:"popoverlist"}))),u.a.createElement("div",{className:"more-modal__actions"},u.a.createElement("div",{className:"more-modal__actions--round"},u.a.createElement(v.a,null))))}),this.searchTimeoutId=0,this.state={values:[],term:"",show:!0,saving:!1,loadingUsers:!0}}componentDidMount(){this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,0).then(()=>{this.setUsersLoadingState(!1)}),this.props.actions.getTeamStats(this.props.channel.team_id)}renderValue(e){return e.data.username}render(){let e=null;this.state.inviteError&&(e=u.a.createElement("label",{className:"has-error control-label"},this.state.inviteError));const t=u.a.createElement(p.a,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:20-this.state.values.length}}),a=Object(f.lb)("multiselect.add","Add"),n=Object(f.lb)("multiselect.adding","Adding...");let s=Object(b.filterProfilesMatchingTerm)(this.props.profilesNotInCurrentChannel,this.state.term).filter(e=>0===e.delete_at&&!this.props.profilesNotInCurrentTeam.includes(e)&&!this.props.excludeUsers[e.id]);if(this.props.includeUsers){const e=Object.values(this.props.includeUsers);s=[...s,...e]}const i=u.a.createElement(E.a,{key:"addUsersToChannelKey",options:s,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:20,numRemainingText:t,buttonSubmitText:a,buttonSubmitLoadingText:n,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:Object(f.lb)("multiselect.placeholder","Search and add members")});return u.a.createElement(h.a,{id:"addUsersToChannelModal",dialogClassName:"a11y__modal more-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInviteModalLabel"},u.a.createElement(h.a.Header,{closeButton:!0},u.a.createElement(h.a.Title,{componentClass:"h1",id:"channelInviteModalLabel"},u.a.createElement(p.a,{id:"channel_invite.addNewMembers",defaultMessage:"Add New Members to "}),u.a.createElement("span",{className:"name"},this.props.channel.display_name))),u.a.createElement(h.a.Body,{role:"application"},e,i))}}O(T,"propTypes",{profilesNotInCurrentChannel:d.a.array.isRequired,profilesNotInCurrentTeam:d.a.array.isRequired,onHide:d.a.func.isRequired,channel:d.a.object.isRequired,skipCommit:d.a.bool,onAddCallback:d.a.func,excludeUsers:d.a.object,includeUsers:d.a.object,actions:d.a.shape({addUsersToChannel:d.a.func.isRequired,getProfilesNotInChannel:d.a.func.isRequired,getTeamStats:d.a.func.isRequired,searchProfiles:d.a.func.isRequired}).isRequired}),O(T,"defaultProps",{includeUsers:{},excludeUsers:{},skipCommit:!1});t.a=Object(n.connect)((function(e,t){let a;return t.channelId&&t.teamId&&(a=Object(o.makeGetProfilesNotInChannel)()),(e,t)=>{let n=[],s=[];return a?(n=a(e,t.channelId),s=Object(o.getProfilesNotInTeam)(e,t.teamId)):(n=Object(o.getProfilesNotInCurrentChannel)(e),s=Object(o.getProfilesNotInCurrentTeam)(e)),{profilesNotInCurrentChannel:n,profilesNotInCurrentTeam:s}}}),(function(e){return{actions:Object(s.bindActionCreators)({addUsersToChannel:l.a,getProfilesNotInChannel:r.getProfilesNotInChannel,getTeamStats:i.getTeamStats,searchProfiles:r.searchProfiles},e)}}))(T)},1300:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));a(176),a(54);var n=a(6),s=a.n(n),i=a(22),r=a(15),o=a(1169),l=a(1142),c=a(1145),d=a(1151),m=a(1152);class u extends m.a{render(){const{item:e,isSelection:t}=this.props;let a="suggestion-list__item mentions__name";t&&(a+=" suggestion--selected");const n=e.username;let d="";return(e.first_name||e.last_name)&&e.nickname?d="- ".concat(r.A(e)," (").concat(e.nickname,")"):e.nickname?d="- (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(d="- ".concat(r.A(e))),s.a.createElement("div",Object.assign({className:a,onClick:this.handleClick,onMouseMove:this.handleMouseMove},m.a.baseProps),s.a.createElement(c.a,{size:"xs",username:n,url:i.Client4.getUsersRoute()+"/"+e.id+"/image?_="+(e.last_picture_update||0)}),s.a.createElement("span",{className:"admin-setting-user--align"},"@"+n),s.a.createElement("span",{className:"admin-setting-user__fullname"}," ",d),s.a.createElement(l.a,{show:Boolean(e.is_bot)}),s.a.createElement(o.a,{show:r.Y(e)}))}}class h extends d.a{constructor(e){super(),this.autocompleteUsers=e}async handlePretextChanged(e,t){const a=e.toLowerCase();this.startNewRequest(a);const n=await this.autocompleteUsers(a);if(this.shouldCancelDispatch(a))return!1;const s=Object.assign([],n.users);return t({matchedPretext:a,terms:s.map(e=>e.username),items:s,component:u}),!0}}},1301:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i);const o=({inputId:e,label:t,labelClassName:a,inputClassName:n,children:s,footer:i,helpText:o})=>r.a.createElement("div",{"data-testid":e,className:"form-group"},r.a.createElement("label",{"data-testid":e+"label",className:"control-label "+a,htmlFor:e},t),r.a.createElement("div",{className:n},s,r.a.createElement("div",{"data-testid":e+"help-text",className:"help-text"},o),i));o.propTypes={inputId:s.a.string,label:s.a.node.isRequired,labelClassName:s.a.string,inputClassName:s.a.string,children:s.a.node.isRequired,helpText:s.a.node,footer:s.a.node},t.a=o},1305:function(e,t,a){"use strict";a(176);var n=a(1561);const s=a(0).Q.PayloadSources,i=Object.assign(new n.Dispatcher,{handleServerAction:function(e){e.type||console.warn("handleServerAction called with undefined action type");var t={source:s.SERVER_ACTION,action:e};this.dispatch(t)},handleViewAction:function(e){e.type||console.warn("handleViewAction called with undefined action type");var t={source:s.VIEW_ACTION,action:e};this.dispatch(t)}});t.a=i},1319:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0);function s(e){return t=>(t({type:n.f.DISMISS_NOTICE,data:e}),{data:!0})}},1321:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.mattermost",defaultMessage:"Mattermost Logo"},e=>s.a.createElement("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 500 500",style:o.background,role:"img","aria-label":e},s.a.createElement("g",null,s.a.createElement("g",null,s.a.createElement("path",{style:o.st0,d:"M396.9,47.7l2.6,53.1c43,47.5,60,114.8,38.6,178.1c-32,94.4-137.4,144.1-235.4,110.9 S51.1,253.1,83,158.7C104.5,95.2,159.2,52,222.5,40.5l34.2-40.4C150-2.8,49.3,63.4,13.3,169.9C-31,300.6,39.1,442.5,169.9,486.7 s272.6-25.8,316.9-156.6C522.7,223.9,483.1,110.3,396.9,47.7z"})),s.a.createElement("path",{style:o.st0,d:"M335.6,204.3l-1.8-74.2l-1.5-42.7l-1-37c0,0,0.2-17.8-0.4-22c-0.1-0.9-0.4-1.6-0.7-2.2 c0-0.1-0.1-0.2-0.1-0.3c0-0.1-0.1-0.2-0.1-0.2c-0.7-1.2-1.8-2.1-3.1-2.6c-1.4-0.5-2.9-0.4-4.2,0.2c0,0-0.1,0-0.1,0 c-0.2,0.1-0.3,0.1-0.4,0.2c-0.6,0.3-1.2,0.7-1.8,1.3c-3,3-13.7,17.2-13.7,17.2l-23.2,28.8l-27.1,33l-46.5,57.8 c0,0-21.3,26.6-16.6,59.4s29.1,48.7,48,55.1c18.9,6.4,48,8.5,71.6-14.7C336.4,238.4,335.6,204.3,335.6,204.3z"})))))}}const o={background:{enableBackground:"new 0 0 500 500"},st0:{fillRule:"evenodd",clipRule:"evenodd"}}},1322:function(e,t,a){e.exports=a.p+"files/fb02f374b8f73825415db1bccd4bd76d.gif"},1327:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement("span",this.props,s.a.createElement(i.a,{id:"generic_icons.mention",defaultMessage:"Mention Icon"},e=>s.a.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 18 18",version:"1.1",role:"img","aria-label":e,fill:"#555555"},s.a.createElement("path",{d:"M9 11.7C9.72 11.7 10.35 11.43 10.89 10.89C11.43 10.35 11.7 9.71999 11.7 8.99999C11.7 8.27999 11.43 7.64999 10.89 7.10999C10.35 6.56999 9.72 6.29999 9 6.29999C8.28 6.29999 7.65 6.56999 7.11 7.10999C6.57 7.64999 6.3 8.27999 6.3 8.99999C6.3 9.71999 6.57 10.35 7.11 10.89C7.65 11.43 8.28 11.7 9 11.7ZM9 -1.26362e-05C11.46 -1.26362e-05 13.56 0.869987 15.3 2.60999C16.176 3.48599 16.842 4.45199 17.298 5.50799C17.766 6.59999 18 7.76399 18 8.99999V10.26C18 10.692 17.916 11.118 17.748 11.538C17.592 11.922 17.376 12.276 17.1 12.6C16.788 12.912 16.446 13.14 16.074 13.284C15.714 13.428 15.306 13.5 14.85 13.5C13.746 13.5 12.876 13.05 12.24 12.15C11.34 13.05 10.26 13.5 9 13.5C7.716 13.5 6.666 13.05 5.85 12.15C4.95 11.25 4.5 10.2 4.5 8.99999C4.5 7.70399 4.95 6.65399 5.85 5.84999C6.666 4.94999 7.716 4.49999 9 4.49999C10.296 4.49999 11.346 4.94999 12.15 5.84999C13.05 6.74999 13.5 7.79999 13.5 8.99999V10.26C13.5 10.44 13.536 10.614 13.608 10.782C13.692 10.95 13.8 11.106 13.932 11.25C14.076 11.382 14.232 11.49 14.4 11.574C14.568 11.658 14.718 11.7 14.85 11.7C15.03 11.7 15.204 11.664 15.372 11.592C15.54 11.508 15.696 11.394 15.84 11.25C16.08 11.01 16.2 10.68 16.2 10.26V8.99999C16.2 7.01999 15.48 5.30999 14.04 3.86999C13.332 3.16199 12.564 2.63999 11.736 2.30399C10.908 1.96799 9.996 1.79999 9 1.79999C7.056 1.79999 5.346 2.48999 3.87 3.86999C3.174 4.52999 2.652 5.30399 2.304 6.19199C1.968 7.04399 1.8 7.97999 1.8 8.99999C1.8 9.98399 1.974 10.902 2.322 11.754C2.67 12.594 3.186 13.356 3.87 14.04C4.554 14.724 5.328 15.252 6.192 15.624C7.092 16.008 8.028 16.2 9 16.2H13.5V18H9C7.752 18 6.6 17.772 5.544 17.316C4.488 16.872 3.51 16.2 2.61 15.3C1.71 14.4 1.05 13.44 0.63 12.42C0.21 11.4 0 10.266 0 9.01799C0 7.75799 0.222 6.59399 0.666 5.52599C1.098 4.49399 1.746 3.52199 2.61 2.60999C4.266 0.869987 6.396 -1.26362e-05 9 -1.26362e-05Z"}))))}}},1356:function(e,t,a){"use strict";a(176);var n,s,i,r=a(6),o=a.n(r),l=a(1568),c=a(1514),d=a(315),m=a(16),u=(a(54),a(33)),h=a.n(u),p=a(1113);class g extends o.a.PureComponent{constructor(e){super(e),this.state={katex:null}}componentDidMount(){a.e(30).then(a.t.bind(null,2018,7)).then(e=>{this.setState({katex:e})})}render(){if(null==this.state.katex||!this.props.enableLatex)return o.a.createElement("div",{className:"post-body--code tex"},this.props.content);try{const e={throwOnError:!1,displayMode:!0,maxSize:200,maxExpand:100,fleqn:!0},t=this.state.katex.renderToString(this.props.content,e);return o.a.createElement("div",{className:"post-body--code tex",dangerouslySetInnerHTML:{__html:t}})}catch(e){return o.a.createElement("div",{className:"post-body--code tex"},o.a.createElement(p.a,{id:"katex.error",defaultMessage:"Couldn't compile your Latex code. Please review the syntax and try again."}))}}}n=g,s="propTypes",i={content:h.a.string.isRequired,enableLatex:h.a.bool.isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,g.defaultProps={enableLatex:!1};var b=Object(d.connect)((function(e){return{enableLatex:"true"===Object(m.getConfig)(e).EnableLatex}}))(g),f=a(1622),_=a(0),E=a(1249),v=a(1233),y=a(1279),C=a(1631),w=a.n(C);function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends o.a.PureComponent{constructor(e){super(e),O(this,"showModal",e=>{this.props.imageIsLink||(e.preventDefault(),this.setState({showModal:!0}))}),O(this,"hideModal",()=>{this.setState({showModal:!1})}),O(this,"handleLoadFail",()=>{this.setState({loadFailed:!0})}),O(this,"isHeaderChangeMessage",()=>this.props.postType&&this.props.postType===_.Q.PostTypes.HEADER_CHANGE),O(this,"onUpdated",e=>{this.props.src&&this.props.src!==e&&this.setState({loadFailed:!1})}),O(this,"handleImageLoaded",({height:e,width:t})=>{this.setState({loaded:!0},()=>{this.props.onImageLoaded&&this.props.onImageLoaded({height:e,width:t})})}),this.state={showModal:!1,loadFailed:!1,loaded:!1}}componentDidUpdate(e){this.onUpdated(e.src)}render(){const{imageMetadata:e,src:t,alt:a,imageIsLink:n}=this.props;if(""===t||this.state.loadFailed){let e="markdown-inline-img broken-image";return this.isHeaderChangeMessage()&&(e+=" broken-image--scaled-down"),o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement("img",{className:e,alt:a,src:w.a}))}return o.a.createElement(E.a,{src:t,imageMetadata:e},s=>{if(!s)return o.a.createElement("a",{className:"theme markdown__link",href:t,rel:"noopener noreferrer",target:"_blank",title:this.props.title},a);const i=(e=>{const t=e.lastIndexOf(".");return t>0?e.substring(t+1):null})(s);let r="";if(this.state.loaded)r="".concat(this.props.className,n||!i?" markdown-inline-img--hover markdown-inline-img--no-border":" markdown-inline-img--hover cursor--pointer a11y--active"),this.isHeaderChangeMessage()&&(r+=" markdown-inline-img--scaled-down");else{const e=this.isHeaderChangeMessage()?"markdown-inline-img--scaled-down-loading":"markdown-inline-img--loading";r="".concat(this.props.className," ").concat(e)}const{height:l,width:c,title:d}=this.props;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{alt:a,className:r,src:s,height:l,width:c,title:d,dimensions:e,showLoader:!1,onClick:this.showModal,onImageLoadFail:this.handleLoadFail,onImageLoaded:this.handleImageLoaded}),!n&&i&&o.a.createElement(y.a,{show:this.state.showModal,onModalDismissed:this.hideModal,postId:this.props.postId,startIndex:0,fileInfos:[{has_preview_image:!1,link:s,extension:e.format||i,name:a}]}))})}}O(T,"defaultProps",{imageMetadata:{}}),O(T,"propTypes",{alt:h.a.string,imageMetadata:h.a.object,src:h.a.string.isRequired,height:h.a.number,width:h.a.number,title:h.a.string,className:h.a.string.isRequired,postId:h.a.string.isRequired,imageIsLink:h.a.bool.isRequired,onImageLoaded:h.a.func,postType:h.a.string});var S=a(322),P=a(90);class M extends o.a.PureComponent{render(){const e=":"+this.props.name+":";return this.props.imageUrl?o.a.createElement("span",{alt:e,className:"emoticon",title:e,style:{backgroundImage:"url("+this.props.imageUrl+")"}}):e}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(M,"propTypes",{name:h.a.string.isRequired,imageUrl:h.a.string.isRequired});var N=Object(d.connect)((function(e,t){const a=Object(P.a)(e).get(t.name);return{imageUrl:a?Object(S.getEmojiImageUrl)(a):""}}))(M);function I(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e,t,a={}){if(!e)return null;const n=new l.Parser,s=new l.ProcessNodeDefinitions(o.a),i=[{replaceChildren:!1,shouldProcessNode:e=>"tag"===e.type&&"input"===e.name&&"checkbox"===e.attribs.type,processNode:e=>{const t=e.attribs||{};return e.attribs.checked=Boolean(t.checked),o.a.createElement("input",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.attribs))}}];if(a.hasPluginTooltips){const e="href";i.push({replaceChildren:!0,shouldProcessNode:t=>"tag"===t.type&&"a"===t.name&&t.attribs[e],processNode:(t,a)=>o.a.createElement(f.a,{href:t.attribs[e],title:a[0],attributes:t.attribs})})}if(!("mentions"in a)||a.mentions){const e=!("mentionHighlight"in a)||a.mentionHighlight,n="disableGroupHighlight"in a&&!0===a.disableGroupHighlight,s="data-mention";i.push({replaceChildren:!0,shouldProcessNode:e=>e.attribs&&e.attribs[s],processNode:(a,i)=>{const r=a.attribs[s];return o.a.createElement(c.a,{mentionName:r,isRHS:t,hasMention:!0,disableHighlight:!e,disableGroupHighlight:n},i)}})}if(!("emoji"in a)||a.emoji){const e="data-emoticon";i.push({replaceChildren:!0,shouldProcessNode:t=>t.attribs&&t.attribs[e],processNode:t=>{const a=t.attribs[e];return o.a.createElement(N,{name:a})}})}return"images"in a&&!a.images||i.push({shouldProcessNode:e=>"tag"===e.type&&"img"===e.name,processNode:e=>{const t=e.attribs,{class:n}=t,s=I(t,["class"]);return o.a.createElement(T,Object.assign({className:n,imageMetadata:a.imagesMetadata&&a.imagesMetadata[s.src]},s,a.imageProps,{postId:a.postId,imageIsLink:(i=e.parentNode,!(!i||"tag"!==i.type||"a"!==i.name)),postType:a.postType}));var i}}),"latex"in a&&!a.latex||i.push({shouldProcessNode:e=>e.attribs&&e.attribs["data-latex"],processNode:e=>o.a.createElement(b,{content:e.attribs["data-latex"]})}),i.push({shouldProcessNode:()=>!0,processNode:s.processDefaultNode}),n.parseWithInstructions(e,(function(){return!0}),i)}},1357:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(9),r=a(19),o=a(12),l=a(1156),c=(a(54),a(35),a(178)),d=a(38),m=a(42);function u(e){return async(t,a)=>{const n=a(),s=Object(r.getCurrentTeamId)(n),i=Object(m.o)(n),l=Object(o.getCurrentChannel)(n);let u;return u=!1===i.exists?l.id:i.channel_id,Promise.all([t(Object(c.getTeamMember)(s,e)),t(Object(d.getChannelMember)(u,e))])}}var h=a(1132),p=a(114),g=(a(176),a(33)),b=a.n(g),f=a(6),_=a.n(f),E=a(1387),v=a(1113),y=a(320),C=a(321),w=a.n(C),O=a(1361),T=a(1123),S=a(1282),P=a(87),M=a(1126),N=a(0),I=a(13),j=a(1127),A=a(15),R=a(1167),k=a(1365),L=a(39),D=(a(118),a(104),a(105)),x=a(16),U=a(190),q=a(103),H=a(10),F=a(89),B=a(44),G=a(20),V=a(1151),W=a(1152);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Y extends W.a{static get propTypes(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},super.propTypes)}render(){const{item:e,isSelection:t}=this.props,a=e.channel,n=a.delete_at&&0!==a.delete_at;let s="mentions__name";t&&(s+=" suggestion--selected");const i=a.display_name;let r=null;return n?r=_.a.createElement("i",{className:"icon icon--no-spacing icon-archive-outline"}):a.type===N.j.OPEN_CHANNEL?r=_.a.createElement("i",{className:"icon icon--no-spacing icon-globe"}):a.type===N.j.PRIVATE_CHANNEL&&(r=_.a.createElement("i",{className:"icon icon--no-spacing icon-lock-outline"})),_.a.createElement("div",Object.assign({onClick:this.handleClick,className:s,onMouseMove:this.handleMouseMove,ref:e=>{this.node=e}},W.a.baseProps),_.a.createElement("span",{className:"suggestion-list__icon suggestion-list__icon--large"},r),i)}}let Q="";function Z(e,t){const a=!!e.channel.delete_at&&0!==e.channel.delete_at,n=!!t.channel.delete_at&&0!==t.channel.delete_at;if(a&&!n)return 1;if(!a&&n)return-1;const s=Object(U.getCurrentUserLocale)(G.a.getState()),i=e.channel,r=t.channel,o=i.display_name.toLowerCase(),l=r.display_name.toLowerCase(),c=o.startsWith(Q),d=l.startsWith(Q);return c&&d?Object(F.sortChannelsByTypeAndDisplayName)(s,i,r):c||d?c?-1:1:Object(F.sortChannelsByTypeAndDisplayName)(s,i,r)}class J extends V.a{constructor(e){super(),this.autocompleteChannelsForSearch=e}makeChannelSearchFilter(e){const t=e.toLowerCase();return e=>{const a=G.a.getState(),n=e.id,s=Object(r.getCurrentTeamId)(a),i=e.display_name;return(e.type===N.j.OPEN_CHANNEL&&Object(q.haveIChannelPermission)(a,{channel:n,team:s,permission:H.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS})||!(e.type!==N.j.PRIVATE_CHANNEL||!Object(q.haveIChannelPermission)(a,{channel:n,team:s,permission:H.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS})))&&i.toLowerCase().includes(t)}}handlePretextChanged(e,t){if(e){Q=e,this.startNewRequest(e);const a=G.a.getState(),n=Object(o.getChannelsInCurrentTeam)(a);this.formatChannelsAndDispatch(e,t,n),this.fetchChannels(e,t)}return!0}async fetchChannels(e,t){const a=G.a.getState(),n=Object(r.getCurrentTeamId)(a);if(!n)return;const s=this.autocompleteChannelsForSearch(n,e);let i=[];try{const{data:e}=await s;i=e}catch(e){G.a.dispatch(Object(B.logError)(e))}if(this.shouldCancelDispatch(e))return;const l=Object(o.getChannelsInCurrentTeam)(a).concat(i);this.formatChannelsAndDispatch(e,t,l)}formatChannelsAndDispatch(e,t,a){const n=[],s=G.a.getState(),i=Object(D.getMyChannelMemberships)(s);if(this.shouldCancelDispatch(e))return;const r={},o=this.makeChannelSearchFilter(e),l="true"===Object(x.getConfig)(s).ExperimentalViewArchivedChannels;for(const e of Object.keys(a)){const t=a[e];if(t&&(!r[t.id]&&o(t))){const e=Object.assign({},t),a=0!==t.delete_at,s={channel:e,name:e.name,deactivated:!1};if(!l&&a)continue;if(!i[t.id])continue;if(a&&!i[t.id])continue;if(t.type===N.j.OPEN_CHANNEL)s.type=N.j.OPEN_CHANNEL;else{if(t.type!==N.j.PRIVATE_CHANNEL)continue;s.type=N.j.PRIVATE_CHANNEL}r[t.id]=!0,n.push(s)}}t({matchedPretext:e,terms:n.sort(Z).map(e=>e.channel.name),items:n,component:Y})}}var X=a(1195),$=a(1182);function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class te extends _.a.PureComponent{constructor(e){super(e),ee(this,"enableChannelProvider",()=>{this.suggestionProviders[0].disableDispatches=!1}),ee(this,"focusTextbox",()=>{if(null==this.channelSearchBox)return;const e=this.channelSearchBox.getTextbox();document.activeElement!==e&&(e.focus(),Object(A.ob)(e))}),ee(this,"onInputChange",e=>{this.setState({text:e.target.value,selectedChannelId:null})}),ee(this,"onHide",()=>{this.setState({show:!1}),this.props.onHide()}),ee(this,"setSearchBoxRef",e=>{this.channelSearchBox=e,this.focusTextbox()}),ee(this,"handleSubmitError",e=>{e&&this.setState({submitError:e.message,saving:!1})}),ee(this,"didSelectChannel",e=>{const t=e.channel,a=this.props.user.id;this.setState({text:t.display_name,selectedChannelId:t.id,checkingForMembership:!0,submitError:""}),this.props.actions.getChannelMember(t.id,a).then(()=>{this.setState({checkingForMembership:!1})})}),ee(this,"handleSubmit",e=>{e&&e.preventDefault&&e.preventDefault();const t=this.state.selectedChannelId,a=this.props.user;t&&(this.isUserMemberOfChannel(t)||this.state.saving||(this.setState({saving:!0}),this.props.actions.addChannelMember(t,a.id).then(({error:e})=>{e?this.handleSubmitError(e):this.onHide()})))}),ee(this,"isUserMemberOfChannel",e=>{const t=this.props.user,a=this.props.channelMembers;return!!e&&(!!a[e]&&Boolean(a[e][t.id]))}),this.state={show:!0,saving:!1,checkingForMembership:!1,text:"",selectedChannelId:null,submitError:""},this.suggestionProviders=[new J(e.actions.autocompleteChannelsForSearch)],this.enableChannelProvider()}render(){const e=this.props.user,t=this.state.selectedChannelId,a=this.isUserMemberOfChannel(t);let n,s=Object(L.getFullName)(e);s||(s="@".concat(e.username)),this.state.saving||(this.state.submitError?n=_.a.createElement("label",{id:"add-user-to-channel-modal__invite-error",className:"modal__error has-error control-label"},this.state.submitError):a&&(n=_.a.createElement("label",{id:"add-user-to-channel-modal__user-is-member",className:"modal__error has-error control-label"},_.a.createElement(v.a,{id:"add_user_to_channel_modal.membershipExistsError",defaultMessage:"{name} is already a member of that channel",values:{name:s}}))));const i=_.a.createElement(v.a,{id:"add_user_to_channel_modal.help",defaultMessage:"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss."}),r=_.a.createElement(X.a,{ref:this.setSearchBoxRef,className:"form-control focused",onChange:this.onInputChange,value:this.state.text,onItemSelected:this.didSelectChannel,listComponent:$.a,maxLength:"64",providers:this.suggestionProviders,listStyle:"bottom",completeOnTab:!1,renderDividers:!1,delayInputUpdate:!0,openWhenEmpty:!1}),o=a||this.state.checkingForMembership||Boolean(!this.state.selectedChannelId)||this.state.saving;return _.a.createElement(k.a,{dialogClassName:"a11y__modal modal--overflow",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,ref:"modal",enforceFocus:!0,role:"dialog","aria-labelledby":"addChannelModalLabel"},_.a.createElement(k.a.Header,{closeButton:!0},_.a.createElement(k.a.Title,{componentClass:"h1",id:"addChannelModalLabel"},_.a.createElement(v.a,{id:"add_user_to_channel_modal.title",defaultMessage:"Add {name} to a Channel",values:{name:s}}))),_.a.createElement("form",{role:"form",onSubmit:this.handleSubmit},_.a.createElement(k.a.Body,null,_.a.createElement("div",{className:"modal__hint"},i),_.a.createElement("div",{className:"pos-relative"},r),_.a.createElement("div",null,n,_.a.createElement("br",null))),_.a.createElement(k.a.Footer,null,_.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},_.a.createElement(v.a,{id:"add_user_to_channel_modal.cancel",defaultMessage:"Cancel"})),_.a.createElement("button",{type:"button",id:"add-user-to-channel-modal__add-button",className:"btn btn-primary",onClick:this.handleSubmit,disabled:o},_.a.createElement(v.a,{id:"add_user_to_channel_modal.add",defaultMessage:"Add"})))))}}ee(te,"propTypes",{onHide:b.a.func.isRequired,user:b.a.object.isRequired,channelMembers:b.a.object.isRequired,actions:b.a.shape({addChannelMember:b.a.func.isRequired,getChannelMember:b.a.func.isRequired,autocompleteChannelsForSearch:b.a.func.isRequired}).isRequired});var ae=Object(n.connect)((function(e){return{channelMembers:Object(o.getChannelMembersInChannels)(e)||{}}}),(function(e){return{actions:Object(s.bindActionCreators)({addChannelMember:d.addChannelMember,getChannelMember:d.getChannelMember,autocompleteChannelsForSearch:d.autocompleteChannelsForSearch},e)}}))(te),ne=a(1148),se=a(1280),ie=a(1145),re=a(1183);function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ce extends _.a.PureComponent{static getComponentName(){return"ProfilePopover"}constructor(e){super(e),le(this,"handleShowDirectChannel",e=>{const{actions:t}=this.props;if(e.preventDefault(),!this.props.user)return;const a=this.props.user;-1===this.state.loadingDMChannel&&(this.setState({loadingDMChannel:a.id}),t.openDirectChannelToUserId(a.id).then(e=>{e.error||(A.cb()&&M.c(),this.setState({loadingDMChannel:-1}),this.props.hide&&this.props.hide(),P.a.push("".concat(this.props.teamUrl,"/messages/@").concat(a.username)))}),this.handleCloseModals())}),le(this,"handleMentionKeyClick",e=>{e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),w.a.emit("mention_key_click",this.props.user.username,this.props.isRHS),this.handleCloseModals())}),le(this,"handleEditAccountSettings",e=>{e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),this.props.actions.openModal({ModalId:N.u.USER_SETTINGS,dialogType:S.a}),this.handleCloseModals())}),le(this,"handleAddToChannel",e=>{e.preventDefault(),this.handleCloseModals()}),le(this,"handleCloseModals",()=>{const{modals:e}=this.props;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].open&&this.props.actions.closeModal(t)}),this.state={loadingDMChannel:-1}}componentDidMount(){this.props.actions.getMembershipForCurrentEntities(this.props.userId)}render(){if(!this.props.user)return null;const e=Object.assign({},this.props);delete e.user,delete e.userId,delete e.src,delete e.status,delete e.hideStatus,delete e.isBusy,delete e.hide,delete e.isRHS,delete e.hasMention,delete e.dispatch,delete e.enableTimezone,delete e.currentUserId,delete e.currentTeamId,delete e.teamUrl,delete e.actions,delete e.isTeamAdmin,delete e.isChannelAdmin,delete e.canManageAnyChannelMembersInCurrentTeam,delete e.intl;const{formatMessage:t}=this.props.intl;var a=[];const n=this.props.overwriteIcon?this.props.overwriteIcon:this.props.src;a.push(_.a.createElement(ie.a,{size:"xxl",username:this.props.user.username,url:n,key:"user-popover-image"}));const s=A.A(this.props.user),i=this.props.overwriteIcon||this.props.overwriteName;if(!s&&!this.props.user.position||i||a.push(_.a.createElement("hr",{key:"user-popover-hr",className:"divider divider--expanded"})),s&&!i&&a.push(_.a.createElement(T.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:_.a.createElement(E.a,{id:"fullNameTooltip"},s),key:"user-popover-fullname"},_.a.createElement("div",{className:"overflow--ellipsis text-nowrap"},_.a.createElement("strong",null,s)))),this.props.user.is_bot&&!i&&a.push(_.a.createElement("div",{key:"bot-description",className:"overflow--ellipsis text-nowrap"},this.props.user.bot_description)),this.props.user.position&&!i){const e=this.props.user.position.substring(0,N.Q.MAX_POSITION_LENGTH);a.push(_.a.createElement(T.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:_.a.createElement(E.a,{id:"positionTooltip"},e),key:"user-popover-position"},_.a.createElement("div",{className:"overflow--ellipsis text-nowrap pt-1 pb-1"},e)))}const r=this.props.user.email;if(!r||this.props.user.is_bot||i||(a.push(_.a.createElement("hr",{key:"user-popover-hr2",className:"divider divider--expanded"})),a.push(_.a.createElement("div",{"data-toggle":"tooltip",title:r,key:"user-popover-email"},_.a.createElement("a",{href:"mailto:"+r,className:"text-nowrap text-lowercase user-popover__email pb-1"},r)))),a.push(_.a.createElement(R.a,{key:"profilePopoverPluggable2",pluggableName:"PopoverUserAttributes",user:this.props.user,hide:this.props.hide,status:this.props.hideStatus?null:this.props.status})),this.props.enableTimezone&&this.props.user.timezone&&!i&&a.push(_.a.createElement("div",{key:"user-popover-local-time",className:"pb-1"},_.a.createElement(v.a,{id:"user_profile.account.localTime",defaultMessage:"Local Time: "}),_.a.createElement(O.a,{userTimezone:this.props.user.timezone}))),this.props.user.id!==this.props.currentUserId||i||a.push(_.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-settings",className:"popover__row first"},_.a.createElement("a",{href:"#",onClick:this.handleEditAccountSettings},_.a.createElement(ne.a,{className:"fa fa-pencil-square-o",title:{id:Object(I.b)("generic_icons.edit"),defaultMessage:"Edit Icon"}}),_.a.createElement(v.a,{id:"user_profile.account.editSettings",defaultMessage:"Edit Account Settings"})))),i&&a.push(_.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-settings",className:"popover__row first"},_.a.createElement(v.a,{id:"user_profile.account.post_was_created",defaultMessage:"This post was created by an integration from"}),_.a.createElement("a",{onClick:this.handleMentionKeyClick}," @".concat(this.props.user.username)))),this.props.user.id!==this.props.currentUserId&&!i&&(a.push(_.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-dm",className:"popover__row first"},_.a.createElement("a",{href:"#",className:"text-nowrap user-popover__email",onClick:this.handleShowDirectChannel},_.a.createElement(ne.a,{className:"fa fa-paper-plane",title:{id:Object(I.b)("user_profile.send.dm.icon"),defaultMessage:"Send Message Icon"}}),_.a.createElement(v.a,{id:"user_profile.send.dm",defaultMessage:"Send Message"})))),this.props.canManageAnyChannelMembersInCurrentTeam&&this.props.isInCurrentTeam)){const e=t({id:"user_profile.add_user_to_channel",defaultMessage:"Add to a Channel"});a.push(_.a.createElement("div",{"data-toggle":"tooltip",className:"popover__row first",key:"user-popover-add-to-channel"},_.a.createElement("a",{href:"#",className:"text-nowrap",onClick:this.handleAddToChannel},_.a.createElement(se.a,{accessibilityLabel:e,ref:"addUserToChannelModalButton",modalId:N.u.ADD_USER_TO_CHANNEL,role:"menuitem",dialogType:ae,dialogProps:{user:this.props.user},onClick:this.props.hide},_.a.createElement(ne.a,{className:"fa fa-user-plus",title:{id:Object(I.b)("user_profile.add_user_to_channel.icon"),defaultMessage:"Add User to Channel Icon"}}),e))))}let o;a.push(_.a.createElement(R.a,{key:"profilePopoverPluggable3",pluggableName:"PopoverUserActions",user:this.props.user,hide:this.props.hide,status:this.props.hideStatus?null:this.props.status})),this.props.user.is_bot?o=_.a.createElement("span",{className:"user-popover__role"},A.lb("bots.is_bot","BOT")):A.Y(this.props.user)?o=_.a.createElement("span",{className:"user-popover__role"},A.lb("post_info.guest","GUEST")):A.eb(this.props.user.roles)?o=_.a.createElement("span",{className:"user-popover__role"},A.lb("admin.permissions.roles.system_admin.name","System Admin")):this.props.isTeamAdmin?o=_.a.createElement("span",{className:"user-popover__role"},A.lb("admin.permissions.roles.team_admin.name","Team Admin")):this.props.isChannelAdmin&&(o=_.a.createElement("span",{className:"user-popover__role"},A.lb("admin.permissions.roles.channel_admin.name","Channel Admin")));let l="@".concat(this.props.user.username);return this.props.overwriteName?(l="".concat(this.props.overwriteName),o=""):this.props.hasMention&&(l=_.a.createElement("a",{onClick:this.handleMentionKeyClick},l)),l=_.a.createElement("span",{"data-testid":"profilePopoverTitle_".concat(this.props.user.username)},_.a.createElement("span",{className:"user-popover__username"},l),o),_.a.createElement(re.a,Object.assign({},e,{title:l,id:"user-profile-popover"}),a)}}le(ce,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(a),!0).forEach((function(t){le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({src:b.a.string.isRequired,overwriteIcon:b.a.string,user:b.a.object,status:b.a.string,hideStatus:b.a.bool,hide:b.a.func,isRHS:b.a.bool,modals:b.a.object,currentTeamId:b.a.string.isRequired,currentUserId:b.a.string.isRequired,hasMention:b.a.bool,isInCurrentTeam:b.a.bool.isRequired,teamUrl:b.a.string.isRequired,isTeamAdmin:b.a.bool.isRequired,isChannelAdmin:b.a.bool.isRequired,canManageAnyChannelMembersInCurrentTeam:b.a.bool.isRequired,overwriteName:b.a.node,actions:b.a.shape({getMembershipForCurrentEntities:b.a.func.isRequired,openDirectChannelToUserId:b.a.func.isRequired,openModal:b.a.func.isRequired,closeModal:b.a.func.isRequired}).isRequired,intl:j.a.isRequired},re.a.propTypes)),le(ce,"defaultProps",{isRHS:!1,hasMention:!1,status:N.O.OFFLINE}),delete ce.propTypes.id;var de=Object(y.c)(ce);t.a=Object(n.connect)((function(e,t){const a=t.userId,n=Object(r.getCurrentTeam)(e),s=Object(r.getTeamMember)(e,n.id,a);let l=!1;s&&s.scheme_admin&&(l=!0);const c=Object(m.o)(e),d=Object(o.getCurrentChannel)(e);let u;u=!1===c.exists?d.id:c.channel_id;const h=Object(o.getChannelMembersInChannels)(e)[u][a];let g=!1;return"search"!==Object(m.k)(e)&&null!=h&&h.scheme_admin&&(g=!0),{currentTeamId:n.id,currentUserId:Object(i.getCurrentUserId)(e),enableTimezone:Object(p.a)(e),isTeamAdmin:l,isChannelAdmin:g,isInCurrentTeam:Boolean(s)&&0===s.delete_at,canManageAnyChannelMembersInCurrentTeam:Object(o.canManageAnyChannelMembersInCurrentTeam)(e),status:Object(i.getStatusForUserId)(e,a),teamUrl:Object(r.getCurrentRelativeTeamUrl)(e),user:Object(i.getUser)(e,a),modals:e.views.modals.modalState}}),(function(e){return{actions:Object(s.bindActionCreators)({closeModal:h.a,openDirectChannelToUserId:l.e,openModal:h.b,getMembershipForCurrentEntities:u},e)}}))(de)},1358:function(e,t,a){"use strict";var n=a(315),s=a(23),i=a(11),r=a(21),o=a(16),l=a(103),c=a(74),d=a(10),m=a(1160),u=a(0),h=a(1319),p=a(6),g=a.n(p),b=a(1120),f=a(1417),_=a(18),E=a(329),v=a.n(E),y=[{name:"apiv3_deprecation",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.api3",defaultMessage:"If you’ve created or installed integrations in the last two years, find out how [recent changes](!https://about.mattermost.com/default-apiv3-deprecation-guide) may have affected them."}),allowForget:!0,show:(e,t)=>!(t.InstallationDate>=new Date(2018,5,16,0,0,0,0).getTime())},{name:"advanced_permissions",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.permissions",defaultMessage:"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.mattermost.com/default-advanced-permissions) in Enterprise E10 and E20."}),allowForget:!0,show:(e,t,a)=>"false"!==a.IsLicensed&&(!(t.InstallationDate>new Date(2018,5,16,0,0,0,0).getTime())&&!("true"===a.IsLicensed&&a.IssuedAt>new Date(2018,5,16,0,0,0,0).getTime()))},{name:"ee_upgrade_advice",adminOnly:!0,title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:v.a,body:g.a.createElement(b.b,{id:"system_notice.body.ee_upgrade_advice",defaultMessage:"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance)."}),allowForget:!1,show:(e,t,a,n)=>!!n.hasOwnProperty("TOTAL_USERS")&&(!(n.TOTAL_USERS<1e4)&&("true"!==a.IsLicensed||"true"!==a.Cluster))},{name:"ie11_deprecation",title:g.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:v.a,allowForget:!1,body:g.a.createElement(b.b,{id:"system_notice.body.ie11_deprecation",defaultMessage:"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.mattermost.org/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575)."}),show:e=>!f.b(e,"5.16.0")&&!!_.g()}],C=(a(35),a(33)),w=a.n(C),O=a(1113),T=a(13),S=a(1148),P=a(1321);function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends g.a.PureComponent{constructor(...e){super(...e),M(this,"getCurrentNotice",()=>{for(const e of this.props.notices)if(!this.props.dismissedNotices[e.name]&&!this.props.preferences[e.name]&&(!e.adminOnly||this.props.isSystemAdmin)&&e.show(this.props.serverVersion,this.props.config,this.props.license,this.props.analytics))return e;return null}),M(this,"hide",(e=!1)=>{const t=this.getCurrentNotice();t&&(e||this.props.actions.savePreferences(this.props.currentUserId,[{user_id:this.props.currentUserId,category:u.B.CATEGORY_SYSTEM_NOTICE,name:t.name,value:"dismissed"}]),this.props.actions.dismissNotice(t.name))}),M(this,"hideAndRemind",()=>{this.hide(!0)}),M(this,"hideAndForget",()=>{this.hide(!1)})}componentDidMount(){this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}componentDidUpdate(e){e.isSystemAdmin!==this.props.isSystemAdmin&&this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}render(){const e=this.getCurrentNotice();if(null==e)return null;let t;return e.adminOnly&&(t=g.a.createElement("div",{className:"system-notice__info"},g.a.createElement(S.a,{className:"fa fa-eye",title:{id:Object(T.b)("system_notice.adminVisible.icon"),defaultMessage:"Only visible to System Admins Icon"}}),g.a.createElement(O.a,{id:"system_notice.adminVisible",defaultMessage:"Only visible to System Admins"}))),g.a.createElement("div",{className:"system-notice bg--white shadow--2"},g.a.createElement("div",{className:"system-notice__header"},g.a.createElement("div",{className:"system-notice__logo"},g.a.createElement(P.a,null)),g.a.createElement("div",{className:"system-notice__title"},e.title)),g.a.createElement("div",{className:"system-notice__body"},e.body),t,g.a.createElement("div",{className:"system-notice__footer"},g.a.createElement("button",{id:"systemnotice_remindme",className:"btn btn-transparent",onClick:this.hideAndRemind},g.a.createElement(O.a,{id:"system_notice.remind_me",defaultMessage:"Remind Me Later"})),e.allowForget&&g.a.createElement("button",{id:"systemnotice_dontshow",className:"btn btn-transparent",onClick:this.hideAndForget},g.a.createElement(O.a,{id:"system_notice.dont_show",defaultMessage:"Don't Show Again"}))))}}M(N,"propTypes",{currentUserId:w.a.string.isRequired,notices:w.a.arrayOf(w.a.object).isRequired,preferences:w.a.object.isRequired,dismissedNotices:w.a.object.isRequired,isSystemAdmin:w.a.bool,serverVersion:w.a.string.isRequired,config:w.a.object.isRequired,license:w.a.object.isRequired,analytics:w.a.object,actions:w.a.shape({savePreferences:w.a.func.isRequired,dismissNotice:w.a.func.isRequired,getStandardAnalytics:w.a.func.isRequired}).isRequired});t.a=Object(n.connect)((function(){const e=Object(r.makeGetCategory)(),t=Object(s.createSelector)(e,e=>{const t={};return e.forEach(e=>{t[e.name]=e}),t});return function(e){const a=Object(o.getLicense)(e),n=Object(o.getConfig)(e),s=e.entities.general.serverVersion,i=e.entities.admin.analytics;return{currentUserId:e.entities.users.currentUserId,preferences:t(e,u.B.CATEGORY_SYSTEM_NOTICE),dismissedNotices:e.views.notice.hasBeenDismissed,isSystemAdmin:Object(l.haveISystemPermission)(e,{permission:d.Permissions.MANAGE_SYSTEM}),notices:y,config:n,license:a,serverVersion:s,analytics:i}}}),(function(e){return{actions:Object(i.bindActionCreators)({savePreferences:c.savePreferences,dismissNotice:h.a,getStandardAnalytics:m.getStandardAnalytics},e)}}))(N)},1359:function(e,t,a){"use strict";var n=new class{constructor(){this.conn=null,this.connectionUrl=null,this.sequence=1,this.eventSequence=0,this.connectFailCount=0,this.eventCallback=null,this.responseCallbacks={},this.firstConnectCallback=null,this.reconnectCallback=null,this.missedEventCallback=null,this.errorCallback=null,this.closeCallback=null}initialize(e=this.connectionUrl,t){this.conn||(null!=e?(0===this.connectFailCount&&console.log("websocket connecting to "+e),this.conn=new WebSocket(e),this.connectionUrl=e,this.conn.onopen=()=>{this.eventSequence=0,t&&this.sendMessage("authentication_challenge",{token:t}),this.connectFailCount>0?(console.log("websocket re-established connection"),this.reconnectCallback&&this.reconnectCallback()):this.firstConnectCallback&&this.firstConnectCallback(),this.connectFailCount=0},this.conn.onclose=()=>{this.conn=null,this.sequence=1,0===this.connectFailCount&&console.log("websocket closed"),this.connectFailCount++,this.closeCallback&&this.closeCallback(this.connectFailCount);let a=3e3;this.connectFailCount>7&&(a=3e3*this.connectFailCount*this.connectFailCount,a>3e5&&(a=3e5)),setTimeout(()=>{this.initialize(e,t)},a)},this.conn.onerror=e=>{this.connectFailCount<=1&&(console.log("websocket error"),console.log(e)),this.errorCallback&&this.errorCallback(e)},this.conn.onmessage=e=>{const t=JSON.parse(e.data);t.seq_reply?(t.error&&console.log(t),this.responseCallbacks[t.seq_reply]&&(this.responseCallbacks[t.seq_reply](t),Reflect.deleteProperty(this.responseCallbacks,t.seq_reply))):this.eventCallback&&(t.seq!==this.eventSequence&&this.missedEventCallback&&(console.log("missed websocket event, act_seq="+t.seq+" exp_seq="+this.eventSequence),this.missedEventCallback()),this.eventSequence=t.seq+1,this.eventCallback(t))}):console.log("websocket must have connection url"))}setEventCallback(e){this.eventCallback=e}setFirstConnectCallback(e){this.firstConnectCallback=e}setReconnectCallback(e){this.reconnectCallback=e}setMissedEventCallback(e){this.missedEventCallback=e}setErrorCallback(e){this.errorCallback=e}setCloseCallback(e){this.closeCallback=e}close(){this.connectFailCount=0,this.sequence=1,this.conn&&this.conn.readyState===WebSocket.OPEN&&(this.conn.onclose=()=>{},this.conn.close(),this.conn=null,console.log("websocket closed"))}sendMessage(e,t,a){const n={action:e,seq:this.sequence++,data:t};a&&(this.responseCallbacks[n.seq]=a),this.conn&&this.conn.readyState===WebSocket.OPEN?this.conn.send(JSON.stringify(n)):this.conn&&this.conn.readyState!==WebSocket.CLOSED||(this.conn=null,this.initialize())}userTyping(e,t,a){const n={};n.channel_id=e,n.parent_id=t,this.sendMessage("user_typing",n,a)}userUpdateActiveStatus(e,t,a){const n={user_is_active:e,manual:t};this.sendMessage("user_update_active_status",n,a)}getStatuses(e){this.sendMessage("get_statuses",null,e)}getStatusesByIds(e,t){const a={};a.user_ids=e,this.sendMessage("get_statuses_by_ids",a,t)}};t.a=n},1361:function(e,t,a){"use strict";var n=a(315),s=a(9),i=a(185),r=a(186),o=a(21),l=a(114),c=a(0),d=(a(99),a(33)),m=a.n(d),u=a(6),h=a.n(u),p=a(320),g=a(138),b=a.n(g);const f=Boolean(new Intl.DateTimeFormat("en-US",{hour:"numeric"}).resolvedOptions().hourCycle);class _ extends h.a.PureComponent{render(){const{enableTimezone:e,eventTime:t,timeZone:a,useMilitaryTime:n}=this.props,s=t?new Date(t):new Date,i=b()(s);let r=i.toString();e&&a&&(i.tz(a),r=i.toString()+" ("+i.tz()+")");const o={hour:"numeric",minute:"numeric"};let l;e&&a&&(o.timeZone=a),f?o.hourCycle=n?"h23":"h12":o.hour12=!n;try{l=new Intl.DateTimeFormat(this.props.intl.locale,o).format(s)}catch(e){const t=n?"HH:mm":"hh:mm A";l=i.format(t)}return h.a.createElement("time",{"aria-label":s.toString(),className:"post__time",dateTime:s.toISOString(),title:r},h.a.createElement("span",null,l))}}var E,v,y;E=_,v="propTypes",y={eventTime:m.a.number,useMilitaryTime:m.a.bool,timeZone:m.a.oneOfType([m.a.string,m.a.oneOf([null])]),enableTimezone:m.a.bool,intl:m.a.any.isRequired},v in E?Object.defineProperty(E,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):E[v]=y;var C=Object(p.c)(_);t.a=Object(n.connect)((function(e,t){const a=Object(s.getCurrentUserId)(e);let n;return n=t.userTimezone?t.userTimezone:Object(i.getUserTimezone)(e,a),{enableTimezone:Object(l.a)(e),useMilitaryTime:Object(o.getBool)(e,c.B.CATEGORY_DISPLAY_SETTINGS,c.B.USE_MILITARY_TIME,!1),timeZone:Object(r.getUserCurrentTimezone)(n)}}))(C)},1363:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));const n=(e,t)=>e.views.channel.lastGetPosts[t],s=e=>e.views.channel.toastStatus},1364:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e.websocket},1380:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(176),a(54);var n=a(6),s=a.n(n),i=a(1151),r=a(1152);class o extends r.a{render(){const{item:e,isSelection:t}=this.props;let a="mentions__name";return t&&(a+=" suggestion--selected"),s.a.createElement("div",Object.assign({className:a,onClick:this.handleClick,onMouseMove:this.handleMouseMove},r.a.baseProps),e.text)}}class l extends i.a{constructor(e){super(),this.options=e}handlePretextChanged(e,t){return 0===e.length?(this.displayAllOptions(t),!0):!!e&&(this.filterOptions(e,t),!0)}async displayAllOptions(e){e({matchedPretext:"",terms:this.options.map(e=>e.text),items:this.options,component:o})}async filterOptions(e,t){const a=this.options.filter(t=>t.text.toLowerCase().indexOf(e)>=0),n=a.map(e=>e.text);t({matchedPretext:e,terms:n,items:a,component:o})}}},1381:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(176);var n=a(6),s=a.n(n),i=a(1151),r=a(1152);class o extends r.a{render(){const e=this.props.isSelection,t=this.props.item,a=t.display_name,n=t.purpose;let i="mentions__name no-flex";e&&(i+=" suggestion--selected");const o="(~"+t.name+")";return s.a.createElement("div",Object.assign({className:i,onClick:this.handleClick,onMouseMove:this.handleMouseMove},r.a.baseProps),s.a.createElement("div",{className:"mention__align"},s.a.createElement("span",null,a),s.a.createElement("span",{className:"mention__channelname"}," ",o)),s.a.createElement("div",{className:"mention__purpose"},n))}}class l extends i.a{constructor(e){super(),this.autocompleteChannels=e}handlePretextChanged(e,t){const a=e.toLowerCase();return this.startNewRequest(a),this.autocompleteChannels(a,e=>{if(this.shouldCancelDispatch(a))return;const n=Object.assign([],e);t({matchedPretext:a,terms:n.map(e=>e.display_name),items:n,component:o})}),!0}}},1382:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(176),a(35);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1301);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.a.PureComponent{constructor(...e){super(...e),l(this,"handleChange",e=>{"number"===this.props.type?this.props.onChange(this.props.id,parseInt(e.target.value,10)):this.props.onChange(this.props.id,e.target.value)})}render(){const{resizable:e}=this.props;let{type:t}=this.props,a=null;if("textarea"===t){let t={};e||(t=Object.assign({},{resize:"none"})),a=r.a.createElement("textarea",{autoFocus:this.props.autoFocus,"data-testid":this.props.id+"input",id:this.props.id,style:t,className:"form-control",rows:5,placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled})}else t=["input","email","tel","number","url","password"].includes(t)?t:"input",a=r.a.createElement("input",{autoFocus:this.props.autoFocus,"data-testid":this.props.id+t,id:this.props.id,className:"form-control",type:t,placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled});return r.a.createElement(o.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id,footer:this.props.footer},a)}}l(c,"propTypes",{id:s.a.string.isRequired,label:s.a.node.isRequired,labelClassName:s.a.string,placeholder:s.a.string,helpText:s.a.node,footer:s.a.node,value:s.a.oneOfType([s.a.string,s.a.number]).isRequired,inputClassName:s.a.string,maxLength:s.a.number,resizable:s.a.bool,disabled:s.a.bool,type:s.a.oneOf(["input","textarea","number","email","tel","url","password"]),autoFocus:s.a.bool}),l(c,"validTypes",["input","textarea","number","email","tel","url","password"]),l(c,"defaultProps",{labelClassName:"",inputClassName:"",type:"input",maxLength:-1,resizable:!0})},1383:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1195),l=a(1182);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{constructor(e){super(e),c(this,"onChange",e=>{e&&e.target&&this.setState({input:e.target.value})}),c(this,"handleSelected",e=>{this.setState({input:""}),this.props.onSelected&&this.props.onSelected(e),requestAnimationFrame(()=>{this.suggestionRef&&this.suggestionRef.blur()})}),c(this,"setSuggestionRef",e=>{this.suggestionRef=e}),c(this,"onFocus",()=>{this.setState({focused:!0}),this.props.toggleFocus&&this.props.toggleFocus(!0)}),c(this,"onBlur",()=>{this.setState({focused:!1}),this.props.toggleFocus&&this.props.toggleFocus(!1)}),this.state={input:""}}render(){const{providers:e,placeholder:t,footer:a,label:n,labelClassName:s,helpText:i,inputClassName:l,value:c,disabled:d,listComponent:m,listStyle:u}=this.props,{focused:h}=this.state;let p,g,{input:b}=this.state;return h||(b=c),n&&(p=r.a.createElement("label",{className:"control-label "+s},n)),i&&(g=r.a.createElement("div",{className:"help-text"},i)),r.a.createElement("div",{"data-testid":"autoCompleteSelector",className:"form-group"},p,r.a.createElement("div",{className:l},r.a.createElement(o.a,{placeholder:t,ref:this.setSuggestionRef,listComponent:m,className:"form-control",containerClass:"select-suggestion-container",value:b,onChange:this.onChange,onItemSelected:this.handleSelected,onFocus:this.onFocus,onBlur:this.onBlur,providers:e,completeOnTab:!0,renderDividers:!1,renderNoResults:!0,openOnFocus:!0,openWhenEmpty:!0,replaceAllInputOnSelect:!0,disabled:d,listStyle:u}),g,a))}}c(d,"propTypes",{providers:s.a.array.isRequired,value:s.a.string.isRequired,onSelected:s.a.func,label:s.a.node,labelClassName:s.a.string,inputClassName:s.a.string,helpText:s.a.node,placeholder:s.a.string,footer:s.a.node,disabled:s.a.bool,toggleFocus:s.a.func,listComponent:s.a.elementType,listStyle:s.a.string}),c(d,"defaultProps",{value:"",id:"",labelClassName:"",inputClassName:"",listComponent:l.a,listStyle:"top"})},1388:function(e,t,a){},1407:function(e,t,a){"use strict";function n(e,t,a,n){let s;return s=e.top>a?"top":t-e.bottom>(n||a)?"bottom":"left",s}a.d(t,"a",(function(){return n}))},1409:function(e,t,a){"use strict";var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1157);const l=({loading:e,progress:t,containerClass:a})=>{let n=r.a.createElement("span",{className:"loader-percent"});return t&&(n=r.a.createElement("span",{className:"loader-percent"},"".concat(e," ").concat(t,"%"))),r.a.createElement("div",{className:a},r.a.createElement(o.a,null),n)};l.propTypes={loading:s.a.string,progress:s.a.number,containerClass:s.a.string},l.defaultProps={containerClass:"view-image__loading"},t.a=l},1415:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),s=a(15);n.l.PAGE_NOT_FOUND;const i=["/mfa/setup","/mfa/confirm"],r=["","email","ldap"];function o(e,t,a,n){if("true"===t.MFA&&"true"===a.EnableMultifactorAuthentication&&"true"===a.EnforceMultifactorAuthentication&&-1===i.indexOf(n)){if(Object(s.Y)(e)&&"true"!==a.GuestAccountsEnforceMultifactorAuthentication)return!1;if(e&&!e.mfa_active&&-1!==r.indexOf(e.auth_service))return!0}return!1}},1416:function(e,t,a){"use strict";function n(e){return e.views.announcementBar.announcementBarState.announcementBarCount}a.d(t,"a",(function(){return n}))},1417:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));a(101);function n(e,t){if(e===t)return!0;return(e||"").split(".").slice(0,-2).join(".")===(t||"").split(".").slice(0,-2).join(".")}function s(e,t){if(e===t)return!0;const a=(e||"").split(".").filter(e=>null!==/^[0-9]+$/.exec(e)),n=(t||"").split(".").filter(e=>null!==/^[0-9]+$/.exec(e));for(let e=0;e<Math.max(a.length,n.length);e++){if((a[e]||0)>(n[e]||0))return!0;if((a[e]||0)<(n[e]||0))return!1}return!0}},1420:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i);function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.PureComponent{constructor(e){super(e),c(this,"height",void 0),c(this,"recalculateSize",()=>{if(!this.refs.reference||!this.refs.textarea)return;const e=this.refs.reference.scrollHeight,t=this.refs.textarea;if(e>0&&e!==this.height){const a=getComputedStyle(t),n=parseInt(a.borderTopWidth||"0",10)+parseInt(a.borderBottomWidth||"0",10);t.style.height=String(e+n)+"px",this.height=e,this.props.onHeightChange&&this.props.onHeightChange(e,parseInt(a.maxHeight||"0",10))}}),c(this,"getDOMNode",()=>this.refs.textarea),c(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(e)}),this.height=0}get value(){return this.refs.textarea.value}set value(e){this.refs.textarea.value=e}get selectionStart(){return this.refs.textarea.selectionStart}set selectionStart(e){this.refs.textarea.selectionStart=e}get selectionEnd(){return this.refs.textarea.selectionEnd}set selectionEnd(e){this.refs.textarea.selectionEnd=e}focus(){this.refs.textarea.focus()}blur(){this.refs.textarea.blur()}componentDidMount(){this.recalculateSize()}componentDidUpdate(){this.recalculateSize()}render(){const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props);Reflect.deleteProperty(e,"onHeightChange"),Reflect.deleteProperty(e,"providers"),Reflect.deleteProperty(e,"channelId");const{value:t,defaultValue:a,placeholder:n,disabled:s,onInput:i,id:d}=e,u=o(e,["value","defaultValue","placeholder","disabled","onInput","id"]),h={rows:0,height:0};this.height<=0?h.rows=1:h.height=this.height;let p=null;const g=n?n.toLowerCase():"";return this.props.value||this.props.defaultValue||(p=r.a.createElement("div",Object.assign({},u,{"data-testid":"".concat(d,"_placeholder"),style:m.placeholder}),n)),r.a.createElement("div",null,p,r.a.createElement("textarea",Object.assign({ref:"textarea","data-testid":d,id:d},h,u,{role:"textbox","aria-label":g,disabled:s,onChange:this.handleChange,onInput:i,value:t,defaultValue:a})),r.a.createElement("div",{style:m.container},r.a.createElement("textarea",Object.assign({ref:"reference",id:d+"-reference",style:m.reference,disabled:!0,rows:1},u,{value:t||a,"aria-hidden":!0}))))}}c(d,"propTypes",{id:s.a.string,disabled:s.a.bool,value:s.a.string,defaultValue:s.a.string,onChange:s.a.func,onHeightChange:s.a.func,onInput:s.a.func,placeholder:s.a.string});const m={container:{height:0,overflow:"hidden"},reference:{height:"auto",width:"100%"},placeholder:{overflow:"hidden",textOverflow:"ellipsis",opacity:.5,pointerEvents:"none",position:"absolute",whiteSpace:"nowrap",background:"none",borderColor:"transparent"}}},1424:function(e,t,a){},1440:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),s=a.n(n),i=a(1113);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.edit",defaultMessage:"Edit Icon"},e=>s.a.createElement("i",{className:"fa fa-pencil",title:e}))}}},1441:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(35),a(606);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1113),l=a(1387),c=a(0),d=a(15),m=a(1176),u=a(1135),h=a(1123),p=a(1168);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends i.Component{constructor(e){super(e),b(this,"handleCancel",e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.updateSection(e)}),b(this,"handleFileSelected",()=>{this.confirmButton.current&&this.confirmButton.current.focus()}),b(this,"handleSave",e=>{e.preventDefault(),this.props.loadingPicture||(this.state.removeSrc?this.props.onRemove():this.state.setDefaultSrc?this.props.onSetDefault():this.props.onSubmit())}),b(this,"handleRemoveSrc",e=>{e.preventDefault(),this.setState({removeSrc:!0}),this.focusFirstElement()}),b(this,"handleSetDefaultSrc",e=>{e.preventDefault(),this.setState({setDefaultSrc:!0}),this.focusFirstElement()}),b(this,"handleFileChange",e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.onFileChange(e)}),b(this,"handleInputFile",()=>{this.selectInput.current.value="",this.selectInput.current.click()}),b(this,"setPicture",e=>{if(e){this.previewBlob=URL.createObjectURL(e);var t=new FileReader;t.onload=e=>{const t=m.c(e.target.result),a=m.e(t);this.setState({image:this.previewBlob,orientationStyles:a})},t.readAsArrayBuffer(e)}}),b(this,"renderImg",()=>{const e=this.props.imageContext;if(this.props.file){const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({backgroundImage:"url("+this.state.image+")"},this.state.orientationStyles);return r.a.createElement("div",{className:"".concat(e,"-img-preview")},r.a.createElement("div",{className:"img-preview__image"},r.a.createElement("div",{alt:"".concat(e," image preview"),style:t,className:"".concat(e,"-img-preview")})))}if(this.state.setDefaultSrc)return r.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.defaultImageSrc});if(this.props.src&&!this.state.removeSrc){const t=r.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:this.props.src});if(!this.props.onRemove&&!this.props.onSetDefault)return t;let a,n;return this.props.onRemove?(a=r.a.createElement(o.a,{id:"setting_picture.remove",defaultMessage:"Remove This Icon"}),n=this.handleRemoveSrc):this.props.onSetDefault&&(a=r.a.createElement(o.a,{id:"setting_picture.remove_profile_picture",defaultMessage:"Remove Profile Picture"}),n=this.handleSetDefaultSrc),r.a.createElement("div",{className:"".concat(e,"-img__container")},r.a.createElement("div",{className:"img-preview__image","aria-hidden":!0},t),r.a.createElement(h.a,{delayShow:c.j.OVERLAY_TIME_DELAY,placement:"right",overlay:r.a.createElement(l.a,{id:"removeIcon"},r.a.createElement("div",{"aria-hidden":!0},a))},r.a.createElement("button",{"data-testid":"removeSettingPicture",className:"".concat(e,"-img__remove"),onClick:n},r.a.createElement("span",{"aria-hidden":!0},"×"),r.a.createElement("span",{className:"sr-only"},a))))}return null}),this.settingList=r.a.createRef(),this.selectInput=r.a.createRef(),this.confirmButton=r.a.createRef(),this.state={image:null,removeSrc:!1,setDefaultSrc:!1}}focusFirstElement(){this.settingList.current&&this.settingList.current.focus()}componentDidMount(){this.focusFirstElement(),this.selectInput.current&&this.selectInput.current.addEventListener("input",this.handleFileSelected)}componentDidUpdate(e){e.file!==this.props.file&&this.setPicture(this.props.file)}componentWillUnmount(){this.previewBlob&&URL.revokeObjectURL(this.previewBlob),this.selectInput.current&&this.selectInput.current.removeEventListener("input",this.handleFileSelected)}render(){const e=this.renderImg();let t,a,n="btn btn-sm",s=!1;return this.props.submitActive||this.state.removeSrc||this.state.setDefaultSrc?n+=" btn-primary":(n+=" btn-inactive disabled",s=!0),e&&(t=r.a.createElement("li",{className:"setting-list-item",role:"presentation"},e)),this.props.onSubmit&&(a=r.a.createElement("span",null,r.a.createElement("input",{"data-testid":"uploadPicture",ref:this.selectInput,className:"hidden",accept:".jpg,.png,.bmp",type:"file",onChange:this.handleFileChange,disabled:this.props.loadingPicture,"aria-hidden":!0,tabIndex:"-1"}),r.a.createElement("button",{"data-testid":"inputSettingPictureButton",className:"btn btn-sm btn-primary btn-file sel-btn",disabled:this.props.loadingPicture,onClick:this.handleInputFile,"aria-label":Object(d.lb)("setting_picture.select","Select")},r.a.createElement(o.a,{id:"setting_picture.select",defaultMessage:"Select"})),r.a.createElement("button",{tabIndex:s?"-1":"0","data-testid":"saveSettingPicture",disabled:s,ref:this.confirmButton,className:n,onClick:this.handleSave,"aria-label":this.props.loadingPicture?Object(d.lb)("setting_picture.uploading","Uploading..."):Object(d.lb)("setting_picture.save","Save")},r.a.createElement(p.a,{loading:this.props.loadingPicture,text:Object(d.lb)("setting_picture.uploading","Uploading...")},r.a.createElement(o.a,{id:"setting_picture.save",defaultMessage:"Save"}))))),r.a.createElement("section",{className:"section-max form-horizontal"},r.a.createElement("h4",{className:"col-xs-12 section-title"},this.props.title),r.a.createElement("div",{className:"col-xs-offset-3 col-xs-8"},r.a.createElement("div",{className:"setting-list",ref:this.settingList,tabIndex:"-1","aria-label":this.props.title,"aria-describedby":"setting-picture__helptext"},t,r.a.createElement("div",{id:"setting-picture__helptext",className:"setting-list-item pt-3"},this.props.helpText),r.a.createElement("div",{className:"setting-list-item"},r.a.createElement("hr",null),r.a.createElement(u.a,{errors:[this.props.clientError,this.props.serverError],type:"modal"}),a,r.a.createElement("button",{"data-testid":"cancelSettingPicture",className:"btn btn-link btn-sm theme",href:"#",onClick:this.handleCancel,"aria-label":Object(d.lb)("setting_picture.cancel","Cancel")},r.a.createElement(o.a,{id:"setting_picture.cancel",defaultMessage:"Cancel"}))))))}}b(f,"defaultProps",{imageContext:"profile"}),b(f,"propTypes",{clientError:s.a.string,serverError:s.a.string,src:s.a.string,defaultImageSrc:s.a.string,file:s.a.object,loadingPicture:s.a.bool,submitActive:s.a.bool,onRemove:s.a.func,onSetDefault:s.a.func,onSubmit:s.a.func,title:s.a.string,onFileChange:s.a.func,updateSection:s.a.func,imageContext:s.a.string,maxFileSize:s.a.number,helpText:s.a.object})},1510:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(1147),r=a(90),o=(a(54),a(35),a(6)),l=a.n(o),c=a(33),d=a.n(c),m=a(1365),u=a(1113),h=a(1553),p=a(1194),g=a(15),b=a(1156),f=a(181),_=(a(118),a(1380)),E=a(1300),v=a(1381),y=a(1382),C=a(1383),w=(a(176),a(1182));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class M extends l.a.PureComponent{constructor(e){super(e),P(this,"calculateInputRect",()=>{if(this.props.inputRef.current){const e=this.props.inputRef.current.getInput().getBoundingClientRect();return{top:e.top,bottom:e.bottom,width:e.width}}return{top:0,bottom:0,width:0}}),P(this,"onModalScroll",e=>{this.state.scroll!==e.target.scrollTop&&0!==this.latestHeight&&this.setState({scroll:e.target.scrollTop})}),P(this,"getChildHeight",()=>{if(!this.container.current)return 0;const e=this.suggestionList.current.getContent()[0];return e?e.getBoundingClientRect().height:0}),P(this,"updateInputBounds",()=>{const e=this.calculateInputRect();return e.top===this.state.inputBounds.top&&e.bottom===this.state.inputBounds.bottom&&e.width===this.state.inputBounds.width||this.setState({inputBounds:e}),e}),P(this,"updateLocation",e=>{let t=e;if(e||(t=this.state.inputBounds),!this.container.current)return;this.latestHeight=this.getChildHeight();let a=this.props.location;window.innerHeight<t.bottom+this.latestHeight&&(a="top"),t.top-this.latestHeight<0&&(a="bottom"),this.state.location!==a&&this.setState({location:a})}),P(this,"updateModalBounds",()=>{if(!this.container.current)return;const e=Object(g.s)(this.container.current,".modal-content").getBoundingClientRect();this.state.modalBounds.top===e.top&&this.state.modalBounds.bottom===e.bottom||this.setState({modalBounds:{top:e.top,bottom:e.bottom}})}),this.state={scroll:0,modalBounds:{top:0,bottom:0},inputBounds:{top:0,bottom:0,width:0},location:e.location},this.container=l.a.createRef(),this.suggestionList=l.a.createRef(),this.latestHeight=0}componentDidMount(){if(this.container.current){Object(g.s)(this.container.current,".modal-body").addEventListener("scroll",this.onModalScroll)}window.addEventListener("resize",this.updateModalBounds)}componentWillUnmount(){if(this.container.current){Object(g.s)(this.container.current,".modal-body").removeEventListener("scroll",this.onModalScroll)}window.removeEventListener("resize",this.updateModalBounds)}componentDidUpdate(e,t){if(this.props.open&&!this.props.cleared&&(e.open!==this.state.open||e.cleared!==this.state.cleared||t.scroll!==this.state.scroll||t.modalBounds.top!==this.state.modalBounds.top||t.modalBounds.bottom!==this.state.modalBounds.bottom)){const e=this.updateInputBounds();if(this.updateLocation(e),this.container.current){const t=Object(g.s)(this.container.current,".modal-body").getBoundingClientRect();if(e.bottom<t.top||e.top>t.bottom)return void this.props.onLoseVisibility()}this.updateModalBounds()}}render(){const e=S({},this.props);Reflect.deleteProperty(e,"onLoseVisibility");let t={};return t="top"===this.state.location?{bottom:this.state.modalBounds.bottom-this.state.inputBounds.top}:{top:this.state.inputBounds.bottom-this.state.modalBounds.top},l.a.createElement("div",{style:T({position:"fixed",zIndex:101,width:this.state.inputBounds.width},t),ref:this.container},l.a.createElement(w.a,Object.assign({},e,{location:this.state.location,ref:this.suggestionList})))}}P(M,"propTypes",{location:d.a.string.isRequired,open:d.a.bool.isRequired,cleared:d.a.bool.isRequired,inputRef:d.a.object.isRequired,onLoseVisibility:d.a.func.isRequired});var N=a(1301);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends l.a.PureComponent{constructor(...e){super(...e),I(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.checked)})}render(){return l.a.createElement(N.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:this.props.id,autoFocus:this.props.autoFocus,type:"checkbox",checked:this.props.value,onChange:this.handleChange}),l.a.createElement("span",null,this.props.placeholder))))}}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}I(j,"propTypes",{id:d.a.string.isRequired,label:d.a.node.isRequired,labelClassName:d.a.string,helpText:d.a.node,placeholder:d.a.string.isRequired,value:d.a.bool.isRequired,inputClassName:d.a.string,autoFocus:d.a.bool}),I(j,"defaultProps",{labelClassName:"",inputClassName:""});class R extends l.a.PureComponent{constructor(...e){super(...e),A(this,"handleChange",e=>{this.props.onChange(this.props.id,e.target.value)})}render(){return l.a.createElement(N.a,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id},this.props.options.map(({value:e,text:t})=>l.a.createElement("div",{className:"radio",key:e},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:e,name:this.props.id,checked:e===this.props.value,onChange:this.handleChange}),t))))}}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}A(R,"propTypes",{id:d.a.string.isRequired,options:d.a.arrayOf(d.a.shape({text:d.a.string.isRequired,value:d.a.string.isRequired})),label:d.a.node.isRequired,value:d.a.string,labelClassName:d.a.string,inputClassName:d.a.string,helpText:d.a.node}),A(R,"defaultProps",{labelClassName:"",inputClassName:"",options:[]});class L extends l.a.PureComponent{constructor(e){super(e),k(this,"handleSelected",e=>{const{name:t,dataSource:a,onChange:n}=this.props;"users"===a?(n(t,e.id),this.setState({value:e.username})):"channels"===a?(n(t,e.id),this.setState({value:e.display_name})):(n(t,e.value),this.setState({value:e.text}))});let t="";if(this.providers=[],"select"===e.type&&("users"===e.dataSource?this.providers=[new E.a(e.actions.autocompleteUsers)]:"channels"===e.dataSource?this.providers=[new v.a(e.actions.autocompleteChannels)]:e.options&&(this.providers=[new _.a(e.options)]),e.value&&e.options)){const a=e.options.find(t=>t.value===e.value);t=a?a.text:""}this.state={value:t}}render(){const{name:e,subtype:t,displayName:a,value:n,placeholder:s,onChange:i,helpText:r,errorText:o,optional:c,options:d}=this.props;let{type:m,maxLength:h}=this.props,p=a;p=c?l.a.createElement(l.a.Fragment,null,a+" ",l.a.createElement("span",{className:"font-weight--normal light"},l.a.createElement(u.a,{id:"interactive_dialog.element.optional",defaultMessage:"(optional)"}))):l.a.createElement(l.a.Fragment,null,a,l.a.createElement("span",{className:"error-text"}," *"));let g=r;return o&&(g=l.a.createElement(l.a.Fragment,null,r,l.a.createElement("div",{className:"error-text mt-3"},o))),"text"===m||"textarea"===m?("text"===m?(h=h||150,m=t&&y.a.validTypes.includes(t)?t:"input"):h=h||3e3,l.a.createElement(y.a,{autoFocus:this.props.autoFocus,id:e,type:m,label:p,maxLength:h,value:n||"",placeholder:s,helpText:g,onChange:i,resizable:!1})):"select"===m?l.a.createElement(C.a,{id:e,providers:this.providers,onSelected:this.handleSelected,label:p,helpText:g,placeholder:s,value:this.state.value,listComponent:M,listStyle:"bottom"}):"bool"===m?l.a.createElement(j,{autoFocus:this.props.autoFocus,id:e,label:p,value:n||!1,helpText:g,placeholder:s,onChange:i}):"radio"===m?l.a.createElement(R,{id:e,label:p,helpText:g,options:d,value:n,onChange:i}):null}}k(L,"propTypes",{displayName:d.a.string.isRequired,name:d.a.string.isRequired,type:d.a.string.isRequired,subtype:d.a.string,placeholder:d.a.string,helpText:d.a.string,errorText:d.a.node,maxLength:d.a.number,dataSource:d.a.string,optional:d.a.bool,options:d.a.arrayOf(d.a.object),value:d.a.any,onChange:d.a.func,autoFocus:d.a.bool,actions:d.a.shape({autocompleteChannels:d.a.func.isRequired,autocompleteUsers:d.a.func.isRequired}).isRequired});var D,x,U,q=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({autocompleteChannels:b.b,autocompleteUsers:f.b},e)}}))(L),H=a(70);class F extends l.a.PureComponent{render(){const e=H.a(this.props.value,{breaks:!0,sanitize:!0,gfm:!0},this.props.emojiMap);return l.a.createElement("span",{id:this.props.id,dangerouslySetInnerHTML:{__html:e}})}}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}D=F,x="propTypes",U={id:d.a.string,value:d.a.string.isRequired,emojiMap:d.a.object.isRequired},x in D?Object.defineProperty(D,x,{value:U,enumerable:!0,configurable:!0,writable:!0}):D[x]=U;class V extends l.a.PureComponent{constructor(e){super(e),G(this,"handleSubmit",async e=>{e.preventDefault();const{elements:t}=this.props,a=this.state.values,n={};if(t&&t.forEach(e=>{const t=Object(h.checkDialogElementForError)(e,a[e.name]);t&&(n[e.name]=l.a.createElement(u.a,{id:t.id,defaultMessage:t.defaultMessage,values:t.values}))}),this.setState({errors:n}),0!==Object.keys(n).length)return;const{url:s,callbackId:i,state:r}=this.props,o={url:s,callback_id:i,state:r,submission:a};this.setState({submitting:!0});const{data:c}=await this.props.actions.submitInteractiveDialog(o);this.setState({submitting:!1});let d=!1;c&&(c.error&&(d=!0,this.setState({error:c.error})),c.errors&&Object.keys(c.errors).length>=0&&Object(h.checkIfErrorsMatchElements)(c.errors,t)&&(d=!0,this.setState({errors:c.errors}))),d||this.handleHide(!0)}),G(this,"onHide",()=>{this.handleHide(!1)}),G(this,"handleHide",(e=!1)=>{const{url:t,callbackId:a,state:n,notifyOnCancel:s}=this.props;if(!e&&s){const e={url:t,callback_id:a,state:n,cancelled:!0};this.props.actions.submitInteractiveDialog(e)}this.setState({show:!1})}),G(this,"onChange",(e,t)=>{const a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){G(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state.values,{[e]:t});this.setState({values:a})});const t={};null!=e.elements&&e.elements.forEach(e=>{"bool"===e.type?t[e.name]=!0===e.default||"true"===String(e.default).toLowerCase():t[e.name]=e.default||null}),this.state={show:!0,values:t,error:null,errors:{},submitting:!1}}render(){const{title:e,introductionText:t,iconUrl:a,submitLabel:n,elements:s}=this.props;let i,r=l.a.createElement(u.a,{id:"interactive_dialog.submit",defaultMessage:"Submit"});return n&&(r=n),a&&(i=l.a.createElement("img",{id:"interactiveDialogIconUrl",alt:"modal title icon",className:"more-modal__image",width:"36",height:"36",src:a})),l.a.createElement(m.a,{id:"interactiveDialogModal",dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,backdrop:"static",role:"dialog","aria-labelledby":"interactiveDialogModalLabel"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(m.a.Header,{closeButton:!0,style:{borderBottom:null==s&&"0px"}},l.a.createElement(m.a.Title,{componentClass:"h1",id:"interactiveDialogModalLabel"},i,e)),(s||t)&&l.a.createElement(m.a.Body,null,t&&l.a.createElement(F,{id:"interactiveDialogModalIntroductionText",value:t,emojiMap:this.props.emojiMap}),s&&s.map((e,t)=>l.a.createElement(q,{autoFocus:0===t,key:"dialogelement"+e.name,displayName:e.display_name,name:e.name,type:e.type,subtype:e.subtype,helpText:e.help_text,errorText:this.state.errors[e.name],placeholder:e.placeholder,minLength:e.min_length,maxLength:e.max_length,dataSource:e.data_source,optional:e.optional,options:e.options,value:this.state.values[e.name],onChange:this.onChange}))),l.a.createElement(m.a.Footer,null,this.state.error&&l.a.createElement("div",{className:"error-text"},this.state.error),l.a.createElement("button",{id:"interactiveDialogCancel",type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},l.a.createElement(u.a,{id:"interactive_dialog.cancel",defaultMessage:"Cancel"})),l.a.createElement(p.a,{id:"interactiveDialogSubmit",type:"submit",autoFocus:!s||0===s.length,className:"btn btn-primary save-button",spinning:this.state.submitting,spinningText:Object(g.lb)("interactive_dialog.submitting","Submitting...")},r))))}}G(V,"propTypes",{url:d.a.string.isRequired,callbackId:d.a.string,elements:d.a.arrayOf(d.a.object),title:d.a.string.isRequired,introductionText:d.a.string,iconUrl:d.a.string,submitLabel:d.a.string,notifyOnCancel:d.a.bool,state:d.a.string,onHide:d.a.func,actions:d.a.shape({submitInteractiveDialog:d.a.func.isRequired}).isRequired,emojiMap:d.a.object.isRequired});t.a=Object(n.connect)((function(e){const t=e.entities.integrations.dialog;return t&&t.dialog?{url:t.url,callbackId:t.dialog.callback_id,elements:t.dialog.elements,title:t.dialog.title,introductionText:t.dialog.introduction_text,iconUrl:t.dialog.icon_url,submitLabel:t.dialog.submit_label,notifyOnCancel:t.dialog.notify_on_cancel,state:t.dialog.state,emojiMap:Object(r.a)(e)}:{}}),(function(e){return{actions:Object(s.bindActionCreators)({submitInteractiveDialog:i.submitInteractiveDialog},e)}}))(V)},1511:function(e,t,a){"use strict";a(177);var n=a(100),s=a.n(n),i=a(33),r=a.n(i),o=a(6),l=a.n(o),c=a(316),d=a.n(c),m=a(1113),u=a(320),h=a(1227),p=(a(35),a(0)),g=a(1125),b=a(315),f=a(9),_=(a(176),a(99),a(22)),E=a(15),v=a(1177),y=a(1205),C=a(1120);function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends l.a.PureComponent{render(){let e=null;this.props.actions&&(e=this.props.actions.map((e,t)=>l.a.createElement(e,Object.assign({key:t.toString(),user:this.props.user,index:this.props.index,totalUsers:this.props.totalUsers},this.props.actionProps,this.props.actionUserProps))));let t,a=this.props.user.email,n="more-modal__description";this.props.extraInfo&&this.props.extraInfo.length>0?(a=l.a.createElement(C.b,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),n=""):t=this.props.user.status?this.props.user.status:this.props.status,this.props.user.is_bot&&(t=null,a=null);let s=null,i=null;return this.props.userCount>=0&&(s=E.h("userListRowName"+this.props.userCount),i=E.h("userListRowEmail"+this.props.userCount)),l.a.createElement("div",{key:this.props.user.id,className:"more-modal__row"},l.a.createElement(v.a,{src:_.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:t,size:"md",userId:this.props.user.id,hasMention:!0}),l.a.createElement("div",{className:"more-modal__details","data-testid":"userListItemDetails"},l.a.createElement("div",{id:s,className:"more-modal__name"},l.a.createElement(y.a,{userId:this.props.user.id,hasMention:!0,displayUsername:!0}),"&nbsp;",this.props.user.first_name||this.props.user.last_name||this.props.user.nickname?"-":null,"&nbsp;",E.l(this.props.user)),l.a.createElement("div",{id:i,className:n},a),this.props.extraInfo),l.a.createElement("div",{"data-testid":"userListItemActions",className:"more-modal__actions"},e))}}w(O,"propTypes",{user:r.a.object.isRequired,status:r.a.string,extraInfo:r.a.arrayOf(r.a.object),actions:r.a.arrayOf(r.a.func),actionProps:r.a.object,actionUserProps:r.a.object,index:r.a.number,totalUsers:r.a.number,userCount:r.a.number}),w(O,"defaultProps",{extraInfo:[],actions:[],actionProps:{},actionUserProps:{}});var T=Object(b.connect)((function(e,t){const a=t.user||{};return{status:Object(f.getStatusForUserId)(e,a.id)}}))(O);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends l.a.PureComponent{constructor(...e){super(...e),S(this,"scrollToTop",()=>{this.refs.container&&(this.refs.container.scrollTop=0)})}render(){const e=this.props.users,t=this.props.rowComponentType;let a;return null==e?l.a.createElement(g.a,null):(a=e.length>0?e.map((a,n)=>l.a.createElement(t,{key:a.id,user:a,extraInfo:this.props.extraInfo[a.id],actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps[a.id],index:n,totalUsers:e.length,userCount:n>=0&&n<p.Q.TEST_ID_COUNT?n:-1})):l.a.createElement("div",{key:"no-users-found",className:"more-modal__placeholder-row","data-testid":"noUsersFound"},l.a.createElement("p",null,l.a.createElement(m.a,{id:"user_list.notFound",defaultMessage:"No users found"}))),l.a.createElement("div",{ref:"container"},a))}}S(P,"propTypes",{users:r.a.arrayOf(r.a.object),extraInfo:r.a.object,actions:r.a.arrayOf(r.a.func),actionProps:r.a.object,actionUserProps:r.a.object,rowComponentType:r.a.func}),S(P,"defaultProps",{users:[],extraInfo:{},actions:[],actionProps:{},rowComponentType:T});var M=a(1134),N=a(13);function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends l.a.PureComponent{constructor(e){super(e),I(this,"nextPage",e=>{e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout(()=>this.setState({nextDisabled:!1}),500),this.props.nextPage(),s()(d.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),I(this,"previousPage",e=>{e.preventDefault(),this.props.previousPage(),s()(d.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),I(this,"focusSearchBar",()=>{this.props.focusOnMount&&this.refs.filter.focus()}),I(this,"handleInput",e=>{this.props.onTermChange(e.target.value),this.props.search(e.target.value)}),I(this,"renderCount",e=>{if(!e)return null;if(this.props.filter)return null;const t=e.length,a=this.props.total,n=Boolean(this.props.term);let s,i;return n?(s=-1,i=-1):(s=this.props.page*this.props.usersPerPage,i=Math.min(s+this.props.usersPerPage,a)),this.props.renderCount?this.props.renderCount(t,this.props.total,s,i,n):this.props.total?n?l.a.createElement(m.a,{id:"filtered_user_list.countTotal",defaultMessage:"{count, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,total:a}}):l.a.createElement(m.a,{id:"filtered_user_list.countTotalPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:t,startCount:s+1,endCount:i,total:a}}):null}),this.nextTimeoutId=0,this.state={nextDisabled:!1}}componentDidMount(){this.focusSearchBar()}componentDidUpdate(e){this.props.page===e.page&&this.props.term===e.term||this.refs.userList.scrollToTop()}componentWillUnmount(){clearTimeout(this.nextTimeoutId)}render(){let e,t,a;const{formatMessage:n}=this.props.intl;if(this.props.term||!this.props.users)a=this.props.users;else if(!this.props.term){const n=this.props.page*this.props.usersPerPage,s=n+this.props.usersPerPage;a=this.props.users.slice(n,s),s<this.props.users.length&&(e=l.a.createElement("button",{id:"searchableUserListNextBtn",className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},l.a.createElement(m.a,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.props.page>0&&(t=l.a.createElement("button",{id:"searchableUserListPrevBtn",className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},l.a.createElement(m.a,{id:"filtered_user_list.prev",defaultMessage:"Previous"})))}let s;if(this.props.renderFilterRow)s=this.props.renderFilterRow(this.handleInput);else{const e={id:Object(N.b)("filtered_user_list.search"),defaultMessage:"Search users"};s=l.a.createElement("div",{className:"col-xs-12"},l.a.createElement("label",{className:"hidden-label",htmlFor:"searchUsersInput"},l.a.createElement(m.a,{id:"filtered_user_list.search",defaultMessage:"Search users"})),l.a.createElement(h.a,{id:"searchUsersInput",ref:"filter",className:"form-control filter-textbox",placeholder:e,inputComponent:M.a,value:this.props.term,onInput:this.handleInput,"aria-label":n(e).toLowerCase()}))}return l.a.createElement("div",{className:"filtered-user-list"},l.a.createElement("div",{className:"filter-row"},s,l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("span",{id:"searchableUserListTotal",className:"member-count pull-left","aria-live":"polite"},this.renderCount(a)))),l.a.createElement("div",{className:"more-modal__list"},l.a.createElement(P,{ref:"userList",users:a,extraInfo:this.props.extraInfo,actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps,rowComponentType:this.props.rowComponentType})),l.a.createElement("div",{className:"filter-controls"},t,e))}}I(j,"propTypes",{users:r.a.arrayOf(r.a.object),usersPerPage:r.a.number,total:r.a.number,extraInfo:r.a.object,nextPage:r.a.func.isRequired,previousPage:r.a.func.isRequired,search:r.a.func.isRequired,actions:r.a.arrayOf(r.a.func),actionProps:r.a.object,actionUserProps:r.a.object,focusOnMount:r.a.bool,renderCount:r.a.func,filter:r.a.string,renderFilterRow:r.a.func,page:r.a.number.isRequired,term:r.a.string.isRequired,onTermChange:r.a.func.isRequired,intl:r.a.any,rowComponentType:r.a.func}),I(j,"defaultProps",{users:[],usersPerPage:50,extraInfo:{},actions:[],actionProps:{},actionUserProps:{},showTeamToggle:!1,focusOnMount:!1});t.a=Object(u.c)(j)},1512:function(e,t,a){"use strict";a(54),a(118),a(62),a(35);var n=a(1527),s=a.n(n),i=a(22),r=a(20),o=a(0),l=a(179),c=(a(73),a(6)),d=a.n(c),m=a(340),u=a.n(m),h=a(1223),p=a(180),g=a(1250),b=a(1131),f=a(15);function _(e,t,a,n=Object(f.p)()){return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:e,data:{id:n,pluginId:t,component:a}}),n}const E=e=>"function"==typeof e?d.a.createElement(e):e;class v{constructor(e){this.id=e}registerRootComponent(e){return _("Root",this.id,e)}registerPopoverUserAttributesComponent(e){return _("PopoverUserAttributes",this.id,e)}registerPopoverUserActionsComponent(e){return _("PopoverUserActions",this.id,e)}registerLeftSidebarHeaderComponent(e){return _("LeftSidebarHeader",this.id,e)}registerBottomTeamSidebarComponent(e){return _("BottomTeamSidebar",this.id,e)}registerPostMessageAttachmentComponent(e){return _("PostMessageAttachment",this.id,e)}registerLinkTooltipComponent(e){return _("LinkTooltip",this.id,e)}registerChannelHeaderButtonAction(e,t,a,n){const s=Object(f.p)(),i={id:s,pluginId:this.id,icon:E(e),action:t,dropdownText:E(a),tooltipText:n};return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"ChannelHeaderButton",data:i}),r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"MobileChannelHeaderButton",data:i}),s}registerPostTypeComponent(e,t){const a=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_POST_COMPONENT,data:{id:a,pluginId:this.id,type:e,component:t}}),a}registerPostCardTypeComponent(e,t){const a=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_POST_CARD_COMPONENT,data:{id:a,pluginId:this.id,type:e,component:t}}),a}registerPostWillRenderEmbedComponent(e,t,a){const n=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"PostWillRenderEmbedComponent",data:{id:n,pluginId:this.id,component:t,match:e,toggleable:a}}),n}registerMainMenuAction(e,t,a){const n=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"MainMenu",data:{id:n,pluginId:this.id,text:E(e),action:t,mobileIcon:E(a)}}),n}registerChannelHeaderMenuAction(e,t){const a=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"ChannelHeader",data:{id:a,pluginId:this.id,text:E(e),action:t}}),a}registerPostDropdownMenuAction(e,t,a){const n=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"PostDropdownMenu",data:{id:n,pluginId:this.id,text:E(e),action:t,filter:a}}),n}registerPostDropdownSubMenuAction(e,t,a){const n=Object(f.p)();return{id:n,rootRegisterMenuItem:function e(t,a,n,s,i,l){return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"PostDropdownMenu",data:{id:a,parentMenuId:n,pluginId:t,text:E(s),subMenu:[],action:i,filter:l}}),function(s,i,r){if(n)throw new Error("Submenus are currently limited to a single level.");return e(t,Object(f.p)(),a,s,i,r)}}(this.id,n,null,e,t,a)}}registerPostDropdownMenuComponent(e){return _("PostDropdownMenuItem",this.id,e)}registerFileUploadMethod(e,t,a){const n=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"FileUploadMethod",data:{id:n,pluginId:this.id,text:a,action:t,icon:e}}),n}registerFilesWillUploadHook(e){const t=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"FilesWillUploadHook",data:{id:t,pluginId:this.id,hook:e}}),t}unregisterComponent(e){r.a.dispatch({type:o.f.REMOVED_PLUGIN_COMPONENT,id:e})}unregisterPostTypeComponent(e){r.a.dispatch({type:o.f.REMOVED_PLUGIN_POST_COMPONENT,id:e})}registerReducer(e){u.a.register("plugins-"+this.id,e)}registerWebSocketEventHandler(e,t){Object(h.e)(this.id,e,t)}unregisterWebSocketEventHandler(e){Object(h.j)(this.id,e)}registerReconnectHandler(e){Object(h.d)(this.id,e)}unregisterReconnectHandler(){Object(h.i)(this.id)}registerMessageWillBePostedHook(e){const t=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}registerSlashCommandWillBePostedHook(e){const t=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"SlashCommandWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}registerMessageWillFormatHook(e){const t=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillFormat",data:{id:t,pluginId:this.id,hook:e}}),t}registerFilePreviewComponent(e,t){const a=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"FilePreview",data:{id:a,pluginId:this.id,override:e,component:t}}),a}registerTranslations(e){r.a.dispatch(Object(g.c)(this.id,e))}registerAdminConsolePlugin(e){r.a.dispatch(Object(b.A)(this.id,e))}registerAdminConsoleCustomSetting(e,t,{showTitle:a}={}){r.a.dispatch(Object(b.z)(this.id,e,t,{showTitle:a}))}unregisterAdminConsolePlugin(){r.a.dispatch(Object(b.K)(this.id))}registerRightHandSidebarComponent(e,t){const a=Object(f.p)();return r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"RightHandSidebarComponent",data:{id:a,pluginId:this.id,component:e,title:t}}),{id:a,showRHSPlugin:Object(p.p)(a),hideRHSPlugin:Object(p.c)(a),toggleRHSPlugin:Object(p.s)(a)}}registerNeedsTeamRoute(e,t){const a=Object(f.p)();let n=e.trim();return"/"===n[0]&&(n=n.substring(1)),n=this.id+"/"+n,r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"NeedsTeamComponent",data:{id:a,pluginId:this.id,component:t,route:n}}),a}registerCustomRoute(e,t){const a=Object(f.p)();let n=e.trim();return"/"===n[0]&&(n=n.substring(1)),n=this.id+"/"+n,r.a.dispatch({type:o.f.RECEIVED_PLUGIN_COMPONENT,name:"CustomRouteComponent",data:{id:a,pluginId:this.id,component:t,route:n}}),a}}async function y(){if("true"!==r.a.getState().entities.general.config.PluginsEnabled)return;const{data:e,error:t}=await C()(r.a.dispatch);t?console.error(t):null!=e&&0!==e.length&&await Promise.all(e.map(e=>T(e).catch(e=>{console.error(e.message)})))}function C(){return async e=>{let t;try{t=await i.Client4.getWebappPlugins()}catch(e){return{error:e}}return e({type:o.f.RECEIVED_WEBAPP_PLUGINS,data:t}),{data:t}}}a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return T})),a.d(t,"d",(function(){return S})),a.d(t,"c",(function(){return P})),window.regeneratorRuntime=s.a,window.plugins={},window.registerPlugin=function(e,t){window.plugins[e]=t};const w={},O=e=>"plugin "+e.id+", version "+e.version;function T(e){return new Promise((t,a)=>{const n=w[e.id];if(n&&n.webapp.bundle_path===e.webapp.bundle_path)return void t();n&&r.a.dispatch({type:o.f.REMOVED_WEBAPP_PLUGIN,data:e});let s=e.webapp.bundle_path;s.includes("/static/")&&!s.includes("/static/plugins/")&&(s=s.replace("/static/","/static/plugins/")),console.log("Loading "+O(e));const i=document.createElement("script");i.id="plugin_"+e.id,i.type="text/javascript",i.src=Object(l.e)()+s,i.onload=function(){!function(e){const t=window.plugins[e.id],a=new v(e.id);t&&t.initialize&&t.initialize(a,r.a)}(e),console.log("Loaded "+O(e)),t()},i.onerror=function(){a(new Error("Unable to load bundle for "+O(e)))},document.getElementsByTagName("head")[0].appendChild(i),w[e.id]=e})}function S(e){if(!w[e.id])return;console.log("Removing "+O(e)),delete w[e.id],r.a.dispatch({type:o.f.REMOVED_WEBAPP_PLUGIN,data:e});const t=window.plugins[e.id];t&&t.uninitialize?t.uninitialize():t&&t.deinitialize&&t.deinitialize(),Object(h.h)(e.id),Object(h.i)(e.id),r.a.dispatch(Object(b.K)(e.id)),Object(g.d)(e.id);const a=document.getElementById("plugin_"+e.id);a&&(a.parentNode.removeChild(a),console.log("Removed "+O(e)))}async function P(){if("true"!==r.a.getState().entities.general.config.PluginsEnabled)return;const e=r.a.getState().plugins.plugins,{error:t}=await C()(r.a.dispatch);if(t)return void console.error(t);const a=r.a.getState().plugins.plugins;Object.values(a).forEach(t=>{const a=e[t.id];a&&a.version===t.version||T(t).catch(e=>{console.error(e.message)})}),Object.keys(e).forEach(t=>{if(!a.hasOwnProperty(t)){const a=e[t];r.a.dispatch({type:o.f.REMOVED_WEBAPP_PLUGIN,data:a}),S(a)}})}},1514:function(e,t,a){"use strict";var n=a(315),s=a(21),i=a(9),r=a(1171),o=(a(62),a(33)),l=a.n(o),c=a(6),d=a.n(c),m=a(1303),u=a(22),h=a(39),p=a(1357),g=a(1407);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends d.a.PureComponent{constructor(e){super(e),b(this,"handleClick",e=>{const t=this.overlayRef.current.getBoundingClientRect(),a=Object(g.a)(t,window.innerHeight,300);this.setState({target:e.target,show:!this.state.show,placement:a})}),b(this,"hideOverlay",()=>{this.setState({show:!1})}),this.state={show:!1},this.overlayRef=d.a.createRef()}getUserFromMentionName(){const{usersByUsername:e,mentionName:t}=this.props;let a=t.toLowerCase();for(;a.length>0;){if(e.hasOwnProperty(a))return e[a];if(!/[._-]$/.test(a))break;a=a.substring(0,a.length-1)}return""}getGroupFromMentionName(){const{groupsByName:e,mentionName:t}=this.props,a=t.toLowerCase().replace(/[._-]*$/,"");return(null==e?void 0:e[a])||{}}render(){const e=this.getUserFromMentionName();if(!this.props.disableGroupHighlight&&!e){const e=this.getGroupFromMentionName();if(e.allow_reference)return d.a.createElement("span",{className:"group-mention-link"},"@"+e.name)}if(!e)return d.a.createElement(d.a.Fragment,null,this.props.children);const t=this.props.mentionName.substring(e.username.length);let a="mention-link";return this.props.disableHighlight||e.id!==this.props.currentUserId||(a+=" mention--highlight"),d.a.createElement("span",null,d.a.createElement(m.a,{placement:this.state.placement,show:this.state.show,target:this.state.target,rootClose:!0,onHide:this.hideOverlay},d.a.createElement(p.a,{className:"user-profile-popover",userId:e.id,src:u.Client4.getProfilePictureUrl(e.id,e.last_picture_update),isRHS:this.props.isRHS,hasMention:this.props.hasMention,hide:this.hideOverlay})),d.a.createElement("a",{className:a,onClick:this.handleClick,ref:this.overlayRef},"@"+Object(h.displayUsername)(e,this.props.teammateNameDisplay)),t)}}b(f,"propTypes",{children:l.a.node,currentUserId:l.a.string.isRequired,hasMention:l.a.bool,disableHighlight:l.a.bool,disableGroupHighlight:l.a.bool,isRHS:l.a.bool,mentionName:l.a.string.isRequired,teammateNameDisplay:l.a.string.isRequired,usersByUsername:l.a.object.isRequired,groupsByName:l.a.object.isRequired}),b(f,"defaultProps",{isRHS:!1,hasMention:!1,disableHighlight:!1,disableGroupHighlight:!1});t.a=Object(n.connect)((function(e){return{currentUserId:Object(i.getCurrentUserId)(e),teammateNameDisplay:Object(s.getTeammateNameDisplaySetting)(e),usersByUsername:Object(i.getUsersByUsername)(e),groupsByName:Object(r.getGroupsByName)(e)}}))(f)},1515:function(e,t,a){"use strict";var n,s,i,r=a(315),o=a(11),l=a(1132),c=(a(176),a(33)),d=a.n(c),m=a(6),u=a.n(m);function h(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}class p extends u.a.PureComponent{render(){const e=this.props,{modals:t}=e,a=h(e,["modals"]),{modalState:n}=t;if(!t)return u.a.createElement("div",null);const s=[];for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];if(t.open){const n=u.a.createElement(t.dialogType,Object.assign({},t.dialogProps,{onHide:a.actions.closeModal.bind(this,e),key:"".concat(e,"_modal")}));s.push(n)}}return u.a.createElement("div",null,s)}}n=p,s="propTypes",i={modals:d.a.object.isRequired,actions:d.a.shape({closeModal:d.a.func.isRequired}).isRequired},s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;t.a=Object(r.connect)((function(e){return{modals:e.views.modals}}),(function(e){return{actions:Object(o.bindActionCreators)({closeModal:l.a},e)}}))(p)},1516:function(e,t,a){"use strict";var n=a(315),s=a(16),i=a(0),r=a(1187),o=a(33),l=a.n(o),c=a(6),d=a.n(c),m=a(1365),u=a(1113),h=a(1120),p=a(1321);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends d.a.PureComponent{constructor(e){super(e),g(this,"doHide",()=>{this.setState({show:!1})}),g(this,"handleExit",()=>{this.props.onHide()}),this.state={show:!0}}render(){const e=this.props.config,t=this.props.license;let a,n=d.a.createElement(u.a,{id:"about.teamEditiont0",defaultMessage:"Team Edition"}),s=d.a.createElement(u.a,{id:"about.teamEditionSt",defaultMessage:"All your team communication in one place, instantly searchable and accessible anywhere."}),r=d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.teamEditionLearn",defaultMessage:"Join the Mattermost community at "}),d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.mattermost.org/"},"mattermost.org"));"true"===e.BuildEnterpriseReady&&(n=d.a.createElement(u.a,{id:"about.teamEditiont1",defaultMessage:"Enterprise Edition"}),s=d.a.createElement(u.a,{id:"about.enterpriseEditionSt",defaultMessage:"Modern communication from behind your firewall."}),r=d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.enterpriseEditionLearn",defaultMessage:"Learn more about Enterprise Edition at "}),d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://about.mattermost.com/"},"about.mattermost.com")),"true"===t.IsLicensed&&(n=d.a.createElement(u.a,{id:"about.enterpriseEditione1",defaultMessage:"Enterprise Edition"}),a=d.a.createElement("div",{className:"form-group"},d.a.createElement(u.a,{id:"about.licensed",defaultMessage:"Licensed to:"})," ",t.Company)));const o=d.a.createElement("a",{target:"_blank",id:"tosLink",rel:"noopener noreferrer",href:i.d.TERMS_OF_SERVICE},d.a.createElement(u.a,{id:"about.tos",defaultMessage:"Terms of Service"})),l=d.a.createElement("a",{target:"_blank",id:"privacyLink",rel:"noopener noreferrer",href:i.d.PRIVACY_POLICY},d.a.createElement(u.a,{id:"about.privacy",defaultMessage:"Privacy Policy"}));let c=d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.buildnumber",defaultMessage:"Build Number:"}),d.a.createElement("span",{id:"buildnumberString"}," "+e.BuildNumber));isNaN(e.BuildNumber)&&(c=null);let g=e.BuildNumber;return isNaN(e.BuildNumber)||(g="ci"),d.a.createElement(m.a,{dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.doHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"aboutModalLabel"},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,{componentClass:"h1",id:"aboutModalLabel"},d.a.createElement(u.a,{id:"about.title",values:{appTitle:e.SiteName||"Mattermost"},defaultMessage:"About {appTitle}"}))),d.a.createElement(m.a.Body,null,d.a.createElement("div",{className:"about-modal__content"},d.a.createElement("div",{className:"about-modal__logo"},d.a.createElement(p.a,null)),d.a.createElement("div",null,d.a.createElement("h3",{className:"about-modal__title"},"Mattermost"," ",n),d.a.createElement("p",{className:"about-modal__subtitle pb-2"},s),d.a.createElement("div",{className:"form-group less"},d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.version",defaultMessage:"Mattermost Version:"}),d.a.createElement("span",{id:"versionString"}," "+g)),d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.dbversion",defaultMessage:"Database Schema Version:"}),d.a.createElement("span",{id:"dbversionString"}," "+e.Version)),c,d.a.createElement("div",null,d.a.createElement(u.a,{id:"about.database",defaultMessage:"Database:"})," "+e.SQLDriverName)),a)),d.a.createElement("div",{className:"about-modal__footer"},r,d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"about-modal__copyright"},d.a.createElement(u.a,{id:"about.copyright",defaultMessage:"Copyright 2015 - {currentYear} Mattermost, Inc. All rights reserved",values:{currentYear:(new Date).getFullYear()}})),d.a.createElement("div",{className:"about-modal__links"},o," - ",l))),d.a.createElement("div",{className:"about-modal__notice form-group pt-3"},d.a.createElement("p",null,d.a.createElement(h.b,{id:"about.notice",defaultMessage:"Mattermost is made possible by the open source software used in our [server](!https://about.mattermost.com/platform-notice-txt/), [desktop](!https://about.mattermost.com/desktop-notice-txt/) and [mobile](!https://about.mattermost.com/mobile-notice-txt/) apps."}))),d.a.createElement("div",{className:"about-modal__hash"},d.a.createElement("p",null,d.a.createElement(u.a,{id:"about.hash",defaultMessage:"Build Hash:"})," ",e.BuildHash,d.a.createElement("br",null),d.a.createElement(u.a,{id:"about.hashee",defaultMessage:"EE Build Hash:"})," ",e.BuildHashEnterprise,d.a.createElement("br",null),d.a.createElement(u.a,{id:"about.hashwebapp",defaultMessage:"Webapp Build Hash:"})," ",this.props.webappBuildHash||"dev\r\n"),d.a.createElement("p",null,d.a.createElement(u.a,{id:"about.date",defaultMessage:"Build Date:"})," ",e.BuildDate))))}}g(b,"defaultProps",{show:!1}),g(b,"propTypes",{onHide:l.a.func.isRequired,config:l.a.object.isRequired,license:l.a.object.isRequired,webappBuildHash:l.a.string});t.a=Object(n.connect)((function(e){const t=i.u.ABOUT;return{config:Object(s.getConfig)(e),license:Object(s.getLicense)(e),show:Object(r.a)(e,t)}}))(b)},1521:function(e){e.exports=JSON.parse('{"about.buildnumber":"Build Number:","about.copyright":"Copyright 2015 - {currentYear} Mattermost, Inc. All rights reserved","about.database":"Database:","about.date":"Build Date:","about.dbversion":"Database Schema Version:","about.enterpriseEditione1":"Enterprise Edition","about.enterpriseEditionLearn":"Learn more about Enterprise Edition at ","about.enterpriseEditionSt":"Modern communication from behind your firewall.","about.hash":"Build Hash:","about.hashee":"EE Build Hash:","about.hashwebapp":"Webapp Build Hash:","about.licensed":"Licensed to:","about.notice":"Mattermost is made possible by the open source software used in our [server](!https://about.mattermost.com/platform-notice-txt/), [desktop](!https://about.mattermost.com/desktop-notice-txt/) and [mobile](!https://about.mattermost.com/mobile-notice-txt/) apps.","about.privacy":"Privacy Policy","about.teamEditionLearn":"Join the Mattermost community at ","about.teamEditionSt":"All your team communication in one place, instantly searchable and accessible anywhere.","about.teamEditiont0":"Team Edition","about.teamEditiont1":"Enterprise Edition","about.title":"About {appTitle}","about.tos":"Terms of Service","about.version":"Mattermost Version:","access_history.title":"Access History","accessibility.button.attachment":"attachment","accessibility.button.dialog":"{dialogName} dialog","accessibility.button.Info":"Info","accessibility.button.Search":"Search","accessibility.sections.centerContent":"message list main region","accessibility.sections.centerFooter":"message input complimentary region","accessibility.sections.channelHeader":"channel header region","accessibility.sections.lhsHeader":"team menu region","accessibility.sections.lhsList":"channel sidebar region","accessibility.sections.rhs":"{regionTitle} complimentary region","accessibility.sections.rhsContent":"message details complimentary region","accessibility.sections.rhsFooter":"reply input region","accessibility.sidebar.types.mention":"mention","accessibility.sidebar.types.mentions":"mentions","accessibility.sidebar.types.private":"private channel","accessibility.sidebar.types.public":"public channel","accessibility.sidebar.types.unread":"unread","activity_log_modal.android":"Android","activity_log_modal.androidNativeApp":"Android Native App","activity_log_modal.androidNativeClassicApp":"Android Native Classic App","activity_log_modal.desktop":"Native Desktop App","activity_log_modal.iphoneNativeApp":"iPhone Native App","activity_log_modal.iphoneNativeClassicApp":"iPhone Native Classic App","activity_log.activeSessions":"Active Sessions","activity_log.browser":"Browser: {browser}","activity_log.firstTime":"First time active: {date}, {time}","activity_log.lastActivity":"Last activity: {date}, {time}","activity_log.logout":"Log Out","activity_log.moreInfo":"More info","activity_log.os":"OS: {os}","activity_log.sessionId":"Session ID: {id}","activity_log.sessionsDescription":"Sessions are created when you log in through a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the System Admin. To end the session sooner, use the \'Log Out\' button.","add_channels_to_scheme.title":"Add Channels to **Channel Selection** List","add_command.autocomplete":"Autocomplete","add_command.autocomplete.help":"(Optional) Show your slash command on the autocomplete list when someone types / in the input box.","add_command.autocompleteDescription":"Autocomplete Description","add_command.autocompleteDescription.help":"(Optional) Describe your slash command for the autocomplete list.","add_command.autocompleteDescription.placeholder":"Example: \\"Returns search results for patient records\\"","add_command.autocompleteHint":"Autocomplete Hint","add_command.autocompleteHint.help":"(Optional) Specify the arguments associated with your slash command.","add_command.autocompleteHint.placeholder":"Example: [Patient Name]","add_command.cancel":"Cancel","add_command.description":"Description","add_command.description.help":"Describe your incoming webhook.","add_command.displayName":"Title","add_command.displayName.help":"Specify a title, of up to 64 characters, for the slash command settings page.","add_command.doneHelp":"Your slash command is set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (details at [Slash Commands](!https://docs.mattermost.com/developer/slash-commands.html)).","add_command.iconUrl":"Response Icon","add_command.iconUrl.help":"(Optional) Enter the URL of a .png or .jpg file to use as the icon when posting responses to this slash command. The file must be at least 128 pixels by 128 pixels. If left blank, your profile picture is used.","add_command.iconUrl.placeholder":"https://www.example.com/myicon.png","add_command.method":"Request Method","add_command.method.get":"GET","add_command.method.help":"Specify the type of request, either POST or GET, sent to the endpoint that Mattermost hits to reach your application.","add_command.method.post":"POST","add_command.save":"Save","add_command.saving":"Saving...","add_command.token":"**Token**: {token}","add_command.trigger":"Command Trigger Word","add_command.trigger.help":"Specify a trigger word that is not a built-in command, does not contain spaces, and does not begin with the slash character.","add_command.trigger.helpExamples":"Examples: client, employee, patient, weather","add_command.trigger.helpReserved":"Reserved: {link}","add_command.trigger.helpReservedLinkText":"See built-in slash commands","add_command.trigger.placeholder":"Command trigger e.g. \\"hello\\" not including the slash","add_command.triggerInvalidLength":"A trigger word must contain between {min} and {max} characters","add_command.triggerInvalidSlash":"A trigger word cannot begin with a /","add_command.triggerInvalidSpace":"A trigger word must not contain spaces","add_command.triggerRequired":"A trigger word is required","add_command.url":"Request URL","add_command.url.help":"Specify the callback URL to receive the HTTP POST or GET event request when the slash command is run.","add_command.url.placeholder":"Must start with http:// or https://","add_command.urlRequired":"A request URL is required","add_command.username":"Response Username","add_command.username.help":"(Optional) Specify the name to use when posting responses for this slash command. Usernames can be up to 22 characters, and contain lowercase letters, numbers, and the symbols \\"-\\", \\"_\\", and \\".\\". If left blank, your Mattermost username is used.","add_command.username.placeholder":"Username","add_emoji.cancel":"Cancel","add_emoji.header":"Add","add_emoji.image":"Image","add_emoji.image.button":"Select","add_emoji.image.help":"Specify a .gif, .png, or .jpg file for your emoji. The file can be up to 1 MB. The dimensions are resized automatically to 128 pixels by 128 pixels while maintaining the aspect ratio.","add_emoji.imageRequired":"An image is required for the emoji","add_emoji.name":"Name","add_emoji.name.help":"Specify an emoji name that\'s up to 64 characters. It can contain lowercase letters, numbers, and the symbols \'-\' and \'_\'.","add_emoji.nameInvalid":"An emoji\'s name can only contain numbers, letters, and the symbols \'-\' and \'_\'.","add_emoji.nameRequired":"A name is required for the emoji","add_emoji.nameTaken":"This name is already in use by a system emoji. Please choose another name.","add_emoji.preview":"Preview","add_emoji.preview.sentence":"This is a sentence with {image} in it.","add_emoji.save":"Save","add_emoji.saving":"Saving...","add_groups_to_channel.title":"Add New Groups to {channelName} Channel","add_groups_to_team.title":"Add New Groups to {teamName} Team","add_incoming_webhook.cancel":"Cancel","add_incoming_webhook.channel":"Channel","add_incoming_webhook.channel.help":"This is the default public or private channel that receives the webhook payloads.  When setting up the webhook, you must belong to the private channel.","add_incoming_webhook.channelLocked":"Lock to this channel","add_incoming_webhook.channelLocked.help":"If set, the incoming webhook can post only to the selected channel.","add_incoming_webhook.channelRequired":"A valid channel is required","add_incoming_webhook.description":"Description","add_incoming_webhook.description.help":"Describe your incoming webhook.","add_incoming_webhook.displayName":"Title","add_incoming_webhook.displayName.help":"Specify a title, of up to 64 characters, for the webhook settings page.","add_incoming_webhook.doneHelp":"Your incoming webhook is set up. Please send data to the following URL (details at [Incoming Webhooks](!https://docs.mattermost.com/developer/webhooks-incoming.html)).","add_incoming_webhook.icon_url":"Profile Picture","add_incoming_webhook.icon_url.help":"Enter the URL of a .png or .jpg file for the profile picture of this integration when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.","add_incoming_webhook.save":"Save","add_incoming_webhook.saving":"Saving...","add_incoming_webhook.url":"**URL**: {url}","add_incoming_webhook.username":"Username","add_incoming_webhook.username.help":"Specify the username this integration will post as. Usernames must be in lowercase, be up to 22 characters, and can contain numbers and the symbols \\"-\\", \\"_\\", and \\".\\" . If left blank, the name specified by the webhook creator is used.","add_oauth_app.callbackUrls.help":"Specify the URIs to which the service redirects users after accepting or denying them authorization to your application, and handles authorization codes or access tokens. It must start with http:// or https://.","add_oauth_app.callbackUrlsRequired":"One or more callback URLs are required","add_oauth_app.clientId":"**Client ID**: {id}","add_oauth_app.clientSecret":"**Client Secret**: {secret}","add_oauth_app.description.help":"Describe your OAuth 2.0 application.","add_oauth_app.descriptionRequired":"Description for the OAuth 2.0 application is required.","add_oauth_app.doneHelp":"Your OAuth 2.0 application is set up. Please use the following Client ID and Client Secret when requesting authorization for your application (details at [oAuth 2.0 Applications](!https://docs.mattermost.com/developer/oauth-2-0-applications.html)).","add_oauth_app.doneUrlHelp":"Here are your authorized redirect URLs.","add_oauth_app.header":"Add","add_oauth_app.homepage.help":"This is the URL for the homepage of the OAuth 2.0 application. Depending on your server configuration, use HTTP or HTTPS in your URL.","add_oauth_app.homepageRequired":"Homepage for the OAuth 2.0 application is required.","add_oauth_app.icon.help":"(Optional) Specify the URL of the image for your OAuth 2.0 application. Use either HTTP or HTTPS in the URL.","add_oauth_app.name.help":"Specify the display name of your OAuth 2.0 application. You can use up to 64 characters.","add_oauth_app.nameRequired":"Name for the OAuth 2.0 application is required.","add_oauth_app.trusted.help":"If true, the OAuth 2.0 application is considered trusted by the Mattermost server and does not require the user to accept authorization. If false, a window opens to ask the user to accept or deny the authorization.","add_oauth_app.url":"**URL(s)**: {url}","add_outgoing_webhook.callbackUrls":"Callback URLs (One Per Line)","add_outgoing_webhook.callbackUrls.help":"Specify the URL that messages will be sent to. If the URL is private, add it as a {link}.","add_outgoing_webhook.callbackUrls.helpLinkText":"trusted internal connection","add_outgoing_webhook.callbackUrlsRequired":"One or more callback URLs are required","add_outgoing_webhook.cancel":"Cancel","add_outgoing_webhook.channel":"Channel","add_outgoing_webhook.channel.help":"This field is optional if you specify at least one trigger word. Specify the public channel that delivers the payload to the webhook.","add_outgoing_webhook.content_Type":"Content Type","add_outgoing_webhook.contentType.help1":"Specify the content type by which to send the request.","add_outgoing_webhook.contentType.help2":"For the server to encode the parameters in a URL format in the request body, select application/x-www-form-urlencoded.","add_outgoing_webhook.contentType.help3":"For the server to format the request body as JSON, select application/json.","add_outgoing_webhook.description":"Description","add_outgoing_webhook.description.help":"Describe your outgoing webhook.","add_outgoing_webhook.displayName":"Title","add_outgoing_webhook.displayName.help":"Specify a title for the webhook settings page. The title can contain up to 64 characters.","add_outgoing_webhook.doneHelp":"Your outgoing webhook is set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (details at  [Outgoing Webhooks](!https://docs.mattermost.com/developer/webhooks-outgoing.html)).","add_outgoing_webhook.icon_url":"Profile Picture","add_outgoing_webhook.icon_url.help":"Enter the URL of a .png or .jpg file for this integration to use as the profile picture when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.","add_outgoing_webhook.save":"Save","add_outgoing_webhook.saving":"Saving...","add_outgoing_webhook.token":"**Token**: {token}","add_outgoing_webhook.token.message":"Make sure to add this bot account to teams and channels you want it to interact in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","add_outgoing_webhook.triggerWords":"Trigger Words (One Per Line)","add_outgoing_webhook.triggerWords.help":"Specify the trigger words that send an HTTP POST request to your application.  If you select only channel, this is optional. The trigger can be for the channel, the outgoing webhook, or both but when you set it for both, the message must match both values.","add_outgoing_webhook.triggerWordsOrChannelRequired":"A valid channel or a list of trigger words is required","add_outgoing_webhook.triggerWordsTriggerWhen":"Trigger When","add_outgoing_webhook.triggerWordsTriggerWhen.help":"Specify when to trigger the outgoing webhook.","add_outgoing_webhook.triggerWordsTriggerWhenFullWord":"First word matches a trigger word exactly","add_outgoing_webhook.triggerWordsTriggerWhenStartsWith":"First word starts with a trigger word","add_outgoing_webhook.username":"Username","add_outgoing_webhook.username.help":"Specify the username this integration will post as. Usernames can be up to 22 characters, and contain lowercase letters, numbers and the symbols \\"-\\", \\"_\\", and \\".\\". If left blank, the name specified by the webhook creator is used.","add_teams_to_scheme.confirmation.accept":"Yes, Move Team","add_teams_to_scheme.confirmation.message":"This team is already selected in another team scheme, are you sure you want to move it to this team scheme?","add_teams_to_scheme.confirmation.title":"Team Override Scheme Change?","add_teams_to_scheme.title":"Add Teams to **Team Selection** List","add_user_to_channel_modal.add":"Add","add_user_to_channel_modal.cancel":"Cancel","add_user_to_channel_modal.help":"Type to find a channel. Use ↑↓ to browse, ↵ to select, ESC to dismiss.","add_user_to_channel_modal.membershipExistsError":"{name} is already a member of that channel","add_user_to_channel_modal.title":"Add {name} to a Channel","add_users_to_team.title":"Add New Members to {teamName} Team","admin.advance.cluster":"High Availability","admin.advance.metrics":"Performance Monitoring","admin.audits.reload":"Reload User Activity Logs","admin.authentication.email":"Email Authentication","admin.authentication.gitlab":"GitLab","admin.authentication.guest_access":"Guest Access (Beta)","admin.authentication.ldap":"AD/LDAP","admin.authentication.mfa":"Multi-factor Authentication","admin.authentication.oauth":"OAuth 2.0","admin.authentication.saml":"SAML 2.0","admin.authentication.signup":"Signup","admin.banner.heading":"Note:","admin.bleve.bulkIndexingTitle":"Bulk Indexing:","admin.bleve.createJob.help":"All users, channels and posts in the database will be indexed from oldest to newest. Bleve is available during indexing but search results may be incomplete until the indexing job is complete.","admin.bleve.createJob.title":"Index Now","admin.bleve.enableAutocompleteDescription":"Requires a successful connection to the Bleve server. When true, Bleve will be used for all autocompletion queries on users and channels using the latest index. Autocompletion results may be incomplete until a bulk index of the existing users and channels database is finished. When false, database autocomplete is used.","admin.bleve.enableAutocompleteTitle":"Enable Bleve for autocomplete queries:","admin.bleve.enableIndexingDescription":"When true, indexing of new posts occurs automatically. Search queries will use database search until \\"Enable Bleve for search queries\\" is enabled. {documentationLink}","admin.bleve.enableIndexingDescription.documentationLinkText":"Learn more about Bleve in our documentation.","admin.bleve.enableIndexingTitle":"Enable Bleve Indexing:","admin.bleve.enableSearchingDescription":"Requires a successful connection to the Bleve server. When true, Bleve will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used.","admin.bleve.enableSearchingTitle":"Enable Bleve for search queries:","admin.bleve.indexDirDescription":"Directory path to use for store bleve indexes.","admin.bleve.indexDirTitle":"IndexDir:","admin.bleve.percentComplete":"{percent}% Complete","admin.bleve.purgeIndexesButton":"Purge Index","admin.bleve.purgeIndexesButton.error":"Failed to purge indexes: {error}","admin.bleve.purgeIndexesButton.label":"Purge Indexes:","admin.bleve.purgeIndexesButton.success":"Indexes purged successfully.","admin.bleve.purgeIndexesHelpText":"Purging will entirely remove the indexes on the Bleve server. Search results may be incomplete until a bulk index of the existing database is rebuilt.","admin.bleve.title":"Bleve","admin.channel_settings.channel_detail.channel_configuration":"Channel Configuration","admin.channel_settings.channel_detail.channelName":"**Name**","admin.channel_settings.channel_detail.channelTeam":"**Team**","admin.channel_settings.channel_detail.groupsDescription":"Select groups to be added to this channel.","admin.channel_settings.channel_detail.groupsTitle":"Groups","admin.channel_settings.channel_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.channel_settings.channel_detail.manageTitle":"Channel Management","admin.channel_settings.channel_detail.membersDescription":"A list of users who are currently in the channel right now","admin.channel_settings.channel_detail.membersTitle":"Members","admin.channel_settings.channel_detail.profileDescription":"Summary of the channel, including the channel name.","admin.channel_settings.channel_detail.profileTitle":"Channel Profile","admin.channel_settings.channel_detail.syncedGroupsDescription":"Add and remove channel members based on their group membership.","admin.channel_settings.channel_detail.syncedGroupsTitle":"Synced Groups","admin.channel_settings.channel_details.add_group":"Add Group","admin.channel_settings.channel_details.isDefaultDescr":"This default channel cannot be converted into a private channel.","admin.channel_settings.channel_details.isPublic":"Public channel or private channel","admin.channel_settings.channel_details.isPublicDescr":"If `public` the channel is discoverable and any user can join, or if `private` invitations are required. Toggle to convert public channels to private. When Group Sync is enabled, private channels cannot be converted to public.","admin.channel_settings.channel_details.syncGroupMembers":"Sync Group Members","admin.channel_settings.channel_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this channel. The only way of inviting members to this channel is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","admin.channel_settings.channel_list.managementHeader":"Management","admin.channel_settings.channel_list.nameHeader":"Name","admin.channel_settings.channel_list.no_channels_found":"No channels found","admin.channel_settings.channel_list.teamHeader":"Team","admin.channel_settings.channel_moderation.channelMentions":"Channel Mentions","admin.channel_settings.channel_moderation.channelMentions.disabledBoth":"Channel mentions for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.channelMentions.disabledBothDueToCreatePosts":"Guests and members can not use channel mentions without the ability to create posts.","admin.channel_settings.channel_moderation.channelMentions.disabledGuest":"Channel mentions for guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.channelMentions.disabledGuestsDueToCreatePosts":"Guests can not use channel mentions without the ability to create posts.","admin.channel_settings.channel_moderation.channelMentions.disabledMember":"Channel mentions for members are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.channelMentions.disabledMemberDueToCreatePosts":"Members can not use channel mentions without the ability to create posts.","admin.channel_settings.channel_moderation.channelMentionsDesc":"The ability for members and guests to use @all, @here and @channel.","admin.channel_settings.channel_moderation.channelMentionsDescMembers":"The ability for members to use @all, @here and @channel.","admin.channel_settings.channel_moderation.createPosts":"Create Posts","admin.channel_settings.channel_moderation.createPosts.disabledBoth":"Create posts for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.createPosts.disabledGuest":"Create posts for guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.createPosts.disabledMember":"Create posts for members are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.createPostsDesc":"The ability for members and guests to create posts in the channel.","admin.channel_settings.channel_moderation.createPostsDescMembers":"The ability for members to create posts in the channel.","admin.channel_settings.channel_moderation.guests":"Guests","admin.channel_settings.channel_moderation.manageMembers":"Manage Members","admin.channel_settings.channel_moderation.manageMembers.disabledBoth":"Manage members for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.manageMembers.disabledGuest":"Manage members for guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.manageMembers.disabledMember":"Manage members for members are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.manageMembersDesc":"The ability for members to add and remove people.","admin.channel_settings.channel_moderation.members":"Members","admin.channel_settings.channel_moderation.permissions":"Permissions","admin.channel_settings.channel_moderation.postReactions":"Post Reactions","admin.channel_settings.channel_moderation.postReactions.disabledBoth":"Post reactions for members and guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.postReactions.disabledGuest":"Post reactions for guests are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.postReactions.disabledMember":"Post reactions for members are disabled in [{scheme_name}](../permissions/{scheme_link}).","admin.channel_settings.channel_moderation.postReactionsDesc":"The ability for members and guests to post reactions.","admin.channel_settings.channel_moderation.postReactionsDescMembers":"The ability for members to post reactions.","admin.channel_settings.channel_moderation.subtitle":"Manage the actions available to channel members and guests.","admin.channel_settings.channel_moderation.subtitleMembers":"Manage the actions available to channel members.","admin.channel_settings.channel_moderation.title":"Channel Moderation (Beta)","admin.channel_settings.channel_row.configure":"Edit","admin.channel_settings.description":"Manage channel settings.","admin.channel_settings.groupsPageTitle":"{siteName} Channels","admin.channel_settings.title":"Channels","admin.cluster.ClusterName":"Cluster Name:","admin.cluster.ClusterNameDesc":"The cluster to join by name.  Only nodes with the same cluster name will join together.  This is to support Blue-Green deployments or staging pointing to the same database.","admin.cluster.ClusterNameEx":"E.g.: \\"Production\\" or \\"Staging\\"","admin.cluster.enableDescription":"When true, Mattermost will run in High Availability mode. Please see [documentation](!http://docs.mattermost.com/deployment/cluster.html) to learn more about configuring High Availability for Mattermost.","admin.cluster.enableTitle":"Enable High Availability Mode:","admin.cluster.GossipPort":"Gossip Port:","admin.cluster.GossipPortDesc":"The port used for the gossip protocol.  Both UDP and TCP should be allowed on this port.","admin.cluster.GossipPortEx":"E.g.: \\"8074\\"","admin.cluster.loadedFrom":"This configuration file was loaded from Node ID {clusterId}. Please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html) if you are accessing the System Console through a load balancer and experiencing issues.","admin.cluster.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.cluster.OverrideHostname":"Override Hostname:","admin.cluster.OverrideHostnameDesc":"The default value of <blank> will attempt to get the Hostname from the OS or use the IP Address.  You can override the hostname of this server with this property.  It is not recommended to override the Hostname unless needed. This property can also be set to a specific IP Address if needed.","admin.cluster.OverrideHostnameEx":"E.g.: \\"app-server-01\\"","admin.cluster.should_not_change":"WARNING: These settings may not sync with the other servers in the cluster. High Availability inter-node communication will not start until you modify the config.json to be identical on all servers and restart Mattermost. Please see the [documentation](!http://docs.mattermost.com/deployment/cluster.html) on how to add or remove a server from the cluster. If you are accessing the System Console through a load balancer and experiencing issues, please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html).","admin.cluster.status_table.config_hash":"Config File MD5","admin.cluster.status_table.hostname":"Hostname","admin.cluster.status_table.reload":" Reload Cluster Status","admin.cluster.status_table.status":"Status","admin.cluster.status_table.url":"Gossip Address","admin.cluster.status_table.version":"Version","admin.cluster.StreamingPort":"Streaming Port:","admin.cluster.StreamingPortDesc":"The port used for streaming data between servers.","admin.cluster.StreamingPortEx":"E.g.: \\"8075\\"","admin.cluster.unknown":"unknown","admin.cluster.UseExperimentalGossip":"Use Experimental Gossip:","admin.cluster.UseExperimentalGossipDesc":"When true, the server will attempt to communicate via the gossip protocol over the gossip port.  When false the server will attempt to communicate over the streaming port. When false the gossip port and protocol are still used to determine cluster health.","admin.cluster.UseIpAddress":"Use IP Address:","admin.cluster.UseIpAddressDesc":"When true, the cluster will attempt to communicate via IP Address vs using the hostname.","admin.compliance_reports.desc":"Job Name:","admin.compliance_reports.desc_placeholder":"E.g. \\"Audit 445 for HR\\"","admin.compliance_reports.emails":"Emails:","admin.compliance_reports.emails_placeholder":"E.g. \\"bill@example.com, bob@example.com\\"","admin.compliance_reports.from":"From:","admin.compliance_reports.from_placeholder":"E.g. \\"2016-03-11\\"","admin.compliance_reports.keywords":"Keywords:","admin.compliance_reports.keywords_placeholder":"E.g. \\"shorting stock\\"","admin.compliance_reports.reload":"Reload Completed Compliance Reports","admin.compliance_reports.run":"Run Compliance Report","admin.compliance_reports.title":"Compliance Reports","admin.compliance_reports.to":"To:","admin.compliance_reports.to_placeholder":"E.g. \\"2016-03-15\\"","admin.compliance_table.desc":"Description","admin.compliance_table.download":"Download","admin.compliance_table.failed":"Failed","admin.compliance_table.files":"Files","admin.compliance_table.params":"Params","admin.compliance_table.pending":"Pending","admin.compliance_table.records":"Records","admin.compliance_table.status":"Status","admin.compliance_table.success":"Success","admin.compliance_table.timestamp":"Timestamp","admin.compliance_table.type":"Type","admin.compliance_table.userId":"Requested By","admin.compliance.complianceMonitoring":"Compliance Monitoring","admin.compliance.directoryDescription":"Directory to which compliance reports are written. If blank, will be set to ./data/.","admin.compliance.directoryExample":"E.g.: \\"./data/\\"","admin.compliance.directoryTitle":"Compliance Report Directory:","admin.compliance.enableDailyDesc":"When true, Mattermost will generate a daily compliance report.","admin.compliance.enableDailyTitle":"Enable Daily Report:","admin.compliance.enableDesc":"When true, Mattermost allows compliance reporting from the **Compliance and Auditing** tab. See [documentation](!https://docs.mattermost.com/administration/compliance.html) to learn more.","admin.compliance.enableTitle":"Enable Compliance Reporting:","admin.compliance.newComplianceExportBanner":"This feature is replaced by a new [Compliance Export]({siteURL}/admin_console/compliance/export) feature, and will be removed in a future release. We recommend migrating to the new system.","admin.complianceExport.createJob.help":"Initiates a Compliance Export job immediately.","admin.complianceExport.createJob.title":"Run Compliance Export Job Now","admin.complianceExport.exportFormat.actiance":"Actiance XML","admin.complianceExport.exportFormat.csv":"CSV","admin.complianceExport.exportFormat.description":"Format of the compliance export. Corresponds to the system that you want to import the data into.\\n \\nFor Actiance XML, compliance export files are written to the \\"exports\\" subdirectory of the configured [Local Storage Directory]({siteURL}/admin_console/environment/file_storage). For Global Relay EML, they are emailed to the configured email address.","admin.complianceExport.exportFormat.globalrelay":"Global Relay EML","admin.complianceExport.exportFormat.title":"Export Format:","admin.complianceExport.exportJobStartTime.description":"Set the start time of the daily scheduled compliance export job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.complianceExport.exportJobStartTime.example":"E.g.: \\"02:00\\"","admin.complianceExport.exportJobStartTime.title":"Compliance Export time:","admin.complianceExport.globalRelayCustomerType.a10.description":"A10/Type 10","admin.complianceExport.globalRelayCustomerType.a9.description":"A9/Type 9","admin.complianceExport.globalRelayCustomerType.description":"Type of Global Relay customer account your organization has.","admin.complianceExport.globalRelayCustomerType.title":"Global Relay Customer Account:","admin.complianceExport.globalRelayEmailAddress.description":"The email address your Global Relay server monitors for incoming compliance exports.","admin.complianceExport.globalRelayEmailAddress.example":"E.g.: \\"globalrelay@mattermost.com\\"","admin.complianceExport.globalRelayEmailAddress.title":"Global Relay Email Address:","admin.complianceExport.globalRelaySmtpPassword.description":"The password associated with the SMTP username.","admin.complianceExport.globalRelaySmtpPassword.example":"E.g.: \\"globalRelayPassword\\"","admin.complianceExport.globalRelaySmtpPassword.title":"Global Relay SMTP Password:","admin.complianceExport.globalRelaySmtpUsername.description":"The username for authenticating to the Global Relay SMTP server.","admin.complianceExport.globalRelaySmtpUsername.example":"E.g.: \\"globalRelayUser\\"","admin.complianceExport.globalRelaySmtpUsername.title":"Global Relay SMTP Username:","admin.complianceExport.messagesExportedCount":"{count} messages exported.","admin.complianceExport.title":"Compliance Export (Beta)","admin.complianceExport.warningCount":"{count} warning(s) encountered, see warning.txt for details","admin.complianceMonitoring.userActivityLogsTitle":"User Activity Logs","admin.connectionSecurityNone":"None","admin.connectionSecurityNoneDescription":"Mattermost will connect over an insecure connection.","admin.connectionSecurityStart":"STARTTLS","admin.connectionSecurityStartDescription":"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS.","admin.connectionSecurityTitle":"Connection Security:","admin.connectionSecurityTls":"TLS","admin.connectionSecurityTlsDescription":"Encrypts the communication between Mattermost and your server.","admin.customization.androidAppDownloadLinkDesc":"Add a link to download the Android app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.androidAppDownloadLinkTitle":"Android App Download Link:","admin.customization.announcement.allowBannerDismissalDesc":"When true, users can dismiss the banner until its next update. When false, the banner is permanently visible until it is turned off by the System Admin.","admin.customization.announcement.allowBannerDismissalTitle":"Allow Banner Dismissal:","admin.customization.announcement.bannerColorTitle":"Banner Color:","admin.customization.announcement.bannerTextColorTitle":"Banner Text Color:","admin.customization.announcement.bannerTextDesc":"Text that will appear in the announcement banner.","admin.customization.announcement.bannerTextTitle":"Banner Text:","admin.customization.announcement.enableBannerDesc":"Enable an announcement banner across all teams.","admin.customization.announcement.enableBannerTitle":"Enable Announcement Banner:","admin.customization.appDownloadLinkDesc":"Add a link to a download page for the Mattermost apps. When a link is present, an option to \\"Download Mattermost Apps\\" will be added in the Main Menu so users can find the download page. Leave this field blank to hide the option from the Main Menu.","admin.customization.appDownloadLinkTitle":"Mattermost Apps Download Page Link:","admin.customization.customUrlSchemes":"Custom URL Schemes:","admin.customization.customUrlSchemesDesc":"Allows message text to link if it begins with any of the comma-separated URL schemes listed. By default, the following schemes will create links: \\"http\\", \\"https\\", \\"ftp\\", \\"tel\\", and \\"mailto\\".","admin.customization.customUrlSchemesPlaceholder":"E.g.: \\"git,smtp\\"","admin.customization.enableCustomEmojiDesc":"Enable users to create custom emoji for use in messages. When enabled, Custom Emoji settings can be accessed by switching to a team and clicking the three dots above the channel sidebar, and selecting \\"Custom Emoji\\".","admin.customization.enableCustomEmojiTitle":"Enable Custom Emoji:","admin.customization.enableEmojiPickerDesc":"The emoji picker allows users to select emoji to add as reactions or use in messages. Enabling the emoji picker with a large number of custom emoji may slow down performance.","admin.customization.enableEmojiPickerTitle":"Enable Emoji Picker:","admin.customization.enableGifPickerDesc":"Allow users to select GIFs from the emoji picker via a Gfycat integration.","admin.customization.enableGifPickerTitle":"Enable GIF Picker:","admin.customization.enableLatexDesc":"Enable rendering of Latex code. If false, Latex code will be highlighted only.","admin.customization.enableLatexTitle":"Enable Latex Rendering:","admin.customization.enableLinkPreviewsDesc":"Display a preview of website content, image links and YouTube links below the message when available. The server must be connected to the internet and have access through the firewall (if applicable) to the websites from which previews are expected. Users can disable these previews from Account Settings > Display > Website Link Previews.","admin.customization.enableLinkPreviewsTitle":"Enable Link Previews:","admin.customization.enableSVGsDesc":"Enable previews for SVG file attachments and allow them to appear in messages.","admin.customization.enableSVGsTitle":"Enable SVGs:","admin.customization.gfycatApiKey":"Gfycat API Key:","admin.customization.gfycatApiKeyDescription":"Request an API key at [https://developers.gfycat.com/signup/#](!https://developers.gfycat.com/signup/#). Enter the client ID you receive via email to this field. When blank, uses the default API key provided by Gfycat.","admin.customization.gfycatApiSecret":"Gfycat API Secret:","admin.customization.gfycatApiSecretDescription":"The API secret generated by Gfycat for your API key. When blank, uses the default API secret provided by Gfycat.","admin.customization.iosAppDownloadLinkDesc":"Add a link to download the iOS app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.iosAppDownloadLinkTitle":"iOS App Download Link:","admin.data_grid.empty":"No items found","admin.data_grid.loading":"Loading","admin.data_grid.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.data_retention.confirmChangesModal.clarification":"Once deleted, messages and files cannot be retrieved.","admin.data_retention.confirmChangesModal.confirm":"Confirm Settings","admin.data_retention.confirmChangesModal.description":"Are you sure you want to apply the following data retention policy:","admin.data_retention.confirmChangesModal.description.itemFileDeletion":"All files will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemFileIndefinite":"All files will be retained indefinitely.","admin.data_retention.confirmChangesModal.description.itemMessageDeletion":"All messages will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemMessageIndefinite":"All messages will be retained indefinitely.","admin.data_retention.confirmChangesModal.title":"Confirm data retention policy","admin.data_retention.createJob.help":"Initiates a Data Retention deletion job immediately.","admin.data_retention.createJob.title":"Run Deletion Job Now","admin.data_retention.deletionJobStartTime.description":"Set the start time of the daily scheduled data retention job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.data_retention.deletionJobStartTime.example":"E.g.: \\"02:00\\"","admin.data_retention.deletionJobStartTime.title":"Data Deletion Time:","admin.data_retention.enableFileDeletion.description":"Set how long Mattermost keeps file uploads in channels and direct messages.","admin.data_retention.enableFileDeletion.title":"File Retention:","admin.data_retention.enableMessageDeletion.description":"Set how long Mattermost keeps messages in channels and direct messages.","admin.data_retention.enableMessageDeletion.title":"Message Retention:","admin.data_retention.fileRetentionDays.description":"Set how many days file uploads are kept in Mattermost. Files older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.fileRetentionDays.example":"E.g.: \\"60\\"","admin.data_retention.keepFilesForTime":"Keep files for a set amount of time","admin.data_retention.keepFilesIndefinitely":"Keep all files indefinitely","admin.data_retention.keepMessageForTime":"Keep messages for a set amount of time","admin.data_retention.keepMessagesIndefinitely":"Keep all messages indefinitely","admin.data_retention.messageRetentionDays.description":"Set how many days messages are kept in Mattermost. Messages, including file attachments older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.messageRetentionDays.example":"E.g.: \\"60\\"","admin.data_retention.note.description":"Caution: Once a message or a file is deleted, the action is irreversible. Please be careful when setting up a custom data retention policy. See {documentationLink} to learn more.","admin.data_retention.note.description.documentationLinkText":"documentation","admin.data_retention.title":"Data Retention Policy","admin.database.title":"Database","admin.developer.title":"Developer Settings","admin.elasticsearch.bulkIndexingTitle":"Bulk Indexing:","admin.elasticsearch.connectionUrlDescription":"The address of the Elasticsearch server. {documentationLink}","admin.elasticsearch.connectionUrlExample":"E.g.: \\"https://elasticsearch.example.org:9200\\"","admin.elasticsearch.connectionUrlExample.documentationLinkText":"Please see documentation with server setup instructions.","admin.elasticsearch.connectionUrlTitle":"Server Connection Address:","admin.elasticsearch.createJob.help":"All users, channels and posts in the database will be indexed from oldest to newest. Elasticsearch is available during indexing but search results may be incomplete until the indexing job is complete.","admin.elasticsearch.createJob.title":"Index Now","admin.elasticsearch.elasticsearch_test_button":"Test Connection","admin.elasticsearch.enableAutocompleteDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all autocompletion queries on users and channels using the latest index. Autocompletion results may be incomplete until a bulk index of the existing users and channels database is finished. When false, database autocomplete is used.","admin.elasticsearch.enableAutocompleteTitle":"Enable Elasticsearch for autocomplete queries:","admin.elasticsearch.enableIndexingDescription":"When true, indexing of new posts occurs automatically. Search queries will use database search until \\"Enable Elasticsearch for search queries\\" is enabled. {documentationLink}","admin.elasticsearch.enableIndexingDescription.documentationLinkText":"Learn more about Elasticsearch in our documentation.","admin.elasticsearch.enableIndexingTitle":"Enable Elasticsearch Indexing:","admin.elasticsearch.enableSearchingDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used.","admin.elasticsearch.enableSearchingTitle":"Enable Elasticsearch for search queries:","admin.elasticsearch.password":"E.g.: \\"yourpassword\\"","admin.elasticsearch.passwordDescription":"(Optional) The password to authenticate to the Elasticsearch server.","admin.elasticsearch.passwordTitle":"Server Password:","admin.elasticsearch.percentComplete":"{percent}% Complete","admin.elasticsearch.purgeIndexesButton":"Purge Indexes","admin.elasticsearch.purgeIndexesButton.error":"Failed to purge indexes: {error}","admin.elasticsearch.purgeIndexesButton.label":"Purge Indexes:","admin.elasticsearch.purgeIndexesButton.success":"Indexes purged successfully.","admin.elasticsearch.purgeIndexesHelpText":"Purging will entirely remove the indexes on the Elasticsearch server. Search results may be incomplete until a bulk index of the existing database is rebuilt.","admin.elasticsearch.skipTLSVerificationDescription":"When true, Mattermost will not require the Elasticsearch certificate to be signed by a trusted Certificate Authority.","admin.elasticsearch.skipTLSVerificationTitle":"Skip TLS Verification:","admin.elasticsearch.sniffDescription":"When true, sniffing finds and connects to all data nodes in your cluster automatically.","admin.elasticsearch.sniffTitle":"Enable Cluster Sniffing:","admin.elasticsearch.testConfigSuccess":"Test successful. Configuration saved.","admin.elasticsearch.testHelpText":"Tests if the Mattermost server can connect to the Elasticsearch server specified. Testing the connection only saves the configuration if the test is successful. See log file for more detailed error messages.","admin.elasticsearch.title":"Elasticsearch","admin.elasticsearch.usernameDescription":"(Optional) The username to authenticate to the Elasticsearch server.","admin.elasticsearch.usernameExample":"E.g.: \\"elastic\\"","admin.elasticsearch.usernameTitle":"Server Username:","admin.email.agreeHPNS":" I understand and accept the Mattermost Hosted Push Notification Service [Terms of Service](!https://about.mattermost.com/hpns-terms/) and [Privacy Policy](!https://about.mattermost.com/hpns-privacy/).","admin.email.allowEmailSignInDescription":"When true, Mattermost allows users to sign in using their email and password.","admin.email.allowEmailSignInTitle":"Enable sign-in with email: ","admin.email.allowSignupDescription":"When true, Mattermost allows account creation using email and password. This value should be false only when you want to limit sign up to a single sign-on service like AD/LDAP, SAML or GitLab.","admin.email.allowSignupTitle":"Enable account creation with email: ","admin.email.allowUsernameSignInDescription":"When true, users with email login can sign in using their username and password. This setting does not affect AD/LDAP login.","admin.email.allowUsernameSignInTitle":"Enable sign-in with username: ","admin.email.easHelp":"Learn more about compiling and deploying your own mobile apps from an [Enterprise App Store](!https://about.mattermost.com/default-enterprise-app-store).","admin.email.mhpns":"Use HPNS connection with uptime SLA to send notifications to iOS and Android apps","admin.email.mhpnsHelp":"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about [HPNS](!https://about.mattermost.com/default-hpns/).","admin.email.mtpns":"Use TPNS connection to send notifications to iOS and Android apps","admin.email.mtpnsHelp":"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about [TPNS](!https://about.mattermost.com/default-tpns/).","admin.email.pushOff":"Do not send push notifications","admin.email.pushOffHelp":"Please see [documentation on push notifications](!https://about.mattermost.com/default-mobile-push-notifications/) to learn more about setup options.","admin.email.pushServerEx":"E.g.: \\"https://push-test.mattermost.com\\"","admin.email.pushServerTitle":"Push Notification Server:","admin.email.pushTitle":"Enable Push Notifications: ","admin.email.requireVerificationDescription":"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development.","admin.email.requireVerificationTitle":"Require Email Verification: ","admin.email.selfPush":"Manually enter Push Notification Service location","admin.environment.fileStorage":"File Storage","admin.environment.imageProxy":"Image Proxy","admin.environment.notifications":"Notifications","admin.environment.notifications.contents.full":"Send full message contents","admin.environment.notifications.contents.generic":"Send generic description with only sender name","admin.environment.notifications.contents.help":"**Send full message contents** - Sender name and channel are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.\\n  **Send generic description with only sender name** - Only the name of the person who sent the message, with no information about channel name or message contents are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.","admin.environment.notifications.contents.label":"Email Notification Contents:","admin.environment.notifications.enable.help":"Typically set to true in production. When true, Mattermost attempts to send email notifications. When false, email invitations and user account setting change emails are still sent as long as the SMTP server is configured. Developers may set this field to false to skip email setup for faster development.","admin.environment.notifications.enable.label":"Enable Email Notifications:","admin.environment.notifications.enableConfirmNotificationsToChannel.help":"When true, users will be prompted to confirm when posting @channel, @all and group mentions in channels with over five members. When false, no confirmation is required.","admin.environment.notifications.enableConfirmNotificationsToChannel.label":"Show @channel and @all and group mention confirmation dialog:","admin.environment.notifications.enableEmailBatching.help":"When true, users will have email notifications for multiple direct messages and mentions combined into a single email. Batching will occur at a default interval of 15 minutes, configurable in Account Settings > Notifications.","admin.environment.notifications.enableEmailBatching.label":"Enable Email Batching:","admin.environment.notifications.enablePreviewModeBanner.help":"When true, the Preview Mode banner is displayed so users are aware that email notifications are disabled. When false, the Preview Mode banner is not displayed to users.","admin.environment.notifications.enablePreviewModeBanner.label":"Enable Preview Mode Banner:","admin.environment.notifications.feedbackEmail.help":"Email address displayed on email account used when sending notification emails from Mattermost.","admin.environment.notifications.feedbackEmail.label":"Notification From Address:","admin.environment.notifications.feedbackEmail.placeholder":"Ex: \\"mattermost@yourcompany.com\\", \\"admin@yourcompany.com\\"","admin.environment.notifications.feedbackOrganization.help":"Organization name and address displayed on email notifications from Mattermost, such as \\"© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA\\". If the field is left empty, the organization name and address will not be displayed.","admin.environment.notifications.feedbackOrganization.label":"Notification Footer Mailing Address:","admin.environment.notifications.feedbackOrganization.placeholder":"Ex: \\"© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA\\"","admin.environment.notifications.notificationDisplay.help":"Display name on email account used when sending notification emails from Mattermost.","admin.environment.notifications.notificationDisplay.label":"Notification Display Name:","admin.environment.notifications.notificationDisplay.placeholder":"Ex: \\"Mattermost Notification\\", \\"System\\", \\"No-Reply\\"","admin.environment.notifications.pushContents.full":"Full message content sent in the notification payload","admin.environment.notifications.pushContents.generic":"Generic description with sender and channel names","admin.environment.notifications.pushContents.genericNoChannel":"Generic description with only sender name","admin.environment.notifications.pushContents.help":"**Generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\\n **Generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message contents.\\n **Full message content sent in the notification payload** - Includes the message contents in the push notification payload that is relayed through Apple\'s Push Notification Service (APNS) or Google\'s Firebase Cloud Messaging (FCM). It is **highly recommended** this option only be used with an \\"https\\" protocol to encrypt the connection and protect confidential information sent in messages.","admin.environment.notifications.pushContents.idLoaded":"Full message content fetched from the server on receipt","admin.environment.notifications.pushContents.label":"Push Notification Contents:","admin.environment.notifications.pushContents.withIdLoaded.help":"**Generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\\n **Generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message contents.\\n **Full message content sent in the notification payload** - Includes the message contents in the push notification payload that is relayed through Apple\'s Push Notification Service (APNS) or Google\'s Firebase Cloud Messaging (FCM). It is **highly recommended** this option only be used with an \\"https\\" protocol to encrypt the connection and protect confidential information sent in messages.\\n**Full message content fetched from the server on receipt** - The notification payload relayed through APNS or FCM contains no message content, instead it contains a unique message ID used to fetch message content from the server when a push notification is received by a device. If the server cannot be reached, a generic notification will be displayed.","admin.environment.notifications.replyToAddress.help":"Email address used in the Reply-To header when sending notification emails from Mattermost.","admin.environment.notifications.replyToAddress.label":"Notification Reply-To Address:","admin.environment.notifications.replyToAddress.placeholder":"Ex: \\"mattermost@yourcompany.com\\", \\"admin@yourcompany.com\\"","admin.environment.pushNotificationServer":"Push Notification Server","admin.environment.smtp":"SMTP","admin.environment.smtp.connectionSecurity.option.none":"None","admin.environment.smtp.connectionSecurity.option.starttls":"STARTTLS","admin.environment.smtp.connectionSecurity.option.tls":"TLS (Recommended)","admin.environment.smtp.connectionSecurity.title":"Connection Security:","admin.environment.smtp.connectionSmtpTest":"Test Connection","admin.environment.smtp.enableSecurityFixAlert.description":"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled.","admin.environment.smtp.enableSecurityFixAlert.title":"Enable Security Alerts:","admin.environment.smtp.skipServerCertificateVerification.description":"When true, Mattermost will not verify the email server certificate.","admin.environment.smtp.skipServerCertificateVerification.title":"Skip Server Certificate Verification:","admin.environment.smtp.smtpAuth.description":"When true, SMTP Authentication is enabled.","admin.environment.smtp.smtpAuth.title":"Enable SMTP Authentication:","admin.environment.smtp.smtpFail":"Connection unsuccessful: {error}","admin.environment.smtp.smtpPassword.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpPassword.placeholder":"Ex: \\"yourpassword\\", \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.environment.smtp.smtpPassword.title":"SMTP Server Password:","admin.environment.smtp.smtpPort.description":"Port of SMTP email server.","admin.environment.smtp.smtpPort.placeholder":"Ex: \\"25\\", \\"465\\", \\"587\\"","admin.environment.smtp.smtpPort.title":"SMTP Server Port:","admin.environment.smtp.smtpServer.description":"Location of SMTP email server.","admin.environment.smtp.smtpServer.placeholder":"Ex: \\"smtp.yourcompany.com\\", \\"email-smtp.us-east-1.amazonaws.com\\"","admin.environment.smtp.smtpServer.title":"SMTP Server:","admin.environment.smtp.smtpSuccess":"No errors were reported while sending an email. Please check your inbox to make sure.","admin.environment.smtp.smtpUsername.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpUsername.placeholder":"Ex: \\"admin@yourcompany.com\\", \\"AKIADTOVBGERKLCBV\\"","admin.environment.smtp.smtpUsername.title":"SMTP Server Username:","admin.environment.smtp.testing":"Testing...","admin.environment.webServer":"Web Server","admin.experimental.allowCustomThemes.desc":"Enables the **Display > Theme > Custom Theme** section in Account Settings.","admin.experimental.allowCustomThemes.title":"Allow Custom Themes:","admin.experimental.clientSideCertCheck.desc":"When **primary**, after the client side certificate is verified, user’s email is retrieved from the certificate and is used to log in without a password. When **secondary**, after the client side certificate is verified, user’s email is retrieved from the certificate and matched against the one supplied by the user. If they match, the user logs in with regular email/password credentials.","admin.experimental.clientSideCertCheck.title":"Client-Side Certification Login Method:","admin.experimental.clientSideCertEnable.desc":"Enables client-side certification for your Mattermost server. See [documentation](!https://docs.mattermost.com/deployment/certificate-based-authentication.html) to learn more.","admin.experimental.clientSideCertEnable.title":"Enable Client-Side Certification:","admin.experimental.closeUnusedDirectMessages.desc":"When true, direct message conversations with no activity for 7 days will be hidden from the sidebar. When false, conversations remain in the sidebar until they are manually closed.","admin.experimental.closeUnusedDirectMessages.title":"Autoclose Direct Messages in Sidebar:","admin.experimental.defaultTheme.desc":"Set a default theme that applies to all new users on the system.","admin.experimental.defaultTheme.title":"Default Theme:","admin.experimental.emailBatchingBufferSize.desc":"Specify the maximum number of notifications batched into a single email.","admin.experimental.emailBatchingBufferSize.example":"E.g.: \\"256\\"","admin.experimental.emailBatchingBufferSize.title":"Email Batching Buffer Size:","admin.experimental.emailBatchingInterval.desc":"Specify the maximum frequency, in seconds, which the batching job checks for new notifications. Longer batching intervals will increase performance.","admin.experimental.emailBatchingInterval.example":"E.g.: \\"30\\"","admin.experimental.emailBatchingInterval.title":"Email Batching Interval:","admin.experimental.emailSettingsLoginButtonBorderColor.desc":"Specify the color of the email login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonBorderColor.title":"Email Login Button Border Color:","admin.experimental.emailSettingsLoginButtonColor.desc":"Specify the color of the email login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonColor.title":"Email Login Button Color:","admin.experimental.emailSettingsLoginButtonTextColor.desc":"Specify the color of the email login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonTextColor.title":"Email Login Button Text Color:","admin.experimental.enableChannelViewedMessages.desc":"This setting determines whether `channel_viewed` WebSocket events are sent, which synchronize unread notifications across clients and devices. Disabling the setting in larger deployments may improve server performance.","admin.experimental.enableChannelViewedMessages.title":"Enable Channel Viewed WebSocket Messages:","admin.experimental.enablePreviewFeatures.desc":"When true, preview features can be enabled from **Account Settings > Advanced > Preview pre-release features**. When false, disables and hides preview features from **Account Settings > Advanced > Preview pre-release features**.","admin.experimental.enablePreviewFeatures.title":"Enable Preview Features:","admin.experimental.enableThemeSelection.desc":"Enables the **Display > Theme** tab in Account Settings so users can select their theme.","admin.experimental.enableThemeSelection.title":"Enable Theme Selection:","admin.experimental.enableTutorial.desc":"When true, users are prompted with a tutorial when they open Mattermost for the first time after account creation. When false, the tutorial is disabled, and users are placed in Town Square when they open Mattermost for the first time after account creation.","admin.experimental.enableTutorial.title":"Enable Tutorial:","admin.experimental.enableUserDeactivation.desc":"When true, users may deactivate their own account from **Account Settings > Advanced**. If a user deactivates their own account, they will get an email notification confirming they were deactivated. When false, users may not deactivate their own account.","admin.experimental.enableUserDeactivation.title":"Enable Account Deactivation:","admin.experimental.enableUserTypingMessages.desc":"This setting determines whether \\"user is typing...\\" messages are displayed below the message box. Disabling the setting in larger deployments may improve server performance.","admin.experimental.enableUserTypingMessages.title":"Enable User Typing Messages:","admin.experimental.enableXToLeaveChannelsFromLHS.desc":"When true, users can leave Public and Private Channels by clicking the “x” beside the channel name. When false, users must use the **Leave Channel** option from the channel menu to leave channels.","admin.experimental.enableXToLeaveChannelsFromLHS.title":"Enable X to Leave Channels from Left-Hand Sidebar:","admin.experimental.experimentalChannelOrganization.desc":"Enables channel sidebar organization options in **Account Settings > Sidebar > Channel grouping and sorting** including options for grouping unread channels, sorting channels by most recent post and combining all channel types into a single list. These settings are not available if **Account Settings > Sidebar > Experimental Sidebar Features** are enabled.","admin.experimental.experimentalChannelOrganization.title":"Channel Grouping and Sorting","admin.experimental.experimentalChannelSidebarOrganization.default_off":"Enabled (Default Off)","admin.experimental.experimentalChannelSidebarOrganization.default_on":"Enabled (Default On)","admin.experimental.experimentalChannelSidebarOrganization.desc":"When enabled, users can access experimental channel sidebar features, including collapsible sections and unreads filtering. If default on, this enabled the new sidebar features by default for all users on this server. Users can disable the features in **Account Settings > Sidebar > Experimental Sidebar Features**. If default off, users must enable the experimental sidebar features in Account Settings. [Learn more](!https://about.mattermost.com/default-sidebar/) or [give us feedback](!https://about.mattermost.com/default-sidebar-survey/)","admin.experimental.experimentalChannelSidebarOrganization.disabled":"Disabled","admin.experimental.experimentalChannelSidebarOrganization.title":"Experimental Sidebar Features","admin.experimental.experimentalEnableAuthenticationTransfer.desc":"When true, users can change their sign-in method to any that is enabled on the server, either via Account Settings or the APIs. When false, Users cannot change their sign-in method, regardless of which authentication options are enabled.","admin.experimental.experimentalEnableAuthenticationTransfer.title":"Allow Authentication Transfer:","admin.experimental.experimentalEnableAutomaticReplies.desc":"When true, users can enable Automatic Replies in **Account Settings > Notifications**. Users set a custom message that will be automatically sent in response to Direct Messages. When false, disables the Automatic Direct Message Replies feature and hides it from Account Settings.","admin.experimental.experimentalEnableAutomaticReplies.title":"Enable Automatic Replies:","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.desc":"This setting determines whether team leave/join system messages are posted in the default town-square channel.","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.title":"Enable Default Channel Leave/Join System Messages:","admin.experimental.experimentalEnableHardenedMode.desc":"Enables a hardened mode for Mattermost that makes user experience trade-offs in the interest of security. See [documentation](!https://docs.mattermost.com/administration/config-settings.html#enable-hardened-mode-experimental) to learn more.","admin.experimental.experimentalEnableHardenedMode.title":"Enable Hardened Mode:","admin.experimental.experimentalFeatures":"Experimental Features","admin.experimental.experimentalHideTownSquareinLHS.desc":"When true, hides Town Square in the left-hand sidebar if there are no unread messages in the channel. When false, Town Square is always visible in the left-hand sidebar even if all messages have been read.","admin.experimental.experimentalHideTownSquareinLHS.title":"Town Square is Hidden in Left-Hand Sidebar:","admin.experimental.experimentalPrimaryTeam.desc":"The primary team of which users on the server are members. When a primary team is set, the options to join other teams or leave the primary team are disabled.","admin.experimental.experimentalPrimaryTeam.example":"E.g.: \\"teamname\\"","admin.experimental.experimentalPrimaryTeam.title":"Primary Team:","admin.experimental.experimentalTimezone.desc":"Select the timezone used for timestamps in the user interface and email notifications. When true, the Timezone setting is visible in the Account Settings and a time zone is automatically assigned in the next active session. When false, the Timezone setting is hidden in the Account Settings.","admin.experimental.experimentalTimezone.title":"Timezone:","admin.experimental.experimentalTownSquareIsReadOnly.desc":"When true, only System Admins can post in Town Square. Other members are not able to post, reply, upload files, emoji react or pin messages to Town Square, nor are they able to change the channel name, header or purpose. When false, anyone can post in Town Square.","admin.experimental.experimentalTownSquareIsReadOnly.title":"Town Square is Read-Only:","admin.experimental.experimentalUseNewSAMLLibrary.desc":"Enable an updated SAML Library, which does not require the XML Security Library (xmlsec1) to be installed. Warning: Not all providers have been tested. If you experience issues, please contact support: [https://about.mattermost.com/support/](!https://about.mattermost.com/support/). Changing this setting requires a server restart before taking effect.","admin.experimental.experimentalUseNewSAMLLibrary.title":"Use Improved SAML Library (Beta):","admin.experimental.ldapSettingsLoginButtonBorderColor.desc":"Specify the color of the AD/LDAP login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonBorderColor.title":"AD/LDAP Login Button Border Color:","admin.experimental.ldapSettingsLoginButtonColor.desc":"Specify the color of the AD/LDAP login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonColor.title":"AD/LDAP Login Button Color:","admin.experimental.ldapSettingsLoginButtonTextColor.desc":"Specify the color of the AD/LDAP login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonTextColor.title":"AD/LDAP Login Button Text Color:","admin.experimental.linkMetadataTimeoutMilliseconds.desc":"The number of milliseconds to wait for metadata from a third-party link. Used with Post Metadata.","admin.experimental.linkMetadataTimeoutMilliseconds.example":"E.g.: \\"5000\\"","admin.experimental.linkMetadataTimeoutMilliseconds.title":"Link Metadata Timeout:","admin.experimental.samlSettingsLoginButtonBorderColor.desc":"Specify the color of the SAML login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonBorderColor.title":"SAML login Button Border Color:","admin.experimental.samlSettingsLoginButtonColor.desc":"Specify the color of the SAML login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonColor.title":"SAML Login Button Color:","admin.experimental.samlSettingsLoginButtonTextColor.desc":"Specify the color of the SAML login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonTextColor.title":"SAML login Button Text Color:","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.desc":"The number of milliseconds to wait between emitting user typing websocket events.","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.example":"E.g.: \\"5000\\"","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.title":"User Typing Timeout:","admin.experimental.useChannelInEmailNotifications.desc":"When true, channel and team name appears in email notification subject lines. Useful for servers using only one team. When false, only team name appears in email notification subject line.","admin.experimental.useChannelInEmailNotifications.title":"Use Channel Name in Email Notifications:","admin.experimental.userStatusAwayTimeout.desc":"This setting defines the number of seconds after which the user’s status indicator changes to \\"Away\\", when they are away from Mattermost.","admin.experimental.userStatusAwayTimeout.example":"E.g.: \\"300\\"","admin.experimental.userStatusAwayTimeout.title":"User Status Away Timeout:","admin.false":"false","admin.field_names.allowBannerDismissal":"Allow banner dismissal","admin.field_names.bannerColor":"Banner color","admin.field_names.bannerText":"Banner text","admin.field_names.bannerTextColor":"Banner text color","admin.field_names.enableBanner":"Enable Announcement banner","admin.field_names.enableCommands":"Enable Custom Slash Commands","admin.field_names.enableConfirmNotificationsToChannel":"Show @channel and @all confirmation dialog","admin.field_names.enableIncomingWebhooks":"Enable Incoming Webhooks","admin.field_names.enableOAuthServiceProvider":"Enable OAuth 2.0 Service Provider","admin.field_names.enableOutgoingWebhooks":"Enable Outgoing Webhooks","admin.field_names.enablePostIconOverride":"Enable integrations to override profile picture icons","admin.field_names.enablePostUsernameOverride":"Enable integrations to override usernames","admin.field_names.enableUserAccessTokens":"Enable Personal Access Tokens","admin.field_names.enableUserCreation":"Enable Account Creation","admin.field_names.maxChannelsPerTeam":"Max Channels Per Team","admin.field_names.maxNotificationsPerChannel":"Max Notifications Per Channel","admin.field_names.maxUsersPerTeam":"Max Users Per Team","admin.field_names.postEditTimeLimit":"Edit post time limit","admin.field_names.restrictCreationToDomains":"Restrict account creation to specified email domains","admin.field_names.restrictDirectMessage":"Enable users to open Direct Message channels with","admin.field_names.teammateNameDisplay":"Teammate Name Display","admin.file_upload.chooseFile":"Choose File","admin.file_upload.noFile":"No file uploaded","admin.file_upload.uploadFile":"Upload","admin.file.enableFileAttachments":"Allow File Sharing:","admin.file.enableFileAttachmentsDesc":"When false, disables file sharing on the server. All file and image uploads on messages are forbidden across clients and devices, including mobile.","admin.file.enableMobileDownloadDesc":"When false, disables file downloads on mobile apps. Users can still download files from a mobile web browser.","admin.file.enableMobileDownloadTitle":"Allow File Downloads on Mobile:","admin.file.enableMobileUploadDesc":"When false, disables file uploads on mobile apps. If Allow File Sharing is set to true, users can still upload files from a mobile web browser.","admin.file.enableMobileUploadTitle":"Allow File Uploads on Mobile:","admin.general.localization.availableLocalesDescription":"Set which languages are available for users in Account Settings (leave this field blank to have all supported languages available). If you\'re manually adding new languages, the **Default Client Language** must be added before saving this setting.\\n \\nWould like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.","admin.general.localization.availableLocalesNoResults":"No results found","admin.general.localization.availableLocalesNotPresent":"The default client language must be included in the available list","admin.general.localization.availableLocalesTitle":"Available Languages:","admin.general.localization.clientLocaleDescription":"Default language for newly created users and pages where the user hasn\'t logged in.","admin.general.localization.clientLocaleTitle":"Default Client Language:","admin.general.localization.serverLocaleDescription":"Default language for system messages. Changing this will require a server restart before taking effect.","admin.general.localization.serverLocaleTitle":"Default Server Language:","admin.general.log":"Logging","admin.gitlab.authTitle":"Auth Endpoint:","admin.gitlab.clientIdDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientIdExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.gitlab.clientIdTitle":"Application ID:","admin.gitlab.clientSecretDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientSecretExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.gitlab.clientSecretTitle":"Application Secret Key:","admin.gitlab.enableDescription":"When true, Mattermost allows team creation and account signup using GitLab OAuth.\\n \\n1. Log in to your GitLab account and go to Profile Settings -> Applications.\\n2. Enter Redirect URIs \\"<your-mattermost-url>/login/gitlab/complete\\" (example: http://localhost:8065/login/gitlab/complete) and \\"<your-mattermost-url>/signup/gitlab/complete\\".\\n3. Then use \\"Application Secret Key\\" and \\"Application ID\\" fields from GitLab to complete the options below.\\n4. Complete the Endpoint URLs below.","admin.gitlab.EnableMarkdownDesc":"1. Log in to your GitLab account and go to Profile Settings -> Applications.\\n2. Enter Redirect URIs \\"<your-mattermost-url>/login/gitlab/complete\\" (example: http://localhost:8065/login/gitlab/complete) and \\"<your-mattermost-url>/signup/gitlab/complete\\".\\n3. Then use \\"Application Secret Key\\" and \\"Application ID\\" fields from GitLab to complete the options below.\\n4. Complete the Endpoint URLs below.","admin.gitlab.enableTitle":"Enable authentication with GitLab: ","admin.gitlab.siteUrl":"GitLab Site URL: ","admin.gitlab.siteUrlDescription":"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.","admin.gitlab.siteUrlExample":"E.g.: https://","admin.gitlab.tokenTitle":"Token Endpoint:","admin.gitlab.userTitle":"User API Endpoint:","admin.google.authTitle":"Auth Endpoint:","admin.google.clientIdDescription":"The Client ID you received when registering your application with Google.","admin.google.clientIdExample":"E.g.: \\"7602141235235-url0fhs1mayfasbmop5qlfns8dh4.apps.googleusercontent.com\\"","admin.google.clientIdTitle":"Client ID:","admin.google.clientSecretDescription":"The Client Secret you received when registering your application with Google.","admin.google.clientSecretExample":"E.g.: \\"H8sz0Az-dDs2p15-7QzD231\\"","admin.google.clientSecretTitle":"Client Secret:","admin.google.EnableMarkdownDesc":"1. [Log in](!https://accounts.google.com/login) to your Google account.\\n2. Go to [https://console.developers.google.com](!https://console.developers.google.com), click **Credentials** in the left hand sidebar and enter \\"Mattermost - your-company-name\\" as the **Project Name**, then click **Create**.\\n3. Click the **OAuth consent screen** header and enter \\"Mattermost\\" as the **Product name shown to users**, then click **Save**.\\n4. Under the **Credentials** header, click **Create credentials**, choose **OAuth client ID** and select **Web Application**.\\n5. Under **Restrictions** and **Authorized redirect URIs** enter **your-mattermost-url/signup/google/complete** (example: http://localhost:8065/signup/google/complete). Click **Create**.\\n6. Paste the **Client ID** and **Client Secret** to the fields below, then click **Save**.\\n7. Go to the [Google People API](!https://console.developers.google.com/apis/library/people.googleapis.com) and click *Enable*.","admin.google.tokenTitle":"Token Endpoint:","admin.google.userTitle":"User API Endpoint:","admin.group_settings.filters.isConfigured":"Is Configured","admin.group_settings.filters.isLinked":"Is Linked","admin.group_settings.filters.isUnconfigured":"Is Not Configured","admin.group_settings.filters.isUnlinked":"Is Not Linked","admin.group_settings.group_detail.duplicateMentionNameError":"Group mention is already taken.","admin.group_settings.group_detail.group_configuration":"Group Configuration","admin.group_settings.group_detail.groupProfileDescription":"The name for this group.","admin.group_settings.group_detail.groupProfileTitle":"Group Profile","admin.group_settings.group_detail.groupTeamsAndChannelsDescription":"Set default teams and channels for group members. Teams added will include default channels, town-square, and off-topic. Adding a channel without setting the team will add the implied team to the listing below.","admin.group_settings.group_detail.groupTeamsAndChannelsTitle":"Team and Channel Membership","admin.group_settings.group_detail.groupUsersDescription":"Listing of users in Mattermost associated with this group.","admin.group_settings.group_detail.groupUsersTitle":"Users","admin.group_settings.group_detail.introBanner":"Configure default teams and channels and view users belonging to this group.","admin.group_settings.group_detail.invalidOrReservedMentionNameError":"Only letters (a-z), numbers (0-9), periods, dashes and underscores are allowed.","admin.group_settings.group_details.add_channel":"Add Channel","admin.group_settings.group_details.add_team":"Add Team","admin.group_settings.group_details.add_team_or_channel":"Add Team or Channel","admin.group_settings.group_details.group_mention.name":"Group Mention:","admin.group_settings.group_details.group_profile.name":"Name:","admin.group_settings.group_details.group_teams_and_channels_row.privateChannel":"Channel (Private)","admin.group_settings.group_details.group_teams_and_channels_row.privateTeam":"Team (Private)","admin.group_settings.group_details.group_teams_and_channels_row.publicChannel":"Channel","admin.group_settings.group_details.group_teams_and_channels_row.publicTeam":"Team","admin.group_settings.group_details.group_teams_and_channels_row.remove":"Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_body":"Removing this membership will prevent future users in this group from being added to the {name} {displayType}.","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_button":"Yes, Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_header":"Remove Membership from the {name} {displayType}?","admin.group_settings.group_details.group_teams_and_channels.no-teams-or-channels-speicified":"No teams or channels specified yet","admin.group_settings.group_details.group_users.email":"Email:","admin.group_settings.group_details.group_users.no-users-found":"No users found","admin.group_settings.group_details.menuAriaLabel":"Add Team or Channel Menu","admin.group_settings.group_profile.group_teams_and_channels.assignedRoles":"Assigned Roles","admin.group_settings.group_profile.group_teams_and_channels.name":"Name","admin.group_settings.group_profile.group_teams_and_channels.type":"Type","admin.group_settings.group_profile.group_users.ldapConnector":"AD/LDAP Connector is configured to sync and manage this group and its users. [Click here to view]({siteURL}/admin_console/authentication/ldap)","admin.group_settings.group_row.configure":"Configure","admin.group_settings.group_row.edit":"Edit","admin.group_settings.group_row.link_failed":"Link failed","admin.group_settings.group_row.linked":"Linked","admin.group_settings.group_row.linking":"Linking","admin.group_settings.group_row.not_linked":"Not Linked","admin.group_settings.group_row.unlink_failed":"Unlink failed","admin.group_settings.group_row.unlinking":"Unlinking","admin.group_settings.groups_list.link_selected":"Link Selected Groups","admin.group_settings.groups_list.mappingHeader":"Mattermost Linking","admin.group_settings.groups_list.nameHeader":"Name","admin.group_settings.groups_list.no_groups_found":"No groups found","admin.group_settings.groups_list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.group_settings.groups_list.unlink_selected":"Unlink Selected Groups","admin.group_settings.groupsPageTitle":"Groups (Beta)","admin.group_settings.introBanner":"Groups are a way to organize users and apply actions to all users within that group.\\nFor more information on Groups, please see [documentation](!https://www.mattermost.com/default-ad-ldap-groups).","admin.group_settings.ldapGroupsDescription":"Connect AD/LDAP and create groups in Mattermost. To get started, configure group attributes on the [AD/LDAP]({siteURL}/admin_console/authentication/ldap) configuration page.","admin.group_settings.ldapGroupsTitle":"AD/LDAP Groups","admin.group_settings.need_groupname":"You must specify a group mention.","admin.group_teams_and_channels_row.channelAdmin":"Channel Admin","admin.group_teams_and_channels_row.member":"Member","admin.group_teams_and_channels_row.teamAdmin":"Team Admin","admin.guest_access.disableConfirmButton":"Save and Disable Guest Access","admin.guest_access.disableConfirmMessage":"Disabling guest access will revoke all current Guest Account sessions. Guests will no longer be able to login and new guests cannot be invited into Mattermost. Guest users will be marked as inactive in user lists. Enabling this feature will not reinstate previous guest accounts. Are you sure you wish to remove these users?","admin.guest_access.disableConfirmTitle":"Save and Disable Guest Access?","admin.guest_access.disableConfirmWarning":"All current guest account sessions will be revoked, and marked as inactive","admin.guest_access.enableDescription":"When true, external guest can be invited to channels within teams. Please see [Permissions Schemes](../user_management/permissions/system_scheme) for which roles can invite guests.","admin.guest_access.enableTitle":"Enable Guest Access: ","admin.guest_access.mfaDescription":"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) for guests is required for login. New guest users will be required to configure MFA on signup. Logged in guest users without MFA configured are redirected to the MFA setup page until configuration is complete.\\n \\nIf your system has guest users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.","admin.guest_access.mfaDescriptionMFANotEnabled":"[Multi-factor authentication](./mfa) is currently not enabled.","admin.guest_access.mfaDescriptionMFANotEnforced":"[Multi-factor authentication](./mfa) is currently not enforced.","admin.guest_access.mfaTitle":"Enforce Multi-factor Authentication: ","admin.guest_access.whitelistedDomainsDescription":"(Optional) Guest accounts can be created at the system level from this list of allowed guest domains.","admin.guest_access.whitelistedDomainsExample":"E.g.: \\"company.com, othercorp.org\\"","admin.guest_access.whitelistedDomainsTitle":"Whitelisted Guest Domains:","admin.image.amazonS3BucketDescription":"Name you selected for your S3 bucket in AWS.","admin.image.amazonS3BucketExample":"E.g.: \\"mattermost-media\\"","admin.image.amazonS3BucketTitle":"Amazon S3 Bucket:","admin.image.amazonS3EndpointDescription":"Hostname of your S3 Compatible Storage provider. Defaults to \\"s3.amazonaws.com\\".","admin.image.amazonS3EndpointExample":"E.g.: \\"s3.amazonaws.com\\"","admin.image.amazonS3EndpointTitle":"Amazon S3 Endpoint:","admin.image.amazonS3IdDescription":"(Optional) Only required if you do not want to authenticate to S3 using an [IAM role](!https://about.mattermost.com/default-iam-role). Enter the Access Key ID provided by your Amazon EC2 administrator.","admin.image.amazonS3IdExample":"E.g.: \\"AKIADTOVBGERKLCBV\\"","admin.image.amazonS3IdTitle":"Amazon S3 Access Key ID:","admin.image.amazonS3RegionDescription":"AWS region you selected when creating your S3 bucket. If no region is set, Mattermost attempts to get the appropriate region from AWS, or sets it to \'us-east-1\' if none found.","admin.image.amazonS3RegionExample":"E.g.: \\"us-east-1\\"","admin.image.amazonS3RegionTitle":"Amazon S3 Region:","admin.image.amazonS3SecretDescription":"(Optional) The secret access key associated with your Amazon S3 Access Key ID.","admin.image.amazonS3SecretExample":"E.g.: \\"jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY\\"","admin.image.amazonS3SecretTitle":"Amazon S3 Secret Access Key:","admin.image.amazonS3SSEDescription":"When true, encrypt files in Amazon S3 using server-side encryption with Amazon S3-managed keys. See [documentation](!https://about.mattermost.com/default-server-side-encryption) to learn more.","admin.image.amazonS3SSETitle":"Enable Server-Side Encryption for Amazon S3:","admin.image.amazonS3SSLDescription":"When false, allow insecure connections to Amazon S3. Defaults to secure connections only.","admin.image.amazonS3SSLTitle":"Enable Secure Amazon S3 Connections:","admin.image.amazonS3TraceDescription":"(Development Mode) When true, log additional debugging information to the system logs.","admin.image.amazonS3TraceTitle":"Enable Amazon S3 Debugging:","admin.image.enableProxy":"Enable Image Proxy:","admin.image.enableProxyDescription":"When true, enables an image proxy for loading all Markdown images.","admin.image.localDescription":"Directory to which files and images are written. If blank, defaults to ./data/.","admin.image.localExample":"E.g.: \\"./data/\\"","admin.image.localTitle":"Local Storage Directory:","admin.image.maxFileSizeDescription":"Maximum file size for message attachments in megabytes. Caution: Verify server memory can support your setting choice. Large file sizes increase the risk of server crashes and failed uploads due to network interruptions.","admin.image.maxFileSizeExample":"50","admin.image.maxFileSizeTitle":"Maximum File Size:","admin.image.proxyOptions":"Remote Image Proxy Options:","admin.image.proxyOptionsDescription":"Additional options such as the URL signing key. Refer to your image proxy documentation to learn more about what options are supported.","admin.image.proxyType":"Image Proxy Type:","admin.image.proxyTypeDescription":"Configure an image proxy to load all Markdown images through a proxy. The image proxy prevents users from making insecure image requests, provides caching for increased performance, and automates image adjustments such as resizing. See [documentation](!https://about.mattermost.com/default-image-proxy-documentation) to learn more.","admin.image.proxyURL":"Remote Image Proxy URL:","admin.image.proxyURLDescription":"URL of your remote image proxy server.","admin.image.publicLinkDescription":"32-character salt added to signing of public image links. Randomly generated on install. Click \\"Regenerate\\" to create new salt.","admin.image.publicLinkTitle":"Public Link Salt:","admin.image.shareDescription":"Allow users to share public links to files and images.","admin.image.shareTitle":"Enable Public File Links: ","admin.image.storeAmazonS3":"Amazon S3","admin.image.storeDescription":"Storage system where files and image attachments are saved.\\n \\nSelecting \\"Amazon S3\\" enables fields to enter your Amazon credentials and bucket details.\\n \\nSelecting \\"Local File System\\" enables the field to specify a local file directory.","admin.image.storeLocal":"Local File System","admin.image.storeTitle":"File Storage System:","admin.integrations.botAccounts":"Bot Accounts","admin.integrations.botAccounts.title":"Bot Accounts","admin.integrations.cors":"CORS","admin.integrations.gif":"GIF (Beta)","admin.integrations.integrationManagement":"Integration Management","admin.integrations.integrationManagement.title":"Integration Management","admin.jobTable.cancelButton":"Cancel","admin.jobTable.headerExtraInfo":"Details","admin.jobTable.headerFinishAt":"Finish Time","admin.jobTable.headerRunTime":"Run Time","admin.jobTable.headerStatus":"Status","admin.jobTable.jobId":"Job ID: ","admin.jobTable.lastActivityAt":"Last Activity: ","admin.jobTable.runLengthMinutes":" minutes","admin.jobTable.runLengthSeconds":" seconds","admin.jobTable.statusCanceled":"Canceled","admin.jobTable.statusCanceling":"Canceling...","admin.jobTable.statusError":"Error","admin.jobTable.statusInProgress":"In Progress","admin.jobTable.statusPending":"Pending","admin.jobTable.statusSuccess":"Success","admin.jobTable.statusWarning":"Warning","admin.ldap_feature_discovery.call_to_action.primary":"Request trial","admin.ldap_feature_discovery.call_to_action.secondary":"Learn more","admin.ldap_feature_discovery.copy":"When you connect Mattermost with your organization\'s Active Directory / LDAP, users can log in without having to create new usernames and passwords.","admin.ldap_feature_discovery.title":"Integrate Active Directory / LDAP with Mattermost Enterprise E10","admin.ldap.adminFilterEx":"E.g.: \\"(objectClass=user)\\"","admin.ldap.adminFilterFilterDesc":"(Optional) Enter an AD/LDAP filter to use for designating System Admins. The users selected by the query will have access to your Mattermost server as System Admins. By default, System Admins have complete access to the Mattermost System Console.\\n \\nExisting members that are identified by this attribute will be promoted from member to System Admin upon next login. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to members in **System Console > User Management** to ensure access is restricted immediately.\\n \\nNote: If this filter is removed/changed, System Admins that were promoted via this filter will be demoted to members and will not retain access to the System Console. When this filter is not in use, System Admins can be manually promoted/demoted in **System Console > User Management**.","admin.ldap.adminFilterTitle":"Admin Filter:","admin.ldap.baseDesc":"The Base DN is the Distinguished Name of the location where Mattermost should start its search for user and group objects in the AD/LDAP tree.","admin.ldap.baseEx":"E.g.: \\"ou=Unit Name,dc=corp,dc=example,dc=com\\"","admin.ldap.baseTitle":"BaseDN:","admin.ldap.bindPwdDesc":"Password of the user given in \\"Bind Username\\".","admin.ldap.bindPwdTitle":"Bind Password:","admin.ldap.bindUserDesc":"The username used to perform the AD/LDAP search. This should typically be an account created specifically for use with Mattermost. It should have access limited to read the portion of the AD/LDAP tree specified in the BaseDN field.","admin.ldap.bindUserTitle":"Bind Username:","admin.ldap.emailAttrDesc":"The attribute in the AD/LDAP server used to populate the email address field in Mattermost.","admin.ldap.emailAttrEx":"E.g.: \\"mail\\" or \\"userPrincipalName\\"","admin.ldap.emailAttrTitle":"Email Attribute:","admin.ldap.enableAdminFilterTitle":"Enable Admin Filter","admin.ldap.enableDesc":"When true, Mattermost allows login using AD/LDAP","admin.ldap.enableSyncDesc":"When true, Mattermost periodically synchronizes users from AD/LDAP. When false, user attributes are updated from AD/LDAP during user login only.","admin.ldap.enableSyncTitle":"Enable Synchronization with AD/LDAP:","admin.ldap.enableTitle":"Enable sign-in with AD/LDAP:","admin.ldap.firstnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the first name of users in Mattermost. When set, users cannot edit their first name, since it is synchronized with the LDAP server. When left blank, users can set their first name in Account Settings.","admin.ldap.firstnameAttrEx":"E.g.: \\"givenName\\"","admin.ldap.firstnameAttrTitle":"First Name Attribute:","admin.ldap.groupDisplayNameAttributeDesc":"The attribute in the AD/LDAP server used to populate the group display names.","admin.ldap.groupDisplayNameAttributeEx":"E.g.: \\"cn\\"","admin.ldap.groupDisplayNameAttributeTitle":"Group Display Name Attribute:","admin.ldap.groupFilterEx":"E.g.: \\"(objectClass=group)\\"","admin.ldap.groupFilterFilterDesc":"(Optional) Enter an AD/LDAP filter to use when searching for group objects. Only the groups selected by the query will be available to Mattermost. From [User Management > Groups]({siteURL}/admin_console/user_management/groups), select which AD/LDAP groups should be linked and configured.","admin.ldap.groupFilterTitle":"Group Filter:","admin.ldap.groupIdAttributeDesc":"The attribute in the AD/LDAP server used as a unique identifier for Groups. This should be a AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory.","admin.ldap.groupIdAttributeEx":"E.g.: \\"objectGUID\\" or \\"entryUUID\\"","admin.ldap.groupIdAttributeTitle":"Group ID Attribute:","admin.ldap.guestFilterEx":"E.g.: \\"(objectClass=user)\\"","admin.ldap.guestFilterFilterDesc":"(Optional) Requires Guest Access to be enabled before being applied. Enter an AD/LDAP filter to use when searching for guest objects. Only the users selected by the query will be able to access Mattermost as Guests. Guests are prevented from accessing teams or channels upon logging in until they are assigned a team and at least one channel.\\n \\nNote: If this filter is removed/changed, active guests will not be promoted to a member and will retain their Guest role. Guests can be promoted in **System Console > User Management**.\\n \\n \\nExisting members that are identified by this attribute as a guest will be demoted from a member to a guest when they are asked to login next. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to guests in **System Console > User Management ** to ensure access is restricted immediately.","admin.ldap.guestFilterTitle":"Guest Filter:","admin.ldap.idAttrDesc":"The attribute in the AD/LDAP server used as a unique identifier in Mattermost. It should be an AD/LDAP attribute with a value that does not change such as `uid` for LDAP or `objectGUID` for Active Directory. If a user\'s ID Attribute changes, it will create a new Mattermost account unassociated with their old one.\\n \\nIf you need to change this field after users have already logged in, use the [mattermost ldap idmigrate](!https://about.mattermost.com/default-mattermost-ldap-idmigrate) CLI tool.","admin.ldap.idAttrEx":"E.g.: \\"objectGUID\\" or \\"uid\\"","admin.ldap.idAttrTitle":"ID Attribute: ","admin.ldap.jobExtraInfo.addedGroupMembers":"Added {groupMemberAddCount, number} group members.","admin.ldap.jobExtraInfo.deactivatedUsers":"Deactivated {deleteCount, number} users.","admin.ldap.jobExtraInfo.deletedGroupMembers":"Deleted {groupMemberDeleteCount, number} group members.","admin.ldap.jobExtraInfo.deletedGroups":"Deleted {groupDeleteCount, number} groups.","admin.ldap.jobExtraInfo.updatedUsers":"Updated {updateCount, number} users.","admin.ldap.lastnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the last name of users in Mattermost. When set, users cannot edit their last name, since it is synchronized with the LDAP server. When left blank, users can set their last name in Account Settings.","admin.ldap.lastnameAttrEx":"E.g.: \\"sn\\"","admin.ldap.lastnameAttrTitle":"Last Name Attribute:","admin.ldap.ldap_test_button":"AD/LDAP Test","admin.ldap.loginAttrDesc":"The attribute in the AD/LDAP server used to log in to Mattermost. Normally this attribute is the same as the \\"Username Attribute\\" field above.\\n \\nIf your team typically uses domain/username to log in to other services with AD/LDAP, you may enter domain/username in this field to maintain consistency between sites.","admin.ldap.loginAttrTitle":"Login ID Attribute: ","admin.ldap.loginIdAttrEx":"E.g.: \\"sAMAccountName\\"","admin.ldap.loginNameDesc":"The placeholder text that appears in the login field on the login page. Defaults to \\"AD/LDAP Username\\".","admin.ldap.loginNameEx":"E.g.: \\"AD/LDAP Username\\"","admin.ldap.loginNameTitle":"Login Field Name:","admin.ldap.maxPageSizeEx":"E.g.: \\"2000\\"","admin.ldap.maxPageSizeHelpText":"The maximum number of users the Mattermost server will request from the AD/LDAP server at one time. 0 is unlimited.","admin.ldap.maxPageSizeTitle":"Maximum Page Size:","admin.ldap.nicknameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the nickname of users in Mattermost. When set, users cannot edit their nickname, since it is synchronized with the LDAP server. When left blank, users can set their nickname in Account Settings.","admin.ldap.nicknameAttrEx":"E.g.: \\"nickname\\"","admin.ldap.nicknameAttrTitle":"Nickname Attribute:","admin.ldap.pictureAttrDesc":"The attribute in the AD/LDAP server used to populate the profile picture in Mattermost.","admin.ldap.pictureAttrEx":"E.g.: \\"thumbnailPhoto\\" or \\"jpegPhoto\\"","admin.ldap.pictureAttrTitle":"Profile Picture Attribute:","admin.ldap.portDesc":"The port Mattermost will use to connect to the AD/LDAP server. Default is 389.","admin.ldap.portEx":"E.g.: \\"389\\"","admin.ldap.portTitle":"AD/LDAP Port:","admin.ldap.positionAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the position field in Mattermost. When set, users cannot edit their position, since it is synchronized with the LDAP server. When left blank, users can set their position in Account Settings.","admin.ldap.positionAttrEx":"E.g.: \\"title\\"","admin.ldap.positionAttrTitle":"Position Attribute:","admin.ldap.queryDesc":"The timeout value for queries to the AD/LDAP server. Increase if you are getting timeout errors caused by a slow AD/LDAP server.","admin.ldap.queryEx":"E.g.: \\"60\\"","admin.ldap.queryTitle":"Query Timeout (seconds):","admin.ldap.serverDesc":"The domain or IP address of AD/LDAP server.","admin.ldap.serverEx":"E.g.: \\"10.0.0.23\\"","admin.ldap.serverTitle":"AD/LDAP Server:","admin.ldap.skipCertificateVerification":"Skip Certificate Verification:","admin.ldap.skipCertificateVerificationDesc":"Skips the certificate verification step for TLS or STARTTLS connections. Skipping certificate verification is not recommended for production environments where TLS is required.","admin.ldap.sync_button":"AD/LDAP Synchronize Now","admin.ldap.syncIntervalHelpText":"AD/LDAP Synchronization updates Mattermost user information to reflect updates on the AD/LDAP server. For example, when a user\'s name changes on the AD/LDAP server, the change updates in Mattermost when synchronization is performed. Accounts removed from or disabled in the AD/LDAP server have their Mattermost accounts set to \\"Inactive\\" and have their account sessions revoked. Mattermost performs synchronization on the interval entered. For example, if 60 is entered, Mattermost synchronizes every 60 minutes.","admin.ldap.syncIntervalTitle":"Synchronization Interval (minutes):","admin.ldap.syncNowHelpText":"Initiates an AD/LDAP synchronization immediately. See the table below for status of each synchronization. Please review \\"System Console > Logs\\" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.","admin.ldap.testFailure":"AD/LDAP Test Failure: {error}","admin.ldap.testHelpText":"Tests if the Mattermost server can connect to the AD/LDAP server specified. Please review \\"System Console > Logs\\" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.","admin.ldap.testSuccess":"AD/LDAP Test Successful","admin.ldap.userFilterDisc":"(Optional) Enter an AD/LDAP filter to use when searching for user objects. Only the users selected by the query will be able to access Mattermost. For Active Directory, the query to filter out disabled users is (&(objectCategory=Person)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))).","admin.ldap.userFilterEx":"E.g.: \\"(objectClass=user)\\"","admin.ldap.userFilterTitle":"User Filter:","admin.ldap.usernameAttrDesc":"The attribute in the AD/LDAP server used to populate the username field in Mattermost. This may be the same as the Login ID Attribute.","admin.ldap.usernameAttrEx":"E.g.: \\"sAMAccountName\\"","admin.ldap.usernameAttrTitle":"Username Attribute:","admin.license.choose":"Choose File","admin.license.edition":"Edition: ","admin.license.key":"License Key: ","admin.license.keyRemove":"Remove Enterprise License and Downgrade Server","admin.license.noFile":"No file uploaded","admin.license.removing":"Removing License...","admin.license.title":"Edition and License","admin.license.type":"License: ","admin.license.upload":"Upload","admin.license.uploadDesc":"Upload a license key for Mattermost Enterprise Edition to upgrade this server. [Visit us online](!http://mattermost.com) to learn more about the benefits of Enterprise Edition or to purchase a key.","admin.license.uploading":"Uploading License...","admin.lockTeammateNameDisplay":"Lock Teammate Name Display for all users: ","admin.lockTeammateNameDisplayHelpText":"When true, disables users\' ability to change settings under Main Menu > Account Settings > Display > Teammate Name Display.","admin.log.consoleDescription":"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout). Changing this setting requires a server restart before taking effect.","admin.log.consoleJsonTitle":"Output console logs as JSON:","admin.log.consoleTitle":"Output logs to console: ","admin.log.enableDiagnostics":"Enable Diagnostics and Error Reporting:","admin.log.enableDiagnosticsDescription":"Enable this feature to improve the quality and performance of Mattermost by sending error reporting and diagnostic information to Mattermost, Inc. Read our [privacy policy](!https://about.mattermost.com/default-privacy-policy/) to learn more.","admin.log.enableWebhookDebugging":"Enable Webhook Debugging:","admin.log.enableWebhookDebuggingDescription":"When true, sends webhook debug messages to the server logs. To also output the request body of incoming webhooks, set {boldedLogLevel} to \'DEBUG\'.","admin.log.fileDescription":"Typically set to true in production. When true, logged events are written to the mattermost.log file in the directory specified in the File Log Directory field. The logs are rotated at 10,000 lines and archived to a file in the same directory, and given a name with a datestamp and serial number. For example, mattermost.2017-03-31.001. Changing this setting requires a server restart before taking effect.","admin.log.fileJsonTitle":"Output file logs as JSON:","admin.log.fileLevelDescription":"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.fileLevelTitle":"File Log Level:","admin.log.fileTitle":"Output logs to file: ","admin.log.jsonDescription":"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.","admin.log.levelDescription":"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.levelTitle":"Console Log Level:","admin.log.locationDescription":"The location of the log files. If blank, they are stored in the ./logs directory. The path that you set must exist and Mattermost must have write permissions in it. Changing this setting requires a server restart before taking effect.","admin.log.locationPlaceholder":"Enter your file location","admin.log.locationTitle":"File Log Directory:","admin.log.logLevel":"Log Level","admin.logs.bannerDesc":"To look up users by User ID or Token ID, go to Reporting > Users and paste the ID into the search filter.","admin.logs.next":"Next","admin.logs.prev":"Previous","admin.logs.reload":"Reload","admin.logs.title":"Server Logs","admin.manage_roles.additionalRoles":"Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions).","admin.manage_roles.allowUserAccessTokens":"Allow this account to generate [personal access tokens](!https://about.mattermost.com/default-user-access-tokens).","admin.manage_roles.allowUserAccessTokensDesc":"Removing this permission doesn\'t delete existing tokens. To delete them, go to the user\'s Manage Tokens menu.","admin.manage_roles.cancel":"Cancel","admin.manage_roles.manageRolesTitle":"Manage Roles","admin.manage_roles.postAllPublicRole":"Access to post to all Mattermost public channels.","admin.manage_roles.postAllPublicRoleTitle":"post:channels","admin.manage_roles.postAllRole":"Access to post to all Mattermost channels including direct messages.","admin.manage_roles.postAllRoleTitle":"post:all","admin.manage_roles.save":"Save","admin.manage_roles.saveError":"Unable to save roles.","admin.manage_roles.systemAdmin":"System Admin","admin.manage_roles.systemMember":"Member","admin.manage_tokens.manageTokensTitle":"Manage Personal Access Tokens","admin.manage_tokens.userAccessTokensDescription":"Personal access tokens function similarly to session tokens and can be used by integrations to [interact with this Mattermost server](!https://about.mattermost.com/default-api-authentication). Tokens are disabled if the user is deactivated. Learn more about [personal access tokens](!https://about.mattermost.com/default-user-access-tokens).","admin.manage_tokens.userAccessTokensIdLabel":"Token ID: ","admin.manage_tokens.userAccessTokensNameLabel":"Token Description: ","admin.manage_tokens.userAccessTokensNone":"No personal access tokens.","admin.metrics.enableDescription":"When true, Mattermost will enable performance monitoring collection and profiling. Please see [documentation](!http://docs.mattermost.com/deployment/metrics.html) to learn more about configuring performance monitoring for Mattermost.","admin.metrics.enableTitle":"Enable Performance Monitoring:","admin.metrics.listenAddressDesc":"The address the server will listen on to expose performance metrics.","admin.metrics.listenAddressEx":"E.g.: \\":8067\\"","admin.metrics.listenAddressTitle":"Listen Address:","admin.mfa.bannerDesc":"[Multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is available for accounts with AD/LDAP or email login. If other login methods are used, MFA should be configured with the authentication provider.","admin.nav.administratorsGuide":"Administrator\'s Guide","admin.nav.commercialSupport":"Commercial Support","admin.nav.menuAriaLabel":"Admin Console Menu","admin.nav.switch":"Team Selection","admin.nav.troubleshootingForum":"Troubleshooting Forum","admin.oauth.gitlab":"GitLab","admin.oauth.google":"Google Apps","admin.oauth.off":"Do not allow sign-in via an OAuth 2.0 provider","admin.oauth.office365":"Office 365","admin.oauth.providerDescription":"When true, Mattermost can act as an OAuth 2.0 service provider allowing Mattermost to authorize API requests from external applications. See [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) to learn more.","admin.oauth.providerTitle":"Enable OAuth 2.0 Service Provider: ","admin.oauth.select":"Select OAuth 2.0 service provider:","admin.office365.authTitle":"Auth Endpoint:","admin.office365.clientIdDescription":"The Application/Client ID you received when registering your application with Microsoft.","admin.office365.clientIdExample":"E.g.: \\"adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq\\"","admin.office365.clientIdTitle":"Application ID:","admin.office365.clientSecretDescription":"The Application Secret Password you generated when registering your application with Microsoft.","admin.office365.clientSecretExample":"E.g.: \\"shAieM47sNBfgl20f8ci294\\"","admin.office365.clientSecretTitle":"Application Secret Password:","admin.office365.directoryIdDescription":"The Directory (tenant) ID you received when registering your application with Microsoft.","admin.office365.directoryIdExample":"E.g.: \\"adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq\\"","admin.office365.directoryIdTitle":"Directory (tenant) ID:","admin.office365.EnableMarkdownDesc":"1. [Log in](!https://login.microsoftonline.com/) to your Microsoft or Office 365 account. Make sure it`s the account on the same [tenant](!https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#Anchor_0) that you would like users to log in with.\\n2. Go to [https://apps.dev.microsoft.com](!https://apps.dev.microsoft.com), click **Go to app list** > **Add an app** and use \\"Mattermost - your-company-name\\" as the **Application Name**.\\n3. Under **Application Secrets**, click **Generate New Password** and paste it to the **Application Secret Password** field below.\\n4. Under **Platforms**, click **Add Platform**, choose **Web** and enter **your-mattermost-url/signup/office365/complete** (example: http://localhost:8065/signup/office365/complete) under **Redirect URIs**. Also uncheck **Allow Implicit Flow**.\\n5. Finally, click **Save** and then paste the **Application ID** below.","admin.office365.tokenTitle":"Token Endpoint:","admin.office365.userTitle":"User API Endpoint:","admin.password.lowercase":"At least one lowercase letter","admin.password.minimumLength":"Minimum Password Length:","admin.password.minimumLengthDescription":"Minimum number of characters required for a valid password. Must be a whole number greater than or equal to {min} and less than or equal to {max}.","admin.password.minimumLengthExample":"E.g.: \\"5\\"","admin.password.number":"At least one number","admin.password.preview":"Error message preview","admin.password.symbol":"At least one symbol (e.g. \\"~!@#$%^&*()\\")","admin.password.uppercase":"At least one uppercase letter","admin.permissions.documentationLinkText":"documentation","admin.permissions.group.delete_posts.description":"Delete own and others\' posts.","admin.permissions.group.delete_posts.name":"Delete Posts","admin.permissions.group.edit_posts.description":"Edit own and others\' posts.","admin.permissions.group.edit_posts.name":"Edit Posts","admin.permissions.group.integrations.description":"Manage OAuth 2.0, slash commands, webhooks and emoji.","admin.permissions.group.integrations.name":"Integrations & Customizations","admin.permissions.group.posts.description":"Write, edit and delete posts.","admin.permissions.group.posts.name":"Manage Posts","admin.permissions.group.private_channel.description":"Create and archive channels, manage settings and members.","admin.permissions.group.private_channel.name":"Manage Private Channels","admin.permissions.group.public_channel.description":"Join, create and archive channels, manage settings and members.","admin.permissions.group.public_channel.name":"Manage Public Channels","admin.permissions.group.reactions.description":"Add and delete reactions on posts.","admin.permissions.group.reactions.name":"Post Reactions","admin.permissions.group.send_invites.description":"Add team members, send email invites and share team invite link.","admin.permissions.group.send_invites.name":"Add Team Members","admin.permissions.group.teams_team_scope.description":"Manage team members.","admin.permissions.group.teams_team_scope.name":"Teams","admin.permissions.group.teams.description":"Create teams and manage members.","admin.permissions.group.teams.name":"Teams","admin.permissions.inherited_from":"Inherited from <a>{name}</a>.","admin.permissions.introBanner":"Permission Schemes set the default permissions for Team Admins, Channel Admins and everyone else. Learn more about permission schemes in our [documentation](!https://about.mattermost.com/default-advanced-permissions).","admin.permissions.loadingMoreSchemes":"Loading...","admin.permissions.loadMoreSchemes":"Load more schemes","admin.permissions.permission.assign_system_admin_role.description":"Assign system admin role","admin.permissions.permission.assign_system_admin_role.name":"Assign system admin role","admin.permissions.permission.create_direct_channel.description":"Create direct channel","admin.permissions.permission.create_direct_channel.name":"Create direct channel","admin.permissions.permission.create_emojis.description":"Allow users to create custom emoji.","admin.permissions.permission.create_emojis.name":"Create Custom Emoji","admin.permissions.permission.create_group_channel.description":"Create group channel","admin.permissions.permission.create_group_channel.name":"Create group channel","admin.permissions.permission.create_post.description":"Allow users to create posts.","admin.permissions.permission.create_post.name":"Create Posts","admin.permissions.permission.create_private_channel.description":"Create new private channels.","admin.permissions.permission.create_private_channel.name":"Create Channels","admin.permissions.permission.create_public_channel.description":"Create new public channels.","admin.permissions.permission.create_public_channel.name":"Create Channels","admin.permissions.permission.create_team.description":"Create new teams.","admin.permissions.permission.create_team.name":"Create Teams","admin.permissions.permission.create_user_access_token.description":"Create user access token","admin.permissions.permission.create_user_access_token.name":"Create user access token","admin.permissions.permission.delete_emojis.description":"Allow users to delete custom emoji that they created.","admin.permissions.permission.delete_emojis.name":"Delete Own Custom Emoji","admin.permissions.permission.delete_others_emojis.description":"Allow users to delete custom emoji that were created by other users.","admin.permissions.permission.delete_others_emojis.name":"Delete Others\' Custom Emoji","admin.permissions.permission.delete_others_posts.description":"Posts made by other users can be deleted.","admin.permissions.permission.delete_others_posts.name":"Delete Others\' Posts","admin.permissions.permission.delete_post.description":"Author\'s own posts can be deleted.","admin.permissions.permission.delete_post.name":"Delete Own Posts","admin.permissions.permission.delete_private_channel.description":"Archive private channels.","admin.permissions.permission.delete_private_channel.name":"Archive Channels","admin.permissions.permission.delete_public_channel.description":"Archive public channels.","admin.permissions.permission.delete_public_channel.name":"Archive Channels","admin.permissions.permission.edit_other_users.description":"Edit other users","admin.permissions.permission.edit_other_users.name":"Edit other users","admin.permissions.permission.edit_others_posts.description":"Allow users to edit others\' posts.","admin.permissions.permission.edit_others_posts.name":"Edit Others\' Posts","admin.permissions.permission.edit_post.description":"{editTimeLimitButton} after posting, allow users to edit their own posts.","admin.permissions.permission.edit_post.name":"Edit Own Posts","admin.permissions.permission.import_team.description":"Import team","admin.permissions.permission.import_team.name":"Import team","admin.permissions.permission.invite_guest.description":"Invite guests to channels and send guest email invites.","admin.permissions.permission.invite_guest.name":"Invite guests","admin.permissions.permission.list_team_channels.description":"List team channels","admin.permissions.permission.list_team_channels.name":"List team channels","admin.permissions.permission.list_users_without_team.description":"List users without team","admin.permissions.permission.list_users_without_team.name":"List users without team","admin.permissions.permission.manage_channel_roles.description":"Manage channel roles","admin.permissions.permission.manage_channel_roles.name":"Manage channel roles","admin.permissions.permission.manage_incoming_webhooks.description":"Create, edit, and delete incoming webhooks.","admin.permissions.permission.manage_incoming_webhooks.name":"Manage Incoming Webhooks","admin.permissions.permission.manage_jobs.description":"Manage jobs","admin.permissions.permission.manage_jobs.name":"Manage jobs","admin.permissions.permission.manage_oauth.description":"Create, edit and delete OAuth 2.0 application tokens.","admin.permissions.permission.manage_oauth.name":"Manage OAuth Applications","admin.permissions.permission.manage_outgoing_webhooks.description":"Create, edit, and delete outgoing webhooks.","admin.permissions.permission.manage_outgoing_webhooks.name":"Manage Outgoing Webhooks","admin.permissions.permission.manage_private_channel_members.description":"Add and remove private channel members.","admin.permissions.permission.manage_private_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_private_channel_properties.description":"Update private channel names, headers and purposes.","admin.permissions.permission.manage_private_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_public_channel_members.description":"Add and remove public channel members.","admin.permissions.permission.manage_public_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_public_channel_properties.description":"Update public channel names, headers and purposes.","admin.permissions.permission.manage_public_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_roles.description":"Manage roles","admin.permissions.permission.manage_roles.name":"Manage roles","admin.permissions.permission.manage_slash_commands.description":"Create, edit and delete custom slash commands.","admin.permissions.permission.manage_slash_commands.name":"Manage Slash Commands","admin.permissions.permission.manage_system.description":"Manage system","admin.permissions.permission.manage_system.name":"Manage system","admin.permissions.permission.manage_team_roles.description":"Manage team roles","admin.permissions.permission.manage_team_roles.name":"Manage team roles","admin.permissions.permission.manage_team.description":"Manage team","admin.permissions.permission.manage_team.name":"Manage team","admin.permissions.permission.permanent_delete_user.description":"Permanent delete user","admin.permissions.permission.permanent_delete_user.name":"Permanent delete user","admin.permissions.permission.read_channel.description":"Read channel","admin.permissions.permission.read_channel.name":"Read channel","admin.permissions.permission.read_user_access_token.description":"Read user access token","admin.permissions.permission.read_user_access_token.name":"Read user access token","admin.permissions.permission.remove_user_from_team.description":"Remove user from team","admin.permissions.permission.remove_user_from_team.name":"Remove user from team","admin.permissions.permission.revoke_user_access_token.description":"Revoke user access token","admin.permissions.permission.revoke_user_access_token.name":"Revoke user access token","admin.permissions.permission.upload_file.description":"Upload file","admin.permissions.permission.upload_file.name":"Upload file","admin.permissions.permission.use_channel_mentions.description":"Notify channel members with @all, @channel and @here","admin.permissions.permission.use_channel_mentions.name":"Channel Mentions","admin.permissions.permission.use_group_mentions.description":"Notify group members with a group mention","admin.permissions.permission.use_group_mentions.name":"Group Mentions","admin.permissions.permission.view_team.description":"View team","admin.permissions.permission.view_team.name":"View team","admin.permissions.permissionSchemes":"Permission Schemes","admin.permissions.permissionSchemes.cancel":"Cancel","admin.permissions.permissionsSchemeSummary.delete":"Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmButton":"Yes, Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmQuestion":"The permissions in the teams using this scheme will reset to the defaults in the System Scheme. Are you sure you want to delete the {schemeName} scheme?","admin.permissions.permissionsSchemeSummary.deleteSchemeTitle":"Delete {scheme} scheme?","admin.permissions.permissionsSchemeSummary.deleting":"Deleting...","admin.permissions.permissionsSchemeSummary.edit":"Edit","admin.permissions.permissionsSchemeSummary.moreTeams":"+{number} more","admin.permissions.permissionsTree.description":"Description","admin.permissions.permissionsTree.permission":"Permission","admin.permissions.roles.all_users.name":"All Members","admin.permissions.roles.channel_admin.name":"Channel Admin","admin.permissions.roles.channel_user.name":"Channel User","admin.permissions.roles.system_admin.name":"System Admin","admin.permissions.roles.system_user.name":"System User","admin.permissions.roles.team_admin.name":"Team Admin","admin.permissions.roles.team_user.name":"Team User","admin.permissions.systemScheme":"System Scheme","admin.permissions.systemScheme.allMembersDescription":"Permissions granted to all members, including administrators and newly created users.","admin.permissions.systemScheme.allMembersTitle":"All Members","admin.permissions.systemScheme.channelAdminsDescription":"Permissions granted to channel creators and any users promoted to Channel Administrator.","admin.permissions.systemScheme.channelAdminsTitle":"Channel Administrators","admin.permissions.systemScheme.GuestsDescription":"Permissions granted to guest users.","admin.permissions.systemScheme.GuestsTitle":"Guests","admin.permissions.systemScheme.introBanner":"Configure the default permissions for Team Admins, Channel Admins and other members. This scheme is inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied in specific teams.","admin.permissions.systemScheme.resetDefaultsButton":"Reset to Defaults","admin.permissions.systemScheme.resetDefaultsButtonModalBody":"This will reset all selections on this page to their default settings. Are you sure you want to reset?","admin.permissions.systemScheme.resetDefaultsButtonModalTitle":"Reset to Default?","admin.permissions.systemScheme.resetDefaultsConfirmationButton":"Yes, Reset","admin.permissions.systemScheme.systemAdminsDescription":"Full permissions granted to System Administrators.","admin.permissions.systemScheme.systemAdminsTitle":"System Administrators","admin.permissions.systemScheme.teamAdminsDescription":"Permissions granted to team creators and any users promoted to Team Administrator.","admin.permissions.systemScheme.teamAdminsTitle":"Team Administrators","admin.permissions.systemSchemeBannerButton":"Edit Scheme","admin.permissions.systemSchemeBannerText":"Set the default permissions inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied.","admin.permissions.systemSchemeBannerTitle":"System Scheme","admin.permissions.teamOverrideSchemesBannerText":"Use when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme).","admin.permissions.teamOverrideSchemesInProgress":"Migration job in progress: Team Override Schemes are not available until the job server completes the permissions migration. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNewButton":"New Team Override Scheme","admin.permissions.teamOverrideSchemesNoJobsEnabled":"Migration job on hold: Team Override Schemes are not available until the job server can execute the permissions migration. The job will be automatically started when the job server is enabled. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNoSchemes":"No team override schemes created.","admin.permissions.teamOverrideSchemesTitle":"Team Override Schemes","admin.permissions.teamScheme":"Team Scheme","admin.permissions.teamScheme.addTeams":"Add Teams","admin.permissions.teamScheme.introBanner":"[Team Override Schemes](!https://about.mattermost.com/default-team-override-scheme) set the permissions for Team Admins, Channel Admins and other members in specific teams. Use a Team Override Scheme when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme).","admin.permissions.teamScheme.noTeams":"No team selected. Please add teams to this list.","admin.permissions.teamScheme.removeTeam":"Remove","admin.permissions.teamScheme.schemeDescriptionLabel":"Scheme Description:","admin.permissions.teamScheme.schemeDescriptionPlaceholder":"Scheme Description","admin.permissions.teamScheme.schemeDetailsDescription":"Set the name and description for this scheme.","admin.permissions.teamScheme.schemeDetailsTitle":"Scheme Details","admin.permissions.teamScheme.schemeNameLabel":"Scheme Name:","admin.permissions.teamScheme.schemeNamePlaceholder":"Scheme Name","admin.permissions.teamScheme.selectTeamsDescription":"Select teams where permission exceptions are required.","admin.permissions.teamScheme.selectTeamsTitle":"Select teams to override permissions","admin.plugin.backToPlugins":"Go back to the Plugins","admin.plugin.choose":"Choose File","admin.plugin.cluster_instance":"Cluster Instance","admin.plugin.customSetting.pluginDisabledWarning":"In order to view this setting, enable the plugin and click Save.","admin.plugin.disable":"Disable","admin.plugin.disabling":"Disabling...","admin.plugin.enable":"Enable","admin.plugin.enable_plugin":"Enable Plugin: ","admin.plugin.enable_plugin.help":"When true, this plugin is enabled.","admin.plugin.enabling":"Enabling...","admin.plugin.error.activate":"Unable to upload the plugin. It may conflict with another plugin on your server.","admin.plugin.error.extract":"Encountered an error when extracting the plugin. Review your plugin file content and try again.","admin.plugin.installedDesc":"Installed plugins on your Mattermost server.","admin.plugin.installedTitle":"Installed Plugins: ","admin.plugin.management.title":"Plugin Management","admin.plugin.multiple_versions_warning":"There are multiple versions of this plugin installed across your cluster. Re-install this plugin to ensure it works consistently.","admin.plugin.no_plugins":"No installed plugins.","admin.plugin.remove":"Remove","admin.plugin.remove_modal.desc":"Are you sure you would like to remove the plugin?","admin.plugin.remove_modal.overwrite":"Remove","admin.plugin.remove_modal.title":"Remove plugin?","admin.plugin.removing":"Removing...","admin.plugin.settingsButton":"Settings","admin.plugin.state":"State","admin.plugin.state.failed_to_start":"Failed to start","admin.plugin.state.failed_to_start.description":"This plugin failed to start. Check your system logs for errors.","admin.plugin.state.failed_to_stay_running":"Crashing","admin.plugin.state.failed_to_stay_running.description":"This plugin crashed multiple times and is no longer running. Check your system logs for errors.","admin.plugin.state.not_running":"Not running","admin.plugin.state.not_running.description":"This plugin is not enabled.","admin.plugin.state.running":"Running","admin.plugin.state.running.description":"This plugin is running.","admin.plugin.state.starting":"Starting","admin.plugin.state.starting.description":"This plugin is starting.","admin.plugin.state.stopping":"Stopping","admin.plugin.state.stopping.description":"This plugin is stopping.","admin.plugin.state.unknown":"Unknown","admin.plugin.upload":"Upload","admin.plugin.upload.overwrite_modal.desc":"A plugin with this ID already exists. Would you like to overwrite it?","admin.plugin.upload.overwrite_modal.overwrite":"Overwrite","admin.plugin.upload.overwrite_modal.title":"Overwrite existing plugin?","admin.plugin.uploadAndPluginDisabledDesc":"To enable plugins, set **Enable Plugins** to true. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDesc":"Upload a plugin for your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDisabledDesc":"Enable plugin uploads in config.json. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploading":"Uploading...","admin.plugin.uploadTitle":"Upload Plugin: ","admin.plugin.version_title":"Version","admin.plugins.pluginManagement":"Plugin Management","admin.plugins.settings.automaticPrepackagedPlugins":"Enable Automatic Prepackaged Plugins:","admin.plugins.settings.automaticPrepackagedPluginsDesc":"When true, the server will detect previously enabled plugins on the server and will automatically install them.","admin.plugins.settings.enable":"Enable Plugins: ","admin.plugins.settings.enableDesc":"When true, enables plugins on your Mattermost server. Use plugins to integrate with third-party systems, extend functionality, or customize the user interface of your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugins) to learn more.","admin.plugins.settings.enableMarketplace":"Enable Marketplace:","admin.plugins.settings.enableMarketplaceDesc":"When true, enables System Administrators to install plugins from the [marketplace](!https://mattermost.com/pl/default-mattermost-marketplace.html).","admin.plugins.settings.enableRemoteMarketplace":"Enable Remote Marketplace:","admin.plugins.settings.enableRemoteMarketplaceDesc":"When true, marketplace fetches latest plugins from the configured Marketplace URL.","admin.plugins.settings.marketplaceUrl":"Marketplace URL:","admin.plugins.settings.marketplaceUrlDesc":"URL of the marketplace server.","admin.plugins.settings.marketplaceUrlDesc.empty":" Marketplace URL is a required field.","admin.plugins.settings.requirePluginSignature":"Require Plugin Signature:","admin.plugins.settings.requirePluginSignatureDesc":"When true, uploading plugins is disabled and may only be installed through the Marketplace. Plugins are always verified during Mattermost server startup and initialization. See [documentation](!https://mattermost.com/pl/default-plugin-signing) to learn more.","admin.privacy.showEmailDescription":"When false, hides the email address of members from everyone except System Administrators.","admin.privacy.showEmailTitle":"Show Email Address: ","admin.privacy.showFullNameDescription":"When false, hides the full name of members from everyone except System Administrators. Username is shown in place of full name.","admin.privacy.showFullNameTitle":"Show Full Name: ","admin.purge.button":"Purge All Caches","admin.purge.purgeDescription":"This will purge all the in-memory caches for things like sessions, accounts, channels, etc. Deployments using High Availability will attempt to purge all the servers in the cluster. Purging the caches may adversely impact performance.","admin.purge.purgeFail":"Purging unsuccessful: {error}","admin.rate.enableLimiterDescription":"When true, APIs are throttled at rates specified below.","admin.rate.enableLimiterTitle":"Enable Rate Limiting: ","admin.rate.httpHeaderDescription":"When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to \\"X-Real-IP\\", when configuring AmazonELB set to \\"X-Forwarded-For\\").","admin.rate.httpHeaderExample":"E.g.: \\"X-Real-IP\\", \\"X-Forwarded-For\\"","admin.rate.httpHeaderTitle":"Vary rate limit by HTTP header:","admin.rate.maxBurst":"Maximum Burst Size:","admin.rate.maxBurstDescription":"Maximum number of requests allowed beyond the per second query limit.","admin.rate.maxBurstExample":"E.g.: \\"100\\"","admin.rate.memoryDescription":"Maximum number of users sessions connected to the system as determined by \\"Vary rate limit by remote address\\" and \\"Vary rate limit by HTTP header\\" settings below.","admin.rate.memoryExample":"E.g.: \\"10000\\"","admin.rate.memoryTitle":"Memory Store Size:","admin.rate.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.rate.queriesDescription":"Throttles API at this number of requests per second.","admin.rate.queriesExample":"E.g.: \\"10\\"","admin.rate.queriesTitle":"Maximum Queries per Second:","admin.rate.remoteDescription":"When true, rate limit API access by IP address.","admin.rate.remoteTitle":"Vary rate limit by remote address: ","admin.rate.title":"Rate Limiting","admin.rate.varyByUser":"Vary rate limit by user: ","admin.rate.varyByUserDescription":"When true, rate limit API access by user authentication token.","admin.recycle.button":"Recycle Database Connections","admin.recycle.recycleDescription":"Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating \\"config.json\\" to the new desired configuration and using the {reloadConfiguration} feature to load the new settings while the server is running. The administrator should then use {featureName} feature to recycle the database connections based on the new settings.","admin.recycle.recycleDescription.featureName":"Recycle Database Connections","admin.recycle.recycleDescription.reloadConfiguration":"Environment > Web Server > Reload Configuration from Disk","admin.recycle.reloadFail":"Recycling unsuccessful: {error}","admin.regenerate":"Regenerate","admin.reload.button":"Reload Configuration From Disk","admin.reload.reloadDescription":"Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating \\"config.json\\" to the new desired configuration and using the {featureName} feature to load the new settings while the server is running. The administrator should then use the {recycleDatabaseConnections} feature to recycle the database connections based on the new settings.","admin.reload.reloadDescription.featureName":"Reload Configuration from Disk","admin.reload.reloadDescription.recycleDatabaseConnections":"Environment > Database > Recycle Database Connections","admin.reload.reloadFail":"Reloading unsuccessful: {error}","admin.requestButton.loading":" Loading...","admin.requestButton.requestFailure":"Test Failure: {error}","admin.requestButton.requestSuccess":"Test Successful","admin.reset_email.cancel":"Cancel","admin.reset_email.newEmail":"New Email","admin.reset_email.reset":"Reset","admin.reset_email.titleReset":"Update Email","admin.reset_password.cancel":"Cancel","admin.reset_password.curentPassword":"Current Password","admin.reset_password.missing_current":"Please enter your current password.","admin.reset_password.newPassword":"New Password","admin.reset_password.reset":"Reset","admin.reset_password.titleReset":"Reset Password","admin.reset_password.titleSwitch":"Switch Account to Email/Password","admin.revoke_token_button.delete":"Delete","admin.s3.connectionS3Test":"Test Connection","admin.s3.s3Fail":"Connection unsuccessful: {error}","admin.s3.s3Success":"Connection was successful","admin.s3.testing":"Testing...","admin.saml_feature_discovery.copy":"When you connect Mattermost with your organization\'s single sign-on provider, users can access Mattermost without having to re-enter their credentials.","admin.saml_feature_discovery.title":"Integrate SAML 2.0 with Mattermost Enterprise E20","admin.saml.adminAttrDesc":"(Optional) The attribute in the SAML Assertion for designating System Admins. The users selected by the query will have access to your Mattermost server as System Admins. By default, System Admins have complete access to the Mattermost System Console.\\n \\nExisting members that are identified by this attribute will be promoted from member to System Admin upon next login. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to members in **System Console > User Management** to ensure access is restricted immediately.\\n \\nNote: If this filter is removed/changed, System Admins that were promoted via this filter will be demoted to members and will not retain access to the System Console. When this filter is not in use, System Admins can be manually promoted/demoted in **System Console > User Management**.","admin.saml.adminAttrEx":"E.g.: \\"usertype=Admin\\" or \\"isAdmin=true\\"","admin.saml.adminAttrTitle":"Admin Attribute:","admin.saml.assertionConsumerServiceURLEx":"E.g.: \\"https://<your-mattermost-url>/login/sso/saml\\"","admin.saml.assertionConsumerServiceURLPopulatedDesc":"This field is also known as the Assertion Consumer Service URL.","admin.saml.assertionConsumerServiceURLTitle":"Service Provider Login URL:","admin.saml.canonicalAlgorithmDescription.c14":"Specify the Canonicalization algorithm (Canonical XML 1.1).  Please see more information provided at http://www.w3.org/2006/12/xml-c14n11","admin.saml.canonicalAlgorithmDescription.exc":"Specify the Canonicalization algorithm (Exclusive XML Canonicalization 1.0).  Please see more information provided at http://www.w3.org/2001/10/xml-exc-c14n#","admin.saml.canonicalAlgorithmDisplay.n10":"Exclusive XML Canonicalization 1.0 (omit comments)","admin.saml.canonicalAlgorithmDisplay.n11":"Canonical XML 1.1 (omit comments)","admin.saml.canonicalAlgorithmTitle":"Canonicalization Algorithm","admin.saml.emailAttrDesc":"The attribute in the SAML Assertion that will be used to populate the email addresses of users in Mattermost.","admin.saml.emailAttrEx":"E.g.: \\"Email\\" or \\"PrimaryEmail\\"","admin.saml.emailAttrTitle":"Email Attribute:","admin.saml.enableAdminAttrTitle":"Enable Admin Attribute:","admin.saml.enableDescription":"When true, Mattermost allows login using SAML 2.0. Please see [documentation](!http://docs.mattermost.com/deployment/sso-saml.html) to learn more about configuring SAML for Mattermost.","admin.saml.enableSyncWithLdapDescription":"When true, Mattermost periodically synchronizes SAML user attributes, including user deactivation and removal, from AD/LDAP. Enable and configure synchronization settings at **Authentication > AD/LDAP**. When false, user attributes are updated from SAML during user login. See [documentation](!https://about.mattermost.com/default-saml-ldap-sync) to learn more.","admin.saml.enableSyncWithLdapIncludeAuthDescription":"When true, Mattermost will override the SAML ID attribute with the AD/LDAP ID attribute if configured or override the SAML Email attribute with the AD/LDAP Email attribute if SAML ID attribute is not present.  This will allow you automatically migrate users from Email binding to ID binding to prevent creation of new users when an email address changes for a user. Moving from true to false, will remove the override from happening.\\n \\n**Note:** SAML IDs must match the LDAP IDs to prevent disabling of user accounts.  Please review [documentation](!https://docs.mattermost.com/deployment/sso-saml-ldapsync.html) for more information.","admin.saml.enableSyncWithLdapIncludeAuthTitle":"Override SAML bind data with AD/LDAP information:","admin.saml.enableSyncWithLdapTitle":"Enable Synchronizing SAML Accounts With AD/LDAP:","admin.saml.enableTitle":"Enable Login With SAML 2.0:","admin.saml.encryptDescription":"When false, Mattermost will not decrypt SAML Assertions encrypted with your Service Provider Public Certificate. Disabling encryption is not recommended for production environments.","admin.saml.encryptTitle":"Enable Encryption:","admin.saml.firstnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the first name of users in Mattermost.","admin.saml.firstnameAttrEx":"E.g.: \\"FirstName\\"","admin.saml.firstnameAttrTitle":"First Name Attribute:","admin.saml.getSamlMetadataFromIDPFail":"SAML Metadata URL did not connect and pull data successfully","admin.saml.getSamlMetadataFromIDPFetching":"Fetching...","admin.saml.getSamlMetadataFromIDPSuccess":"SAML Metadata retrieved successfully. Two fields and one certificate have been updated","admin.saml.getSamlMetadataFromIDPUrl":"Get SAML Metadata From IdP","admin.saml.guestAttrDesc":"(Optional) Requires Guest Access to be enabled before being applied. The attribute in the SAML Assertion that will be used to apply a guest role to users in Mattermost. Guests are prevented from accessing teams or channels upon logging in until they are assigned a team and at least one channel.\\n \\nNote: If this attribute is removed/changed from your guest user in SAML and the user is still active, they will not be promoted to a member and will retain their Guest role. Guests can be promoted in **System Console > User Management**.\\n \\n \\nExisting members that are identified by this attribute as a guest will be demoted from a member to a guest when they are asked to login next. The next login is based upon Session lengths set in **System Console > Session Lengths**. It is highly recommend to manually demote users to guests in **System Console > User Management ** to ensure access is restricted immediately.","admin.saml.guestAttrEx":"E.g.: \\"usertype=Guest\\" or \\"isGuest=true\\"","admin.saml.guestAttrTitle":"Guest Attribute:","admin.saml.idAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to bind users from SAML to users in Mattermost.","admin.saml.idAttrEx":"E.g.: \\"Id\\"","admin.saml.idAttrTitle":"Id Attribute:","admin.saml.idpCertificateFileDesc":"The public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileRemoveDesc":"Remove the public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileTitle":"Identity Provider Public Certificate:","admin.saml.idpDescriptorUrlDesc":"The issuer URL for the Identity Provider you use for SAML requests.","admin.saml.idpDescriptorUrlEx":"E.g.: \\"https://idp.example.org/SAML2/issuer\\"","admin.saml.idpDescriptorUrlTitle":"Identity Provider Issuer URL:","admin.saml.idpMetadataUrlDesc":"The URL where Mattermost sends a request to obtain metadata","admin.saml.idpMetadataUrlEx":"E.g.: \\"https://idp.example.org/SAML2/saml/metadata\\"","admin.saml.idpMetadataUrlTitle":"Identity Provider Metadata URL:","admin.saml.idpUrlDesc":"The URL where Mattermost sends a SAML request to start login sequence.","admin.saml.idpUrlEx":"E.g.: \\"https://idp.example.org/SAML2/SSO/Login\\"","admin.saml.idpUrlTitle":"SAML SSO URL:","admin.saml.lastnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the last name of users in Mattermost.","admin.saml.lastnameAttrEx":"E.g.: \\"LastName\\"","admin.saml.lastnameAttrTitle":"Last Name Attribute:","admin.saml.localeAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the language of users in Mattermost.","admin.saml.localeAttrEx":"E.g.: \\"Locale\\" or \\"PrimaryLanguage\\"","admin.saml.localeAttrTitle":"Preferred Language Attribute:","admin.saml.loginButtonTextDesc":"(Optional) The text that appears in the login button on the login page. Defaults to \\"SAML\\".","admin.saml.loginButtonTextEx":"E.g.: \\"OKTA\\"","admin.saml.loginButtonTextTitle":"Login Button Text:","admin.saml.nicknameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the nickname of users in Mattermost.","admin.saml.nicknameAttrEx":"E.g.: \\"Nickname\\"","admin.saml.nicknameAttrTitle":"Nickname Attribute:","admin.saml.positionAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the position of users in Mattermost.","admin.saml.positionAttrEx":"E.g.: \\"Role\\"","admin.saml.positionAttrTitle":"Position Attribute:","admin.saml.privateKeyFileFileDesc":"The private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileFileRemoveDesc":"Remove the private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileTitle":"Service Provider Private Key:","admin.saml.publicCertificateFileDesc":"The certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.","admin.saml.publicCertificateFileRemoveDesc":"Remove the certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.","admin.saml.publicCertificateFileTitle":"Service Provider Public Certificate:","admin.saml.remove.idp_certificate":"Remove Identity Provider Certificate","admin.saml.remove.privKey":"Remove Service Provider Private Key","admin.saml.remove.sp_certificate":"Remove Service Provider Certificate","admin.saml.removing.certificate":"Removing Certificate...","admin.saml.removing.privKey":"Removing Private Key...","admin.saml.signatureAlgorithmDescription.sha1":"Specify the Signature algorithm used to sign the request (RSAwithSHA1). Please see more information provided at http://www.w3.org/2000/09/xmldsig#rsa-sha1","admin.saml.signatureAlgorithmDescription.sha256":"Specify the Signature algorithm used to sign the request (RSAwithSHA256). Please see more information provided at http://www.w3.org/2001/04/xmldsig-more#rsa-sha256 [section 6.4.2 RSA (PKCS#1 v1.5)]","admin.saml.signatureAlgorithmDescription.sha512":"Specify the Signature algorithm used to sign the request (RSAwithSHA512). Please see more information provided at http://www.w3.org/2001/04/xmldsig-more#rsa-sha512","admin.saml.signatureAlgorithmDisplay.sha1":"RSAwithSHA1","admin.saml.signatureAlgorithmDisplay.sha256":"RSAwithSHA256","admin.saml.signatureAlgorithmDisplay.sha512":"RSAwithSHA512","admin.saml.signatureAlgorithmTitle":"Signature Algorithm","admin.saml.signRequestDescription":"When true, Mattermost will sign the SAML request using your private key. When false, Mattermost will not sign the SAML request.","admin.saml.signRequestTitle":"Sign Request:","admin.saml.uploading.certificate":"Uploading Certificate...","admin.saml.uploading.privateKey":"Uploading Private Key...","admin.saml.usernameAttrDesc":"The attribute in the SAML Assertion that will be used to populate the username field in Mattermost.","admin.saml.usernameAttrEx":"E.g.: \\"Username\\"","admin.saml.usernameAttrTitle":"Username Attribute:","admin.saml.verifyDescription":"When false, Mattermost will not verify that the signature sent from a SAML Response matches the Service Provider Login URL. Disabling verification is not recommended for production environments.","admin.saml.verifyTitle":"Verify Signature:","admin.saving":"Saving Config...","admin.security.password":"Password","admin.service.attemptDescription":"Number of login attempts allowed before a user is locked out and required to reset their password via email.","admin.service.attemptExample":"E.g.: \\"10\\"","admin.service.attemptTitle":"Maximum Login Attempts:","admin.service.cmdsDesc":"When true, custom slash commands will be allowed. See [documentation](!http://docs.mattermost.com/developer/slash-commands.html) to learn more.","admin.service.cmdsTitle":"Enable Custom Slash Commands: ","admin.service.complianceExportDesc":"When true, Mattermost will export all messages that were posted in the last 24 hours. The export task is scheduled to run once per day. See [the documentation](!https://about.mattermost.com/default-compliance-export-documentation) to learn more.","admin.service.complianceExportTitle":"Enable Compliance Export:","admin.service.corsAllowCredentialsDescription":"When true, requests that pass validation will include the Access-Control-Allow-Credentials header.","admin.service.corsAllowCredentialsLabel":"CORS Allow Credentials:","admin.service.corsDebugDescription":"When true, prints messages to the logs to help when developing an integration that uses CORS. These messages will include the structured key value pair \\"source\\":\\"cors\\".","admin.service.CorsDebugLabel":"CORS Debug:","admin.service.corsDescription":"Enable HTTP Cross origin request from a specific domain. Use \\"*\\" if you want to allow CORS from any domain or leave it blank to disable it. Should not be set to \\"*\\" in production.","admin.service.corsEx":"http://example.com","admin.service.corsExposedHeadersDescription":"Whitelist of headers that will be accessible to the requester.","admin.service.corsExposedHeadersTitle":"CORS Exposed Headers:","admin.service.corsHeadersEx":"X-My-Header","admin.service.corsTitle":"Enable cross-origin requests from:","admin.service.developerDesc":"When true, JavaScript errors are shown in a purple bar at the top of the user interface. Not recommended for use in production. ","admin.service.developerTitle":"Enable Developer Mode: ","admin.service.disableBotOwnerDeactivatedTitle":"Disable bot accounts when owner is deactivated:","admin.service.disableBotWhenOwnerIsDeactivated":"When a user is deactivated, disables all bot accounts managed by the user. To re-enable bot accounts, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots).","admin.service.enableBotAccountCreation":"When true, System Admins can create bot accounts for integrations in [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). Bot accounts are similar to user accounts except they cannot be used to log in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","admin.service.enableBotTitle":"Enable Bot Account Creation: ","admin.service.enforceMfaDesc":"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is required for login. New users will be required to configure MFA on signup. Logged in users without MFA configured are redirected to the MFA setup page until configuration is complete.\\n \\nIf your system has users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.","admin.service.enforceMfaTitle":"Enforce Multi-factor Authentication:","admin.service.extendSessionLengthActivity.helpText":"When true, sessions will be automatically extended when the user is active in their Mattermost client. Users sessions will only expire if they are not active in their Mattermost client for the entire duration of the session lengths defined in the fields below. When false, sessions will not extend with activity in Mattermost. User sessions will immediately expire at the end of the session length or idle timeouts defined below. ","admin.service.extendSessionLengthActivity.label":"Extend session length with activity: ","admin.service.forward80To443":"Forward port 80 to 443:","admin.service.forward80To443Description":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.","admin.service.forward80To443Description.disabled":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.\\n \\nThis setting cannot be enabled until your server is [listening](#ListenAddress) on port 443.","admin.service.googleDescription":"Set this key to enable the display of titles for embedded YouTube video previews. Without the key, YouTube previews will still be created based on hyperlinks appearing in messages or comments but they will not show the video title. View a [Google Developers Tutorial](!https://www.youtube.com/watch?v=Im69kzhpR3I) for instructions on how to obtain a key and add YouTube Data API v3 as a service to your key.","admin.service.googleExample":"E.g.: \\"7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV\\"","admin.service.googleTitle":"Google API Key:","admin.service.iconDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the profile picture they post with. Note: Combined with allowing integrations to override usernames, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.iconTitle":"Enable integrations to override profile picture icons:","admin.service.insecureTlsDesc":"When true, any outgoing HTTPS requests will accept unverified, self-signed certificates. For example, outgoing webhooks to a server with a self-signed TLS certificate, using any domain, will be allowed. Note that this makes these connections susceptible to man-in-the-middle attacks.","admin.service.insecureTlsTitle":"Enable Insecure Outgoing Connections: ","admin.service.integrationAdmin":"Restrict managing integrations to Admins:","admin.service.integrationAdminDesc":"When true, webhooks and slash commands can only be created, edited and viewed by Team and System Admins, and OAuth 2.0 applications by System Admins. Integrations are available to all users after they have been created by the Admin.","admin.service.internalConnectionsDesc":"A whitelist of local network addresses that can be requested by the Mattermost server on behalf of a client. Care should be used when configuring this setting to prevent unintended access to your local network. See [documentation](!https://mattermost.com/pl/default-allow-untrusted-internal-connections) to learn more.","admin.service.internalConnectionsEx":"webhooks.internal.example.com 127.0.0.1 10.0.16.0/28","admin.service.internalConnectionsTitle":"Allow untrusted internal connections to: ","admin.service.letsEncryptCertificateCacheFile":"Let\'s Encrypt Certificate Cache File:","admin.service.letsEncryptCertificateCacheFileDescription":"Certificates retrieved and other data about the Let\'s Encrypt service will be stored in this file.","admin.service.listenAddress":"Listen Address:","admin.service.listenDescription":"The address and port to which to bind and listen. Specifying \\":8065\\" will bind to all network interfaces. Specifying \\"127.0.0.1:8065\\" will only bind to the network interface having that IP address. If you choose a port of a lower level (called \\"system ports\\" or \\"well-known ports\\", in the range of 0-1023), you must have permissions to bind to that port. On Linux you can use: \\"sudo setcap cap_net_bind_service=+ep ./bin/mattermost\\" to allow Mattermost to bind to well-known ports.","admin.service.listenExample":"E.g.: \\":8065\\"","admin.service.mfaDesc":"When true, users with AD/LDAP or email login can add multi-factor authentication to their account using Google Authenticator.","admin.service.mfaTitle":"Enable Multi-factor Authentication:","admin.service.minimumHashtagLengthDescription":"Minimum number of characters in a hashtag. This must be greater than or equal to 2. MySQL databases must be configured to support searching strings shorter than three characters, [see documentation](!https://dev.mysql.com/doc/refman/8.0/en/fulltext-fine-tuning.html).","admin.service.minimumHashtagLengthExample":"E.g.: \\"3\\"","admin.service.minimumHashtagLengthTitle":"Minimum Hashtag Length:","admin.service.mobileSessionDays":"Session Length Mobile (days):","admin.service.mobileSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.mobileSessionDaysDesc.extendLength":"Set the number of days from the last activity in Mattermost to the expiry of the user’s session on mobile. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.outWebhooksDesc":"When true, outgoing webhooks will be allowed. See [documentation](!http://docs.mattermost.com/developer/webhooks-outgoing.html) to learn more.","admin.service.outWebhooksTitle":"Enable Outgoing Webhooks: ","admin.service.overrideDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the username they are posting as. Note: Combined with allowing integrations to override profile picture icons, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.overrideTitle":"Enable integrations to override usernames:","admin.service.readTimeout":"Read Timeout:","admin.service.readTimeoutDescription":"Maximum time allowed from when the connection is accepted to when the request body is fully read.","admin.service.sessionCache":"Session Cache (minutes):","admin.service.sessionCacheDesc":"The number of minutes to cache a session in memory.","admin.service.sessionDaysEx":"E.g.: \\"30\\"","admin.service.sessionIdleTimeout":"Session Idle Timeout (minutes):","admin.service.sessionIdleTimeoutDesc":"The number of minutes from the last time a user was active on the system to the expiry of the user\'s session. Once expired, the user will need to log in to continue. Minimum is 5 minutes, and 0 is unlimited.\\n \\nApplies to the desktop app and browsers. For mobile apps, use an EMM provider to lock the app when not in use. In High Availability mode, enable IP hash load balancing for reliable timeout measurement.","admin.service.sessionIdleTimeoutEx":"E.g.: \\"60\\"","admin.service.sessionMinutesEx":"E.g.: \\"10\\"","admin.service.siteURL":"Site URL:","admin.service.siteURLDescription":"The URL that users will use to access Mattermost. Standard ports, such as 80 and 443, can be omitted, but non-standard ports are required. For example: http://example.com:8065. This setting is required.\\n \\nMattermost may be hosted at a subpath. For example: http://example.com:8065/company/mattermost. A restart is required before the server will work correctly.","admin.service.siteURLExample":"E.g.: \\"http://example.com:8065\\"","admin.service.ssoSessionDays":"Session Length SSO (days):","admin.service.ssoSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Mattermost if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.","admin.service.ssoSessionDaysDesc.extendLength":"Set the number of days from the last activity in Mattermost to the expiry of the user’s session for SSO authentication, such as SAML, GitLab and OAuth 2.0. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Mattermost if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.","admin.service.testingDescription":"When true, /test slash command is enabled to load test accounts, data and text formatting. Changing this requires a server restart before taking effect.","admin.service.testingTitle":"Enable Testing Commands: ","admin.service.testSiteURL":"Test Live URL","admin.service.testSiteURLFail":"Test unsuccessful: {error}","admin.service.testSiteURLSuccess":"Test successful. This is a valid URL.","admin.service.testSiteURLTesting":"Testing...","admin.service.tlsCertFile":"TLS Certificate File:","admin.service.tlsCertFileDescription":"The certificate file to use.","admin.service.tlsKeyFile":"TLS Key File:","admin.service.tlsKeyFileDescription":"The private key file to use.","admin.service.useLetsEncrypt":"Use Let\'s Encrypt:","admin.service.useLetsEncryptDescription":"Enable the automatic retrieval of certificates from Let\'s Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.","admin.service.useLetsEncryptDescription.disabled":"Enable the automatic retrieval of certificates from Let\'s Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.\\n \\nThis setting cannot be enabled unless the [Forward port 80 to 443](#Forward80To443) setting is set to true.","admin.service.userAccessTokensDescription":"When true, users can create [user access tokens](!https://about.mattermost.com/default-user-access-tokens) for integrations in **Account Settings > Security**. They can be used to authenticate against the API and give full access to the account.\\n\\n To manage who can create personal access tokens or to search users by token ID, go to the **User Management > Users** page.","admin.service.userAccessTokensTitle":"Enable Personal Access Tokens: ","admin.service.webhooksDescription":"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag. See [documentation](!http://docs.mattermost.com/developer/webhooks-incoming.html) to learn more.","admin.service.webhooksTitle":"Enable Incoming Webhooks: ","admin.service.webSessionDays":"Session Length AD/LDAP and Email (days):","admin.service.webSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user\'s session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.webSessionDaysDesc.extendLength":"Set the number of days from the last activity in Mattermost to the expiry of the user’s session when using email and AD/LDAP authentication. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.writeTimeout":"Write Timeout:","admin.service.writeTimeoutDescription":"If using HTTP (insecure), this is the maximum time allowed from the end of reading the request headers until the response is written. If using HTTPS, it is the total time from when the connection is accepted until the response is written.","admin.sessionLengths.title":"Session Lengths","admin.set_by_env":"This setting has been set through an environment variable. It cannot be changed through the System Console.","admin.sidebar.about":"About","admin.sidebar.announcement":"Announcement Banner","admin.sidebar.authentication":"Authentication","admin.sidebar.blevesearch":"Bleve","admin.sidebar.channels":"Channels","admin.sidebar.compliance":"Compliance","admin.sidebar.complianceExport":"Compliance Export (Beta)","admin.sidebar.complianceMonitoring":"Compliance Monitoring","admin.sidebar.cors":"CORS","admin.sidebar.customization":"Customization","admin.sidebar.customTermsOfService":"Custom Terms of Service (Beta)","admin.sidebar.database":"Database","admin.sidebar.dataRetentionPolicy":"Data Retention Policy","admin.sidebar.developer":"Developer","admin.sidebar.elasticsearch":"Elasticsearch","admin.sidebar.email":"Email","admin.sidebar.emoji":"Emoji","admin.sidebar.environment":"Environment","admin.sidebar.experimental":"Experimental","admin.sidebar.experimentalFeatures":"Features","admin.sidebar.fileSharingDownloads":"File Sharing and Downloads","admin.sidebar.fileStorage":"File Storage","admin.sidebar.filter":"Find settings","admin.sidebar.gif":"GIF (Beta)","admin.sidebar.gitlab":"GitLab","admin.sidebar.groups":"Groups (Beta)","admin.sidebar.guest_access":"Guest Access (Beta)","admin.sidebar.highAvailability":"High Availability","admin.sidebar.imageProxy":"Image Proxy","admin.sidebar.integrations":"Integrations","admin.sidebar.ldap":"AD/LDAP","admin.sidebar.license":"Edition and License","admin.sidebar.localization":"Localization","admin.sidebar.logging":"Logging","admin.sidebar.logs":"Server Logs","admin.sidebar.metrics":"Performance Monitoring","admin.sidebar.mfa":"MFA","admin.sidebar.notifications":"Notifications","admin.sidebar.oauth":"OAuth 2.0","admin.sidebar.password":"Password","admin.sidebar.permissions":"Permissions","admin.sidebar.plugins":"Plugins (Beta)","admin.sidebar.posts":"Posts","admin.sidebar.publicLinks":"Public Links","admin.sidebar.pushNotificationServer":"Push Notification Server","admin.sidebar.rateLimiting":"Rate Limiting","admin.sidebar.reporting":"Reporting","admin.sidebar.saml":"SAML 2.0","admin.sidebar.sessionLengths":"Session Lengths","admin.sidebar.signup":"Signup","admin.sidebar.site":"Site Configuration","admin.sidebar.siteStatistics":"Site Statistics","admin.sidebar.smtp":"SMTP","admin.sidebar.teams":"Teams","admin.sidebar.teamStatistics":"Team Statistics","admin.sidebar.userManagement":"User Management","admin.sidebar.users":"Users","admin.sidebar.usersAndTeams":"Users and Teams","admin.sidebar.webServer":"Web Server","admin.sidebarHeader.systemConsole":"System Console","admin.site.announcementBanner":"Announcement Banner","admin.site.customization":"Customization","admin.site.emoji":"Emoji","admin.site.fileSharingDownloads":"File Sharing and Downloads","admin.site.localization":"Localization","admin.site.posts":"Posts","admin.site.public_links":"Public Links","admin.site.usersAndTeams":"Users and Teams","admin.sql.connMaxLifetimeDescription":"Maximum lifetime (in milliseconds) for a connection to the database.","admin.sql.connMaxLifetimeExample":"E.g.: \\"3600000\\"","admin.sql.connMaxLifetimeTitle":"Maximum Connection Lifetime:","admin.sql.dataSource":"Data Source:","admin.sql.dataSourceDescription":"Set the database source in the config.json file.","admin.sql.disableDatabaseSearchDescription":"Disables the use of the database to perform searches. Should only be used when other [search engines](!https://mattermost.com/pl/default-search-engine) are configured.","admin.sql.disableDatabaseSearchTitle":"Disable database search: ","admin.sql.driverName":"Driver Name:","admin.sql.driverNameDescription":"Set the database driver in the config.json file.","admin.sql.maxConnectionsDescription":"Maximum number of idle connections held open to the database.","admin.sql.maxConnectionsExample":"E.g.: \\"10\\"","admin.sql.maxConnectionsTitle":"Maximum Idle Connections:","admin.sql.maxOpenDescription":"Maximum number of open connections held open to the database.","admin.sql.maxOpenExample":"E.g.: \\"10\\"","admin.sql.maxOpenTitle":"Maximum Open Connections:","admin.sql.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.sql.queryTimeoutDescription":"The number of seconds to wait for a response from the database after opening a connection and sending the query. Errors that you see in the UI or in the logs as a result of a query timeout can vary depending on the type of query.","admin.sql.queryTimeoutExample":"E.g.: \\"30\\"","admin.sql.queryTimeoutTitle":"Query Timeout:","admin.sql.traceDescription":"(Development Mode) When true, executing SQL statements are written to the log.","admin.sql.traceTitle":"SQL Statement Logging: ","admin.support.aboutDesc":"The URL for the About link on the Mattermost login and sign-up pages. If this field is empty, the About link is hidden from users.","admin.support.aboutTitle":"About Link:","admin.support.emailHelp":"Email address displayed on email notifications and during tutorial for end users to ask support questions.","admin.support.emailTitle":"Support Email:","admin.support.enableTermsOfServiceHelp":"When true, new users must accept the terms of service before accessing any Mattermost teams on desktop, web or mobile. Existing users must accept them after login or a page refresh.\\n \\nTo update terms of service link displayed in account creation and login pages, go to [Site Configuration > Customization](../site_config/customization).","admin.support.enableTermsOfServiceTitle":"Enable Custom Terms of Service:","admin.support.helpDesc":"The URL for the Help link on the Mattermost login page, sign-up pages, and Main Menu. If this field is empty, the Help link is hidden from users.","admin.support.helpTitle":"Help Link:","admin.support.privacyDesc":"The URL for the Privacy link on the login and sign-up pages. If this field is empty, the Privacy link is hidden from users.","admin.support.privacyTitle":"Privacy Policy Link:","admin.support.problemDesc":"The URL for the Report a Problem link in the Main Menu. If this field is empty, the link is removed from the Main Menu.","admin.support.problemTitle":"Report a Problem Link:","admin.support.termsDesc":"Link to the terms under which users may use your online service. By default, this includes the \\"Mattermost Conditions of Use (End Users)\\" explaining the terms under which Mattermost software is provided to end users. If you change the default link to add your own terms for using the service you provide, your new terms must include a link to the default terms so end users are aware of the Mattermost Conditions of Use (End User) for Mattermost software.","admin.support.termsOfServiceReAcceptanceHelp":"The number of days before Terms of Service acceptance expires, and the terms must be re-accepted.","admin.support.termsOfServiceReAcceptanceTitle":"Re-Acceptance Period:","admin.support.termsOfServiceTextHelp":"Text that will appear in your custom Terms of Service. Supports Markdown-formatted text.","admin.support.termsOfServiceTextTitle":"Custom Terms of Service Text:","admin.support.termsOfServiceTitle":"Custom Terms of Service (Beta)","admin.support.termsTitle":"Terms of Service Link:","admin.system_users.allUsers":"All Users","admin.system_users.guest":"Guest","admin.system_users.inactive":"Inactive","admin.system_users.noTeams":"No Teams","admin.system_users.revoke_all_sessions_button":"Revoke All Sessions","admin.system_users.revoke_all_sessions_modal_message":"This action revokes all sessions in the system. All users will be logged out from all devices. Are you sure you want to revoke all sessions?","admin.system_users.revoke_all_sessions_modal_title":"Revoke all sessions in the system","admin.system_users.revokeAllSessions":"Revoke All Sessions","admin.system_users.system_admin":"System Admin","admin.system_users.title":"{siteName} Users","admin.systemUserDetail.teamList.header.name":"Name","admin.systemUserDetail.teamList.header.role":"Role","admin.systemUserDetail.teamList.header.type":"Type","admin.systemUserDetail.teamList.teamRole.admin":"Team Admin","admin.systemUserDetail.teamList.teamRole.guest":"Guest","admin.systemUserDetail.teamList.teamRole.member":"Team Member","admin.systemUserDetail.teamList.teamType.anyoneCanJoin":"Anyone Can Join","admin.systemUserDetail.teamList.teamType.groupSync":"Group Sync","admin.systemUserDetail.teamList.teamType.inviteOnly":"Invite Only","admin.systemUserDetail.title":"User Configuration","admin.team_channel_settings.cancel":"Cancel","admin.team_channel_settings.convertAndRemoveConfirmModal.cancel":"No, cancel","admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateConfirm":"Yes, convert channel to private and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertAndRemoveConfirmModal.toPrivateTitle":"Convert channel to a private and remove {amount, number} {amount, plural, one {user} other {users}}?","admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicConfirm":"Yes, convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertAndRemoveConfirmModal.toPublicTitle":"Convert channel to public and remove {amount, number} {amount, plural, one {user} other {users}}","admin.team_channel_settings.convertConfirmModal.cancel":"No, cancel","admin.team_channel_settings.convertConfirmModal.toPrivateConfirm":"Yes, convert to private channel","admin.team_channel_settings.convertConfirmModal.toPrivateMessage":"When you convert **{displayName}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.  \\n \\nAre you sure you want to convert **{displayName}** to a private channel?","admin.team_channel_settings.convertConfirmModal.toPrivateTitle":"Convert {displayName} to a private channel?","admin.team_channel_settings.convertConfirmModal.toPublicConfirm":"Yes, convert to public channel","admin.team_channel_settings.convertConfirmModal.toPublicMessage":"When you convert **{displayName}** to a public channel, history and membership are preserved. Public channels are discoverable and can by joined by users on the system without invitation.  \\n \\nAre you sure you want to convert **{displayName}** to a public channel?","admin.team_channel_settings.convertConfirmModal.toPublicTitle":"Convert {displayName} to a public channel?","admin.team_channel_settings.group_list.membersHeader":"Member Count","admin.team_channel_settings.group_list.nameHeader":"Group Name","admin.team_channel_settings.group_list.no-groups":"No groups specified yet","admin.team_channel_settings.group_list.no-synced-groups":"At least one group must be specified","admin.team_channel_settings.group_list.rolesHeader":"Roles","admin.team_channel_settings.group_row.channelAdmin":"Channel Admin","admin.team_channel_settings.group_row.member":"Member","admin.team_channel_settings.group_row.memberRole":"Member Role","admin.team_channel_settings.group_row.members":"{memberCount, number} {memberCount, plural, one {member} other {members}}","admin.team_channel_settings.group_row.remove":"Remove","admin.team_channel_settings.group_row.teamAdmin":"Team Admin","admin.team_channel_settings.list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.team_channel_settings.need_domains":"Please specify allowed email domains.","admin.team_channel_settings.need_groups":"You must add at least one group to manage this team by sync group members.","admin.team_channel_settings.need_groups_channel":"You must add at least one group to manage this channel by sync group members.","admin.team_channel_settings.removeConfirmModal.messageChannel":"{amount, number} {amount, plural, one {user} other {users}} will be removed. They are not in groups linked to this channel. Are you sure you wish to remove {amount, plural, one {this user} other {these users}}?","admin.team_channel_settings.removeConfirmModal.messageTeam":"{amount, number} {amount, plural, one {user} other {users}} will be removed. They are not in groups linked to this team. Are you sure you wish to remove {amount, plural, one {this user} other {these users}}?","admin.team_channel_settings.removeConfirmModal.remove":"Save and remove {amount, plural, one {user} other {users}}","admin.team_channel_settings.removeConfirmModal.title":"Save and remove {amount, number} {amount, plural, one {user} other {users}}?","admin.team_channel_settings.saving":"Saving Config...","admin.team_channel_settings.user_list.groupsHeader":"Groups","admin.team_channel_settings.user_list.nameHeader":"Name","admin.team_channel_settings.user_list.roleHeader":"Role","admin.team_channel_settings.users_will_be_removed":"{amount, number} {amount, plural, one {user} other {users}} will be removed from this team. They are not in groups linked to this team.","admin.team_channel_settings.usersToBeRemovedModal.close":"Close","admin.team_channel_settings.usersToBeRemovedModal.message":"The members listed below are not in any of the groups currently linked to this team. Because this team is set to be managed by group sync they will all be removed once saved.","admin.team_channel_settings.usersToBeRemovedModal.title":"**{total, number} {total, plural, one {User} other {Users}}** To Be Removed","admin.team_channel_settings.view_removed_users":"View These Users","admin.team_settings.description":"Manage team settings.","admin.team_settings.groupsPageTitle":"{siteName} Teams","admin.team_settings.team_detail.group_configuration":"Team Configuration","admin.team_settings.team_detail.groupsDescription":"Group members will be added to the team.","admin.team_settings.team_detail.groupsTitle":"Groups","admin.team_settings.team_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.team_settings.team_detail.manageTitle":"Team Management","admin.team_settings.team_detail.membersDescription":"A list of users who are currently in the team right now","admin.team_settings.team_detail.membersTitle":"Members","admin.team_settings.team_detail.profileDescription":"Summary of the team, including team name and description.","admin.team_settings.team_detail.profileNoDescription":"No team description added.","admin.team_settings.team_detail.profileTitle":"Team Profile","admin.team_settings.team_detail.syncedGroupsDescription":"Add and remove team members based on their group membership.","admin.team_settings.team_detail.syncedGroupsTitle":"Synced Groups","admin.team_settings.team_detail.teamDescription":"**Team Description**:","admin.team_settings.team_detail.teamName":"**Team Name**:","admin.team_settings.team_details.add_group":"Add Group","admin.team_settings.team_details.add_members":"Add Members","admin.team_settings.team_details.anyoneCanJoin":"Anyone can join this team","admin.team_settings.team_details.anyoneCanJoinDescr":"This team can be discovered allowing anyone with an account to join this team.","admin.team_settings.team_details.csvDomains":"Comma Separated Email Domain List","admin.team_settings.team_details.groupDetailsToggle":"Enable Group Mentions (Beta)","admin.team_settings.team_details.groupDetailsToggleDescr":"When enabled, this group can be mentioned in other channels and teams. This may result in the group member list being visible to all users.","admin.team_settings.team_details.specificDomains":"Only specific email domains can join this team","admin.team_settings.team_details.specificDomainsDescr":"Users can only join the team if their email matches one of the specified domains","admin.team_settings.team_details.syncGroupMembers":"Sync Group Members","admin.team_settings.team_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this team. The only way of inviting members to this team is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","admin.team_settings.team_list.mappingHeader":"Management","admin.team_settings.team_list.nameHeader":"Name","admin.team_settings.team_list.no_teams_found":"No teams found","admin.team_settings.team_row.configure":"Edit","admin.team_settings.team_row.managementMethod.anyoneCanJoin":"Anyone Can Join","admin.team_settings.team_row.managementMethod.groupSync":"Group Sync","admin.team_settings.team_row.managementMethod.inviteOnly":"Invite Only","admin.team_settings.title":"Teams","admin.team.brandDesc":"Enable custom branding to show an image of your choice, uploaded below, and some help text, written below, on the login page.","admin.team.brandDescriptionHelp":"Description of service shown in login screens and UI. When not specified, \\"All team communication in one place, searchable and accessible anywhere\\" is displayed.","admin.team.brandDescriptionTitle":"Site Description: ","admin.team.brandImageTitle":"Custom Brand Image:","admin.team.brandTextDescription":"Text that will appear below your custom brand image on your login screen. Supports Markdown-formatted text. Maximum 500 characters allowed.","admin.team.brandTextTitle":"Custom Brand Text:","admin.team.brandTitle":"Enable Custom Branding: ","admin.team.chooseImage":"Select Image","admin.team.editOthersPostsDesc":"When true, Team Administrators and System Administrators can edit other user\'s posts.  When false, only System Administrators can edit other user\'s posts.","admin.team.editOthersPostsTitle":"Allow Team Administrators to edit others posts:","admin.team.emailInvitationsDescription":"When true users can invite others to the system using email.","admin.team.emailInvitationsTitle":"Enable Email Invitations: ","admin.team.invalidateEmailInvitesDescription":"This will invalidate active email invitations that have not been accepted by the user.  By default email invitations expire after 48 hours.","admin.team.invalidateEmailInvitesFail":"Unable to invalidate pending email invites: {error}","admin.team.invalidateEmailInvitesSuccess":"Pending email invitations invalidated successfully","admin.team.invalidateEmailInvitesTitle":"Invalidate pending email invites","admin.team.maxChannelsDescription":"Maximum total number of channels per team, including both active and archived channels.","admin.team.maxChannelsExample":"E.g.: \\"100\\"","admin.team.maxChannelsTitle":"Max Channels Per Team:","admin.team.maxNotificationsPerChannelDescription":"Maximum total number of users in a channel before users typing messages, @all, @here, and @channel no longer send notifications because of performance.","admin.team.maxNotificationsPerChannelExample":"E.g.: \\"1000\\"","admin.team.maxNotificationsPerChannelTitle":"Max Notifications Per Channel:","admin.team.maxUsersDescription":"Maximum total number of users per team, including both active and inactive users.","admin.team.maxUsersExample":"E.g.: \\"25\\"","admin.team.maxUsersTitle":"Max Users Per Team:","admin.team.noBrandImage":"No brand image uploaded","admin.team.openServerDescription":"When true, anyone can signup for a user account on this server without the need to be invited.","admin.team.openServerTitle":"Enable Open Server: ","admin.team.removeBrandImage":"Remove brand image","admin.team.restrict_direct_message_any":"Any user on the Mattermost server","admin.team.restrict_direct_message_team":"Any member of the team","admin.team.restrictDescription":"New user accounts are restricted to the above specified email domain (e.g. \\"mattermost.org\\") or list of comma-separated domains (e.g. \\"corp.mattermost.com, mattermost.org\\"). New teams can only be created by users from the above domain(s). This setting affects email login for users.","admin.team.restrictDirectMessage":"Enable users to open Direct Message channels with:","admin.team.restrictDirectMessageDesc":"\'Any user on the Mattermost server\' enables users to open a Direct Message channel with any user on the server, even if they are not on any teams together. \'Any member of the team\' limits the ability in the Direct Messages \'More\' menu to only open Direct Message channels with users who are in the same team.\\n \\nNote: This setting only affects the UI, not permissions on the server.","admin.team.restrictExample":"E.g.: \\"corp.mattermost.com, mattermost.org\\"","admin.team.restrictGuestDescription":"New user accounts are restricted to the above specified email domain (e.g. \\"mattermost.org\\") or list of comma-separated domains (e.g. \\"corp.mattermost.com, mattermost.org\\"). New teams can only be created by users from the above domain(s). This setting affects email login for users. For Guest users, please add domains under Signup > Guest Access.","admin.team.restrictTitle":"Restrict new system and team members to specified email domains:","admin.team.showFullname":"Show first and last name","admin.team.showNickname":"Show nickname if one exists, otherwise show first and last name","admin.team.showUsername":"Show username (default)","admin.team.siteNameDescription":"Name of service shown in login screens and UI. When not specified, it defaults to \\"Mattermost\\".","admin.team.siteNameExample":"E.g.: \\"Mattermost\\"","admin.team.siteNameTitle":"Site Name:","admin.team.teamCreationDescription":"When false, only System Administrators can create teams.","admin.team.teamCreationTitle":"Enable Team Creation: ","admin.team.teammateNameDisplay":"Teammate Name Display:","admin.team.teammateNameDisplayDesc":"Set how to display users\' names in posts and the Direct Messages list.","admin.team.upload":"Upload","admin.team.uploadDesc":"Customize your user experience by adding a custom image to your login screen. Recommended maximum image size is less than 2 MB.","admin.team.uploaded":"Uploaded!","admin.team.uploading":"Uploading...","admin.team.userCreationDescription":"When false, the ability to create accounts is disabled. The create account button displays error when pressed.","admin.team.userCreationTitle":"Enable Account Creation: ","admin.true":"true","admin.user_grid.channel_admin":"Channel Admin","admin.user_grid.channel_member":"Channel Member","admin.user_grid.guest":"Guest","admin.user_grid.name":"Name","admin.user_grid.new":"New","admin.user_grid.notFound":"No users found","admin.user_grid.remove":"Remove","admin.user_grid.role":"Role","admin.user_grid.system_admin":"System Admin","admin.user_grid.team_admin":"Team Admin","admin.user_grid.team_member":"Team Member","admin.user_item.authServiceEmail":"**Sign-in Method:** Email","admin.user_item.authServiceNotEmail":"**Sign-in Method:** {service}","admin.user_item.demoteToGuest":"Demote to Guest","admin.user_item.emailTitle":"**Email:** {email}","admin.user_item.guest":"Guest","admin.user_item.inactive":"Inactive","admin.user_item.makeActive":"Activate","admin.user_item.makeInactive":"Deactivate","admin.user_item.makeMember":"Make Team Member","admin.user_item.makeTeamAdmin":"Make Team Admin","admin.user_item.manageRoles":"Manage Roles","admin.user_item.manageTeams":"Manage Teams","admin.user_item.manageTokens":"Manage Tokens","admin.user_item.member":"Member","admin.user_item.menuAriaLabel":"User Actions Menu","admin.user_item.mfaNo":"**MFA**: No","admin.user_item.mfaYes":"**MFA**: Yes","admin.user_item.promoteToUser":"Promote to User","admin.user_item.resetEmail":"Update Email","admin.user_item.resetMfa":"Remove MFA","admin.user_item.resetPwd":"Reset Password","admin.user_item.revokeSessions":"Revoke Sessions","admin.user_item.switchToEmail":"Switch to Email/Password","admin.user_item.sysAdmin":"System Admin","admin.user_item.teamAdmin":"Team Admin","admin.user_item.teamMember":"Team Member","admin.user_item.user_id":"**User ID:** {userID}","admin.user_item.userAccessTokenPostAll":"(can create post:all personal access tokens)","admin.user_item.userAccessTokenPostAllPublic":"(can create post:channels personal access tokens)","admin.user_item.userAccessTokenYes":"(can create personal access tokens)","admin.userManagement.userDetail.addTeam":"Add Team","admin.userManagement.userDetail.authenticationMethod":"Authentication Method","admin.userManagement.userDetail.email":"Email","admin.userManagement.userDetail.mfa":"MFA","admin.userManagement.userDetail.role":"Role","admin.userManagement.userDetail.teamsSubtitle":"Teams to which this user belongs","admin.userManagement.userDetail.teamsTitle":"Team Membership","admin.userManagement.userDetail.userId":"User ID:","admin.userManagement.userDetail.username":"Username","admin.viewArchivedChannelsHelpText":"(Beta) When true, allows users to view, share and search for content of channels that have been archived. Users can only view the content in channels of which they were a member before the channel was archived.","admin.viewArchivedChannelsTitle":"Allow users to view archived channels:","admin.webserverModeDisabled":"Disabled","admin.webserverModeDisabledDescription":"The Mattermost server will not serve static files.","admin.webserverModeGzip":"gzip","admin.webserverModeGzipDescription":"The Mattermost server will serve static files compressed with gzip.","admin.webserverModeHelpText":"gzip compression applies to static content files. It is recommended to enable gzip to improve performance unless your environment has specific restrictions, such as a web proxy that distributes gzip files poorly.","admin.webserverModeTitle":"Webserver Mode:","admin.webserverModeUncompressed":"Uncompressed","admin.webserverModeUncompressedDescription":"The Mattermost server will serve static files uncompressed.","analytics.chart.loading":"Loading...","analytics.chart.meaningful":"Not enough data for a meaningful representation.","analytics.system.activeUsers":"Active Users With Posts","analytics.system.channelTypes":"Channel Types","analytics.system.dailyActiveUsers":"Daily Active Users","analytics.system.info":"Use data for only the chosen team. Exclude posts in direct message channels that are not tied to a team.","analytics.system.infoAndSkippedIntensiveQueries":"Use data for only the chosen team. Exclude posts in direct message channels that are not tied to a team. \\n \\n To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html).","analytics.system.monthlyActiveUsers":"Monthly Active Users","analytics.system.postTypes":"Posts, Files and Hashtags","analytics.system.privateGroups":"Private Channels","analytics.system.publicChannels":"Public Channels","analytics.system.skippedIntensiveQueries":"To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html).","analytics.system.textPosts":"Posts with Text-only","analytics.system.title":"System Statistics","analytics.system.totalBotPosts":"Total Posts from Bots","analytics.system.totalChannels":"Total Channels","analytics.system.totalCommands":"Total Commands","analytics.system.totalFilePosts":"Posts with Files","analytics.system.totalHashtagPosts":"Posts with Hashtags","analytics.system.totalIncomingWebhooks":"Incoming Webhooks","analytics.system.totalMasterDbConnections":"Master DB Conns","analytics.system.totalOutgoingWebhooks":"Outgoing Webhooks","analytics.system.totalPosts":"Total Posts","analytics.system.totalReadDbConnections":"Replica DB Conns","analytics.system.totalSessions":"Total Sessions","analytics.system.totalTeams":"Total Teams","analytics.system.totalUsers":"Total Active Users","analytics.system.totalWebsockets":"WebSocket Conns","analytics.team.activeUsers":"Active Users With Posts","analytics.team.newlyCreated":"Newly Created Users","analytics.team.noTeams":"This server has no teams for which to view statistics.","analytics.team.privateGroups":"Private Channels","analytics.team.publicChannels":"Public Channels","analytics.team.recentUsers":"Recent Active Users","analytics.team.title":"Team Statistics for {team}","analytics.team.totalPosts":"Total Posts","analytics.team.totalUsers":"Total Active Users","announcement_bar.error.email_verification_required":"Check your email inbox to verify the address.","announcement_bar.error.license_expired":"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).","announcement_bar.error.license_expiring":"Enterprise license expires on {date, date, long}. [Please renew](!{link}).","announcement_bar.error.past_grace":"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details.","announcement_bar.error.preview_mode":"Preview Mode: Email notifications have not been configured.","announcement_bar.error.site_url_gitlab.full":"Please configure your [site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) either on the [System Console](/admin_console/environment/web_server) or, if you\'re using GitLab Mattermost, in gitlab.rb.","announcement_bar.error.site_url.full":"Please configure your [site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) on the [System Console](/admin_console/environment/web_server).","announcement_bar.notification.email_verified":"Email verified","api.channel.add_guest.added":"{addedUsername} added to the channel as a guest by {username}.","api.channel.add_member.added":"{addedUsername} added to the channel by {username}.","api.channel.delete_channel.archived":"{username} archived the channel.","api.channel.guest_join_channel.post_and_forget":"{username} joined the channel as a guest.","api.channel.join_channel.post_and_forget":"{username} joined the channel.","api.channel.leave.left":"{username} left the channel.","api.channel.post_convert_channel_to_private.updated_from":"{username} converted the channel from public to private","api.channel.post_update_channel_displayname_message_and_forget.updated_from":"{username} updated the channel display name from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.removed":"{username} removed the channel header (was: {old})","api.channel.post_update_channel_header_message_and_forget.updated_from":"{username} updated the channel header from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.updated_to":"{username} updated the channel header to: {new}","api.channel.remove_member.removed":"{removedUsername} was removed from the channel","api.channel.restore_channel.unarchived":"{username} unarchived the channel.","api.team.add_member.added":"{addedUsername} added to the team by {username}","api.team.join_team.post_and_forget":"{username} joined the team.","api.team.leave.left":"{username} left the team.","api.team.remove_user_from_team.removed":"{removedUsername} was removed from the team.","app.channel.post_update_channel_purpose_message.removed":"{username} removed the channel purpose (was: {old})","app.channel.post_update_channel_purpose_message.updated_from":"{username} updated the channel purpose from: {old} to: {new}","app.channel.post_update_channel_purpose_message.updated_to":"{username} updated the channel purpose to: {new}","app.plugin.marketplace_plugins.app_error":"Error connecting to the marketplace server. Please check your settings in the [System Console]({siteURL}/admin_console/plugins/plugin_management).","archivedChannelMessage":"You are viewing an **archived channel**. New messages cannot be posted.","atmos/camo":"atmos/camo","audit_table.accountActive":"Account activated","audit_table.accountInactive":"Account deactivated","audit_table.action":"Action","audit_table.attemptedAllowOAuthAccess":"Attempted to allow a new OAuth service access","audit_table.attemptedLicenseAdd":"Attempted to add new license","audit_table.attemptedLogin":"Attempted to login","audit_table.attemptedOAuthToken":"Attempted to get an OAuth access token","audit_table.attemptedPassword":"Attempted to change password","audit_table.attemptedRegisterApp":"Attempted to register a new OAuth Application with ID {id}","audit_table.attemptedReset":"Attempted to reset password","audit_table.attemptedWebhookCreate":"Attempted to create a webhook","audit_table.attemptedWebhookDelete":"Attempted to delete a webhook","audit_table.authenticated":"Successfully authenticated","audit_table.by":" by {username}","audit_table.byAdmin":" by an admin","audit_table.channelCreated":"Created the {channelName} channel","audit_table.channelDeleted":"Archived the channel with the URL {url}","audit_table.establishedDM":"Established a direct message channel with {username}","audit_table.failedExpiredLicenseAdd":"Failed to add a new license as it has either expired or not yet been started","audit_table.failedInvalidLicenseAdd":"Failed to add an invalid license","audit_table.failedLogin":"FAILED login attempt","audit_table.failedOAuthAccess":"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback","audit_table.failedPassword":"Failed to change password - tried to update user password who was logged in through OAuth","audit_table.failedWebhookCreate":"Failed to create a webhook - bad channel permissions","audit_table.failedWebhookDelete":"Failed to delete a webhook - inappropriate conditions","audit_table.headerUpdated":"Updated the {channelName} channel header","audit_table.ip":"IP Address","audit_table.licenseRemoved":"Successfully removed a license","audit_table.loginAttempt":" (Login attempt)","audit_table.loginFailure":" (Login failure)","audit_table.logout":"Logged out of your account","audit_table.member":"member","audit_table.nameUpdated":"Updated the {channelName} channel name","audit_table.oauthTokenFailed":"Failed to get an OAuth access token - {token}","audit_table.revokedAll":"Revoked all current sessions for the team","audit_table.sentEmail":"Sent an email to {email} to reset your password","audit_table.session":"Session ID","audit_table.sessionRevoked":"The session with id {sessionId} was revoked","audit_table.successfullLicenseAdd":"Successfully added new license","audit_table.successfullLogin":"Successfully logged in","audit_table.successfullOAuthAccess":"Successfully gave a new OAuth service access","audit_table.successfullOAuthToken":"Successfully added a new OAuth service","audit_table.successfullPassword":"Successfully changed password","audit_table.successfullReset":"Successfully reset password","audit_table.successfullWebhookCreate":"Successfully created a webhook","audit_table.successfullWebhookDelete":"Successfully deleted a webhook","audit_table.timestamp":"Timestamp","audit_table.updatedRol":"Updated user role(s) to ","audit_table.updateGeneral":"Updated the general settings of your account","audit_table.updateGlobalNotifications":"Updated your global notification settings","audit_table.updatePicture":"Updated your profile picture","audit_table.userAdded":"Added {username} to the {channelName} channel","audit_table.userId":"User ID","audit_table.userRemoved":"Removed {username} to the {channelName} channel","audit_table.verified":"Successfully verified your email address","authorize.access":"Allow **{appName}** access?","authorize.allow":"Allow","authorize.app":"The app **{appName}** would like the ability to access and modify your basic information.","authorize.deny":"Deny","authorize.title":"Authorize **{appName}** to Connect to Your **Mattermost** User Account","backstage_list.search":"Search","backstage_navbar.backToMattermost":"Back to {siteName}","backstage_sidebar.bots":"Bot Accounts","backstage_sidebar.emoji":"Custom Emoji","backstage_sidebar.integrations":"Integrations","backstage_sidebar.integrations.commands":"Slash Commands","backstage_sidebar.integrations.incoming_webhooks":"Incoming Webhooks","backstage_sidebar.integrations.oauthApps":"OAuth 2.0 Applications","backstage_sidebar.integrations.outgoing_webhooks":"Outgoing Webhooks","bot.add.description":"Description","bot.add.description.help":"(Optional) Let others know what this bot does.","bot.add.display_name.help":"(Optional) You can choose to display your bot\'s full name rather than its username.","bot.add.post_all":"post:all","bot.add.post_all.enabled":"Enabled","bot.add.post_all.help":"Bot will have access to post to all Mattermost channels including direct messages.","bot.add.post_channels":"post:channels","bot.add.post_channels.enabled":"Enabled","bot.add.post_channels.help":"Bot will have access to post to all Mattermost public channels.","bot.add.role":"Role","bot.add.role.admin":"System Admin","bot.add.role.help":"Choose what role the bot should have.","bot.add.role.member":"Member","bot.add.username.help":"You can use lowercase letters, numbers, periods, dashes, and underscores.","bot.create_failed":"Failed to create bot","bot.create_token.close":"Close","bot.edit_failed":"Failed to edit bot","bot.manage.create_token":"Create New Token","bot.manage.disable":"Disable","bot.manage.enable":"Enable","bot.remove_profile_picture":"Remove Bot Icon","bot.token.default.description":"Default Token","bot.token.error.description":"Please enter a description.","bots.add.displayName":"Display Name","bots.add.icon":"Bot Icon","bots.add.username":"Username","bots.disabled":"Disabled","bots.image.upload":"Upload Image","bots.is_bot":"BOT","bots.manage.add":"Add Bot Account","bots.manage.add.cancel":"Cancel","bots.manage.add.create":"Create Bot Account","bots.manage.add.creating":"Creating...","bots.manage.add.invalid_username":"Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","bots.manage.bot_accounts":"Bot Accounts","bots.manage.created.text":"Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).","bots.manage.description":"Use bot accounts to integrate with Mattermost through plugins or the API","bots.manage.edit":"Edit","bots.manage.edit.editing":"Updating...","bots.manage.edit.title":"Update","bots.manage.empty":"No bot accounts found","bots.manage.emptySearch":"No bot accounts match **{searchTerm}**","bots.manage.header":"Bot Accounts","bots.manage.help1":"Use {botAccounts} to integrate with Mattermost through plugins or the API. Bot accounts are available to everyone on your server. ","bots.manage.help2":"Enable bot account creation in the [System Console]({siteURL}/admin_console/integrations/bot_accounts).","bots.manage.search":"Search Bot Accounts","bots.managed_by":"Managed by ","bots.token.confirm":"Delete","bots.token.confirm_text":"Are you sure you want to delete the token?","bots.token.delete":"Delete Token","center_panel.archived.closeChannel":"Close Channel","center_panel.direct.closeDirectMessage":"Close Direct Message","center_panel.direct.closeGroupMessage":"Close Group Message","change_url.close":"Close","change_url.endWithLetter":"URLs must end with a lowercase letter or number.","change_url.helpText":"You can use lowercase letters, numbers, dashes, and underscores.","change_url.invalidDirectMessage":"User IDs are not allowed in channel URLs.","change_url.invalidUrl":"Invalid URL","change_url.longer":"URLs must have at least 2 characters.","change_url.startAndEndWithLetter":"URLs must start and end with a lowercase letter or number.","change_url.startWithLetter":"URLs must start with a lowercase letter or number.","change_url.urlLabel":"Channel URL","channel_flow.alreadyExist":"A channel with that URL already exists","channel_flow.changeUrlTitle":"Change Channel URL","channel_flow.create":"Create Channel","channel_flow.handleTooShort":"Channel URL must be 2 or more lowercase alphanumeric characters","channel_flow.invalidName":"Invalid Channel Name","channel_flow.set_url_title":"Set Channel URL","channel_header.addChannelHeader":"Add a channel description","channel_header.channelHasGuests":"This channel has guests","channel_header.channelMembers":"Members","channel_header.convert":"Convert to Private Channel","channel_header.delete":"Archive Channel","channel_header.directchannel.you":"{displayname} (you) ","channel_header.editLink":"(Edit)","channel_header.flagged":"Flagged posts","channel_header.groupConstrained":"Members managed by linked groups.","channel_header.groupMessageHasGuests":"This group message has guests","channel_header.leave":"Leave Channel","channel_header.manageMembers":"Manage Members","channel_header.menuAriaLabel":"Channel Menu","channel_header.mute":"Mute Channel","channel_header.pinnedPosts":"Pinned posts","channel_header.recentMentions":"Recent mentions","channel_header.rename":"Rename Channel","channel_header.search":"Search","channel_header.setHeader":"Edit Channel Header","channel_header.setPurpose":"Edit Channel Purpose","channel_header.unarchive":"Unarchive Channel","channel_header.unmute":"Unmute Channel","channel_header.viewMembers":"View Members","channel_info.about":"About","channel_info.header":"Header:","channel_info.id":"ID: ","channel_info.notFound":"No Channel Found","channel_info.purpose":"Purpose:","channel_info.url":"URL:","channel_invite.addNewMembers":"Add New Members to ","channel_loader.posted":"Posted","channel_loader.postedImage":" posted an image","channel_loader.socketError":"Please check connection, Mattermost unreachable. If issue persists, ask administrator to [check WebSocket port](!https://about.mattermost.com/default-websocket-port-help).","channel_loader.someone":"Someone","channel_loader.something":" did something new","channel_loader.unknown_error":"We received an unexpected status code from the server.","channel_loader.uploadedFile":" uploaded a file","channel_loader.uploadedImage":" uploaded an image","channel_members_dropdown.channel_admin":"Channel Admin","channel_members_dropdown.channel_admins":"Channel Admins","channel_members_dropdown.channel_guest":"Channel Guest","channel_members_dropdown.channel_member":"Channel Member","channel_members_dropdown.channel_members":"Channel Members","channel_members_dropdown.make_channel_admin":"Make Channel Admin","channel_members_dropdown.make_channel_admins":"Make Channel Admins","channel_members_dropdown.make_channel_member":"Make Channel Member","channel_members_dropdown.make_channel_members":"Make Channel Members","channel_members_dropdown.menuAriaLabel":"Change the role of channel member","channel_members_dropdown.remove_from_channel":"Remove from Channel","channel_members_modal.addNew":" Add Members","channel_members_modal.members":" Members","channel_modal.cancel":"Cancel","channel_modal.createNew":"Create Channel","channel_modal.descriptionHelp":"Describe how this channel should be used.","channel_modal.displayNameError":"Display name must have at least 2 characters.","channel_modal.edit":"Edit","channel_modal.header":"Header","channel_modal.headerEx":"E.g.: \\"[Link Title](http://example.com)\\"","channel_modal.headerHelp":"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com).","channel_modal.modalTitle":"New Channel","channel_modal.name":"Name","channel_modal.nameEx":"E.g.: \\"Bugs\\", \\"Marketing\\", \\"客户支持\\"","channel_modal.optional":"(optional)","channel_modal.privateHint":" - Only invited members can join this channel","channel_modal.privateName":"Private","channel_modal.publicHint":" - Anyone can join this channel","channel_modal.publicName":"Public","channel_modal.purpose":"Purpose","channel_modal.purposeEx":"E.g.: \\"A channel to file bugs and improvements\\"","channel_modal.type":"Type","channel_notifications.allActivity":"For all activity","channel_notifications.globalDefault":"Global default ({notifyLevel})","channel_notifications.ignoreChannelMentions":"Ignore mentions for @channel, @here and @all","channel_notifications.ignoreChannelMentions.help":"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel.","channel_notifications.ignoreChannelMentions.off.title":"Off","channel_notifications.ignoreChannelMentions.on.title":"On","channel_notifications.levels.all":"All","channel_notifications.levels.default":"Default","channel_notifications.levels.mention":"Mention","channel_notifications.levels.none":"None","channel_notifications.muteChannel.help":"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you\'re mentioned.","channel_notifications.muteChannel.off.title":"Off","channel_notifications.muteChannel.on.title":"On","channel_notifications.muteChannel.on.title.collapse":"Mute is enabled. Desktop, email and push notifications will not be sent for this channel.","channel_notifications.muteChannel.settings":"Mute channel","channel_notifications.never":"Never","channel_notifications.onlyMentions":"Only for mentions","channel_notifications.override":"Selecting an option other than \\"Default\\" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.","channel_notifications.overridePush":"Selecting an option other than \\"Global default\\" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.","channel_notifications.preferences":"Notification Preferences for ","channel_notifications.push":"Send mobile push notifications","channel_notifications.sendDesktop":"Send desktop notifications","channel_select.placeholder":"--- Select a channel ---","channel_switch_modal.deactivated":"Deactivated","channel_switch_modal.title":"Switch Channels","channel_toggle_button.private":"Private","channel_toggle_button.public":"Public","channelHeader.addToFavorites":"Add to Favorites","channelHeader.removeFromFavorites":"Remove from Favorites","channelHeader.unmute":"Unmute","claim.email_to_ldap.enterLdapPwd":"Enter the ID and password for your AD/LDAP account","claim.email_to_ldap.enterPwd":"Enter the password for your {site} email account","claim.email_to_ldap.ldapId":"AD/LDAP ID","claim.email_to_ldap.ldapIdError":"Please enter your AD/LDAP ID.","claim.email_to_ldap.ldapPasswordError":"Please enter your AD/LDAP password.","claim.email_to_ldap.ldapPwd":"AD/LDAP Password","claim.email_to_ldap.pwd":"Password","claim.email_to_ldap.pwdError":"Please enter your password.","claim.email_to_ldap.ssoNote":"You must already have a valid AD/LDAP account","claim.email_to_ldap.ssoType":"Upon claiming your account, you will only be able to login with AD/LDAP","claim.email_to_ldap.switchTo":"Switch Account to AD/LDAP","claim.email_to_ldap.title":"Switch Email/Password Account to AD/LDAP","claim.email_to_oauth.enterPwd":"Enter the password for your {site} account","claim.email_to_oauth.pwd":"Password","claim.email_to_oauth.pwdError":"Please enter your password.","claim.email_to_oauth.ssoNote":"You must already have a valid {type} account","claim.email_to_oauth.ssoType":"Upon claiming your account, you will only be able to login with {type} SSO","claim.email_to_oauth.switchTo":"Switch Account to {uiType}","claim.email_to_oauth.title":"Switch Email/Password Account to {uiType}","claim.ldap_to_email.confirm":"Confirm Password","claim.ldap_to_email.email":"After switching your authentication method, you will use {email} to login. Your AD/LDAP credentials will no longer allow access to Mattermost.","claim.ldap_to_email.enterLdapPwd":"{ldapPassword}:","claim.ldap_to_email.enterPwd":"New email login password:","claim.ldap_to_email.ldapPasswordError":"Please enter your AD/LDAP password.","claim.ldap_to_email.ldapPwd":"AD/LDAP Password","claim.ldap_to_email.pwd":"Password","claim.ldap_to_email.pwdError":"Please enter your password.","claim.ldap_to_email.pwdNotMatch":"Passwords do not match.","claim.ldap_to_email.switchTo":"Switch account to email/password","claim.ldap_to_email.title":"Switch AD/LDAP Account to Email/Password","claim.oauth_to_email.confirm":"Confirm Password","claim.oauth_to_email.description":"Upon changing your account type, you will only be able to login with your email and password.","claim.oauth_to_email.enterNewPwd":"Enter a new password for your {site} email account","claim.oauth_to_email.enterPwd":"Please enter a password.","claim.oauth_to_email.newPwd":"New Password","claim.oauth_to_email.pwdNotMatch":"Passwords do not match.","claim.oauth_to_email.switchTo":"Switch {type} to Email and Password","claim.oauth_to_email.title":"Switch {type} Account to Email","combined_system_message.added_to_channel.many_expanded":"{users} and {lastUser} were **added to the channel** by {actor}.","combined_system_message.added_to_channel.one":"{firstUser} **added to the channel** by {actor}.","combined_system_message.added_to_channel.one_you":"You were **added to the channel** by {actor}.","combined_system_message.added_to_channel.two":"{firstUser} and {secondUser} **added to the channel** by {actor}.","combined_system_message.added_to_team.many_expanded":"{users} and {lastUser} were **added to the team** by {actor}.","combined_system_message.added_to_team.one":"{firstUser} **added to the team** by {actor}.","combined_system_message.added_to_team.one_you":"You were **added to the team** by {actor}.","combined_system_message.added_to_team.two":"{firstUser} and {secondUser} **added to the team** by {actor}.","combined_system_message.joined_channel.many_expanded":"{users} and {lastUser} **joined the channel**.","combined_system_message.joined_channel.one":"{firstUser} **joined the channel**.","combined_system_message.joined_channel.one_you":"You **joined the channel**.","combined_system_message.joined_channel.two":"{firstUser} and {secondUser} **joined the channel**.","combined_system_message.joined_team.many_expanded":"{users} and {lastUser} **joined the team**.","combined_system_message.joined_team.one":"{firstUser} **joined the team**.","combined_system_message.joined_team.one_you":"You **joined the team**.","combined_system_message.joined_team.two":"{firstUser} and {secondUser} **joined the team**.","combined_system_message.left_channel.many_expanded":"{users} and {lastUser} **left the channel**.","combined_system_message.left_channel.one":"{firstUser} **left the channel**.","combined_system_message.left_channel.one_you":"You **left the channel**.","combined_system_message.left_channel.two":"{firstUser} and {secondUser} **left the channel**.","combined_system_message.left_team.many_expanded":"{users} and {lastUser} **left the team**.","combined_system_message.left_team.one":"{firstUser} **left the team**.","combined_system_message.left_team.one_you":"You **left the team**.","combined_system_message.left_team.two":"{firstUser} and {secondUser} **left the team**.","combined_system_message.removed_from_channel.many_expanded":"{users} and {lastUser} were **removed from the channel**.","combined_system_message.removed_from_channel.one":"{firstUser} was **removed from the channel**.","combined_system_message.removed_from_channel.one_you":"You were **removed from the channel**.","combined_system_message.removed_from_channel.two":"{firstUser} and {secondUser} were **removed from the channel**.","combined_system_message.removed_from_team.many_expanded":"{users} and {lastUser} were **removed from the team**.","combined_system_message.removed_from_team.one":"{firstUser} was **removed from the team**.","combined_system_message.removed_from_team.one_you":"You were **removed from the team**.","combined_system_message.removed_from_team.two":"{firstUser} and {secondUser} were **removed from the team**.","combined_system_message.you":"You","confirm_modal.cancel":"Cancel","convert_channel.cancel":"No, cancel","convert_channel.confirm":"Yes, convert to private channel","convert_channel.question1":"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.","convert_channel.question2":"The change is permanent and cannot be undone.","convert_channel.question3":"Are you sure you want to convert **{display_name}** to a private channel?","convert_channel.title":"Convert {display_name} to a Private Channel?","copy_url_context_menu.getChannelLink":"Copy Link","create_comment.addComment":"Add a comment...","create_comment.comment":"Add Comment","create_comment.commentTitle":"Comment","create_comment.file":"File uploading","create_comment.files":"Files uploading","create_post.comment":"Comment","create_post.deactivated":"You are viewing an archived channel with a deactivated user.","create_post.error_message":"Your message is too long. Character count: {length}/{limit}","create_post.fileProcessing":"Processing...","create_post.icon":"Create a post","create_post.post":"Post","create_post.read_only":"This channel is read-only. Only members with permission can post here.","create_post.send_message":"Send a message","create_post.shortcutsNotSupported":"Keyboard shortcuts are not supported on your device.","create_post.tutorialTip.title":"Sending Messages","create_post.tutorialTip1":"Type here to write a message and press **Enter** to post it.","create_post.tutorialTip2":"Click the **Attachment** button to upload an image or a file.","create_post.write":"Write to {channelDisplayName}","create_team.agreement":"By proceeding to create your account and use {siteName}, you agree to our [Terms of Service]({TermsOfServiceLink}) and [Privacy Policy]({PrivacyPolicyLink}). If you do not agree, you cannot use {siteName}.","create_team.display_name.charLength":"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.","create_team.display_name.nameHelp":"Name your team in any language. Your team name shows in menus and headings.","create_team.display_name.next":"Next","create_team.display_name.required":"This field is required","create_team.display_name.teamName":"Team Name","create_team.team_url.back":"Back to previous step","create_team.team_url.charLength":"Name must be {min} or more characters up to a maximum of {max}","create_team.team_url.creatingTeam":"Creating team...","create_team.team_url.finish":"Finish","create_team.team_url.hint1":"Short and memorable is best","create_team.team_url.hint2":"Use lowercase letters, numbers and dashes","create_team.team_url.hint3":"Must start with a letter and can\'t end in a dash","create_team.team_url.regex":"Use only lower case letters, numbers and dashes. Must start with a letter and can\'t end in a dash.","create_team.team_url.required":"This field is required","create_team.team_url.taken":"This URL [starts with a reserved word](!https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url) or is unavailable. Please try another.","create_team.team_url.teamUrl":"Team URL","create_team.team_url.unavailable":"This URL is taken or unavailable. Please try another.","create_team.team_url.webAddress":"Choose the web address of your new team:","custom_emoji.header":"Custom Emoji","date_separator.today":"Today","date_separator.yesterday":"Yesterday","deactivate_member_modal.deactivate":"Deactivate","deactivate_member_modal.desc":"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system.\\n","deactivate_member_modal.desc.confirm":" Are you sure you want to deactivate {username}?","deactivate_member_modal.desc.for_users_with_bot_accounts":"This action deactivates {username}.\\n \\n * They will be logged out and not have access to any teams or channels on this system.\\n * Bot accounts they manage will be disabled along with their integrations. To enable them again, go to [Integrations > Bot Accounts]({siteURL}/_redirect/integrations/bots). [Learn more about bot accounts](!https://mattermost.com/pl/default-bot-accounts).\\n \\n \\n","deactivate_member_modal.sso_warning":"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync.","deactivate_member_modal.title":"Deactivate {username}","default_channel.purpose":"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","delete_channel.cancel":"Cancel","delete_channel.confirm":"Confirm ARCHIVE Channel","delete_channel.del":"Archive","delete_channel.question":"This will archive the channel from the team and make its contents inaccessible for all users. \\n \\nAre you sure you wish to archive the **{display_name}** channel?","delete_channel.viewArchived.question":"This will archive the channel from the team. Channel contents will still be accessible by channel members.\\n \\nAre you sure you wish to archive the **{display_name}** channel?","delete_post.cancel":"Cancel","delete_post.comment":"Comment","delete_post.confirm":"Confirm {term} Delete","delete_post.del":"Delete","delete_post.post":"Post","delete_post.question":"Are you sure you want to delete this {term}?","delete_post.warning":"This post has {count, number} {count, plural, one {comment} other {comments}} on it.","demote_to_user_modal.demote":"Demote","demote_to_user_modal.desc":"This action demotes the user {username} to a guest. It will restrict the user\'s ability to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to demote user {username} to guest?","demote_to_user_modal.title":"Demote User {username} to Guest","device_icons.android":"Android Icon","device_icons.apple":"Apple Icon","device_icons.linux":"Linux Icon","device_icons.windows":"Windows Icon","discard_changes_modal.leave":"Yes, Discard","discard_changes_modal.message":"You have unsaved changes, are you sure you want to discard them?","discard_changes_modal.title":"Discard Changes?","edit_channel_header_modal.cancel":"Cancel","edit_channel_header_modal.description":"Edit the text appearing next to the channel name in the channel header.","edit_channel_header_modal.error":"This channel header is too long, please enter a shorter one","edit_channel_header_modal.save":"Save","edit_channel_header_modal.title":"Edit Header for {channel}","edit_channel_header_modal.title_dm":"Edit Header","edit_channel_header.editHeader":"Edit the Channel Header...","edit_channel_header.previewHeader":"Edit Header","edit_channel_private_purpose_modal.body":"This text appears in the \\"View Info\\" modal of the private channel.","edit_channel_purpose_modal.body":"Describe how this channel should be used. This text appears in the channel list in the \\"More...\\" menu and helps others decide whether to join.","edit_channel_purpose_modal.cancel":"Cancel","edit_channel_purpose_modal.error":"This channel purpose is too long, please enter a shorter one","edit_channel_purpose_modal.save":"Save","edit_channel_purpose_modal.title1":"Edit Purpose","edit_channel_purpose_modal.title2":"Edit Purpose for ","edit_command.update":"Update","edit_command.updating":"Updating...","edit_post.cancel":"Cancel","edit_post.edit":"Edit {title}","edit_post.editPost":"Edit the post...","edit_post.save":"Save","edit_post.time_limit_button.for_n_seconds":"For {n} seconds","edit_post.time_limit_button.no_limit":"Anytime","edit_post.time_limit_modal.description":"Setting a time limit applies to all users who have the \\"Edit Post\\" permissions in any permission scheme.","edit_post.time_limit_modal.invalid_time_limit":"Invalid time limit","edit_post.time_limit_modal.option_label_anytime":"Anytime","edit_post.time_limit_modal.option_label_time_limit.postinput":"seconds after posting","edit_post.time_limit_modal.option_label_time_limit.preinput":"Can edit for","edit_post.time_limit_modal.save_button":"Save Edit Time","edit_post.time_limit_modal.subscript":"Set the length of time users have to edit their messages after posting.","edit_post.time_limit_modal.title":"Configure Global Edit Post Time Limit","email_verify.almost":"{siteName}: You are almost done","email_verify.failed":" Failed to send verification email.","email_verify.notVerifiedBody":"Please verify your email address. Check your inbox for an email.","email_verify.resend":"Resend Email","email_verify.sent":" Verification email sent.","emoji_list.actions":"Actions","emoji_list.add":"Add Custom Emoji","emoji_list.creator":"Creator","emoji_list.delete":"Delete","emoji_list.delete.confirm.button":"Delete","emoji_list.delete.confirm.msg":"This action permanently deletes the custom emoji. Are you sure you want to delete it?","emoji_list.delete.confirm.title":"Delete Custom Emoji","emoji_list.empty":"No Custom Emoji Found","emoji_list.header":"Custom Emoji","emoji_list.help":"Custom emoji are available to everyone on your server. Type \':\' followed by two characters in a message box to bring up the emoji selection menu.","emoji_list.help2":"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: \'# :smile:\'.","emoji_list.image":"Image","emoji_list.name":"Name","emoji_list.search":"Search Custom Emoji","emoji_picker_item.emoji_aria_label":"{emojiName} emoji","emoji_picker.activity":"Activity","emoji_picker.close":"Close","emoji_picker.custom":"Custom","emoji_picker.emojiPicker":"Emoji Picker","emoji_picker.flags":"Flags","emoji_picker.foods":"Foods","emoji_picker.header":"Emoji Picker","emoji_picker.nature":"Nature","emoji_picker.objects":"Objects","emoji_picker.people":"People","emoji_picker.places":"Places","emoji_picker.recent":"Recently Used","emoji_picker.search":"Search emojis","emoji_picker.search_emoji":"Search for an emoji","emoji_picker.searchResults":"Search Results","emoji_picker.symbols":"Symbols","error.channel_not_found.message":"The channel you\'re requesting is private or does not exist. Please contact an Administrator to be added to the channel.","error.channel_not_found.message_guest":"Your guest account has no channels assigned. Please contact an administrator.","error.channel_not_found.title":"Channel Not Found","error.channelNotFound.guest_link":"Back","error.channelNotFound.link":"Back to {defaultChannelName}","error.generic.link":"Back to {siteName}","error.generic.link_login":"Back to Login Page","error.generic.message":"An error has occurred.","error.generic.title":"Error","error.local_storage.help1":"Enable cookies","error.local_storage.help2":"Turn off private browsing","error.local_storage.help3":"Use a supported browser (IE 11, Chrome 61+, Firefox 60+, Safari 12+, Edge 42+)","error.local_storage.message":"Mattermost was unable to load because a setting in your browser prevents the use of its local storage features. To allow Mattermost to load, try the following actions:","error.local_storage.title":"Cannot Load Mattermost","error.not_found.message":"The page you were trying to reach does not exist","error.not_found.title":"Page Not Found","error.oauth_access_denied":"You must authorize Mattermost to log in with {service}.","error.oauth_access_denied.title":"Authorization Error","error.oauth_invalid_param.title":"OAuth Parameter Error","error.oauth_missing_code":"The service provider {service} did not provide an authorization code in the redirect URL.","error.oauth_missing_code.forum":"If you reviewed the above and are still having trouble with configuration, you may post in our {link} where we\'ll be happy to help with issues during setup.","error.oauth_missing_code.forum.link":"Troubleshooting forum","error.oauth_missing_code.gitlab":"For {link} please make sure you followed the setup instructions.","error.oauth_missing_code.gitlab.link":"GitLab","error.oauth_missing_code.google":"For {link} make sure your administrator enabled the Google+ API.","error.oauth_missing_code.google.link":"Google Apps","error.oauth_missing_code.office365":"For {link} make sure the administrator of your Microsoft organization has enabled the Mattermost app.","error.oauth_missing_code.office365.link":"Office 365","error.oauth_missing_code.title":"Mattermost Needs Your Help","error.plugin_not_found.desc":"The plugin you are looking for does not exist.","error.plugin_not_found.title":"Plugin Not Found","error.team_not_found.message":"The team you\'re requesting is private or does not exist. Please contact your Administrator for an invitation.","error.team_not_found.title":"Team Not Found","file_attachment.thumbnail":"file thumbnail","file_info_preview.size":"Size ","file_info_preview.type":"File type ","file_upload.disabled":"File attachments are disabled.","file_upload.drag_folder":"Folders cannot be uploaded. Please drag all files separately.","file_upload.fileAbove":"File above {max}MB cannot be uploaded: {filename}","file_upload.filesAbove":"Files above {max}MB cannot be uploaded: {filenames}","file_upload.generic_error":"There was a problem uploading your files.","file_upload.limited":"Uploads limited to {count, number} files maximum. Please use additional posts for more files.","file_upload.menuAriaLabel":"Upload type selector","file_upload.pasted":"Image Pasted at ","file_upload.upload_files":"Upload files","file_upload.zeroBytesFile":"You are uploading an empty file: {filename}","file_upload.zeroBytesFiles":"You are uploading empty files: {filenames}","filtered_channels_list.search":"Search channels","filtered_user_list.countTotal":"{count, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.countTotalPage":"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.next":"Next","filtered_user_list.prev":"Previous","filtered_user_list.search":"Search users","filtered_user_list.team":"Team:","filtered_user_list.userStatus":"User Status:","flag_post.flag":"Flag for follow up","flag_post.unflag":"Unflag","full_screen_modal.back":"Back","full_screen_modal.close":"Close","general_button.close":"Close","general_button.esc":"Esc","general_tab.allowedDomains":"Allow only users with a specific email domain to join this team","general_tab.allowedDomains.ariaLabel":"Allowed Domains","general_tab.allowedDomainsEdit":"Click \'Edit\' to add an email domain whitelist.","general_tab.AllowedDomainsExample":"corp.mattermost.com, mattermost.org","general_tab.AllowedDomainsInfo":"Users can only join the team if their email matches a specific domain (e.g. \\"mattermost.org\\") or list of comma-separated domains (e.g. \\"corp.mattermost.com, mattermost.org\\").","general_tab.chooseDescription":"Please choose a new description for your team","general_tab.codeDesc":"Click \'Edit\' to regenerate Invite Code.","general_tab.codeLongDesc":"The Invite Code is part of the unique team invitation link which is sent to members you’re inviting to this team. Regenerating the code creates a new invitation link and invalidates the previous link.","general_tab.codeTitle":"Invite Code","general_tab.emptyDescription":"Click \'Edit\' to add a team description.","general_tab.getTeamInviteLink":"Get Team Invite Link","general_tab.no":"No","general_tab.openInviteDesc":"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team. Changing from \\"Yes\\" to \\"No\\" will regenerate the  invitation code, create a new invitation link and invalidate the previous link.","general_tab.openInviteTitle":"Allow any user with an account on this server to join this team","general_tab.regenerate":"Regenerate","general_tab.required":"This field is required","general_tab.teamDescription":"Team Description","general_tab.teamDescriptionInfo":"Team description provides additional information to help users select the right team. Maximum of 50 characters.","general_tab.teamIcon":"Team Icon","general_tab.teamIconEditHint":"Click \'Edit\' to upload an image.","general_tab.teamIconEditHintMobile":"Click to upload an image","general_tab.teamIconError":"An error occurred while selecting the image.","general_tab.teamIconInvalidFileType":"Only BMP, JPG or PNG images may be used for team icons","general_tab.teamIconLastUpdated":"Image last updated {date}","general_tab.teamIconTooLarge":"Unable to upload team icon. File is too large.","general_tab.teamName":"Team Name","general_tab.teamNameInfo":"Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar.","general_tab.teamNameRestrictions":"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.","general_tab.title":"General Settings","general_tab.yes":"Yes","generic_icons.add":"Add Icon","generic_icons.add-mail":"Add Mail Icon","generic_icons.add-reaction":"Add Reaction Icon","generic_icons.alert":"Alert Icon","generic_icons.archive":"Archive Icon","generic_icons.arrow.down":"Down Arrow Icon","generic_icons.attach":"Attachment Icon","generic_icons.back":"Back Icon","generic_icons.bot":"Bot Icon","generic_icons.breadcrumb":"Breadcrumb Icon","generic_icons.channel.arrow-right":"Arrow right","generic_icons.channel.draft":"Channel Draft Icon","generic_icons.channel.private":"Private Channel Icon","generic_icons.channel.public":"Public Channel Icon","generic_icons.close":"Close Icon","generic_icons.collapse":"Collapse Icon","generic_icons.download":"Download Icon","generic_icons.dropdown":"Dropdown Icon","generic_icons.edit":"Edit Icon","generic_icons.elipsisHorizontalIcon":"Ellipsis Horizontal Icon","generic_icons.expand":"Expand Icon","generic_icons.fail":"Faliure Icon","generic_icons.flag":"Flag Icon","generic_icons.flagged":"Flagged Icon","generic_icons.info":"Info Icon","generic_icons.invite":"Invite Icon","generic_icons.invite_members":"Invite Members Icon","generic_icons.link":"Link Icon","generic_icons.loading":"Loading Icon","generic_icons.logout":"Logout Icon","generic_icons.mail":"Mail Icon","generic_icons.mattermost":"Mattermost Logo","generic_icons.member":"Member Icon","generic_icons.mention":"Mention Icon","generic_icons.menu":"Menu Icon","generic_icons.message":"Message Icon","generic_icons.muted":"Muted Icon","generic_icons.next":"Next Icon","generic_icons.pin":"Pin Icon","generic_icons.plugin":"Plugin Icon","generic_icons.plugins":"Plugins","generic_icons.previous":"Previous Icon","generic_icons.reload":"Reload Icon","generic_icons.remove":"Remove Icon","generic_icons.reply":"Reply Icon","generic_icons.search":"Search Icon","generic_icons.select":"Select Icon","generic_icons.settings":"Settings Icon","generic_icons.success":"Success Icon","generic_icons.upload":"Upload Icon","generic_icons.warning":"Warning Icon","get_app.continueToBrowser":"View in Browser","get_app.dontHaveTheDesktopApp":"Don\'t have the Desktop App?","get_app.dontHaveTheMobileApp":"Don\'t have the Mobile App?","get_app.downloadTheAppNow":"Download the app now.","get_app.ifNothingPrompts":"You can view {siteName} in the desktop app or continue in your web browser.","get_app.ifNothingPromptsMobile":"You can view {siteName} in the mobile app or continue in your web browser.","get_app.launching":"Where would you like to view this?","get_app.openingLink":"Opening link in Mattermost...","get_app.openingLinkWhiteLabel":"Opening link in the Desktop App...","get_app.openLinkInBrowser":"Or, [open this link in your browser.](!{link})","get_app.redirectedInMoments":"You will be redirected in a few moments.","get_app.rememberMyPreference":"Remember my preference","get_app.systemDialogMessage":"View in Desktop App","get_app.systemDialogMessageMobile":"View in App","get_link.clipboard":" Link copied","get_link.close":"Close","get_link.copy":"Copy Link","get_public_link_modal.help":"The link below allows anyone to see this file without being registered on this server.","get_public_link_modal.title":"Copy Public Link","gif_picker.gfycat":"Search Gfycat","group_list_modal.addGroupButton":"Add Groups","group_list_modal.removeGroupButton":"Remove Group","groups":"{team} Groups","help.attaching.downloading.description":"Download an attached file by clicking the download icon next to the file thumbnail or by opening the file previewer and clicking **Download**.","help.attaching.downloading.title":"Downloading Files","help.attaching.dragdrop.description":"Upload a file or selection of files by dragging the files from your computer into the right-hand sidebar or center pane. Dragging and dropping attaches the files to the message input box, then you can optionally type a message and press **ENTER** to post.","help.attaching.dragdrop.title":"Drag and Drop","help.attaching.icon.description":"Alternatively, upload files by clicking the grey paperclip icon inside the message input box. This opens up your system file viewer where you can navigate to the desired files and then click **Open** to upload the files to the message input box. Optionally type a message and then press **ENTER** to post.","help.attaching.icon.title":"Attachment Icon","help.attaching.limitations.description":"Mattermost supports a maximum of five attached files per post, each with a maximum file size of 50Mb.","help.attaching.limitations.title":"File Size Limitations","help.attaching.methods.description":"Attach a file by drag and drop or by clicking the attachment icon in the message input box.","help.attaching.methods.title":"Attachment Methods","help.attaching.notSupported":"Document preview (Word, Excel, PPT) is not yet supported.","help.attaching.pasting.description":"On Chrome and Edge browsers, it is also possible to upload files by pasting them from the clipboard. This is not yet supported on other browsers.","help.attaching.pasting.title":"Pasting Images","help.attaching.previewer.description":"Mattermost has a built in file previewer that is used to view media, download files and share public links. Click the thumbnail of an attached file to open it in the file previewer.","help.attaching.previewer.title":"File Previewer","help.attaching.publicLinks.description":"Public links allow you to share file attachments with people outside your Mattermost team. Open the file previewer by clicking on the thumbnail of an attachment, then click **Get Public Link**. This opens a dialog box with a link to copy. When the link is shared and opened by another user, the file will automatically download.","help.attaching.publicLinks.title":"Sharing Public Links","help.attaching.publicLinks2":"If **Get Public Link** is not visible in the file previewer and you prefer the feature enabled, you can request that your System Admin enable the feature from the System Console under **Security** > **Public Links**.","help.attaching.supported.description":"If you are trying to preview a media type that is not supported, the file previewer will open a standard media attachment icon. Supported media formats depend heavily on your browser and operating system, but the following formats are supported by Mattermost on most browsers:","help.attaching.supported.title":"Supported Media Types","help.attaching.supportedListItem1":"Images: BMP, GIF, JPG, JPEG, PNG","help.attaching.supportedListItem2":"Video: MP4","help.attaching.supportedListItem3":"Audio: MP3, M4A","help.attaching.supportedListItem4":"Documents: PDF","help.attaching.title":"Attaching Files","help.commands.builtin.description":"The following slash commands are available on all Mattermost installations:","help.commands.builtin.title":"Built-in Commands","help.commands.builtin2":"Begin by typing `/` and a list of slash command options appears above the text input box. The autocomplete suggestions help by providing a format example in black text and a short description of the slash command in grey text.","help.commands.custom.description":"Custom slash commands integrate with external applications. For example, a team might configure a custom slash command to check internal health records with `/patient joe smith` or check the weekly weather forecast in a city with `/weather toronto week`. Check with your System Admin or open the autocomplete list by typing `/` to determine if your team configured any custom slash commands.","help.commands.custom.title":"Custom Commands","help.commands.custom2":"Custom slash commands are disabled by default and can be enabled by the System Admin in the **System Console** > **Integrations** > **Webhooks and Commands**. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs.mattermost.com/developer/slash-commands.html).","help.commands.intro1":"Slash commands perform operations in Mattermost by typing into the text input box. Enter a `/` followed by a command and some arguments to perform actions.","help.commands.intro2":"Built-in slash commands come with all Mattermost installations and custom slash commands are configurable to interact with external applications. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs.mattermost.com/developer/slash-commands.html).","help.commands.title":"Executing Commands","help.composing.deleting.description":"Delete a message by clicking the **[...]** icon next to any message text that you\'ve composed, then click **Delete**. System and Team Admins can delete any message on their system or team.","help.composing.deleting.title":"Deleting a message","help.composing.editing.description":"Edit a message by clicking the **[...]** icon next to any message text that you\'ve composed, then click **Edit**. After making modifications to the message text, press **ENTER** to save the modifications. Message edits do not trigger new @mention notifications, desktop notifications or notification sounds.","help.composing.editing.title":"Editing a Message","help.composing.linking.description":"The **Permalink** feature creates a link to any message. Sharing this link with other users in the channel lets them view the linked message in the Message Archives. Users who are not a member of the channel where the message was posted cannot view the permalink. Get the permalink to any message by clicking the **[...]** icon next to the message text > **Permalink** > **Copy Link**.","help.composing.linking.title":"Linking to a message","help.composing.posting.description":"Write a message by typing into the text input box, then press ENTER to send it. Use SHIFT+ENTER to create a new line without sending a message. To send messages by pressing CTRL+ENTER go to **Main Menu > Account Settings > Send messages on CTRL+ENTER**.","help.composing.posting.title":"Posting a Message","help.composing.posts.description":"Posts can be considered parent messages. They are the messages that often start a thread of replies. Posts are composed and sent from the text input box at the bottom of the center pane.","help.composing.posts.title":"Posts","help.composing.replies.description1":"Reply to a message by clicking the reply icon next to any message text. This action opens the right-hand sidebar where you can see the message thread, then compose and send your reply. Replies are indented slightly in the center pane to indicate that they are child messages of a parent post.","help.composing.replies.description2":"When composing a reply in the right-hand side, click the expand/collapse icon with two arrows at the top of the sidebar to make things easier to read.","help.composing.replies.title":"Replies","help.composing.title":"Sending Messages","help.composing.types.description":"Reply to posts to keep conversations organized in threads.","help.composing.types.title":"Message Types","help.formatting.checklist":"Make a task list by including square brackets:","help.formatting.checklistExample":"- [ ] Item one\\n- [ ] Item two\\n- [x] Completed item","help.formatting.code.description":"Create a code block by indenting each line by four spaces, or by placing ``` on the line above and below your code.","help.formatting.code.title":"Code Block","help.formatting.codeBlock":"Code block","help.formatting.emojis.description":"Open the emoji autocomplete by typing `:`. A full list of emojis can be found [here](!http://www.emoji-cheat-sheet.com/). It is also possible to create your own [Custom Emoji](!http://docs.mattermost.com/help/settings/custom-emoji.html) if the emoji you want to use doesn\'t exist.","help.formatting.emojis.title":"Emojis","help.formatting.example":"Example:","help.formatting.githubTheme":"**GitHub Theme**","help.formatting.headings.description":"Make a heading by typing # and a space before your title. For smaller headings, use more #\'s.","help.formatting.headings.title":"Headings","help.formatting.headings2":"Alternatively, you can underline the text using `===` or `---` to create headings.","help.formatting.headings2Example":"Large Heading\\n-------------","help.formatting.headingsExample":"## Large Heading\\n### Smaller Heading\\n#### Even Smaller Heading","help.formatting.images.description":"Create in-line images using an `!` followed by the alt text in square brackets and the link in normal brackets. Add hover text by placing it in quotes after the link.","help.formatting.images.title":"In-line Images","help.formatting.imagesExample":"![alt text]({siteURL}/static/images/logo-email.png \\"Mattermost horizontal logo\\")\\n\\nand\\n\\n[![Atlassian](https://wac-cdn.atlassian.com/assets/img/favicons/atlassian/favicon.png)](https://travis-ci.org/mattermost/mattermost-server) [![Github](https://github.githubassets.com/favicon.ico)](https://github.com/mattermost/mattermost-server)","help.formatting.inline.description":"Create in-line monospaced font by surrounding it with backticks.","help.formatting.inline.title":"In-line Code","help.formatting.intro":"Markdown makes it easy to format messages. Type a message as you normally would, and use these rules to render it with special formatting.","help.formatting.lines.description":"Create a line by using three `*`, `_`, or `-`.","help.formatting.lines.title":"Lines","help.formatting.linkEx":"[Check out Mattermost!](https://about.mattermost.com/)","help.formatting.links.description":"Create labeled links by putting the desired text in square brackets and the associated link in normal brackets.","help.formatting.links.title":"Links","help.formatting.listExample":"* list item one\\n* list item two\\n    * item two sub-point","help.formatting.lists.description":"Create a list by using `*` or `-` as bullets. Indent a bullet point by adding two spaces in front of it.","help.formatting.lists.title":"Lists","help.formatting.monokaiTheme":"**Monokai Theme**","help.formatting.ordered":"Make it an ordered list by using numbers instead:","help.formatting.orderedExample":"1. Item one\\n2. Item two","help.formatting.quotes.description":"Create block quotes using `>`.","help.formatting.quotes.title":"Block quotes","help.formatting.quotesExample":"`> block quotes` renders as:","help.formatting.quotesRender":"> block quotes","help.formatting.renders":"Renders as:","help.formatting.solirizedDarkTheme":"**Solarized Dark Theme**","help.formatting.solirizedLightTheme":"**Solarized Light Theme**","help.formatting.style.description":"You can use either `_` or `*` around a word to make it italic. Use two to make it bold.","help.formatting.style.listItem1":"`_italics_` renders as _italics_","help.formatting.style.listItem2":"`**bold**` renders as **bold**","help.formatting.style.listItem3":"`**_bold-italic_**` renders as **_bold-italics_**","help.formatting.style.listItem4":"`~~strikethrough~~` renders as ~~strikethrough~~","help.formatting.style.title":"Text Style","help.formatting.supportedSyntax":"Supported languages are: `as`, `applescript`, `osascript`, `scpt`, `bash`, `sh`, `zsh`, `clj`, `boot`, `cl2`, `cljc`, `cljs`, `cljs.hl`, `cljscm`, `cljx`, `hic`, `coffee`, `_coffee`, `cake`, `cjsx`, `cson`, `iced`, `cpp`, `c`, `cc`, `h`, `c++`, `h++`, `hpp`, `cs`, `csharp`, `css`, `d`, `di`, `dart`, `delphi`, `dpr`, `dfm`, `pas`, `pascal`, `freepascal`, `lazarus`, `lpr`, `lfm`, `diff`, `django`, `jinja`, `dockerfile`, `docker`, `erl`, `fortran`, `fsharp`, `fs`, `gcode`, `nc`, `go`, `groovy`, `handlebars`, `hbs`, `html.hbs`, `html.handlebars`, `hs`, `hx`, `java`, `jsp`, `js`, `jsx`, `json`, `jl`, `kt`, `ktm`, `kts`, `less`, `lisp`, `lua`, `mk`, `mak`, `md`, `mkdown`, `mkd`, `matlab`, `m`, `mm`, `objc`, `obj-c`, `ml`, `perl`, `pl`, `php`, `php3`, `php4`, `php5`, `php6`, `ps`, `ps1`, `pp`, `py`, `gyp`, `r`, `ruby`, `rb`, `gemspec`, `podspec`, `thor`, `irb`, `rs`, `scala`, `scm`, `sld`, `scss`, `st`, `styl`, `sql`, `swift`, `tex`, `vbnet`, `vb`, `bas`, `vbs`, `v`, `veo`, `xml`, `html`, `xhtml`, `rss`, `atom`, `xsl`, `plist`, `yaml`","help.formatting.syntax.description":"To add syntax highlighting, type the language to be highlighted after the ``` at the beginning of the code block. Mattermost also offers four different code themes (GitHub, Solarized Dark, Solarized Light, Monokai) that can be changed in **Account Settings** > **Display** > **Theme** > **Custom Theme** > **Center Channel Styles**","help.formatting.syntax.title":"Syntax Highlighting","help.formatting.syntaxEx":"```goAA\\npackage main\\nimport \\"fmt\\"\\nfunc main() {\\n    fmt.Println(\\"Hello, 世界\\")\\n}\\n```","help.formatting.tableExample":"| Left-Aligned  | Center Aligned  | Right Aligned |\\n| :------------ |:---------------:| -----:|\\n| Left column 1 | this text       |  $100 |\\n| Left column 2 | is              |   $10 |\\n| Left column 3 | centered        |    $1 |","help.formatting.tables.description":"Create a table by placing a dashed line under the header row and separating the columns with a pipe `|`. (The columns don\'t need to line up exactly for it to work). Choose how to align table columns by including colons `:` within the header row.","help.formatting.tables.title":"Tables","help.formatting.title":"Formatting Text","help.learnMore":"Learn more about:","help.link.attaching":"Attaching Files","help.link.commands":"Executing Commands","help.link.composing":"Composing Messages and Replies","help.link.formatting":"Formatting Messages Using Markdown","help.link.mentioning":"Mentioning Teammates","help.link.messaging":"Basic Messaging","help.mentioning.channel.description":"You can mention an entire channel by typing `@channel`. All members of the channel will receive a mention notification that behaves the same way as if the members had been mentioned personally.","help.mentioning.channel.title":"@Channel","help.mentioning.channelExample":"@channel great work on interviews this week. I think we found some excellent potential candidates!","help.mentioning.mentions.description":"Use @mentions to get the attention of specific team members.","help.mentioning.mentions.title":"@Mentions","help.mentioning.recent.description":"Click `@` next to the search box to query for your most recent @mentions and words that trigger mentions. Click **Jump** next to a search result in the right-hand sidebar to jump the center pane to the channel and location of the message with the mention.","help.mentioning.recent.title":"Recent Mentions","help.mentioning.title":"Mentioning Teammates","help.mentioning.triggers.description":"In addition to being notified by @username and @channel, you can customize words that trigger mention notifications in **Account Settings** > **Notifications** > **Words that trigger mentions**. By default, you will receive mention notifications on your first name, and you can add more words by typing them into the input box separated by commas. This is useful if you want to be notified of all posts on certain topics, for example, \\"interviewing\\" or \\"marketing\\".","help.mentioning.triggers.title":"Words That Trigger Mentions","help.mentioning.username.description1":"You can mention a teammate by using the `@` symbol plus their username to send them a mention notification.","help.mentioning.username.description2":"Type `@` to bring up a list of team members who can be mentioned. To filter the list, type the first few letters of any username, first name, last name, or nickname. The **Up** and **Down** arrow keys can then be used to scroll through entries in the list, and pressing **ENTER** will select which user to mention. Once selected, the username will automatically replace the full name or nickname. The following example sends a special mention notification to **alice** that alerts her of the channel and message where she has been mentioned. If **alice** is away from Mattermost and has [email notifications](!http://docs.mattermost.com/help/getting-started/configuring-notifications.html#email-notifications) turned on, then she will receive an email alert of her mention along with the message text.","help.mentioning.username.title":"@Username","help.mentioning.usernameCont":"If the user you mentioned does not belong to the channel, a System Message will be posted to let you know. This is a temporary message only seen by the person who triggered it. To add the mentioned user to the channel, go to the dropdown menu beside the channel name and select **Add Members**.","help.mentioning.usernameExample":"@alice how did your interview go with the new candidate?","help.messaging.attach":"**Attach files** by dragging and dropping into Mattermost or clicking the attachment icon in the text input box.","help.messaging.emoji":"**Quickly add emoji** by typing \\":\\", which will open an emoji autocomplete. If the existing emoji don\'t cover what you want to express, you can also create your own [Custom Emoji](!http://docs.mattermost.com/help/settings/custom-emoji.html).","help.messaging.format":"**Format your messages** using Markdown that supports text styling, headings, links, emoticons, code blocks, block quotes, tables, lists and in-line images.","help.messaging.notify":"**Notify teammates** when they are needed by typing `@username`.","help.messaging.reply":"**Reply to messages** by clicking the reply arrow next to the message text.","help.messaging.title":"Messaging Basics","help.messaging.write":"**Write messages** using the text input box at the bottom of Mattermost. Press ENTER to send a message. Use SHIFT+ENTER to create a new line without sending a message.","input.clear":"Clear","installed_command.header":"Slash Commands","installed_commands.add":"Add Slash Command","installed_commands.delete.confirm":"This action permanently deletes the slash command and breaks any integrations using it. Are you sure you want to delete it?","installed_commands.empty":"No commands found","installed_commands.emptySearch":"No commands match **{searchTerm}**","installed_commands.header":"Slash Commands","installed_commands.help":"Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_commands.help.appDirectory":"App Directory","installed_commands.help.buildYourOwn":"Build Your Own","installed_commands.search":"Search Slash Commands","installed_commands.unnamed_command":"Unnamed Slash Command","installed_incoming_webhooks.add":"Add Incoming Webhook","installed_incoming_webhooks.delete.confirm":"This action permanently deletes the incoming webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_incoming_webhooks.empty":"No incoming webhooks found","installed_incoming_webhooks.emptySearch":"No incoming webhooks match **{searchTerm}**","installed_incoming_webhooks.header":"Incoming Webhooks","installed_incoming_webhooks.help":"Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_incoming_webhooks.help.appDirectory":"App Directory","installed_incoming_webhooks.help.buildYourOwn":"Build Your Own","installed_incoming_webhooks.search":"Search Incoming Webhooks","installed_incoming_webhooks.unknown_channel":"A Private Webhook","installed_integrations.callback_urls":"Callback URLs: {urls}","installed_integrations.client_id":"Client ID: **{clientId}**","installed_integrations.client_secret":"Client Secret: **{clientSecret}**","installed_integrations.content_type":"Content-Type: {contentType}","installed_integrations.creation":"Created by {creator} on {createAt, date, full}","installed_integrations.delete":"Delete","installed_integrations.edit":"Edit","installed_integrations.hideSecret":"Hide Secret","installed_integrations.regenSecret":"Regenerate Secret","installed_integrations.regenToken":"Regenerate Token","installed_integrations.showSecret":"Show Secret","installed_integrations.token":"Token: {token}","installed_integrations.triggerWhen":"Trigger When: {triggerWhen}","installed_integrations.triggerWords":"Trigger Words: {triggerWords}","installed_integrations.unnamed_oauth_app":"Unnamed OAuth 2.0 Application","installed_integrations.url":"URL: {url}","installed_oauth_apps.add":"Add OAuth 2.0 Application","installed_oauth_apps.callbackUrls":"Callback URLs (One Per Line)","installed_oauth_apps.cancel":"Cancel","installed_oauth_apps.delete.confirm":"This action permanently deletes the OAuth 2.0 application and breaks any integrations using it. Are you sure you want to delete it?","installed_oauth_apps.description":"Description","installed_oauth_apps.empty":"No OAuth 2.0 Applications found","installed_oauth_apps.emptySearch":"No OAuth 2.0 Applications match **{searchTerm}**","installed_oauth_apps.header":"OAuth 2.0 Applications","installed_oauth_apps.help":"Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.","installed_oauth_apps.help.appDirectory":"App Directory","installed_oauth_apps.help.oauthApplications":"OAuth 2.0 applications","installed_oauth_apps.homepage":"Homepage","installed_oauth_apps.iconUrl":"Icon URL","installed_oauth_apps.is_trusted":"Is Trusted: **{isTrusted}**","installed_oauth_apps.name":"Display Name","installed_oauth_apps.save":"Save","installed_oauth_apps.saving":"Saving...","installed_oauth_apps.search":"Search OAuth 2.0 Applications","installed_oauth_apps.trusted":"Is Trusted","installed_oauth_apps.trusted.no":"No","installed_oauth_apps.trusted.yes":"Yes","installed_outgoing_webhooks.add":"Add Outgoing Webhook","installed_outgoing_webhooks.delete.confirm":"This action permanently deletes the outgoing webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_outgoing_webhooks.empty":"No outgoing webhooks found","installed_outgoing_webhooks.emptySearch":"No outgoing webhooks match **{searchTerm}**","installed_outgoing_webhooks.header":"Outgoing Webhooks","installed_outgoing_webhooks.help":"Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_outgoing_webhooks.help.appDirectory":"App Directory","installed_outgoing_webhooks.help.buildYourOwn":"Build your own","installed_outgoing_webhooks.search":"Search Outgoing Webhooks","installed_outgoing_webhooks.unknown_channel":"A Private Webhook","integrations.add":"Add","integrations.command.description":"Slash commands send events to external integrations","integrations.command.title":"Slash Commands","integrations.delete.confirm.button":"Delete","integrations.delete.confirm.title":"Delete Integration","integrations.done":"Done","integrations.edit":"Edit","integrations.header":"Integrations","integrations.help":"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.","integrations.help.appDirectory":"App Directory","integrations.incomingWebhook.description":"Incoming webhooks allow external integrations to send messages","integrations.incomingWebhook.title":"Incoming Webhooks","integrations.oauthApps.description":"OAuth 2.0 allows external applications to make authorized requests to the Mattermost API","integrations.oauthApps.title":"OAuth 2.0 Applications","integrations.outgoingWebhook.description":"Outgoing webhooks allow external integrations to receive and respond to messages","integrations.outgoingWebhook.title":"Outgoing Webhooks","integrations.successful":"Setup Successful","interactive_dialog.cancel":"Cancel","interactive_dialog.element.optional":"(optional)","interactive_dialog.submit":"Submit","interactive_dialog.submitting":"Submitting...","intro_messages.addGroups":"Add groups to this private channel","intro_messages.addGroupsToTeam":"Add other groups to this team","intro_messages.anyMember":" Any member can join and read this channel.","intro_messages.beginning":"Beginning of {name}","intro_messages.creator":"This is the start of the {name} channel, created by {creator} on {date}.","intro_messages.creatorPrivate":"This is the start of the {name} private channel, created by {creator} on {date}.","intro_messages.default":"**Welcome to {display_name}!**\\n \\nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.DM":"This is the start of your direct message history with {teammate}.\\nDirect messages and files shared here are not shown to people outside this area.","intro_messages.GM":"This is the start of your group message history with {names}.\\nMessages and files shared here are not shown to people outside this area.","intro_messages.group_message":"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area.","intro_messages.invite":"Invite others to this channel","intro_messages.inviteOthers":"Invite others to this team","intro_messages.invitePrivate":"Invite others to this private channel","intro_messages.noCreator":"This is the start of the {name} channel, created on {date}.","intro_messages.noCreatorPrivate":"This is the start of the {name} private channel, created on {date}.","intro_messages.offTopic":"This is the start of {display_name}, a channel for non-work-related conversations.","intro_messages.onlyInvited":" Only invited members can see this private channel.","intro_messages.purpose":" This channel\'s purpose is: {purpose}","intro_messages.purposePrivate":" This private channel\'s purpose is: {purpose}","intro_messages.readonly.default":"**Welcome to {display_name}!**\\n \\nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.setHeader":"Set a Header","intro_messages.teammate":"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area.","invitation_modal.confirm.done":"Done","invitation_modal.confirm.guests_title":"**Guests** Invited to **{teamName}**","invitation_modal.confirm.members_subtitle":"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited, and **{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent","invitation_modal.confirm.members_subtitle_without_not_sent":"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited","invitation_modal.confirm.members_subtitle_without_sent":"**{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent","invitation_modal.confirm.members_subtitle_without_sent_and_not_sent":"No invitation sent","invitation_modal.confirm.members_title":"**Members** Invited to **{teamName}**","invitation_modal.confirm.not-sent-header":"Invitations Not Sent","invitation_modal.confirm.sent-header":"Successful Invites","invitation_modal.guests.add_channels.placeholder":"Search and add channels","invitation_modal.guests.add_channels.title":"Search and Add Channels","invitation_modal.guests.add_people.description":"Add existing guests or send email invites to new guests.","invitation_modal.guests.add_people.description-email-disabled":"Add existing guests.","invitation_modal.guests.add_people.title":"Invite People","invitation_modal.guests.add-channels.description":"Specify the channels the guests have access to.","invitation_modal.guests.custom-message.description":"Create a custom message to make your invite more personal.","invitation_modal.guests.custom-message.link":"Set a custom message","invitation_modal.guests.custom-message.title":"Custom message","invitation_modal.guests.invite_button":"Invite Guests","invitation_modal.guests.search-and-add.placeholder":"Add guests or email addresses","invitation_modal.guests.search-and-add.placeholder-email-disabled":"Add guests","invitation_modal.guests.title":"Invite **Guests** to {teamName}","invitation_modal.guests.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email to invite","invitation_modal.guests.users_emails_input.no_user_found_matching-email-disabled":"No one found matching **{text}**","invitation_modal.guests.users_emails_input.valid_email":"Invite **{email}** as a guest","invitation_modal.invite_guests.description":"Invite guests to one or more channels. Guests only have access to messages, files, and people in the channels they are members of.","invitation_modal.invite_guests.title":"Invite **Guests**","invitation_modal.invite_members.description":"Invite new team members with a link or by email. Team members have access to messages and files in open teams and public channels.","invitation_modal.invite_members.description-email-disabled":"Invite new team members with a link. Team members have access to messages and files in open teams and public channels.","invitation_modal.invite_members.title":"Invite **Members**","invitation_modal.invite.more":"Invite More People","invitation_modal.members.invite_button":"Invite Members","invitation_modal.members.or":"OR","invitation_modal.members.search_and_add.title":"Add or Invite People","invitation_modal.members.search-and-add.description":"Add existing members or send email invites to new members.","invitation_modal.members.search-and-add.description-email-disabled":"Add existing members to this team.","invitation_modal.members.search-and-add.placeholder":"Add members or email addresses","invitation_modal.members.search-and-add.placeholder-email-disabled":"Add members","invitation_modal.members.share_link.copy_button":"Copy Link","invitation_modal.members.share_link.description":"Share this link to invite people to this team.","invitation_modal.members.share_link.input":"team invite link","invitation_modal.members.share_link.link_copied":"Link Copied","invitation_modal.members.share_link.title":"Share This Link","invitation_modal.members.title":"Invite **Members** to {teamName}","invitation_modal.members.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email to invite","invitation_modal.members.users_emails_input.no_user_found_matching-email-disabled":"No one found matching **{text}**","invitation_modal.members.users_emails_input.valid_email":"Invite **{email}** as a team member","invitation_modal.title":"Invite people to **{teamName}**","invitation-modal.confirm.details-header":"Details","invitation-modal.confirm.not-valid-channel":"Does not match a valid channel name.","invitation-modal.confirm.not-valid-user-or-email":"Does not match a valid user or email.","invitation-modal.confirm.people-header":"People","invitation-modal.discard-changes.button":"Yes, Discard","invitation-modal.discard-changes.message":"You have unsent invitations, are you sure you want to discard them?","invitation-modal.discard-changes.title":"Discard Changes","invite.guests.added-to-channel":"An invitation email has been sent.","invite.guests.already-all-channels-member":"This person is already a member of all the channels.","invite.guests.already-some-channels-member":"This person is already a member of some of the channels.","invite.guests.new-member":"This guest has been added to the team and {count, plural, one {channel} other {channels}}.","invite.guests.unable-to-add-the-user-to-the-channels":"Unable to add the guest to the channels.","invite.members.added-to-team":"This member has been added to the team.","invite.members.already-member":"This person is already a team member.","invite.members.invite-sent":"An invitation email has been sent.","invite.members.unable-to-add-the-user-to-the-team":"Unable to add the user to the team.","invite.members.user-is-guest":"Contact your admin to make this guest a full member.","invite.members.user-is-not-guest":"This person is already a member.","join_team_group_constrained_denied":"You need to be a member of a linked group to join this team.","join_team_group_constrained_denied_admin":"You need to be a member of a linked group to join this team. You can add a group to this team [here]({siteURL}/admin_console/user_management/groups).","katex.error":"Couldn\'t compile your Latex code. Please review the syntax and try again.","last_users_message.added_to_channel.type":"were **added to the channel** by {actor}.","last_users_message.added_to_team.type":"were **added to the team** by {actor}.","last_users_message.first":"{firstUser} and ","last_users_message.joined_channel.type":"**joined the channel**.","last_users_message.joined_team.type":"**joined the team**.","last_users_message.left_channel.type":"**left the channel**.","last_users_message.left_team.type":"**left the team**.","last_users_message.others":"{numOthers} others ","last_users_message.removed_from_channel.type":"were **removed from the channel**.","last_users_message.removed_from_team.type":"were **removed from the team**.","leave_private_channel_modal.leave":"Yes, leave channel","leave_private_channel_modal.message":"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.","leave_private_channel_modal.title":"Leave Private Channel {channel}","leave_team_modal.desc":"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?","leave_team_modal.no":"No","leave_team_modal.title":"Leave the team?","leave_team_modal.yes":"Yes","list_modal.paginatorCount":"{startCount, number} - {endCount, number} of {total, number} total","loading_screen.loading":"Loading","local":"local","login_mfa.enterToken":"To complete the sign in process, please enter a token from your smartphone\'s authenticator","login_mfa.submit":"Submit","login_mfa.submitting":"Submitting...","login_mfa.token":"MFA Token","login.changed":" Sign-in method changed successfully","login.create":"Create one now.","login.createTeam":"Create a team","login.email":"Email","login.forgot":"I forgot my password.","login.get_terms_error":"Unable to load terms of service. If this issue persists, contact your System Administrator.","login.gitlab":"GitLab","login.google":"Google Apps","login.invalidPassword":"Your password is incorrect.","login.ldapCreate":" Enter your AD/LDAP username and password to create an account.","login.ldapUsername":"AD/LDAP Username","login.ldapUsernameLower":"AD/LDAP username","login.noAccount":"Don\'t have an account? ","login.noEmail":"Please enter your email","login.noEmailLdapUsername":"Please enter your email or {ldapUsername}","login.noEmailUsername":"Please enter your email or username","login.noEmailUsernameLdapUsername":"Please enter your email, username or {ldapUsername}","login.noLdapUsername":"Please enter your {ldapUsername}","login.noMethods":"No sign-in methods are enabled. Please contact your System Administrator.","login.noPassword":"Please enter your password","login.noUsername":"Please enter your username","login.noUsernameLdapUsername":"Please enter your username or {ldapUsername}","login.office365":"Office 365","login.or":"or","login.password":"Password","login.passwordChanged":" Password updated successfully","login.placeholderOr":" or ","login.session_expired":"Your session has expired. Please log in again.","login.session_expired.notification":"Session Expired: Please sign in to continue receiving notifications.","login.session_expired.title":"* {siteName} - Session Expired","login.signIn":"Sign in","login.signInLoading":"Signing in...","login.signInWith":"Sign in with:","login.terms_rejected":"You must agree to the terms of service before accessing {siteName}. Please contact your System Administrator for more details.","login.username":"Username","login.userNotFound":"We couldn\'t find an account matching your login credentials.","login.verified":" Email Verified","manage_channel_groups_modal.search_placeholder":"Search groups","manage_team_groups_modal.search_placeholder":"Search groups","marketplace_list.count_total_page":"{startCount, number} - {endCount, number} {total, plural, one {plugin} other {plugins}} of {total, number} total","marketplace_modal.install_plugins":"Install Plugins","marketplace_modal.installing":"Installing...","marketplace_modal.list.configure":"Configure","marketplace_modal.list.Install":"Install","marketplace_modal.list.try_again":"Try Again","marketplace_modal.list.update":"Update","marketplace_modal.list.update_available":"Update available:","marketplace_modal.list.update_confirmation.confirm_button":"Update","marketplace_modal.list.update_confirmation.message.current":"You currently have {installedVersion} installed.","marketplace_modal.list.update_confirmation.message.current_with_release_notes":"You currently have {installedVersion} installed. View the <a href=\\"{releaseNotesUrl}\\" target=\'_blank\' rel=\'noopener noreferrer\'>release notes</a> to learn about the changes included in this update.","marketplace_modal.list.update_confirmation.message.intro":"Are you sure you want to update the {name} plugin to {version}?","marketplace_modal.list.update_confirmation.message.warning_major_version":"This update may contain breaking changes.","marketplace_modal.list.update_confirmation.message.warning_major_version_with_release_notes":"This update may contain breaking changes. Consult the <a href=\\"{releaseNotesUrl}\\" target=\'_blank\' rel=\'noopener noreferrer\'>release notes</a> before upgrading.","marketplace_modal.list.update_confirmation.title":"Confirm Plugin Update","marketplace_modal.no_plugins":"There are no plugins available at this time.","marketplace_modal.no_plugins_installed":"You do not have any plugins installed.","marketplace_modal.search":"Search Plugins","marketplace_modal.tabs.all_plugins":"All Plugins","marketplace_modal.tabs.installed_plugins":"Installed","marketplace_modal.title":"Plugin Marketplace","members_popover.button.message":"message","members_popover.manageMembers":"Manage Members","members_popover.title":"Channel Members","members_popover.viewMembers":"View Members","message_submit_error.invalidCommand":"Command with a trigger of \'\'{command}\'\' not found. ","message_submit_error.sendAsMessageLink":"Click here to send as a message.","mfa.confirm.complete":"**Set up complete!**","mfa.confirm.okay":"Okay","mfa.confirm.secure":"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone.","mfa.setup.badCode":"Invalid code. If this issue persists, contact your System Administrator.","mfa.setup.code":"MFA Code","mfa.setup.codeError":"Please enter the code from Google Authenticator.","mfa.setup.required":"**Multi-factor authentication is required on {siteName}.**","mfa.setup.save":"Save","mfa.setup.secret":"Secret: {secret}","mfa.setup.step1":"**Step 1: **On your phone, download Google Authenticator from [iTunes](!https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8\') or [Google Play](!https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en)","mfa.setup.step2":"**Step 2: **Use Google Authenticator to scan this QR code, or manually type in the secret key","mfa.setup.step3":"**Step 3: **Enter the code generated by Google Authenticator","mfa.setupTitle":"Multi-factor Authentication Setup","mobile.set_status.away.icon":"Away Icon","mobile.set_status.dnd.icon":"Do Not Disturb Icon","mobile.set_status.offline.icon":"Offline Icon","mobile.set_status.online.icon":"Online Icon","modal.manual_status.ask":"Do not ask me again","modal.manual_status.auto_responder.message_":"Would you like to switch your status to \\"{status}\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_away":"Would you like to switch your status to \\"Away\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_dnd":"Would you like to switch your status to \\"Do Not Disturb\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_offline":"Would you like to switch your status to \\"Offline\\" and disable Automatic Replies?","modal.manual_status.auto_responder.message_online":"Would you like to switch your status to \\"Online\\" and disable Automatic Replies?","modal.manual_status.button_":"Yes, set my status to \\"{status}\\"","modal.manual_status.button_away":"Yes, set my status to \\"Away\\"","modal.manual_status.button_dnd":"Yes, set my status to \\"Do Not Disturb\\"","modal.manual_status.button_offline":"Yes, set my status to \\"Offline\\"","modal.manual_status.button_online":"Yes, set my status to \\"Online\\"","modal.manual_status.cancel_":"No, keep it as \\"{status}\\"","modal.manual_status.cancel_away":"No, keep it as \\"Away\\"","modal.manual_status.cancel_dnd":"No, keep it as \\"Do Not Disturb\\"","modal.manual_status.cancel_offline":"No, keep it as \\"Offline\\"","modal.manual_status.cancel_ooo":"No, keep it as \\"Out of Office\\"","modal.manual_status.message_":"Would you like to switch your status to \\"{status}\\"?","modal.manual_status.message_away":"Would you like to switch your status to \\"Away\\"?","modal.manual_status.message_dnd":"Would you like to switch your status to \\"Do Not Disturb\\"?","modal.manual_status.message_offline":"Would you like to switch your status to \\"Offline\\"?","modal.manual_status.message_online":"Would you like to switch your status to \\"Online\\"?","modal.manual_status.title_":"Your Status is Set to \\"{status}\\"","modal.manual_status.title_away":"Your Status is Set to \\"Away\\"","modal.manual_status.title_dnd":"Your Status is Set to \\"Do Not Disturb\\"","modal.manual_status.title_offline":"Your Status is Set to \\"Offline\\"","modal.manual_status.title_ooo":"Your Status is Set to \\"Out of Office\\"","more_channels.create":"Create Channel","more_channels.createClick":"Click \'Create New Channel\' to make a new one","more_channels.joining":"Joining...","more_channels.next":"Next","more_channels.noMore":"No more channels to join","more_channels.prev":"Previous","more_channels.show_archived_channels":"Show: Archived Channels","more_channels.show_public_channels":"Show: Public Channels","more_channels.title":"More Channels","more_direct_channels.directchannel.deactivated":"{displayname} - Deactivated","more_direct_channels.directchannel.you":"{displayname} (you)","more_direct_channels.new_convo_note":"This will start a new conversation. If you\'re adding a lot of people, consider creating a private channel instead.","more_direct_channels.new_convo_note.full":"You\'ve reached the maximum number of people for this conversation. Consider creating a private channel instead.","more_direct_channels.title":"Direct Messages","more_public_direct_channels.channels":"Channels","more_public_direct_channels.direct_messages":"Direct Messages","more_public_direct_channels.title":"Channels and Direct Messages","msg_typing.areTyping":"{users} and {last} are typing...","msg_typing.isTyping":"{user} is typing...","multiselect.add":"Add","multiselect.addChannelsPlaceholder":"Search and add channels","multiselect.addGroupsPlaceholder":"Search and add groups","multiselect.adding":"Adding...","multiselect.addTeamsPlaceholder":"Search and add teams","multiselect.go":"Go","multiselect.list.notFound":"No items found","multiselect.loading":"Loading...","multiselect.numGroupsRemaining":"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ","multiselect.numMembers":"{memberOptions, number} of {totalCount, number} members","multiselect.numPeopleRemaining":"Use ↑↓ to browse, ↵ to select. You can add up to {num, number} more {num, plural, one {person} {people}} at a time. ","multiselect.numRemaining":"You can add {num, number} more","multiselect.placeholder":"Search and add members","multiselect.selectChannels":"Use ↑↓ to browse, ↵ to select.","multiselect.selectTeams":"Use ↑↓ to browse, ↵ to select.","navbar_dropdown.about":"About {appTitle}","navbar_dropdown.accountSettings":"Account Settings","navbar_dropdown.addGroupsToTeam":"Add Groups to Team","navbar_dropdown.console":"System Console","navbar_dropdown.create":"Create a Team","navbar_dropdown.emoji":"Custom Emoji","navbar_dropdown.help":"Help","navbar_dropdown.integrations":"Integrations","navbar_dropdown.invitePeople":"Invite People","navbar_dropdown.invitePeopleExtraText":"Add or invite people to the team","navbar_dropdown.join":"Join Another Team","navbar_dropdown.keyboardShortcuts":"Keyboard Shortcuts","navbar_dropdown.leave":"Leave Team","navbar_dropdown.leave.icon":"Leave Team Icon","navbar_dropdown.logout":"Log Out","navbar_dropdown.manageGroups":"Manage Groups","navbar_dropdown.manageMembers":"Manage Members","navbar_dropdown.marketplace":"Plugin Marketplace","navbar_dropdown.menuAriaLabel":"main menu","navbar_dropdown.nativeApps":"Download Apps","navbar_dropdown.report":"Report a Problem","navbar_dropdown.switchTo":"Switch to ","navbar_dropdown.teamSettings":"Team Settings","navbar_dropdown.viewMembers":"View Members","navbar.addGroups":"Add Groups","navbar.addMembers":"Add Members","navbar.click":"Click here","navbar.clickToAddHeader":"{clickHere} to add one.","navbar.noHeader":"No channel header yet.","navbar.preferences":"Notification Preferences","navbar.toggle2":"Toggle sidebar","navbar.viewInfo":"View Info","navbar.viewPinnedPosts":"View Pinned Posts","no_results.channel_search.subtitle":"Check the spelling or try another search.","no_results.channel_search.title":"No results for {channelName}","notification.dm":"Direct Message","notify_all.confirm":"Confirm","notify_all.question":"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?","notify_all.question_groups":"By using **{mentions}** and **{finalMention}** you are about to send notifications to at least **{totalMembers} people**. Are you sure you want to do this?","notify_all.question_one_group":"By using **{mention}** you are about to send notifications to **{totalMembers} people**. Are you sure you want to do this?","notify_all.question_timezone":"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?","notify_all.question_timezone_groups":"By using **{mentions}** and **{finalMention}** you are about to send notifications to at least **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?","notify_all.question_timezone_one_group":"By using **{mention}** you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?","notify_all.title.confirm":"Confirm Sending Notifications to Entire Channel","notify_all.title.confirm_groups":"Confirm sending notifications to groups","numMembers":"{num, number} {num, plural, one {member} other {members}}","password_form.change":"Change my password","password_form.enter":"Enter a new password for your {siteName} account.","password_form.error":"Please enter at least {chars} characters.","password_form.pwd":"Password","password_form.title":"Password Reset","password_send.checkInbox":"Please check your inbox.","password_send.description":"To reset your password, enter the email address you used to sign up","password_send.email":"Email","password_send.error":"Please enter a valid email address.","password_send.link":"If the account exists, a password reset email will be sent to:","password_send.reset":"Reset my password","password_send.title":"Password Reset","passwordRequirements":"Password Requirements:","pdf_preview.max_pages":"Download to read more pages","pending_post_actions.cancel":"Cancel","pending_post_actions.retry":"Retry","permalink.error.access":"Permalink belongs to a deleted message or to a channel to which you do not have access.","permalink.error.title":"Message Not Found","post_body.check_for_out_of_channel_groups_mentions.message":"did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.","post_body.check_for_out_of_channel_mentions.link.and":" and ","post_body.check_for_out_of_channel_mentions.link.private":"add them to this private channel","post_body.check_for_out_of_channel_mentions.link.public":"add them to the channel","post_body.check_for_out_of_channel_mentions.message_last":"? They will have access to all message history.","post_body.check_for_out_of_channel_mentions.message.multiple":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.check_for_out_of_channel_mentions.message.one":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.commentedOn":"Commented on {name}\'s message: ","post_body.deleted":"(message deleted)","post_body.plusMore":" plus {count, number} other {count, plural, one {file} other {files}}","post_delete.notPosted":"Comment could not be posted","post_delete.okay":"Okay","post_delete.someone":"Someone deleted the message on which you tried to post a comment.","post_info.auto_responder":"AUTOMATIC REPLY","post_info.bot":"BOT","post_info.comment_icon.tooltip.reply":"Reply","post_info.del":"Delete","post_info.dot_menu.tooltip.more_actions":"More actions","post_info.edit":"Edit","post_info.guest":"GUEST","post_info.info.view_additional_info":"View additional info","post_info.menuAriaLabel":"Post extra options","post_info.message.show_less":"Show less","post_info.message.show_more":"Show more","post_info.message.visible":"(Only visible to you)","post_info.message.visible.compact":" (Only visible to you)","post_info.permalink":"Copy Link","post_info.pin":"Pin to Channel","post_info.pinned":"Pinned","post_info.reply":"Reply","post_info.submenu.icon":"submenu icon","post_info.submenu.mobile":"mobile submenu","post_info.system":"System","post_info.tooltip.add_reactions":"Add Reaction","post_info.unpin":"Unpin from Channel","post_info.unread":"Mark as Unread","post_message_view.edited":"(edited)","post.ariaLabel.attachment":", 1 attachment","post.ariaLabel.attachmentMultiple":", {attachmentCount} attachments","post.ariaLabel.message":"At {time} {date}, {authorName} wrote, {message}","post.ariaLabel.messageIsFlagged":", message is flagged","post.ariaLabel.messageIsFlaggedAndPinned":", message is flagged and pinned","post.ariaLabel.messageIsPinned":", message is pinned","post.ariaLabel.reaction":", 1 reaction","post.ariaLabel.reactionMultiple":", {reactionCount} reactions","post.ariaLabel.replyMessage":"At {time} {date}, {authorName} replied, {message}","postlist.toast.history":"Viewing message history","postlist.toast.newMessages":"{count, number} new {count, plural, one {message} other {messages}","postlist.toast.newMessagesSince":"{count, number} new {count, plural, one {message} other {messages}} since {date} at {time}","postlist.toast.scrollToBottom":"Jump to recents","postlist.toast.scrollToLatest":"Jump to new messages","posts_view.loadMore":"Load More messages","posts_view.newMsg":"New Messages","promote_to_user_modal.desc":"This action promotes the guest {username} to a member. It will allow the user to join public channels and interact with users outside of the channels they are currently members of. Are you sure you want to promote guest {username} to user?","promote_to_user_modal.promote":"Promote","promote_to_user_modal.title":"Promote guest {username} to user","quick_switch_modal.channels":"Channels","quick_switch_modal.channelsShortcut.mac":"- ⌘K","quick_switch_modal.channelsShortcut.windows":"- CTRL+K","quick_switch_modal.help":"Start typing then use TAB to toggle channels/teams, **▲▼** to browse, **ENTER** to select, **ESC** to dismiss.","quick_switch_modal.help_mobile":"Type to find a channel.","quick_switch_modal.help_no_team":"Type to find a channel. Use **▲▼** to browse, **ENTER** to select, **ESC** to dismiss.","quick_switch_modal.switchChannels":"Switch Channels","quick_switch_modal.teams":"Teams","quick_switch_modal.teamsShortcut.mac":"- ⌘⌥K","quick_switch_modal.teamsShortcut.windows":"- CTRL+ALT+K","reaction_list.addReactionTooltip":"Add a reaction","reaction.add.ariaLabel":"Add a reaction","reaction.clickToAdd":"(click to add)","reaction.clickToRemove":"(click to remove)","reaction.container.ariaLabel":"reactions","reaction.othersReacted":"{otherUsers, number} {otherUsers, plural, one {user} other {users}}","reaction.reacted":"{users} {reactionVerb} with {emoji}","reaction.reactionVerb.user":"reacted","reaction.reactionVerb.users":"reacted","reaction.reactionVerb.you":"reacted","reaction.reactionVerb.youAndUsers":"reacted","reaction.reactWidth.ariaLabel":"react with","reaction.removeReact.ariaLabel":"remove reaction","reaction.usersAndOthersReacted":"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}","reaction.usersReacted":"{users} and {lastUser}","reaction.you":"You","remove_group_confirm_button":"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}","remove_group_confirm_message":"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?","remove_group_confirm_title":"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}","removed_channel.channelName":"the channel","removed_channel.from":"Removed from ","removed_channel.okay":"Okay","removed_channel.remover":"{remover} removed you from {channel}","removed_channel.someone":"Someone","rename_channel.cancel":"Cancel","rename_channel.defaultError":" - Cannot be changed for the default channel","rename_channel.displayName":"Display Name","rename_channel.displayNameHolder":"Enter display name","rename_channel.maxLength":"This field must be less than {maxLength, number} characters","rename_channel.minLength":"Display name must have at least {minLength, number} characters.","rename_channel.save":"Save","rename_channel.title":"Rename Channel","rename_channel.url":"URL","revoke_user_sessions_modal.desc":"This action revokes all sessions for {username}. They will be logged out from all devices. Are you sure you want to revoke all sessions for {username}?","revoke_user_sessions_modal.revoke":"Revoke","revoke_user_sessions_modal.title":"Revoke Sessions for {username}","rhs_card.jump":"Jump","rhs_card.message_by":"Message by {avatar} {user}","rhs_comment.comment":"Comment","rhs_header.backToFlaggedTooltip":"Back to flagged posts","rhs_header.backToPinnedTooltip":"Back to pinned posts","rhs_header.backToResultsTooltip":"Back to search results","rhs_header.closeSidebarTooltip":"Close the sidebar","rhs_header.closeTooltip.icon":"Close the sidebar icon","rhs_header.details":"Thread","rhs_header.expandSidebarTooltip":"Expand the sidebar","rhs_header.expandSidebarTooltip.icon":"Expand the sidebar icon","rhs_header.expandTooltip.icon":"Shrink the sidebar icon","rhs_header.shrinkSidebarTooltip":"Shrink the sidebar","rhs_root.mobile.add_reaction":"Add Reaction","rhs_root.mobile.flag":"Flag","rhs_root.mobile.unflag":"Unflag","rhs_thread.rootPostDeletedMessage.body":"Part of this thread has been deleted due to a data retention policy. You can no longer reply to this thread.","save_button.save":"Save","save_button.saving":"Saving","search_bar.search":"Search","search_bar.usage.title":"Search Options","search_header.loading":"Searching...","search_header.results":"Search Results","search_header.title2":"Recent Mentions","search_header.title3":"Flagged Posts","search_header.title5":"Extra Information","search_item.channelArchived":"Archived","search_item.direct":"Direct Message (with {username})","search_item.jump":"Jump","search_list_option.after":"Messages after a date","search_list_option.before":"Messages before a date","search_list_option.exclude":"Exclude search terms","search_list_option.from":"Messages from a user","search_list_option.in":"Messages in a channel","search_list_option.on":"Messages on a date","search_list_option.phrases":"Messages with phrases","search_results.noResults":"No results found. Try again?","search_results.noResults.partialPhraseSuggestion":"If you\'re searching a partial phrase (ex. searching \\"rea\\", looking for \\"reach\\" or \\"reaction\\"), append a * to your search term.","search_results.noResults.stopWordsSuggestion":"Two letter searches and common words like \\"this\\", \\"a\\" and \\"is\\" won\'t appear in search results due to excessive results returned.","search_results.usage.dataRetention":"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.","search_results.usageFlag1":"You haven\'t flagged any messages yet.","search_results.usageFlag2":"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.","search_results.usageFlag4":"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users.","search_results.usagePin1":"There are no pinned messages yet.","search_results.usagePin2":"All members of this channel can pin important or useful messages.","search_results.usagePin3":"Pinned messages are visible to all channel members.","search_results.usagePin4":"To pin a message: Go to the message that you want to pin and click [...] > \\"Pin to channel\\".","select_team.icon":"Select Team Icon","select_team.join.icon":"Join Team Icon","select_team.private.icon":"Private Team","setting_item_max.cancel":"Cancel","setting_item_min.edit":"Edit","setting_picture.cancel":"Cancel","setting_picture.help.profile":"Upload a picture in BMP, JPG or PNG format. Maximum file size: {max}","setting_picture.help.team":"Upload a team icon in BMP, JPG or PNG format.\\nSquare images with a solid background color are recommended.","setting_picture.remove":"Remove This Icon","setting_picture.remove_profile_picture":"Remove Profile Picture","setting_picture.save":"Save","setting_picture.select":"Select","setting_picture.uploading":"Uploading...","setting_upload.import":"Import","setting_upload.noFile":"No file selected.","setting_upload.select":"Select file","shortcuts.browser.channel_next":"Forward in history:\\tAlt|Right","shortcuts.browser.channel_next.mac":"Forward in history:\\t⌘|]","shortcuts.browser.channel_prev":"Back in history:\\tAlt|Left","shortcuts.browser.channel_prev.mac":"Back in history:\\t⌘|[","shortcuts.browser.font_decrease":"Zoom out:\\tCtrl|-","shortcuts.browser.font_decrease.mac":"Zoom out:\\t⌘|-","shortcuts.browser.font_increase":"Zoom in:\\tCtrl|+","shortcuts.browser.font_increase.mac":"Zoom in:\\t⌘|+","shortcuts.browser.header":"Built-in Browser Commands","shortcuts.browser.highlight_next":"Highlight text to the next line:\\tShift|Down","shortcuts.browser.highlight_prev":"Highlight text to the previous line:\\tShift|Up","shortcuts.browser.input.header":"Works inside an input field","shortcuts.browser.newline":"Create a new line:\\tShift|Enter","shortcuts.files.header":"Files","shortcuts.files.upload":"Upload files:\\tCtrl|U","shortcuts.files.upload.mac":"Upload files:\\t⌘|U","shortcuts.header":"Keyboard Shortcuts\\tCtrl|/","shortcuts.header.mac":"Keyboard Shortcuts\\t⌘|/","shortcuts.info":"Begin a message with / for a list of all the commands at your disposal.","shortcuts.msgs.comp.channel":"Channel:\\t~|[a-z]|Tab","shortcuts.msgs.comp.emoji":"Emoji:\\t:|[a-z]|Tab","shortcuts.msgs.comp.header":"Autocomplete","shortcuts.msgs.comp.last_reaction":"React to last message:\\tCtrl|Shift|⧵","shortcuts.msgs.comp.last_reaction.mac":"React to last message:\\t⌘|Shift|⧵","shortcuts.msgs.comp.username":"Username:\\t@|[a-z]|Tab","shortcuts.msgs.edit":"Edit last message in channel:\\tUp","shortcuts.msgs.header":"Messages","shortcuts.msgs.input.header":"Works inside an empty input field","shortcuts.msgs.reply":"Reply to last message in channel:\\tShift|Up","shortcuts.msgs.reprint_next":"Reprint next message:\\tCtrl|Down","shortcuts.msgs.reprint_next.mac":"Reprint next message:\\t⌘|Down","shortcuts.msgs.reprint_prev":"Reprint previous message:\\tCtrl|Up","shortcuts.msgs.reprint_prev.mac":"Reprint previous message:\\t⌘|Up","shortcuts.nav.direct_messages_menu":"Direct messages menu:\\tCtrl|Shift|K","shortcuts.nav.direct_messages_menu.mac":"Direct messages menu:\\t⌘|Shift|K","shortcuts.nav.focus_center":"Set focus to input field:\\tCtrl|Shift|L","shortcuts.nav.focus_center.mac":"Set focus to input field:\\t⌘|Shift|L","shortcuts.nav.header":"Navigation","shortcuts.nav.next":"Next channel:\\tAlt|Down","shortcuts.nav.next.mac":"Next channel:\\t⌥|Down","shortcuts.nav.open_close_sidebar":"Open or close the right sidebar\\tCtrl|.","shortcuts.nav.open_close_sidebar.mac":"Open or close the right sidebar\\t⌘|.","shortcuts.nav.prev":"Previous channel:\\tAlt|Up","shortcuts.nav.prev.mac":"Previous channel:\\t⌥|Up","shortcuts.nav.recent_mentions":"Recent mentions:\\tCtrl|Shift|M","shortcuts.nav.recent_mentions.mac":"Recent mentions:\\t⌘|Shift|M","shortcuts.nav.settings":"Account settings:\\tCtrl|Shift|A","shortcuts.nav.settings.mac":"Account settings:\\t⌘|Shift|A","shortcuts.nav.switcher":"Quick channel switcher:\\tCtrl|K","shortcuts.nav.switcher.mac":"Quick channel switcher:\\t⌘|K","shortcuts.nav.unread_next":"Next unread channel:\\tAlt|Shift|Down","shortcuts.nav.unread_next.mac":"Next unread channel:\\t⌥|Shift|Down","shortcuts.nav.unread_prev":"Previous unread channel:\\tAlt|Shift|Up","shortcuts.nav.unread_prev.mac":"Previous unread channel:\\t⌥|Shift|Up","shortcuts.team_nav.next":"Next team:\\tCtrl|Alt|Down","shortcuts.team_nav.next.mac":"Next team:\\t⌘|⌥|Down","shortcuts.team_nav.prev":"Previous team:\\tCtrl|Alt|Up","shortcuts.team_nav.prev.mac":"Previous team:\\t⌘|⌥|Up","shortcuts.team_nav.switcher":"Switch to a specific team:\\tCtrl|Alt|[1-9]","shortcuts.team_nav.switcher.mac":"Switch to a specific team:\\t⌘|⌥|[1-9]","sidebar_header.tutorial.body1":"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**.","sidebar_header.tutorial.body2":"Team administrators can also access their **Team Settings** from this menu.","sidebar_header.tutorial.body3":"System administrators will find a **System Console** option to administrate the entire system.","sidebar_header.tutorial.title":"Main Menu","sidebar_left.add_channel_dropdown.browseChannels":"Browse Channels","sidebar_left.add_channel_dropdown.browseOrCreateChannels":"Browse or create channels","sidebar_left.add_channel_dropdown.createNewChannel":"Create New Channel","sidebar_left.add_channel_dropdown.dropdownAriaLabel":"Add Channel Dropdown","sidebar_left.channel_filter.allChannels":"All channels","sidebar_left.channel_filter.filterByUnread":"Filter by unread","sidebar_left.channel_filter.filteredBy":"FILTERED BY:","sidebar_left.channel_filter.showAllChannels":"Show all channels","sidebar_left.channel_filter.unread":"Unread","sidebar_left.channel_filter.viewing":"VIEWING:","sidebar_left.channel_navigator.channelSwitcherLabel":"Channel Switcher","sidebar_left.channel_navigator.goBackLabel":"Back","sidebar_left.channel_navigator.goForwardLabel":"Forward","sidebar_left.channel_navigator.jumpTo":"Jump to...","sidebar_right_menu.console":"System Console","sidebar_right_menu.flagged":"Flagged Posts","sidebar_right_menu.recentMentions":"Recent Mentions","sidebar.browseChannelDirectChannel":"Browse channels and direct messages","sidebar.createChannel":"Create a public channel","sidebar.createDirectMessage":"Write a direct message","sidebar.createGroup":"Create a private channel","sidebar.createPublicPrivateChannel":"Create a public or private channel","sidebar.directchannel.you":"{displayname} (you)","sidebar.leave":"Leave the channel","sidebar.mainMenu":"Main Menu","sidebar.moreDmAria":"See more direct messages","sidebar.moreElips":"More...","sidebar.morePublicAria":"See more public channels","sidebar.morePublicDmAria":"See more public channels and direct messages","sidebar.removeList":"Remove from this list","sidebar.team_select":"{siteName} - Join a team","sidebar.tutorialScreen1.body":"**Channels** organize conversations across different topics. They\'re open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people.","sidebar.tutorialScreen1.title":"Channels","sidebar.tutorialScreen2.body1":"Here are two public channels to start:","sidebar.tutorialScreen2.body2":"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.","sidebar.tutorialScreen2.body3":"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.","sidebar.tutorialScreen2.title":"\\"{townsquare}\\" and \\"{offtopic}\\" channels","sidebar.tutorialScreen3.body1":"Click **\\"More...\\"** to create a new channel or join an existing one.","sidebar.tutorialScreen3.body2":"You can also create a new channel by clicking the **\\"+\\" symbol** next to the public or private channel header.","sidebar.tutorialScreen3.title":"Creating and Joining Channels","sidebar.types.alpha":"CHANNELS","sidebar.types.direct":"DIRECT MESSAGES","sidebar.types.favorite":"FAVORITE CHANNELS","sidebar.types.private":"PRIVATE CHANNELS","sidebar.types.public":"PUBLIC CHANNELS","sidebar.types.recent":"RECENT ACTIVITY","sidebar.types.unreads":"UNREADS","sidebar.unreads":"More Unreads","signup_team_system_console":"Go to System Console","signup_team.guest_without_channels":"Your guest account has no channels assigned. Please contact an administrator.","signup_team.join_open":"Teams you can join: ","signup_team.no_open_teams":"No teams are available to join. Please ask your administrator for an invite.","signup_team.no_open_teams_canCreate":"No teams are available to join. Please create a new team or ask your administrator for an invite.","signup_user_completed.choosePwd":"Choose your password","signup_user_completed.chooseUser":"Choose your username","signup_user_completed.create":"Create Account","signup_user_completed.emailHelp":"Valid email required for sign-up","signup_user_completed.emailIs":"Your email address is **{email}**. You\'ll use this address to sign in to {siteName}.","signup_user_completed.expired":"You\'ve already completed the signup process for this invitation or this invitation has expired.","signup_user_completed.failed_update_user_state":"Please clear your cache and try to log in.","signup_user_completed.haveAccount":"Already have an account?","signup_user_completed.invalid_invite":"The invite link was invalid.  Please speak with your Administrator to receive an invitation.","signup_user_completed.lets":"Let\'s create your account","signup_user_completed.no_open_server":"This server does not allow open signups.  Please speak with your Administrator to receive an invitation.","signup_user_completed.none":"No user creation method has been enabled.  Please contact an administrator for access.","signup_user_completed.required":"This field is required","signup_user_completed.reserved":"This username is reserved, please choose a new one.","signup_user_completed.signIn":"Click here to sign in.","signup_user_completed.userHelp":"You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.usernameLength":"Usernames have to begin with a lowercase letter and be {min}-{max} characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.validEmail":"Please enter a valid email address","signup_user_completed.whatis":"What\'s your email address?","signup.email":"Email and Password","signup.email.icon":"Email Icon","signup.gitlab":"GitLab Single Sign-On","signup.google":"Google Account","signup.ldap":"AD/LDAP Credentials","signup.ldap.icon":"AD/LDAP Icon","signup.office365":"Office 365","signup.saml.icon":"SAML Icon","signup.title":"Create an account with:","status_dropdown.menuAriaLabel":"set status","status_dropdown.set_away":"Away","status_dropdown.set_dnd":"Do Not Disturb","status_dropdown.set_dnd.extra":"Disables desktop, email and push notifications","status_dropdown.set_offline":"Offline","status_dropdown.set_online":"Online","status_dropdown.set_ooo":"Out of Office","status_dropdown.set_ooo.extra":"Automatic Replies are enabled","string.id":"default message","suggestion_list.no_matches":"No items match __{value}__","suggestion.archive":"Archived Channels","suggestion.mention.all":"Notifies everyone in this channel","suggestion.mention.channel":"Notifies everyone in this channel","suggestion.mention.channels":"My Channels","suggestion.mention.groups":"Group Mentions","suggestion.mention.here":"Notifies everyone online in this channel","suggestion.mention.members":"Channel Members","suggestion.mention.morechannels":"Other Channels","suggestion.mention.moremembers":"Other Members","suggestion.mention.nonmembers":"Not in Channel","suggestion.mention.special":"Special Mentions","suggestion.mention.unread.channels":"Unread Channels","suggestion.search.direct":"Direct Messages","suggestion.search.private":"Private Channels","suggestion.search.public":"Public Channels","suggestion.user.isCurrent":"(you)","system_notice.adminVisible":"Only visible to System Admins","system_notice.adminVisible.icon":"Only visible to System Admins Icon","system_notice.body.api3":"If you’ve created or installed integrations in the last two years, find out how [recent changes](!https://about.mattermost.com/default-apiv3-deprecation-guide) may have affected them.","system_notice.body.ee_upgrade_advice":"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance).","system_notice.body.ie11_deprecation":"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.mattermost.org/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575).","system_notice.body.permissions":"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.mattermost.com/default-advanced-permissions) in Enterprise E10 and E20.","system_notice.dont_show":"Don\'t Show Again","system_notice.remind_me":"Remind me Later","system_notice.title":"**Notice**\\nfrom Mattermost","system_users_list.count":"{count, number} {count, plural, one {user} other {users}}","system_users_list.countPage":"{startCount, number} - {endCount, number} {count, plural, one {user} other {users}} of {total, number} total","system_users_list.countSearch":"{count, number} {count, plural, one {user} other {users}} of {total, number} total","team_channel_settings.group.group_user_row.numberOfGroups":"{amount, number} {amount, plural, one {Group} other {Groups}}","team_import_tab.failure":" Import failure: ","team_import_tab.import":"Import","team_import_tab.importHelpCliDocsLink":"CLI tool for Slack import","team_import_tab.importHelpDocsLink":"documentation","team_import_tab.importHelpExporterLink":"Slack Advanced Exporter","team_import_tab.importHelpExportInstructions":"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export","team_import_tab.importHelpLine1":"Slack import to Mattermost supports importing of messages in your Slack team\'s public channels.","team_import_tab.importHelpLine2":"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.","team_import_tab.importHelpLine3":"To import posts with attached files, see {slackAdvancedExporterLink} for details.","team_import_tab.importHelpLine4":"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.","team_import_tab.importing":"Importing...","team_import_tab.importSlack":"Import from Slack (Beta)","team_import_tab.successful":" Import successful: ","team_import_tab.summary":"View Summary","team_member_modal.invitePeople":"Invite People","team_member_modal.members":"{team} Members","team_members_dropdown.confirmDemoteDescription":"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you\'ll need to re-assign a System Admin by accessing the Mattermost server through a terminal and running the following command.","team_members_dropdown.confirmDemoteRoleTitle":"Confirm Demotion from System Admin Role","team_members_dropdown.confirmDemotion":"Confirm Demotion","team_members_dropdown.confirmDemotionCmd":"platform roles system_admin {username}","team_members_dropdown.guest":"Guest","team_members_dropdown.inactive":"Inactive","team_members_dropdown.leave_team":"Remove from Team","team_members_dropdown.makeAdmin":"Make Team Admin","team_members_dropdown.makeMember":"Make Team Member","team_members_dropdown.makeTeamAdmins":"Make Team Admins","team_members_dropdown.makeTeamMembers":"Make Team Members","team_members_dropdown.member":"Member","team_members_dropdown.menuAriaLabel":"Change the role of a team member","team_members_dropdown.systemAdmin":"System Admin","team_members_dropdown.teamAdmin":"Team Admin","team_members_dropdown.teamAdmins":"Team Admins","team_members_dropdown.teamMembers":"Team Members","team_settings_modal.generalTab":"General","team_settings_modal.importTab":"Import","team_settings_modal.title":"Team Settings","team_settings.openInviteDescription.ariaLabel":"Invite Code","team_settings.openInviteDescription.groupConstrained":"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","team_settings.openInviteSetting.groupConstrained":"No, members of this team are added and removed by linked groups.","team_sidebar.join":"Other teams you can join","team.button.ariaLabel":"{teamName} team","team.button.mentions.ariaLabel":"{teamName} team, {mentionCount} mentions","team.button.name_undefined":"This team does not have a name","team.button.tooltip":"Ctrl+Alt+{order}","team.button.tooltip.mac":"⌘ ⌥ {order}","team.button.unread.ariaLabel":"{teamName} team unread","terms_of_service.agreeButton":"I Agree","terms_of_service.api_error":"Unable to complete the request. If this issue persists, contact your System Administrator.","terms_of_service.disagreeButton":"I Disagree","test":"Button Text","textbox.bold":"**bold**","textbox.edit":"Edit message","textbox.help":"Help","textbox.inlinecode":"`inline code`","textbox.italic":"_italic_","textbox.preformatted":"```preformatted```","textbox.preview":"Preview","textbox.quote":">quote","textbox.strike":"strike","tutorial_intro.allSet":"You\'re all set","tutorial_intro.end":"Click \\"Next\\" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.","tutorial_intro.invite":"Invite Teammates","tutorial_intro.mobileApps":"Install the apps for {link} for easy access and notifications on the go.","tutorial_intro.mobileAppsLinkText":"PC, Mac, iOS and Android","tutorial_intro.next":"Next","tutorial_intro.screenOne.body1":"Your team communication all in one place, instantly searchable and available anywhere.","tutorial_intro.screenOne.body2":"Keep your team connected to help them achieve what matters most.","tutorial_intro.screenOne.title1":"Welcome to:","tutorial_intro.screenOne.title2":"Mattermost","tutorial_intro.screenTwo.body1":"Communication happens in public discussion channels, private channels and direct messages.","tutorial_intro.screenTwo.body2":"Everything is archived and searchable from any web-enabled desktop, laptop or phone.","tutorial_intro.screenTwo.title":"How Mattermost Works:","tutorial_intro.skip":"Skip Tutorial","tutorial_intro.support":"Need anything, just email us at ","tutorial_intro.whenReady":" when you\'re ready.","tutorial_tip.next":"Next","tutorial_tip.ok":"Okay","tutorial_tip.out":"Opt out of these tips.","tutorial_tip.seen":"Seen this before? ","unarchive_channel.cancel":"Cancel","unarchive_channel.confirm":"Confirm UNARCHIVE Channel","unarchive_channel.del":"Unarchive","unarchive_channel.viewArchived.question":"Are you sure you wish to unarchive the **{display_name}** channel?","update_command.confirm":"Edit Slash Command","update_command.question":"Your changes may break the existing slash command. Are you sure you would like to update it?","update_command.update":"Update","update_incoming_webhook.update":"Update","update_incoming_webhook.updating":"Updating...","update_oauth_app.confirm":"Edit OAuth 2.0 application","update_oauth_app.question":"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?","update_outgoing_webhook.confirm":"Edit Outgoing Webhook","update_outgoing_webhook.question":"Your changes may break the existing outgoing webhook. Are you sure you would like to update it?","update_outgoing_webhook.update":"Update","upload_overlay.info":"Drop a file to upload it.","user_list.notFound":"No users found","user_profile.account.editSettings":"Edit Account Settings","user_profile.account.localTime":"Local Time: ","user_profile.account.post_was_created":"This post was created by an integration from","user_profile.add_user_to_channel":"Add to a Channel","user_profile.add_user_to_channel.icon":"Add User to Channel Icon","user_profile.send.dm":"Send Message","user_profile.send.dm.icon":"Send Message Icon","user.settings.advance.confirmDeactivateAccountTitle":"Confirm Deactivation","user.settings.advance.confirmDeactivateDesc":"Are you sure you want to deactivate your account? This can only be reversed by your System Administrator.","user.settings.advance.deactivate_member_modal.deactivateButton":"Yes, deactivate my account","user.settings.advance.deactivateAccountTitle":"Deactivate Account","user.settings.advance.deactivateDesc":"Deactivating your account removes your ability to log in to this server and disables all email and mobile notifications. To reactivate your account, contact your System Administrator.","user.settings.advance.deactivateDescShort":"Click \'Edit\' to deactivate your account","user.settings.advance.enabledFeatures":"{count, number} {count, plural, one {Feature} other {Features}} Enabled","user.settings.advance.formattingDesc":"If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled.","user.settings.advance.formattingTitle":"Enable Post Formatting","user.settings.advance.icon":"Advanced Settings Icon","user.settings.advance.joinLeaveDesc":"When \\"On\\", System Messages saying a user has joined or left a channel will be visible. When \\"Off\\", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.","user.settings.advance.joinLeaveTitle":"Enable Join/Leave Messages","user.settings.advance.markdown_preview":"Show markdown preview option in message input box","user.settings.advance.off":"Off","user.settings.advance.on":"On","user.settings.advance.onForAllMessages":"On for all messages","user.settings.advance.onForCode":"On only for code blocks starting with ```","user.settings.advance.preReleaseDesc":"Check any pre-released features you\'d like to preview.  You may also need to refresh the page before the setting will take effect.","user.settings.advance.preReleaseTitle":"Preview Pre-release Features","user.settings.advance.sendDesc":"When enabled, CTRL + ENTER will send the message and ENTER inserts a new line.","user.settings.advance.sendDesc.mac":"When enabled, ⌘ + ENTER will send the message and ENTER inserts a new line.","user.settings.advance.sendTitle":"Send Messages on CTRL+ENTER","user.settings.advance.sendTitle.mac":"Send Messages on ⌘+ENTER","user.settings.advance.title":"Advanced Settings","user.settings.custom_theme.awayIndicator":"Away Indicator","user.settings.custom_theme.buttonBg":"Button BG","user.settings.custom_theme.buttonColor":"Button Text","user.settings.custom_theme.centerChannelBg":"Center Channel BG","user.settings.custom_theme.centerChannelColor":"Center Channel Text","user.settings.custom_theme.centerChannelTitle":"Center Channel Styles","user.settings.custom_theme.codeTheme":"Code Theme","user.settings.custom_theme.copied":"✔ Copied","user.settings.custom_theme.copyPaste":"Copy and paste to share theme colors:","user.settings.custom_theme.copyThemeColors":"Copy Theme Colors","user.settings.custom_theme.dndIndicator":"Do Not Disturb Indicator","user.settings.custom_theme.errorTextColor":"Error Text Color","user.settings.custom_theme.linkButtonTitle":"Link and Button Styles","user.settings.custom_theme.linkColor":"Link Color","user.settings.custom_theme.mentionBg":"Mention Jewel BG","user.settings.custom_theme.mentionColor":"Mention Jewel Text","user.settings.custom_theme.mentionHighlightBg":"Mention Highlight BG","user.settings.custom_theme.mentionHighlightLink":"Mention Highlight Link","user.settings.custom_theme.newMessageSeparator":"New Message Separator","user.settings.custom_theme.onlineIndicator":"Online Indicator","user.settings.custom_theme.sidebarBg":"Sidebar BG","user.settings.custom_theme.sidebarHeaderBg":"Sidebar Header BG","user.settings.custom_theme.sidebarHeaderTextColor":"Sidebar Header Text","user.settings.custom_theme.sidebarText":"Sidebar Text","user.settings.custom_theme.sidebarTextActiveBorder":"Sidebar Text Active Border","user.settings.custom_theme.sidebarTextActiveColor":"Sidebar Text Active Color","user.settings.custom_theme.sidebarTextHoverBg":"Sidebar Text Hover BG","user.settings.custom_theme.sidebarTitle":"Sidebar Styles","user.settings.custom_theme.sidebarUnreadText":"Sidebar Unread Text","user.settings.display.channeldisplaymode":"Select the width of the center channel.","user.settings.display.channelDisplayTitle":"Channel Display","user.settings.display.clockDisplay":"Clock Display","user.settings.display.collapseDesc":"Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.","user.settings.display.collapseDisplay":"Default Appearance of Image Previews","user.settings.display.collapseOff":"Collapsed","user.settings.display.collapseOn":"Expanded","user.settings.display.fixedWidthCentered":"Fixed width, centered","user.settings.display.fullScreen":"Full width","user.settings.display.icon":"Display Settings Icon","user.settings.display.language":"Language","user.settings.display.linkPreviewDesc":"When available, the first web link in a message will show a preview of the website content below the message.","user.settings.display.linkPreviewDisplay":"Website Link Previews","user.settings.display.linkPreviewOff":"Off","user.settings.display.linkPreviewOn":"On","user.settings.display.messageDisplayClean":"Standard","user.settings.display.messageDisplayCleanDes":"Easy to scan and read.","user.settings.display.messageDisplayCompact":"Compact","user.settings.display.messageDisplayCompactDes":"Fit as many messages on the screen as we can.","user.settings.display.messageDisplayDescription":"Select how messages in a channel should be displayed.","user.settings.display.messageDisplayTitle":"Message Display","user.settings.display.militaryClock":"24-hour clock (example: 16:00)","user.settings.display.normalClock":"12-hour clock (example: 4:00 PM)","user.settings.display.preferTime":"Select how you prefer time displayed.","user.settings.display.teammateNameDisplay":"This field is handled through your System Administrator. If you want to change it, you need to do so through your System Administrator.","user.settings.display.teammateNameDisplayDescription":"Set how to display other user\'s names in posts and the Direct Messages list.","user.settings.display.teammateNameDisplayFullname":"Show first and last name","user.settings.display.teammateNameDisplayNicknameFullname":"Show nickname if one exists, otherwise show first and last name","user.settings.display.teammateNameDisplayTitle":"Teammate Name Display","user.settings.display.teammateNameDisplayUsername":"Show username","user.settings.display.theme.applyToAllTeams":"Apply new theme to all my teams","user.settings.display.theme.customTheme":"Custom Theme","user.settings.display.theme.describe":"Open to manage your theme","user.settings.display.theme.import":"Import theme colors from Slack","user.settings.display.theme.otherThemes":"See other themes","user.settings.display.theme.themeColors":"Theme Colors","user.settings.display.theme.title":"Theme","user.settings.display.timezone":"Timezone","user.settings.display.title":"Display Settings","user.settings.general.close":"Close","user.settings.general.confirmEmail":"Confirm Email","user.settings.general.currentEmail":"Current Email","user.settings.general.currentPassword":"Current Password","user.settings.general.email":"Email","user.settings.general.emailGitlabCantUpdate":"Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailGoogleCantUpdate":"Login occurs through Google. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailHelp1":"Email is used for sign-in, notifications, and password reset. Email requires verification if changed.","user.settings.general.emailHelp3":"Email is used for sign-in, notifications, and password reset.","user.settings.general.emailLdapCantUpdate":"Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailMatch":"The new emails you entered do not match.","user.settings.general.emailOffice365CantUpdate":"Login occurs through Office 365. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailSamlCantUpdate":"Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emptyName":"Click \'Edit\' to add your full name","user.settings.general.emptyNickname":"Click \'Edit\' to add a nickname","user.settings.general.emptyPassword":"Please enter your current password.","user.settings.general.emptyPosition":"Click \'Edit\' to add your job title / position","user.settings.general.field_handled_externally":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.general.firstName":"First Name","user.settings.general.fullName":"Full Name","user.settings.general.icon":"General Settings Icon","user.settings.general.imageTooLarge":"Unable to upload profile image. File is too large.","user.settings.general.imageUpdated":"Image last updated {date}","user.settings.general.incorrectPassword":"Your password is incorrect.","user.settings.general.lastName":"Last Name","user.settings.general.loginGitlab":"Login done through GitLab ({email})","user.settings.general.loginGoogle":"Login done through Google ({email})","user.settings.general.loginLdap":"Login done through AD/LDAP ({email})","user.settings.general.loginOffice365":"Login done through Office 365 ({email})","user.settings.general.loginSaml":"Login done through SAML ({email})","user.settings.general.mobile.emptyName":"Click to add your full name","user.settings.general.mobile.emptyNickname":"Click to add a nickname","user.settings.general.mobile.emptyPosition":"Click to add your job title / position","user.settings.general.mobile.uploadImage":"Click to upload an image","user.settings.general.newEmail":"New Email","user.settings.general.nickname":"Nickname","user.settings.general.nicknameExtra":"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.","user.settings.general.notificationsExtra":"By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.","user.settings.general.notificationsLink":"Notifications","user.settings.general.position":"Position","user.settings.general.positionExtra":"Use Position for your role or job title. This will be shown in your profile popover.","user.settings.general.profilePicture":"Profile Picture","user.settings.general.sendAgain":"Send again","user.settings.general.sending":"Sending","user.settings.general.title":"General Settings","user.settings.general.uploadImage":"Click \'Edit\' to upload an image.","user.settings.general.username":"Username","user.settings.general.usernameInfo":"Pick something easy for teammates to recognize and recall.","user.settings.general.usernameReserved":"This username is reserved, please choose a new one.","user.settings.general.usernameRestrictions":"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols \'.\', \'-\', and \'_\'.","user.settings.general.validEmail":"Please enter a valid email address","user.settings.general.validImage":"Only BMP, JPG or PNG images may be used for profile pictures","user.settings.import_theme.cancel":"Cancel","user.settings.import_theme.importBody":"To import a theme, go to a Slack team and look for \\"Preferences -> Sidebar Theme\\". Open the custom theme option, copy the theme color values and paste them here:","user.settings.import_theme.importHeader":"Import Slack Theme","user.settings.import_theme.submit":"Submit","user.settings.import_theme.submitError":"Invalid format, please try copying and pasting in again.","user.settings.languages.change":"Change interface language","user.settings.languages.promote":"Select which language Mattermost displays in the user interface.\\n \\nWould you like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.","user.settings.mfa.add":"Add MFA to Account","user.settings.mfa.addHelp":"Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.","user.settings.mfa.remove":"Remove MFA from Account","user.settings.mfa.removeHelp":"Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.","user.settings.mfa.requiredHelp":"Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.","user.settings.mfa.reset":"Reset MFA on Account","user.settings.mfa.title":"Multi-factor Authentication","user.settings.modal.advanced":"Advanced","user.settings.modal.confirmBtns":"Yes, Discard","user.settings.modal.confirmMsg":"You have unsaved changes, are you sure you want to discard them?","user.settings.modal.confirmTitle":"Discard Changes?","user.settings.modal.display":"Display","user.settings.modal.general":"General","user.settings.modal.notifications":"Notifications","user.settings.modal.security":"Security","user.settings.modal.sidebar":"Sidebar","user.settings.modal.title":"Account Settings","user.settings.notifications.allActivity":"For all activity","user.settings.notifications.autoResponder":"Automatic Direct Message Replies","user.settings.notifications.autoResponderDefault":"Hello, I am out of office and unable to respond to messages.","user.settings.notifications.autoResponderDisabled":"Disabled","user.settings.notifications.autoResponderEnabled":"Enabled","user.settings.notifications.autoResponderHint":"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications.","user.settings.notifications.autoResponderPlaceholder":"Message","user.settings.notifications.channelWide":"Channel-wide mentions \\"@channel\\", \\"@all\\", \\"@here\\"","user.settings.notifications.comments":"Reply notifications","user.settings.notifications.commentsAny":"Trigger notifications on messages in reply threads that I start or participate in","user.settings.notifications.commentsInfo":"In addition to notifications for when you\'re mentioned, select if you would like to receive notifications on reply threads.","user.settings.notifications.commentsNever":"Do not trigger notifications on messages in reply threads unless I\'m mentioned","user.settings.notifications.commentsRoot":"Trigger notifications on messages in threads that I start","user.settings.notifications.desktop":"Send desktop notifications","user.settings.notifications.desktop.allNoSound":"For all activity, without sound","user.settings.notifications.desktop.allSound":"For all activity, with sound","user.settings.notifications.desktop.allSoundHidden":"For all activity","user.settings.notifications.desktop.mentionsNoSound":"For mentions and direct messages, without sound","user.settings.notifications.desktop.mentionsSound":"For mentions and direct messages, with sound","user.settings.notifications.desktop.mentionsSoundHidden":"For mentions and direct messages","user.settings.notifications.desktop.sound":"Notification sound","user.settings.notifications.desktop.title":"Desktop Notifications","user.settings.notifications.email.disabled":"Email notifications are not enabled","user.settings.notifications.email.disabled_long":"Email notifications have not been enabled by your System Administrator.","user.settings.notifications.email.everyHour":"Every hour","user.settings.notifications.email.everyXMinutes":"Every {count, plural, one {minute} other {{count, number} minutes}}","user.settings.notifications.email.immediately":"Immediately","user.settings.notifications.email.never":"Never","user.settings.notifications.email.send":"Send email notifications","user.settings.notifications.emailBatchingInfo":"Notifications received over the time period selected are combined and sent in a single email.","user.settings.notifications.emailInfo":"Email notifications are sent for mentions and direct messages when you are offline or away for more than 5 minutes.","user.settings.notifications.emailNotifications":"Email Notifications","user.settings.notifications.header":"Notifications","user.settings.notifications.icon":"Notification Settings Icon","user.settings.notifications.info":"Desktop notifications are available on Edge, Firefox, Safari, Chrome and Mattermost Desktop Apps.","user.settings.notifications.mentionsInfo":"Mentions trigger when someone sends a message that includes your username (\\"@{username}\\") or any of the options selected above.","user.settings.notifications.never":"Never","user.settings.notifications.noWords":"No words configured","user.settings.notifications.off":"Off","user.settings.notifications.on":"On","user.settings.notifications.onlyMentions":"Only for mentions and direct messages","user.settings.notifications.push":"Mobile Push Notifications","user.settings.notifications.push_notification.status":"Trigger push notifications when","user.settings.notifications.sensitiveName":"Your case sensitive first name \\"{first_name}\\"","user.settings.notifications.sensitiveUsername":"Your non-case sensitive username \\"{username}\\"","user.settings.notifications.sensitiveWords":"Other non-case sensitive words, separated by commas:","user.settings.notifications.soundConfig":"Please configure notification sounds in your browser settings","user.settings.notifications.sounds_info":"Notification sounds are available on Firefox, Edge, Safari, Chrome and Mattermost Desktop Apps.","user.settings.notifications.title":"Notification Settings","user.settings.notifications.wordsTrigger":"Words That Trigger Mentions","user.settings.push_notification.allActivity":"For all activity","user.settings.push_notification.allActivityAway":"For all activity when away or offline","user.settings.push_notification.allActivityOffline":"For all activity when offline","user.settings.push_notification.allActivityOnline":"For all activity when online, away or offline","user.settings.push_notification.away":"Away or offline","user.settings.push_notification.disabled":"Push notifications are not enabled","user.settings.push_notification.disabled_long":"Push notifications have not been enabled by your System Administrator.","user.settings.push_notification.info":"Notification alerts are pushed to your mobile device when there is activity in Mattermost.","user.settings.push_notification.offline":"Offline","user.settings.push_notification.online":"Online, away or offline","user.settings.push_notification.onlyMentions":"For mentions and direct messages","user.settings.push_notification.onlyMentionsAway":"For mentions and direct messages when away or offline","user.settings.push_notification.onlyMentionsOffline":"For mentions and direct messages when offline","user.settings.push_notification.onlyMentionsOnline":"For mentions and direct messages when online, away or offline","user.settings.push_notification.send":"Send mobile push notifications","user.settings.push_notification.status_info":"Notification alerts are only pushed to your mobile device when your online status matches the selection above.","user.settings.security.active":"Active","user.settings.security.close":"Close","user.settings.security.currentPassword":"Current Password","user.settings.security.currentPasswordError":"Please enter your current password.","user.settings.security.deauthorize":"Deauthorize","user.settings.security.emailPwd":"Email and Password","user.settings.security.gitlab":"GitLab","user.settings.security.google":"Google","user.settings.security.icon":"Security Settings Icon","user.settings.security.inactive":"Inactive","user.settings.security.lastUpdated":"Last updated {date} at {time}","user.settings.security.ldap":"AD/LDAP","user.settings.security.loginGitlab":"Login done through GitLab","user.settings.security.loginGoogle":"Login done through Google Apps","user.settings.security.loginLdap":"Login done through AD/LDAP","user.settings.security.loginOffice365":"Login done through Office 365","user.settings.security.loginSaml":"Login done through SAML","user.settings.security.logoutActiveSessions":"View and Log Out of Active Sessions","user.settings.security.logoutActiveSessions.icon":"Active Sessions Icon","user.settings.security.method":"Sign-in Method","user.settings.security.newPassword":"New Password","user.settings.security.noApps":"No OAuth 2.0 Applications are authorized.","user.settings.security.oauthApps":"OAuth 2.0 Applications","user.settings.security.oauthAppsDescription":"Click \'Edit\' to manage your OAuth 2.0 Applications","user.settings.security.oauthAppsHelp":"Applications act on your behalf to access your data based on the permissions you grant them.","user.settings.security.office365":"Office 365","user.settings.security.oneSignin":"You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.","user.settings.security.password":"Password","user.settings.security.passwordError":"Your password must contain between {min} and {max} characters.","user.settings.security.passwordErrorLowercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter.","user.settings.security.passwordErrorLowercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one number.","user.settings.security.passwordErrorLowercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseUppercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one uppercase letter.","user.settings.security.passwordErrorLowercaseUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one number.","user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorLowercaseUppercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorNumber":"Your password must contain between {min} and {max} characters made up of at least one number.","user.settings.security.passwordErrorNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one number and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorSymbol":"Your password must contain between {min} and {max} characters made up of at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorUppercase":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter.","user.settings.security.passwordErrorUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one number.","user.settings.security.passwordErrorUppercaseNumberSymbol":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter, at least one number, and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordErrorUppercaseSymbol":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one symbol (e.g. \\"~!@#$%^&*()\\").","user.settings.security.passwordGitlabCantUpdate":"Login occurs through GitLab. Password cannot be updated.","user.settings.security.passwordGoogleCantUpdate":"Login occurs through Google Apps. Password cannot be updated.","user.settings.security.passwordLdapCantUpdate":"Login occurs through AD/LDAP. Password cannot be updated.","user.settings.security.passwordMatchError":"The new passwords you entered do not match.","user.settings.security.passwordMinLength":"Invalid minimum length, cannot show preview.","user.settings.security.passwordOffice365CantUpdate":"Login occurs through Office 365. Password cannot be updated.","user.settings.security.passwordSamlCantUpdate":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.security.retypePassword":"Retype New Password","user.settings.security.saml":"SAML","user.settings.security.switchEmail":"Switch to Using Email and Password","user.settings.security.switchGitlab":"Switch to Using GitLab SSO","user.settings.security.switchGoogle":"Switch to Using Google SSO","user.settings.security.switchLdap":"Switch to Using AD/LDAP","user.settings.security.switchOffice365":"Switch to Using Office 365 SSO","user.settings.security.switchSaml":"Switch to Using SAML SSO","user.settings.security.title":"Security Settings","user.settings.security.viewHistory":"View Access History","user.settings.security.viewHistory.icon":"Access History Icon","user.settings.sidebar.after_seven_days":"After 7 days with no new messages","user.settings.sidebar.autoCloseDMDesc":"Direct Message conversations can be reopened with the “+” button in the sidebar or using the Channel Switcher (CTRL+K).","user.settings.sidebar.autoCloseDMTitle":"Automatically Close Direct Messages","user.settings.sidebar.channelSidebarOrganizationSection.desc":"When enabled, access experimental channel sidebar features, including collapsible sections and unreads filtering. [Learn more](!https://about.mattermost.com/default-sidebar/) or [give us feedback](!https://about.mattermost.com/default-sidebar-survey/)","user.settings.sidebar.channelSidebarOrganizationSectionTitle":"Experimental Sidebar Features","user.settings.sidebar.channelSwitcherSectionDesc.mac":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CMD + K.","user.settings.sidebar.channelSwitcherSectionDesc.windows":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CTRL + K.","user.settings.sidebar.channelSwitcherSectionTitle":"Channel Switcher","user.settings.sidebar.favorites":"Favorites grouped separately","user.settings.sidebar.favoritesDesc":"Channels marked as favorites will be grouped separately.","user.settings.sidebar.favoritesShort":"Favorites grouped separately","user.settings.sidebar.groupAndSortChannelsTitle":"Channel Grouping and Sorting","user.settings.sidebar.groupByNone":"Combine all channel types","user.settings.sidebar.groupByNoneShort":"No grouping","user.settings.sidebar.groupByType":"Channels grouped by type","user.settings.sidebar.groupByTypeShort":"Group by channel type","user.settings.sidebar.groupChannelsTitle":"Channel grouping","user.settings.sidebar.groupDesc":"Group channels by type, or combine all types into a list.","user.settings.sidebar.icon":"Sidebar Settings Icon","user.settings.sidebar.never":"Never","user.settings.sidebar.off":"Off","user.settings.sidebar.on":"On","user.settings.sidebar.sortAlpha":"Alphabetically","user.settings.sidebar.sortAlphaShort":"sorted alphabetically","user.settings.sidebar.sortChannelsTitle":"Channel sorting","user.settings.sidebar.sortDesc":"Sort channels alphabetically, or by most recent post.","user.settings.sidebar.sortRecent":"Recency","user.settings.sidebar.sortRecentShort":"sorted by recency","user.settings.sidebar.title":"Sidebar Settings","user.settings.sidebar.unreads":"Unreads grouped separately","user.settings.sidebar.unreadsDesc":"Group unread channels separately until read.","user.settings.sidebar.unreadsFavoritesShort":"Unreads and favorites grouped separately","user.settings.sidebar.unreadsShort":"Unreads grouped separately","user.settings.timezones.automatic":"Set automatically","user.settings.timezones.change":"Change timezone","user.settings.timezones.promote":"Select the timezone used for timestamps in the user interface and email notifications.","user.settings.tokens.activate":"Enable","user.settings.tokens.cancel":"Cancel","user.settings.tokens.clickToEdit":"Click \'Edit\' to manage your personal access tokens","user.settings.tokens.confirmCopyButton":"Yes, I have copied the token","user.settings.tokens.confirmCopyMessage":"Make sure you have copied and saved the access token below. You won\'t be able to see it again!","user.settings.tokens.confirmCopyTitle":"Copied Your Token?","user.settings.tokens.confirmCreateButton":"Yes, Create","user.settings.tokens.confirmCreateMessage":"You are generating a personal access token with System Admin permissions. Are you sure want to create this token?","user.settings.tokens.confirmCreateTitle":"Create System Admin Personal Access Token","user.settings.tokens.confirmDeleteButton":"Yes, Delete","user.settings.tokens.confirmDeleteMessage":"Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action. \\n \\nAre you sure want to delete the **{description}** token?","user.settings.tokens.confirmDeleteTitle":"Delete Token?","user.settings.tokens.copy":"Please copy the access token below. You won\'t be able to see it again!","user.settings.tokens.create":"Create Token","user.settings.tokens.deactivate":"Disable","user.settings.tokens.deactivatedWarning":"(Disabled)","user.settings.tokens.delete":"Delete","user.settings.tokens.description":"[Personal access tokens](!https://about.mattermost.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.mattermost.com/default-api-authentication).","user.settings.tokens.description_mobile":"[Personal access tokens](!https://about.mattermost.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.mattermost.com/default-api-authentication). Create new tokens on your desktop.","user.settings.tokens.id":"Token ID: ","user.settings.tokens.name":"Token Description: ","user.settings.tokens.nameHelp":"Enter a description for your token to remember what it does.","user.settings.tokens.nameRequired":"Please enter a description.","user.settings.tokens.save":"Save","user.settings.tokens.title":"Personal Access Tokens","user.settings.tokens.token":"Access Token: ","user.settings.tokens.tokenDesc":"Token Description: ","user.settings.tokens.tokenId":"Token ID: ","user.settings.tokens.tokenLoading":"Loading...","user.settings.tokens.userAccessTokensNone":"No personal access tokens.","version_bar.new":"A new version of Mattermost is available.","version_bar.refresh":"Refresh the app now","view_image_popover.download":"Download","view_image_popover.file":"File {count, number} of {total, number}","view_image_popover.open":"Open","view_image_popover.publicLink":"Get a public link","view_image.loading":"Loading ","web.footer.about":"About","web.footer.help":"Help","web.footer.privacy":"Privacy","web.footer.terms":"Terms","web.header.back":"Back","web.header.logout":"Logout","web.root.signup_info":"All team communication in one place, searchable and accessible anywhere","widgets.channels_input.empty":"No channels found","widgets.channels_input.loading":"Loading","widgets.users_emails_input.loading":"Loading","widgets.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email address","widgets.users_emails_input.valid_email":"Add **{email}**","yourcomputer":"Your computer"}')},1522:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return Ee}));a(176),a(54),a(118),a(177),a(104),a(35);var n=a(100),s=a.n(n),i=a(33),r=a.n(i),o=a(6),l=a.n(o),c=a(1523),d=a.n(c),m=a(1112),u=a(607),h=a(143),p=a(16),g=a(18),b=a(52),f=a(317),_=a(1126),E=a(1229),v=a(234),y=a(1512),C=(a(2001),a(1167)),w=a(0),O=a(1645),T=a(2002),S=a(1989),P=a(348),M=a(20),N=a(179),I=a(15),j=a(1803);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const D=l.a.lazy(()=>Promise.all([a.e(0),a.e(20)]).then(a.bind(null,1996))),x=l.a.lazy(()=>a.e(10).then(a.bind(null,2003))),U=l.a.lazy(()=>Promise.all([a.e(0),a.e(1),a.e(8),a.e(7)]).then(a.bind(null,1990))),q=l.a.lazy(()=>a.e(2).then(a.bind(null,1513))),H=l.a.lazy(()=>a.e(22).then(a.bind(null,2004))),F=l.a.lazy(()=>a.e(28).then(a.bind(null,2005))),B=l.a.lazy(()=>a.e(19).then(a.bind(null,2006))),G=l.a.lazy(()=>a.e(11).then(a.bind(null,2007))),V=l.a.lazy(()=>a.e(24).then(a.bind(null,2008))),W=l.a.lazy(()=>a.e(23).then(a.bind(null,2009))),z=l.a.lazy(()=>a.e(18).then(a.bind(null,2010))),K=l.a.lazy(()=>a.e(16).then(a.bind(null,1995))),Y=l.a.lazy(()=>a.e(27).then(a.bind(null,1993))),Q=l.a.lazy(()=>a.e(15).then(a.bind(null,2011))),Z=l.a.lazy(()=>a.e(14).then(a.bind(null,1997))),J=l.a.lazy(()=>a.e(25).then(a.bind(null,2012))),X=l.a.lazy(()=>a.e(13).then(a.bind(null,1998))),$=l.a.lazy(()=>a.e(12).then(a.bind(null,1999))),ee=Object(P.a)(X),te=Object(P.a)(D),ae=Object(P.a)(V),ne=Object(P.a)(x),se=Object(P.a)(U),ie=Object(P.a)(q),re=Object(P.a)(H),oe=Object(P.a)(F),le=Object(P.a)(B),ce=Object(P.a)(G),de=Object(P.a)(W),me=Object(P.a)(z),ue=Object(P.a)(K),he=Object(P.a)(Y),pe=Object(P.a)(Q),ge=Object(P.a)(Z),be=Object(P.a)(J),fe=Object(P.a)($),_e=e=>{let{component:t}=e,a=L(e,["component"]);return l.a.createElement(m.b,Object.assign({},a,{render:e=>l.a.createElement(ie,e,l.a.createElement(t,e))}))};class Ee extends l.a.PureComponent{constructor(t){super(t),k(this,"onConfigLoaded",()=>{Object(I.T)()&&Object(I.m)();const t=w.Q.DIAGNOSTICS_SEGMENT_KEY,a=this.props.diagnosticId;null!=t&&""!==t&&!t.startsWith("placeholder")&&this.props.diagnosticsEnabled&&function(){var n=e.window.analytics=e.window.analytics||[];if(!n.initialize)if(n.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{n.invoked=!0,n.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"],n.factory=function(e){return function(...t){var a=Array.prototype.slice.call(t);return a.unshift(e),n.push(a),n}};for(var s=0;s<n.methods.length;s++){var i=n.methods[s];n[i]=n.factory(i)}n.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},n.SNIPPET_VERSION="3.0.1",n.load(t),n.identify(a,{},{context:{ip:"0.0.0.0"},page:{path:"",referrer:"",search:"",title:"",url:""},anonymousId:"00000000000000000000000000"}),n.page("ApplicationLoaded",{path:"",referrer:"",search:"",title:"",url:""},{context:{ip:"0.0.0.0"},anonymousId:"00000000000000000000000000"})}}();const n=w.Q.DIAGNOSTICS_RUDDER_KEY,s=w.Q.DIAGNOSTICS_RUDDER_DATAPLANE_URL;if(null!=n&&""!==n&&!n.startsWith("placeholder")&&null!=s&&""!==s&&!s.startsWith("placeholder")&&this.props.diagnosticsEnabled){e.window.rudderanalytics||(e.window.rudderanalytics=[]);const t=e.window.rudderanalytics;if(t.invoked)console.error("Rudder snippet included twice.");else{t.invoked=!0;for(let e=["load","page","track","alias","group","identify","ready","reset"],a=0;a<e.length;a++){const n=e[a];t[n]=(e=>(...a)=>{t.push([e,...a])})(n)}const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.rudderlabs.com/rudder-analytics.min.js";const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i),t.load(n,s),t.identify(a,{},{context:{ip:"0.0.0.0"},page:{path:"",referrer:"",search:"",title:"",url:""},anonymousId:"00000000000000000000000000"}),t.page("ApplicationLoaded",{path:"",referrer:"",search:"",title:"",url:""},{context:{ip:"0.0.0.0"},anonymousId:"00000000000000000000000000"})}}"/"===this.props.location.pathname&&this.props.noAccounts&&this.props.history.push("/signup_user_complete"),Object(y.a)().then(()=>{this.setState({configLoaded:!0})}),Object(v.c)()(M.a.dispatch,M.a.getState);const i=Object(p.getConfig)(M.a.getState()).IosAppDownloadLink,r=Object(p.getConfig)(M.a.getState()).AndroidAppDownloadLink,o="/reset_password_complete"===this.props.location.pathname;let l;g.b()?l=r:g.l()&&(l=i),!l||E.a.hasSeenLandingPage()||o||this.props.location.pathname.includes("/landing")||(this.props.history.push("/landing#"+this.props.location.pathname+this.props.location.search),E.a.setLandingPageSeen(!0))}),this.currentCategoryFocus=0,this.currentSidebarFocus=0,Object(u.setUrl)(Object(N.e)()),Object(h.setSystemEmojis)(b.a),s()(window).bind("storage",e=>{if(e.originalEvent.key===w.I.LOGOUT&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(E.a.isSignallingLogout(e.originalEvent.newValue))return;console.log("detected logout from a different tab"),_.e("/",!1,!1)}if(e.originalEvent.key===w.I.LOGIN&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(E.a.isSignallingLogin(e.originalEvent.newValue))return;console.log("detected login from a different tab"),location.reload()}}),document.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation()}),document.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation()}),d.a.attach(document.body),this.state={configLoaded:!1},g.g()||(this.a11yController=new j.a)}componentDidUpdate(e){"/"===this.props.location.pathname&&(this.props.noAccounts?e.history.push("/signup_user_complete"):this.props.showTermsOfService&&e.history.push("/terms_of_service"))}componentDidMount(){this.props.actions.loadMeAndConfig().then(e=>{"/"===this.props.location.pathname&&e[2]&&e[2].data&&_.f(),this.onConfigLoaded()}),Object(f.e)()}componentWillUnmount(){s()(window).unbind("storage")}render(){var e;return this.state.configLoaded?l.a.createElement(T.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/error",component:te}),l.a.createElement(O.a,{path:"/login",component:ne}),l.a.createElement(O.a,{path:"/reset_password",component:re}),l.a.createElement(O.a,{path:"/reset_password_complete",component:oe}),l.a.createElement(O.a,{path:"/signup_user_complete",component:le}),l.a.createElement(O.a,{path:"/signup_email",component:ce}),l.a.createElement(O.a,{path:"/should_verify_email",component:de}),l.a.createElement(O.a,{path:"/do_verify_email",component:me}),l.a.createElement(O.a,{path:"/claim",component:ue}),l.a.createElement(O.a,{path:"/help",component:he}),l.a.createElement(_e,{path:"/terms_of_service",component:ae}),l.a.createElement(m.b,{path:"/landing",component:pe}),l.a.createElement(_e,{path:"/admin_console",component:se}),l.a.createElement(O.b,{path:"/select_team",component:ge}),l.a.createElement(O.b,{path:"/oauth/authorize",component:be}),l.a.createElement(O.b,{path:"/create_team",component:ee}),l.a.createElement(_e,{path:"/mfa",component:fe}),l.a.createElement(m.a,{from:"/_redirect/integrations/:subpath*",to:"/".concat(this.props.permalinkRedirectTeamName,"/integrations/:subpath*")}),l.a.createElement(m.a,{from:"/_redirect/pl/:postid",to:"/".concat(this.props.permalinkRedirectTeamName,"/pl/:postid")}),null===(e=this.props.plugins)||void 0===e?void 0:e.map(e=>l.a.createElement(m.b,{key:e.id,path:"/plug/"+e.route,render:()=>l.a.createElement(C.a,{pluggableName:"CustomRouteComponent",pluggableId:e.id})})),l.a.createElement(_e,{path:"/:team",component:S.a}),l.a.createElement(m.a,{to:R({},this.props.location,{pathname:"/login"})}))):l.a.createElement("div",null)}}k(Ee,"propTypes",{diagnosticsEnabled:r.a.bool,diagnosticId:r.a.string,noAccounts:r.a.bool,showTermsOfService:r.a.bool,permalinkRedirectTeamName:r.a.string,actions:r.a.shape({loadMeAndConfig:r.a.func.isRequired}).isRequired,plugins:r.a.array})}).call(this,a(26))},1526:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));a(54);var n=a(0);function s(){return async e=>{e({type:n.f.INCREMENT_WS_ERROR_COUNT})}}function i(){return async e=>{e({type:n.f.RESET_WS_ERROR_COUNT})}}},1554:function(e,t,a){},1555:function(e,t,a){},1564:function(e,t,a){},1565:function(e,t,a){},1566:function(e,t,a){},1567:function(e,t,a){},1612:function(e,t){},1622:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));a(176);var n=a(33),s=a.n(n),i=a(6),r=a.n(i),o=a(1408),l=a(316),c=a.n(l),d=a(0),m=a(1167);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h={display:"flex",flexDirection:"column",alignItems:"center",zIndex:10};class p extends r.a.PureComponent{constructor(t){super(t),u(this,"tooltipContainerRef",void 0),u(this,"show",void 0),u(this,"hideTimeout",void 0),u(this,"showTimeout",void 0),u(this,"popper",void 0),u(this,"showTooltip",t=>{if(window.clearTimeout(this.hideTimeout),!this.show){const a=e(t.target).get(0),n=e(this.tooltipContainerRef.current),s=n.get(0);window.clearTimeout(this.showTimeout),this.showTimeout=window.setTimeout(()=>{this.show=!0,n.show(),n.children().on("mouseover",()=>clearTimeout(this.hideTimeout)),n.children().on("mouseleave",e=>{null!==e.relatedTarget&&this.hideTooltip()}),this.popper=new o.a(a,s,{placement:"bottom",modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}})},d.j.OVERLAY_TIME_DELAY)}}),u(this,"hideTooltip",()=>{window.clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout(()=>{this.show=!1,clearTimeout(this.showTimeout),e(this.tooltipContainerRef.current).hide()},d.j.OVERLAY_TIME_DELAY_SMALL)}),this.tooltipContainerRef=r.a.createRef(),this.show=!1,this.showTimeout=-1,this.hideTimeout=-1}render(){const{href:e,title:t,attributes:a}=this.props,n={"data-hashtag":a["data-hashtag"],"data-link":a["data-link"],"data-channel-mention":a["data-channel-mention"]};return r.a.createElement(r.a.Fragment,null,c.a.createPortal(r.a.createElement("div",{style:h,ref:this.tooltipContainerRef},r.a.createElement(m.a,{href:e,pluggableName:"LinkTooltip"})),document.getElementById("root")),r.a.createElement("span",Object.assign({onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},n),t))}}u(p,"propTypes",{href:s.a.string.isRequired,title:s.a.string.isRequired,attributes:s.a.objectOf(s.a.string).isRequired})}).call(this,a(100))},1631:function(e,t,a){e.exports=a.p+"files/551dc998f3dadf075294363fede9985e.png"},1645:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));a(176),a(54);var n=a(6),s=a.n(n),i=a(1112);function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const o=s.a.lazy(()=>a.e(26).then(a.bind(null,2013))),l=s.a.lazy(()=>a.e(2).then(a.bind(null,1513))),c=e=>{let{component:t}=e,a=r(e,["component"]);return s.a.createElement(i.b,Object.assign({},a,{render:e=>s.a.createElement(s.a.Suspense,{fallback:null},s.a.createElement(o,e,s.a.createElement(t,e)))}))},d=e=>{let{component:t}=e,a=r(e,["component"]);return s.a.createElement(i.b,Object.assign({},a,{render:e=>s.a.createElement(s.a.Suspense,{fallback:null},s.a.createElement(l,e,s.a.createElement(s.a.Suspense,{fallback:null},s.a.createElement(o,e,s.a.createElement(t,e)))))}))}},1650:function(e,t,a){},1651:function(e,t,a){},1652:function(e,t,a){},1653:function(e,t,a){},1654:function(e,t,a){},1657:function(e,t,a){e.exports=a.p+"files/6581c67e8591ec87c668ece048d29140.png"},1658:function(e,t,a){e.exports=a.p+"files/a5dc85f42161a300f4927d06b3ed760e.png"},1703:function(e,t,a){e.exports=a.p+"files/bd956aafccffed574da236f21af209ef.gif"},1704:function(e,t,a){e.exports=a.p+"files/8b03642d36741ba3030a9004a1d56bb0.gif"},1705:function(e,t,a){},1706:function(e,t,a){},1707:function(e,t,a){},1731:function(e,t,a){},1732:function(e,t,a){},1733:function(e,t,a){},1734:function(e,t,a){},1735:function(e,t,a){},1736:function(e,t,a){},1737:function(e,t,a){},1738:function(e,t,a){},1739:function(e,t,a){},1747:function(e,t,a){e.exports=a.p+"files/bafa82009db134fbe183f4550d5b4f75.svg"},1794:function(e,t,a){},1795:function(e,t,a){},1796:function(e,t,a){e.exports=a.p+"files/ea492914f9c12e91962f08d950df5010.png"},1797:function(e,t,a){e.exports=a.p+"files/55cf311014af092ae332e1a543d73370.png"},1798:function(e,t,a){e.exports=a.p+"files/f21b330f63460d942a5b17a2faf5a473.png"},1799:function(e,t,a){e.exports=a.p+"files/3a5ca642651531790851524b32f7a9b4.png"},1800:function(e,t,a){e.exports=a.p+"files/5382d1b5da47f53c6e40fcf5d4c313ac.png"},1801:function(e,t,a){e.exports=a.p+"files/fc6bef53f81f826d3b9912de242afdac.png"},1802:function(e,t,a){e.exports=a.p+"files/8410b09350ddde0157ed965616960761.png"},1803:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(1257),a(118);var n=a(0),s=a(15),i=a(18);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={capture:!0};class l{constructor(){r(this,"handleKeyDown",e=>{const t=e.ctrlKey,a=e.altKey,r=e.shiftKey;switch(!0){case Object(s.Z)(e,n.Q.KeyCodes.TAB):if(this.lastInputEventIsKeyboard=!0,!Object(s.bb)()&&a||Object(s.e)(e))return;this.tabKeyIsPressed=!0;break;case Object(s.Z)(e,n.Q.KeyCodes.TILDE):if(this.lastInputEventIsKeyboard=!0,!this.regions||!this.regions.length)return;t&&!a&&(this.tildeKeyIsPressed=!0,e.preventDefault(),r?this.previousRegion():this.nextRegion());break;case Object(s.Z)(e,n.Q.KeyCodes.F6):if(this.lastInputEventIsKeyboard=!0,!Object(i.d)()&&!Object(s.e)(e))return;this.f6KeyIsPressed=!0,e.preventDefault(),r?this.previousRegion():this.nextRegion();break;case Object(s.Z)(e,n.Q.KeyCodes.UP):if(this.lastInputEventIsKeyboard=!0,!this.navigationInProgress||!this.sections||!this.sections.length)return;this.upArrowKeyIsPressed=!0,e.preventDefault(),this.shouldReverseSections?this.nextSection():this.previousSection();break;case Object(s.Z)(e,n.Q.KeyCodes.DOWN):if(this.lastInputEventIsKeyboard=!0,!this.navigationInProgress||!this.sections||!this.sections.length)return;this.downArrowKeyIsPressed=!0,e.preventDefault(),this.shouldReverseSections?this.previousSection():this.nextSection();break;case Object(s.Z)(e,n.Q.KeyCodes.ESCAPE):if(!this.navigationInProgress)return;e.preventDefault(),this.cancelNavigation();break;case Object(s.Z)(e,n.Q.KeyCodes.ENTER):this.enterKeyIsPressed=!0;break;case Object(s.Z)(e,n.Q.KeyCodes.SPACE):"BUTTON"===e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),e.target.click());break;case Object(s.Z)(e,n.Q.KeyCodes.L):this.lastInputEventIsKeyboard=!0,this.lKeyIsPressed=!0}}),r(this,"handleKeyUp",()=>{this.resetInterractionStates()}),r(this,"handleMouseClick",e=>{this.enterKeyIsPressed||(this.lastInputEventIsKeyboard=!1),e.target!==this.activeElement&&this.cancelNavigation()}),r(this,"handleMouseDown",()=>{this.mouseIsPressed=!0}),r(this,"handleMouseUp",()=>{this.mouseIsPressed=!1}),r(this,"handleFocus",e=>{this.lastInputEventIsKeyboard&&this.windowIsFocused&&this.nextElement(e.target,e.path||!0),this.windowIsFocused||(this.windowIsFocused=!0)}),r(this,"handleWindowBlur",e=>{e.target===window&&(this.windowIsFocused=!1)}),r(this,"handleActiveRegionUpdate",()=>{this.navigationInProgress&&(this.updateActiveRegion(),this.focusedElement===this.activeRegion&&this.udpateCurrentFocus(!0))}),r(this,"handleActiveSectionUpdate",()=>{this.navigationInProgress&&(this.updateActiveSection(),this.focusedElement===this.activeSection&&this.udpateCurrentFocus(!0))}),r(this,"handleActiveElementUpdate",()=>{this.navigationInProgress&&(this.updateActiveElement(),this.focusedElement===this.activeElement&&this.udpateCurrentFocus(!0))}),this.regionHTMLCollection=this.getAllRegions(),this.sectionHTMLCollection=null,this.modalHTMLCollection=this.getAllModals(),this.popupHTMLCollection=this.getAllPopups(),this.activeRegion=null,this.activeSection=null,this.activeElement=null,this.mouseIsPressed=!1,this.lastInputEventIsKeyboard=!1,this.enterKeyIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.lKeyIsPressed=!1,this.windowIsFocused=!0,this.resetNavigation=!1,document.addEventListener(n.m.KEY_DOWN,this.handleKeyDown,o),document.addEventListener(n.m.KEY_UP,this.handleKeyUp,o),document.addEventListener(n.m.CLICK,this.handleMouseClick,o),document.addEventListener(n.m.MOUSE_DOWN,this.handleMouseDown,o),document.addEventListener(n.m.MOUSE_UP,this.handleMouseUp,o),document.addEventListener(n.m.FOCUS,this.handleFocus,o),window.addEventListener(n.m.BLUR,this.handleWindowBlur,o)}destroy(){this.clearActiveRegion(),this.clearCurrentFocus(),document.removeEventListener(n.m.KEY_DOWN,this.handleKeyDown,o),document.removeEventListener(n.m.KEY_UP,this.handleKeyUp,o),document.removeEventListener(n.m.CLICK,this.handleMouseClick,o),document.removeEventListener(n.m.MOUSE_DOWN,this.handleMouseDown,o),document.removeEventListener(n.m.MOUSE_UP,this.handleMouseUp,o),document.removeEventListener(n.m.FOCUS,this.handleFocus,o),window.removeEventListener(n.m.BLUR,this.handleWindowBlur,o)}get navigationInProgress(){return!!(this.regions&&this.regions.length&&this.isElementValid(this.activeRegion))&&(!!this.lastInputEventIsKeyboard&&(!this.modalIsOpen&&!this.popupIsOpen&&!!this.isElementValid(this.activeElement)))}get regions(){let e=this.sortElementsByAttributeOrder(this.regionHTMLCollection);return e=e.filter(e=>this.elementIsVisible(e)),e}get sections(){let e=this.sortElementsByAttributeOrder(this.sectionHTMLCollection);return e=e.filter(e=>this.elementIsVisible(e)),this.shouldReverseSections&&e.reverse(),e}get activeRegionIndex(){return this.activeRegion?this.regions.indexOf(this.activeRegion):null}get activeSectionIndex(){return this.activeSection?this.sections.indexOf(this.activeSection):null}get shouldReverseSections(){return!!this.activeRegion&&this.getOrderReverseAttribute(this.activeRegion)}get focusedElement(){let e;return this.activeElement?e=this.activeElement:this.activeSection?e=this.activeSection:this.activeRegion&&(e=this.activeRegion),e}get a11yKeyIsPressed(){return this.f6KeyIsPressed||this.upArrowKeyIsPressed||this.downArrowKeyIsPressed||this.tabKeyIsPressed||this.tildeKeyIsPressed||this.lKeyIsPressed}get modalIsOpen(){return this.modalHTMLCollection.length>0}get popupIsOpen(){return this.popupHTMLCollection.length>0}nextRegion(){const e=this.regions;if(!e||!e.length||this.modalIsOpen||this.popupIsOpen)return;let t;t=!this.activeRegion||this.activeRegionIndex===e.length-1||this.resetNavigation?e[0]:e[this.activeRegionIndex+1],this.setActiveRegion(t),this.setCurrentFocus(),this.resetNavigation=!1}previousRegion(){const e=this.regions;if(!e||!e.length||this.modalIsOpen||this.popupIsOpen)return;let t;t=!this.activeRegion||0!==this.activeRegionIndex&&this.resetNavigation?e[0]:0===this.activeRegionIndex?e[e.length-1]:e[this.activeRegionIndex-1],this.setActiveRegion(t),this.setCurrentFocus(),this.resetNavigation=!1}nextSection(){const e=this.sections,t=this.getLoopNavigationAttribute(this.activeRegion);if(this.modalIsOpen||this.popupIsOpen||!e||!e.length||!t&&this.activeSectionIndex===e.length-1)return;let a;a=this.activeSection&&this.activeSectionIndex<e.length-1?e[this.activeSectionIndex+1]:e[0],this.setActiveSection(a),this.setCurrentFocus(),this.resetNavigation=!0}previousSection(){const e=this.sections,t=this.getLoopNavigationAttribute(this.activeRegion);if(this.modalIsOpen||this.popupIsOpen||!e||!e.length||!t&&0===this.activeSectionIndex)return;let a;a=this.activeSection&&this.activeSectionIndex>0?e[this.activeSectionIndex-1]:this.activeSection&&0===this.activeSectionIndex?e[e.length-1]:e[0],this.setActiveSection(a),this.setCurrentFocus(),this.resetNavigation=!0}nextElement(e,t=!1){let a,s;t&&t.length?(t.indexOf(this.activeRegion)<0&&(a=t.find(e=>!!e.classList&&e.classList.contains(n.b.REGION))),t.indexOf(this.activeSection)<0&&(s=t.find(e=>!!e.classList&&e.classList.contains(n.b.SECTION)))):t&&"function"==typeof e.closest&&(a=e.closest(".".concat(n.b.REGION)),s=e.closest(".".concat(n.b.SECTION))),a&&this.activeRegion!==a&&this.setActiveRegion(a,!1),s&&this.activeSection!==s&&this.setActiveSection(s),this.setActiveElement(e),this.setCurrentFocus(),this.resetNavigation=!0}cancelNavigation(){this.clearActiveRegion(),this.setCurrentFocus(),this.resetInterractionStates()}setActiveRegion(e,t=!0){(this.isElementValid(e,[this.activeRegion])||this.resetNavigation)&&(this.clearActiveRegion(),this.activeRegion=e,this.activeRegion.addEventListener(n.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveRegion(),this.sectionHTMLCollection=this.getAllSectionsForRegion(this.activeRegion),t&&this.getFocusChildAttribute(this.activeRegion)&&this.sections&&this.sections.length&&this.setActiveSection(this.sections[0]))}setActiveSection(e){this.isElementValid(e,[this.activeSection])&&(this.clearActiveSection(),this.activeSection=e,this.activeSection.addEventListener(n.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveSection())}setActiveElement(e){this.isElementValid(e,[this.activeElement])&&(this.clearActiveElement(),this.activeElement=e,this.activeElement.addEventListener(n.c.UPDATE,this.handleActiveElementUpdate),this.activeElement!==this.activeRegion&&this.activeElement!==this.activeSection&&this.activeElement.dispatchEvent(new Event(n.c.ACTIVATE)),this.updateActiveElement())}setCurrentFocus(){this.clearCurrentFocus(),this.focusedElement&&(document.activeElement!==this.focusedElement&&this.focusedElement.focus(),this.udpateCurrentFocus())}updateActiveRegion(){this.activeRegion&&(this.activeRegion.classList.add(n.b.ACTIVE),this.activeRegion.getAttribute("tabindex")||this.activeRegion.setAttribute("tabindex",-1))}updateActiveSection(){this.activeSection&&(this.activeSection.classList.add(n.b.ACTIVE),this.activeSection.getAttribute("tabindex")||this.activeSection.setAttribute("tabindex",-1))}updateActiveElement(){this.activeElement&&this.activeElement.classList.add(n.b.ACTIVE)}udpateCurrentFocus(e=!1){(this.focusedElement&&this.a11yKeyIsPressed||e)&&this.focusedElement.classList.add(n.b.FOCUSED)}clearActiveRegion(){this.activeRegion&&(this.activeRegion.classList.remove(n.b.ACTIVE),this.activeRegion.dispatchEvent(new Event(n.c.DEACTIVATE)),this.activeRegion.removeEventListener(n.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion=null),this.clearActiveSection()}clearActiveSection(){this.activeSection&&(this.activeSection.classList.remove(n.b.ACTIVE),this.activeSection.dispatchEvent(new Event(n.c.DEACTIVATE)),this.activeSection.removeEventListener(n.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection=null),this.clearActiveElement()}clearActiveElement(){this.activeElement&&(this.activeElement!==this.activeRegion&&this.activeElement!==this.activeSection&&(this.activeElement.classList.remove(n.b.ACTIVE),this.activeElement.dispatchEvent(new Event(n.c.DEACTIVATE))),this.activeElement.removeEventListener(n.c.UPDATE,this.handleActiveElementUpdate),this.activeElement=null)}clearCurrentFocus(e=!1){Array.from(document.getElementsByClassName(n.b.FOCUSED)).forEach(e=>{e.classList.remove(n.b.FOCUSED)}),e&&document.activeElement.blur()}resetInterractionStates(){this.mouseIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.enterKeyIsPressed=!1,this.lKeyIsPressed=!1,this.lastInputEventIsKeyboard=!1}getAllRegions(){return document.getElementsByClassName(n.b.REGION)}getAllSectionsForRegion(e){return e?e.getElementsByClassName(n.b.SECTION):null}sortElementsByAttributeOrder(e){return e&&e.length?Array.from(e).sort((e,t)=>{const a=parseInt(e.getAttribute(n.a.SORT_ORDER),10),s=parseInt(t.getAttribute(n.a.SORT_ORDER),10);return isNaN(a)&&isNaN(s)?0:isNaN(s)?-1:isNaN(a)?1:a-s}):[]}elementIsVisible(e){return e&&e.offsetParent}getAllModals(){return document.getElementsByClassName(n.b.MODAL)}getAllPopups(){return document.getElementsByClassName(n.b.POPUP)}getLoopNavigationAttribute(e){const t=e.getAttribute(n.a.LOOP_NAVIGATION);return!t||"false"!==t.toLowerCase()}getOrderReverseAttribute(e){const t=e.getAttribute(n.a.ORDER_REVERSE);return!(!t||"true"!==t.toLowerCase())}getFocusChildAttribute(e){const t=e.getAttribute(n.a.FOCUS_CHILD);return!(!t||"true"!==t.toLowerCase())}isElementValid(e,t=[]){return!(!e||!e.classList||t.includes(e))}}},1989:function(e,t,a){"use strict";a(119);var n=a(315),s=a(11),i=a(1112),r=a(17),o=a(38),l=a(178),c=a(1184),d=a(21),m=a(16),u=a(9),h=a(19),p=a(12),g=a(539),b=a(1251),f=a(69),_=a(1199),E=a(1141),v=a(1415),y=(a(54),a(33)),C=a.n(y),w=a(6),O=a.n(w),T=a(1646),S=a.n(T),P=a(1223),M=a(1126),N=a(0),I=a(18),j=a(15),A=a(348),R=a(1191),k=a(1167),L=a(1358),D=a(31),x=a(10),U=a(103),q=a(1132);function H(e){return{type:N.f.SET_SHOW_PREVIEW_ON_CREATE_COMMENT,showPreview:e}}function F(e){return{type:N.f.SET_SHOW_PREVIEW_ON_CREATE_POST,showPreview:e}}function B(e){return{type:N.f.SET_SHOW_PREVIEW_ON_EDIT_CHANNEL_HEADER_MODAL,showPreview:e}}function G(e){return{type:N.f.SET_SHOW_PREVIEW_ON_EDIT_POST_MODAL,showPreview:e}}function V(e){return e.views.textbox.shouldShowPreviewOnCreateComment}function W(e){return e.views.textbox.shouldShowPreviewOnCreatePost}function z(e){return e.views.textbox.shouldShowPreviewOnEditChannelHeaderModal}function K(e){return e.views.textbox.shouldShowPreviewOnEditPostModal}var Y=a(319),Q=a(44);function Z(e){return async(t,a)=>{const n=await D.editPost(e)(t,a);return n.error&&"api.post.update_post.permissions_time_limit.app_error"===n.error.server_error_id&&t(Object(Q.logError)({type:N.i.ANNOUNCEMENT,message:n.error.message},!0)),n}}function J(e,t,a,n,s,i){return async n=>{n({type:N.f.SELECT_ATTACHMENT_MENU_ACTION,postId:e,data:{[t]:{text:s,value:i}}}),n(D.doPostActionWithCookie(e,t,a,i))}}var X=a(323),$=(a(73),a(1365)),ee=a(1113),te=a(320),ae=a(318),ne=a(1127),se=(a(62),a(101),a(87));function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class re extends O.a.PureComponent{constructor(e){super(e),ie(this,"handleDelete",async()=>{const{actions:e,post:t}=this.props;let a="";const n=await e.deleteAndRemovePost(t),s=Object(i.f)(this.props.location.pathname,{path:"/:teamName/messages/:username/:postid"}),r=Object(i.f)(this.props.location.pathname,{path:"/:teamName/channels/:channelname/:postid"});if(s?a=s.params.postid:r&&(a=r.params.postid),a===t.id){const e=this.props.location.pathname.split("/").slice(0,-1).join("/");se.a.replace(e)}n.data&&this.onHide()}),ie(this,"handleEntered",()=>{this.deletePostBtn&&this.deletePostBtn.focus()}),ie(this,"onHide",()=>{var e;(this.setState({show:!1}),I.n())||(e=this.props.isRHS?document.getElementById("reply_textbox"):document.getElementById("post_textbox"))&&e.focus()}),this.state={show:!0}}render(){var e="";this.props.commentCount>0&&""===this.props.post.root_id&&(e=O.a.createElement(ee.a,{id:"delete_post.warning",defaultMessage:"This post has {count, number} {count, plural, one {comment} other {comments}} on it.",values:{count:this.props.commentCount}}));const t=this.props.post.root_id?O.a.createElement(ee.a,{id:"delete_post.comment",defaultMessage:"Comment"}):O.a.createElement(ee.a,{id:"delete_post.post",defaultMessage:"Post"});return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onEntered:this.handleEntered,onHide:this.onHide,onExited:this.props.onHide,enforceFocus:!1,id:"deletePostModal",role:"dialog","aria-labelledby":"deletePostModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"deletePostModalLabel"},O.a.createElement(ee.a,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:t}}))),O.a.createElement($.a.Body,null,O.a.createElement(ee.a,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:t}}),O.a.createElement("br",null),O.a.createElement("br",null),e),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},O.a.createElement(ee.a,{id:"delete_post.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{ref:e=>{this.deletePostBtn=e},type:"button",autoFocus:!0,className:"btn btn-danger",onClick:this.handleDelete,id:"deletePostModalButton"},O.a.createElement(ee.a,{id:"delete_post.del",defaultMessage:"Delete"}))))}}ie(re,"propTypes",{channelName:C.a.string,teamName:C.a.string,post:C.a.object.isRequired,commentCount:C.a.number.isRequired,isRHS:C.a.bool.isRequired,onHide:C.a.func.isRequired,actions:C.a.shape({deleteAndRemovePost:C.a.func.isRequired})});var oe=Object(i.g)(Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({deleteAndRemovePost:Y.c},e)}}))(re)),le=a(1303),ce=a(1407),de=a(1414),me=a(1413),ue=a(1185),he=a(1),pe={OPEN_EMBED_PAGE:1,SHARE:2},ge={TRENDING:0,REACTIONS:1},be={mattermost:"mattermost"};a(177);class fe extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",version:"1.1"},O.a.createElement("g",{id:"ic_search",transform:"matrix(0.959095,-9.6091e-18,-1.00189e-17,0.959095,-0.0633002,-0.777826)"},O.a.createElement("path",{d:"M2.648,15.872C3.433,16.658 4.376,17.287 5.454,17.758C6.553,18.229 7.698,18.454 8.888,18.454C10.728,18.454 12.389,17.938 13.893,16.905L18.18,21.192C18.494,21.506 18.854,21.664 19.302,21.664C19.751,21.664 20.111,21.506 20.447,21.192C20.761,20.855 20.919,20.496 20.919,20.047C20.919,19.621 20.761,19.239 20.447,18.925L16.16,14.638C17.193,13.134 17.709,11.473 17.709,9.633C17.709,8.443 17.484,7.298 17.013,6.198C16.542,5.121 15.913,4.178 15.128,3.393C14.342,2.607 13.399,1.979 12.322,1.507C11.222,1.036 10.077,0.811 8.888,0.811C7.698,0.811 6.553,1.036 5.454,1.507C4.376,1.979 3.433,2.607 2.648,3.393C1.862,4.178 1.234,5.121 0.762,6.198C0.291,7.298 0.066,8.443 0.066,9.633C0.066,10.822 0.291,11.967 0.762,13.067C1.234,14.144 1.862,15.087 2.648,15.872ZM8.888,4.021C10.436,4.021 11.761,4.56 12.861,5.66C13.96,6.76 14.499,8.084 14.499,9.633C14.499,11.181 13.96,12.506 12.861,13.606C11.761,14.705 10.436,15.244 8.888,15.244C7.339,15.244 6.015,14.705 4.915,13.606C3.815,12.506 3.276,11.181 3.276,9.633C3.276,8.084 3.815,6.76 4.915,5.66C6.015,4.56 7.339,4.021 8.888,4.021Z",style:{fill:"inherit"}}))))}}class _e extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",enableBackground:"new 0 0 20 20",version:"1.1"},O.a.createElement("g",{transform:"matrix(0.952381,0,0,1,0,0)"},O.a.createElement("path",{fill:"inherit",d:"M10.5 11.7L2.2 19.8C2 19.9 1.9 20 1.7 20 1.6 20 1.4 19.9 1.3 19.8L0.2 18.8C0.1 18.7 0 18.5 0 18.3 0 18.2 0.1 18 0.2 17.9L8.3 10 0.2 2.1C0.1 2 0 1.8 0 1.7 0 1.5 0.1 1.3 0.2 1.2L1.3 0.2C1.4 0.1 1.6 0 1.7 0 1.9 0 2 0.1 2.2 0.2L10.5 8.3 18.8 0.2C19 0.1 19.1 0 19.3 0 19.4 0 19.6 0.1 19.7 0.2L20.8 1.2C20.9 1.3 21 1.5 21 1.7 21 1.8 20.9 2 20.8 2.1L12.7 10 20.8 17.9C20.9 18 21 18.2 21 18.3 21 18.5 20.9 18.7 20.8 18.8L19.7 19.8C19.6 19.9 19.4 20 19.3 20 19.1 20 19 19.9 18.8 19.8L10.5 11.7Z"}))))}}var Ee=a(1134),ve=a(13);a(1650);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const we={saveSearchBarText:ue.saveSearchBarText,saveSearchScrollPosition:ue.saveSearchScrollPosition,searchTextUpdate:ue.searchTextUpdate},Oe=Object(he.makeStyleFromTheme)(e=>({background:{backgroundColor:e.centerChannelBg},icon:{fill:Object(he.changeOpacity)(e.centerChannelColor,.4)},inputBackground:{backgroundColor:e.centerChannelBg},input:{borderColor:Object(he.changeOpacity)(e.centerChannelColor,.12)}}));class Te extends w.Component{constructor(e){super(e),Ce(this,"parseSearchText",e=>e.trim().split(/ +/).join("-")),Ce(this,"removeExtraSpaces",e=>e.trim().split(/ +/).join(" ")),Ce(this,"updateSearchInputValue",e=>{this.searchInput.value=e,this.props.saveSearchBarText(e),this.props.handleSearchTextChange(e)}),Ce(this,"handleSubmit",e=>{e.preventDefault(),this.triggerSearch(this.searchInput.value),this.searchInput.blur()}),Ce(this,"triggerSearch",e=>{const{onSearch:t}=this.props;this.props.searchTextUpdate(this.parseSearchText(e)),t(),this.props.saveSearchScrollPosition(0)}),Ce(this,"handleChange",e=>{clearTimeout(this.searchTimeout);const t=e.target.value,{onCategories:a,action:n}=this.props;this.props.saveSearchBarText(t),this.props.handleSearchTextChange(t),""===t?a():"reactions"===n&&this.isFilteredTags(t)||(this.searchTimeout=setTimeout(()=>{this.triggerSearch(t)},500))}),Ce(this,"focusInput",()=>{this.setState({inputFocused:!0})}),Ce(this,"blurInput",()=>{this.setState({inputFocused:!1})}),Ce(this,"isFilteredTags",e=>{var t=this.removeExtraSpaces(e);const{tagsList:a}=this.props,n=t.toLowerCase(),s=a&&a.length?a.filter(e=>t&&-1===e.tagName.indexOf(n)?"":e):[];return Boolean(s.length)}),Ce(this,"clearSearchHandle",()=>{const{action:e,onTrending:t,onCategories:a}=this.props;this.updateSearchInputValue(""),"reactions"===e?a():t()}),this.state={inputFocused:!1},this.searchTimeout=null;const t=this.props.defaultSearchText||"";this.props.saveSearchBarText(t),this.props.searchTextUpdate(t)}componentDidUpdate(e){const{searchBarText:t}=this.props;t!==e.searchBarText&&("trending"===t?this.updateSearchInputValue(""):this.updateSearchInputValue(t))}shouldComponentUpdate(e,t){return!e.searchBarText&&this.props.searchBarText||e.searchBarText&&!this.props.searchBarText||t.inputFocused!==this.state.inputFocused||e.searchBarText!==this.props.searchBarText}render(){const e=Oe(this.props.theme),{searchBarText:t}=this.props,a=t?O.a.createElement(_e,{className:"ic-clear-search",style:e.icon,onClick:this.clearSearchHandle}):null;return O.a.createElement("form",{className:"gfycat-search",method:"get",target:"_top",noValidate:"",onSubmit:this.handleSubmit},O.a.createElement("div",{className:"search-bar",style:e.background},O.a.createElement("div",{className:"search-input-bg",style:e.inputBackground}),O.a.createElement(Ee.a,{className:"search-input",name:"searchText",autoFocus:!0,placeholder:{id:Object(ve.b)("gif_picker.gfycat"),defaultMessage:"Search Gfycat"},onChange:this.handleChange,autoComplete:"off",autoCapitalize:"off",onFocus:this.focusInput,onBlur:this.blurInput,ref:e=>(this.searchInput=e,e),style:e.input,value:t}),O.a.createElement(fe,{className:"ic ic-search",style:e.icon}),a),O.a.createElement("button",{type:"submit",className:"submit-button"}))}}Ce(Te,"propTypes",{searchBarText:C.a.string,tagsList:C.a.array,theme:C.a.object.isRequired,onTrending:C.a.func,onSearch:C.a.func,onCategories:C.a.func,action:C.a.string,saveSearchScrollPosition:C.a.func,saveSearchBarText:C.a.func,searchTextUpdate:C.a.func,defaultSearchText:C.a.string,handleSearchTextChange:C.a.func.isRequired});var Se=Object(n.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){Ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.entities.gifs.categories,{},e.entities.gifs.search,{theme:Object(d.getTheme)(e),appProps:e.entities.gifs.app})}),we)(Te);class Pe extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{className:"ic-svg ic-trending-svg",width:"11px",height:"15px",viewBox:"0 0 11 15",version:"1.1"},O.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},O.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1212.000000, -619.000000)",fill:"inherit"},O.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},O.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},O.a.createElement("g",{id:"tab---trending---selected"},O.a.createElement("path",{d:"M69.90625,10.4062776 C69.90625,10.9531513 70.0976562,11.4909106 70.4804688,12.019555 C70.6992188,12.32945 71.1276043,12.7760638 71.765625,13.3593956 C72.3489582,13.9062693 72.7773438,14.3346538 73.0507812,14.6445488 C73.5065106,15.1731932 73.8528644,15.7109525 74.0898438,16.2578262 C74.3632812,16.9505327 74.5,17.6979271 74.5,18.5000083 C74.5,19.4479229 74.2630207,20.3229208 73.7890625,21.1250021 C73.3151043,21.9270834 72.6770832,22.565103 71.875,23.03906 C71.0729168,23.5130171 70.1979168,23.7499958 69.25,23.7499958 C68.3020832,23.7499958 67.4270832,23.5130171 66.625,23.03906 C65.8229168,22.565103 65.1848957,21.9270834 64.7109375,21.1250021 C64.2369793,20.3229208 64,19.4479229 64,18.5000083 C64,17.6432397 64.2005207,16.8320436 64.6015625,16.0664204 C65.0026043,15.3007972 65.5494793,14.6718925 66.2421875,14.1797061 C66.4609375,14.0338733 66.6888019,14.0247585 66.9257812,14.1523625 C67.1627606,14.2799665 67.28125,14.4713723 67.28125,14.7265798 L67.28125,17.6250104 C67.28125,17.9349054 67.3860676,18.1946704 67.5957031,18.4043054 C67.8053387,18.6139405 68.0651043,18.7187578 68.375,18.7187578 C68.6848957,18.7187578 68.9446613,18.6139405 69.1542969,18.4043054 C69.3639324,18.1946704 69.46875,17.9349054 69.46875,17.6250104 C69.46875,17.4427191 69.4049481,17.2330844 69.2773438,16.9961057 C69.2044269,16.8320436 69.0677082,16.576836 68.8671875,16.2304825 C68.4661457,15.5742341 68.1835938,15.0547041 68.0195312,14.6718925 C67.7643231,13.9791859 67.6640625,13.2955938 67.71875,12.6211161 C67.8098957,11.7825763 68.1380207,10.9258077 68.703125,10.0508097 C68.8125,9.86851837 68.9628906,9.76825847 69.1542969,9.75002921 C69.3457031,9.73179994 69.5188801,9.78648731 69.6738281,9.91409132 C69.8287762,10.0416953 69.90625,10.2057574 69.90625,10.4062776 Z M69.2499875,22.437499 C69.9609233,22.437499 70.6171717,22.259765 71.2187328,21.9042971 C71.8202939,21.5488292 72.2988083,21.0703147 72.6542762,20.4687537 C73.0097441,19.8671926 73.1874781,19.2109441 73.1874781,18.5000083 C73.1874781,17.880218 73.0781034,17.3060006 72.8593539,16.7773562 C72.6588337,16.3398572 72.376282,15.9023583 72.0116996,15.4648593 C71.7929502,15.1914225 71.4329248,14.8131683 70.9316241,14.3300964 C70.4303233,13.8470245 70.070298,13.4687703 69.8515485,13.1953335 C69.4869662,12.7760638 69.2135294,12.3567937 69.031238,11.937524 C68.8671759,12.5573143 68.8945196,13.1953335 69.1132691,13.8515819 C69.2408731,14.2343935 69.5143099,14.7812672 69.9335796,15.492203 C70.2252457,15.9661601 70.4166515,16.321628 70.507797,16.5586067 C70.6900884,16.9414183 70.7812338,17.2968862 70.7812338,17.6250104 C70.7812338,18.2812589 70.5442551,18.8463618 70.070298,19.3203189 C69.596341,19.794276 69.031238,20.0312547 68.3749896,20.0312547 C67.7187411,20.0312547 67.1536382,19.794276 66.6796811,19.3203189 C66.205724,18.8463618 65.9687453,18.2812589 65.9687453,17.6250104 L65.9687453,16.0937641 C65.7682251,16.403659 65.60872,16.7819136 65.4902308,17.228527 C65.3717417,17.6751404 65.3124969,18.0989675 65.3124969,18.5000083 C65.3124969,19.2109441 65.4902308,19.8671926 65.8456987,20.4687537 C66.2011666,21.0703147 66.6796811,21.5488292 67.2812422,21.9042971 C67.8828032,22.259765 68.5390517,22.437499 69.2499875,22.437499 Z",id:"icon---trending"}))))))))}}class Me extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{className:"ic-svg ic-reactions-svg",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},O.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},O.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1348.000000, -620.000000)",fill:"inherit"},O.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},O.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},O.a.createElement("g",{id:"tab---category---deselected",transform:"translate(138.000000, 0.000000)"},O.a.createElement("path",{d:"M62,16 L62,10 L68,10 L68,16 L62,16 Z M64,12 L64,14 L66,14 L66,12 L64,12 Z M70,24 L70,18 L76,18 L76,24 L70,24 Z M72,20 L72,22 L74,22 L74,20 L72,20 Z M70,10 L76,10 L76,16 L70,16 L70,10 Z M74,14 L74,12 L72,12 L72,14 L74,14 Z M62,24 L62,18 L68,18 L68,24 L62,24 Z M64,20 L64,22 L66,22 L66,20 L64,20 Z",id:"icon---categories"}))))))))}}a(1651);const Ne={saveSearchBarText:ue.saveSearchBarText,searchTextUpdate:ue.searchTextUpdate},Ie=Object(he.makeStyleFromTheme)(e=>({background:{backgroundColor:e.centerChannelBg},header:{borderBottomColor:Object(he.changeOpacity)(e.centerChannelColor,.2)},icon:{fill:Object(he.changeOpacity)(e.centerChannelColor,.3)},iconActive:{fill:e.centerChannelColor},iconHover:{fill:Object(he.changeOpacity)(e.centerChannelColor,.8)}}));class je extends w.PureComponent{constructor(e){super(e),this.state={hovering:""}}render(){const e=Ie(this.props.theme);return O.a.createElement("header",{className:"header-container",style:e.background},O.a.createElement(Se,this.props),O.a.createElement("nav",{className:"nav-bar",style:e.header},this.renderTabs(this.props,e)))}renderTabs(e,t){const{appProps:a,onTrending:n,onCategories:s}=e,{header:i}=a;return i.tabs.map((e,a)=>{let i;return e===ge.TRENDING?i=this.renderTab("trending",n,Pe,a,t):e===ge.REACTIONS&&(i=this.renderTab("reactions",s,Me,a,t)),i})}renderTab(e,t,a,n,s){var i=this.props;const{action:r}=i;return O.a.createElement("a",{onClick:function(){i.searchTextUpdate(""),i.saveSearchBarText(""),t()},onMouseOver:()=>{this.setState({hovering:e})},onMouseOut:()=>{this.setState({hovering:""})},style:{cursor:"pointer"},key:n},O.a.createElement("div",{style:{paddingTop:"2px"}},O.a.createElement(a,{style:(()=>this.state.hovering===e?s.iconHover:r===e?s.iconActive:s.icon)()})))}}var Ae,Re,ke;Ae=je,Re="propTypes",ke={action:C.a.string,appProps:C.a.object,saveSearchBarText:C.a.func,searchTextUpdate:C.a.func,theme:C.a.object.isRequired,defaultSearchText:C.a.string,handleSearchTextChange:C.a.func.isRequired},Re in Ae?Object.defineProperty(Ae,Re,{value:ke,enumerable:!0,configurable:!0,writable:!0}):Ae[Re]=ke;var Le=Object(n.connect)((function(e){return{theme:Object(d.getTheme)(e)}}),Ne)(je);const De={saveAppProps:ue.saveAppProps};class xe extends w.PureComponent{constructor(e){super(e);const{appProps:t}=this.props;this.props.saveAppProps(t)}render(){const{appProps:e,action:t,onCategories:a,onSearch:n,onTrending:s,children:i,defaultSearchText:r,handleSearchTextChange:o}=this.props,l="main-container "+(e.appClassName||"");return O.a.createElement("div",{className:l},O.a.createElement(Le,{appProps:e,action:t,onCategories:a,onSearch:n,onTrending:s,defaultSearchText:r,handleSearchTextChange:o}),O.a.createElement("div",{className:"component-container"},i))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(xe,"propTypes",{appProps:C.a.object,action:C.a.string,onCategories:C.a.func,onSearch:C.a.func,onTrending:C.a.func,children:C.a.object,saveAppProps:C.a.func,authenticateSdk:C.a.func,defaultSearchText:C.a.string,handleSearchTextChange:C.a.func.isRequired});var Ue=Object(n.connect)(null,De)(xe),qe=(a(35),a(317));function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ge extends w.PureComponent{constructor(...e){super(...e),Be(this,"scrollListener",()=>{const e=this.scrollComponent,t=window;let a;if(this.props.useWindow){var n="pageYOffset"in t?t.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;a=this.props.isReverse?n:this.calculateTopPosition(e)+(e.offsetHeight-n-window.innerHeight)}else a=this.props.isReverse?e.parentNode.scrollTop:e.scrollHeight-e.parentNode.scrollTop-e.parentNode.clientHeight;a<Number(this.props.threshold)&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))})}componentDidMount(){this.pageLoaded=this.props.pageStart,this.attachScrollListener(),this.setScrollPosition()}componentDidUpdate(){this.attachScrollListener()}render(){const e=this.props,{children:t,element:a,hasMore:n,initialLoad:s,loader:i,loadMore:r,pageStart:o,threshold:l,useWindow:c,isReverse:d,scrollPosition:m,containerHeight:u}=e,h=Fe(e,["children","element","hasMore","initialLoad","loader","loadMore","pageStart","threshold","useWindow","isReverse","scrollPosition","containerHeight"]);h.ref=e=>{this.scrollComponent=e};const p=u?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach((function(t){Be(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},h,{style:{height:u}}):h;return O.a.createElement(a,p,t,n&&(i||this.defaultLoader))}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}setScrollPosition(){const{scrollPosition:e}=this.props;null!==e&&window.scrollTo(0,e)}attachScrollListener(){if(!this.props.hasMore)return;let e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.addEventListener("scroll",this.scrollListener),e.addEventListener("resize",this.scrollListener),this.props.initialLoad&&this.scrollListener()}detachScrollListener(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("scroll",this.scrollListener),e.removeEventListener("resize",this.scrollListener)}componentWillUnmount(){this.detachScrollListener()}setDefaultLoader(e){this.defaultLoader=e}}Be(Ge,"propTypes",{children:C.a.array,element:C.a.string,hasMore:C.a.bool,initialLoad:C.a.bool,loader:C.a.object,loadMore:C.a.func.isRequired,pageStart:C.a.number,threshold:C.a.number,useWindow:C.a.bool,isReverse:C.a.bool,containerHeight:C.a.number,scrollPosition:C.a.number}),Be(Ge,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,threshold:250,useWindow:!0,isReverse:!1,containerHeight:null,scrollPosition:null});a(1652);function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){ze(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ke={saveSearchBarText:ue.saveSearchBarText,saveSearchScrollPosition:ue.saveSearchScrollPosition,searchTextUpdate:ue.searchTextUpdate,requestCategoriesList:ue.requestCategoriesList,requestCategoriesListIfNeeded:ue.requestCategoriesListIfNeeded},Ye=Object(he.makeStyleFromTheme)(e=>({background:{backgroundColor:Object(he.changeOpacity)(e.centerChannelColor,.05)}}));class Qe extends w.PureComponent{constructor(...e){super(...e),ze(this,"sendImpressions",()=>{const{tagsList:e}=this.props,t=e.map(e=>({gfyId:e.gfyId}));t.length&&Object(qe.d)("gfycat","views",{context:"category_list",count:t.length})}),ze(this,"filterTagsList",()=>{const{searchBarText:e,tagsList:t}=this.props,a=e.toLowerCase().trim().split(/ +/).join(" ");return t&&t.length?t.filter(t=>e&&-1===t.tagName.indexOf(a)?"":t):[]}),ze(this,"loadMore",()=>{this.props.requestCategoriesList()})}componentDidMount(){window.scrollTo(0,0),this.props.requestCategoriesListIfNeeded(),this.sendImpressions()}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const e=Ye(this.props.theme),{hasMore:t,tagsList:a,gifs:n,onSearch:s,onTrending:i,hasImageProxy:r}=this.props,o=a&&a.length?this.filterTagsList(a).map((e,t)=>{const{tagName:a,gfyId:o}=e;if(!n[o])return null;const l=n[o],{max1mbGif:c,avgColor:d}=l,m=ae.f(c,"true"===r),u=a.replace(/\s/g,"-"),h={backgroundImage:"url(".concat(m)},p={backgroundColor:d},g=this.props;return O.a.createElement("a",{onClick:function(){g.searchTextUpdate(a),g.saveSearchBarText(a),"trending"===u?i():s()},key:t},O.a.createElement("div",{className:"category-container"},O.a.createElement("div",{className:"category",style:We({},h,{},p)},O.a.createElement("div",{className:"category-name"},a))))}):[];return o&&o.length?O.a.createElement("div",{className:"categories-container",style:e.background},O.a.createElement(Ge,{hasMore:t,loadMore:this.loadMore,threshold:1},o)):O.a.createElement("div",{className:"categories-container",style:e.background})}}ze(Qe,"propTypes",{appProps:C.a.object,gifs:C.a.object,hasMore:C.a.bool,onSearch:C.a.func,onTrending:C.a.func,requestCategoriesList:C.a.func,requestCategoriesListIfNeeded:C.a.func,saveSearchBarText:C.a.func,saveSearchScrollPosition:C.a.func,searchTextUpdate:C.a.func,searchBarText:C.a.string,tagsList:C.a.array,hasImageProxy:C.a.string,theme:C.a.object.isRequired});var Ze=Object(n.connect)((function(e){return We({},e.entities.gifs.categories,{},e.entities.gifs.cache,{theme:Object(d.getTheme)(e),appProps:e.entities.gifs.app,searchText:e.entities.gifs.search.searchText,searchBarText:e.entities.gifs.search.searchBarText,hasImageProxy:e.entities.general.config.HasImageProxy})}),Ke)(Qe);a(1653);function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(a),!0).forEach((function(t){$e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class et extends w.PureComponent{render(){const{gfyItem:e,top:t,left:a,itemWidth:n,itemClickHandler:s}=this.props,{width:i,height:r,max1mbGif:o,avgColor:l}=e,{hasImageProxy:c}=this.props,d=ae.f(o,"true"===c),m={backgroundImage:"url(".concat(d,")")},u={backgroundColor:l},h={paddingBottom:n/i*r+"px"};return O.a.createElement("div",{className:"search-item-wrapper",style:{top:t,left:a,width:n?"".concat(n,"px"):""}},O.a.createElement("div",{className:"search-item",style:Xe({},m,{},u,{},h),onClick:()=>s(e)}))}}$e(et,"propTypes",{gfyItem:C.a.object,top:C.a.string,left:C.a.string,itemWidth:C.a.number,itemClickHandler:C.a.func,hasImageProxy:C.a.string});var tt=Object(n.connect)((function(e){return{hasImageProxy:e.entities.general.config.HasImageProxy}}))(et);a(1654);function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(Object(a),!0).forEach((function(t){st(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function st(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const it={saveSearchScrollPosition:ue.saveSearchScrollPosition},rt=Object(he.makeStyleFromTheme)(e=>({background:{backgroundColor:Object(he.changeOpacity)(e.centerChannelColor,.05)}}));class ot extends w.PureComponent{constructor(e){super(e),st(this,"setNumberOfColumns",()=>{window.matchMedia("(orientation: portrait)").matches,this.numberOfColumns=2}),st(this,"itemClickHandler",e=>{const{keyword:t,handleItemClick:a}=this.props;this.props.saveSearchScrollPosition(this.scrollPosition),Object(qe.d)("gfycat","shares",{gfyid:e.gfyId,keyword:t}),a(e)}),st(this,"minHeightColumnIndex",()=>this.columnsHeights.indexOf(Math.min(...this.columnsHeights))),st(this,"maxHeightColumnIndex",()=>this.columnsHeights.indexOf(Math.max(...this.columnsHeights))),st(this,"maxColumnHeight",()=>Math.max(...this.columnsHeights)),st(this,"resizeHandler",()=>{this.state.containerWidth!==this.container.offsetWidth-8&&(this.setNumberOfColumns(),this.setState(nt({},this.state,{containerWidth:this.container.offsetWidth-8})),this.columnsHeights=Array(this.numberOfColumns).fill(0))}),st(this,"scrollHandler",()=>{this.scrollPosition=window.scrollY}),this.state={containerWidth:null},this.scrollPosition=this.props.scrollPosition,this.setNumberOfColumns(),this.columnsHeights=Array(this.numberOfColumns).fill(0),this.padding=8}componentDidMount(){this.container=document.getElementById("search-grid-container"),this.setState(nt({},this.state,{containerWidth:this.container.offsetWidth-8})),window.addEventListener("resize",this.resizeHandler),window.addEventListener("scroll",this.scrollHandler)}componentDidUpdate(e){e.keyword!==this.props.keyword&&window.scrollTo(0,0)}componentWillUnmount(){const{keyword:e}=this.props;"trending"!==e&&this.props.saveSearchScrollPosition(this.scrollPosition),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("scroll",this.scrollHandler)}render(){const e=rt(this.props.theme),{containerClassName:t,gifs:a,keyword:n,resultsByTerm:s,scrollPosition:i,loadMore:r,onCategories:o}=this.props,{containerWidth:l}=this.state,{moreRemaining:c,items:d=[],isEmpty:m}=s[n]?s[n]:{},u=parseInt(l/this.numberOfColumns,10),h=Array(this.numberOfColumns).fill(0).map((e,t)=>this.padding+(t*u-t*(this.padding/2)));this.columnsHeights=Array(this.numberOfColumns).fill(this.padding);const p=l&&d.length?d.map((e,t)=>{const n=a[e],{gfyId:s}=n,i=this.minHeightColumnIndex(),r=this.columnsHeights[i]+"px",o=h[i]+"px",l=140/n.width*n.height+this.padding;return this.columnsHeights[i]+=l,O.a.createElement(tt,{gfyItem:n,top:r,left:o,itemWidth:140,itemClickHandler:this.itemClickHandler,key:"".concat(t,"-").concat(s)})}):null;this.containerHeight=this.maxColumnHeight();const g=p?O.a.createElement(Ge,{className:"search-grid-infinite-scroll",pageStart:0,loadMore:r,initialLoad:!1,hasMore:c,threshold:1,containerHeight:this.containerHeight,scrollPosition:i,useWindow:!1},p):null,b=m?O.a.createElement("div",{className:"empty-search"},O.a.createElement("div",{className:"empty-search-image"}),O.a.createElement("p",null,"0 Gifs found for ",O.a.createElement("strong",null,n)),O.a.createElement("a",{onClick:o},O.a.createElement("div",{className:"empty-search-button"},"Go to Reactions"))):null;return O.a.createElement("div",{id:"search-grid-container",className:"search-grid-container ".concat(t),style:e.background},g,b)}}st(ot,"propTypes",{appProps:C.a.object,gifs:C.a.object,resultsByTerm:C.a.object,containerClassName:C.a.string,keyword:C.a.string,handleItemClick:C.a.func,onCategories:C.a.func,loadMore:C.a.func,numberOfColumns:C.a.number,scrollPosition:C.a.number,saveSearchScrollPosition:C.a.func,theme:C.a.object.isRequired});var lt=Object(n.connect)((function(e){return nt({},e.entities.gifs.cache,{},e.entities.gifs.search,{theme:Object(d.getTheme)(e),appProps:e.entities.gifs.app})}),it)(ot);function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var mt=Object(n.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(a),!0).forEach((function(t){dt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.entities.gifs.cache,{},e.entities.gifs.search,{appProps:e.entities.gifs.app})}),(function(){return{saveSearchScrollPosition:ue.saveSearchScrollPosition}}))(lt);function ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ht(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const pt={searchGfycat:ue.searchGfycat,searchIfNeededInitial:ue.searchIfNeededInitial};class gt extends w.PureComponent{constructor(...e){super(...e),ht(this,"loadMore",()=>{const{searchText:e}=this.props;this.props.searchGfycat({searchText:e})})}componentDidMount(){const{searchText:e}=this.props;this.props.searchIfNeededInitial(e.split("-").join(" "))}componentDidUpdate(e){const{searchText:t}=this.props;e.searchText!==t&&this.props.searchIfNeededInitial(t.split("-").join(" "))}render(){const{handleItemClick:e,searchText:t,onCategories:a}=this.props;return O.a.createElement(mt,{keyword:t,handleItemClick:e,onCategories:a,loadMore:this.loadMore})}}ht(gt,"propTypes",{handleItemClick:C.a.func,onCategories:C.a.func,searchText:C.a.string,searchIfNeededInitial:C.a.func,searchGfycat:C.a.func});var bt=Object(n.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(a),!0).forEach((function(t){ht(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ut(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.entities.gifs.search)}),pt)(gt);function ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _t={searchCategory:ue.searchCategory,searchIfNeededInitial:ue.searchIfNeededInitial,saveSearchScrollPosition:ue.saveSearchScrollPosition};class Et extends w.PureComponent{constructor(...e){super(...e),ft(this,"loadMore",()=>{this.props.searchCategory({tagName:"trending"})})}componentDidMount(){this.props.searchIfNeededInitial("trending")}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const{handleItemClick:e,onCategories:t}=this.props;return O.a.createElement(mt,{keyword:"trending",handleItemClick:e,onCategories:t,loadMore:this.loadMore})}}ft(Et,"propTypes",{handleItemClick:C.a.func,onCategories:C.a.func,searchCategory:C.a.func,searchIfNeededInitial:C.a.func,saveSearchScrollPosition:C.a.func});var vt=Object(n.connect)(null,_t)(Et);function yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ct={appName:be.mattermost,basePath:"/mattermost",itemTapType:pe.SHARE,appClassName:"gfycat",shareEvent:"shareMattermost",appId:"mattermostwebviews",enableHistory:!0,header:{tabs:[ge.TRENDING,ge.REACTIONS],displayText:!1}};class wt extends O.a.PureComponent{constructor(e){super(e),yt(this,"handleTrending",()=>{this.setState({action:"trending"})}),yt(this,"handleCategories",()=>{this.setState({action:"reactions"})}),yt(this,"handleSearch",()=>{this.setState({action:"search"})}),yt(this,"handleItemClick",e=>{this.props.onGifClick(e.max5mbGif)});const t=e.defaultSearchText?"search":"trending";this.state={action:t}}render(){const{action:e}=this.state;let t;switch(e){case"reactions":t=O.a.createElement(Ze,{appProps:Ct,onTrending:this.handleTrending,onSearch:this.handleSearch});break;case"search":t=O.a.createElement(bt,{appProps:Ct,onCategories:this.handleCategories,handleItemClick:this.handleItemClick});break;case"trending":t=O.a.createElement(vt,{appProps:Ct,onCategories:this.handleCategories,handleItemClick:this.handleItemClick})}return O.a.createElement("div",null,O.a.createElement(Ue,{appProps:Ct,action:e,onTrending:this.handleTrending,onCategories:this.handleCategories,onSearch:this.handleSearch,defaultSearchText:this.props.defaultSearchText,handleSearchTextChange:this.props.handleSearchTextChange},t))}}yt(wt,"propTypes",{onGifClick:C.a.func.isRequired,defaultSearchText:C.a.string,handleSearchTextChange:C.a.func.isRequired});class Ot extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"img","aria-label":"Emoji icon"},O.a.createElement("path",{d:"M8 12.4C8.59733 12.4 9.17333 12.2773 9.728 12.032C10.2613 11.7973 10.7307 11.4667 11.136 11.04C11.552 10.6133 11.8667 10.1333 12.08 9.60001H3.92C4.13333 10.1333 4.44267 10.6133 4.848 11.04C5.264 11.4667 5.73867 11.7973 6.272 12.032C6.82667 12.2773 7.40267 12.4 8 12.4ZM5.2 7.20001C5.52 7.20001 5.79733 7.08267 6.032 6.84801C6.27733 6.60267 6.4 6.32001 6.4 6.00001C6.4 5.68001 6.27733 5.40267 6.032 5.16801C5.79733 4.92267 5.52 4.80001 5.2 4.80001C4.88 4.80001 4.59733 4.92267 4.352 5.16801C4.11733 5.40267 4 5.68001 4 6.00001C4 6.32001 4.11733 6.60267 4.352 6.84801C4.59733 7.08267 4.88 7.20001 5.2 7.20001ZM10.8 7.20001C11.12 7.20001 11.3973 7.08267 11.632 6.84801C11.8773 6.60267 12 6.32001 12 6.00001C12 5.68001 11.8773 5.40267 11.632 5.16801C11.3973 4.92267 11.12 4.80001 10.8 4.80001C10.48 4.80001 10.1973 4.92267 9.952 5.16801C9.71733 5.40267 9.6 5.68001 9.6 6.00001C9.6 6.32001 9.71733 6.60267 9.952 6.84801C10.1973 7.08267 10.48 7.20001 10.8 7.20001ZM8 14.4C6.848 14.4 5.776 14.1067 4.784 13.52C3.81333 12.9547 3.04533 12.1867 2.48 11.216C1.89333 10.224 1.6 9.15201 1.6 8.00001C1.6 6.84801 1.89333 5.77601 2.48 4.78401C3.04533 3.81334 3.81333 3.04534 4.784 2.48001C5.776 1.89334 6.848 1.60001 8 1.60001C9.152 1.60001 10.224 1.89334 11.216 2.48001C12.1867 3.04534 12.9547 3.81334 13.52 4.78401C14.1067 5.77601 14.4 6.84801 14.4 8.00001C14.4 9.15201 14.1067 10.224 13.52 11.216C12.9547 12.1867 12.1867 12.9547 11.216 13.52C10.224 14.1067 9.152 14.4 8 14.4ZM8 5.72205e-06C6.56 5.72205e-06 5.216 0.368006 3.968 1.10401C2.76267 1.80801 1.808 2.76267 1.104 3.96801C0.368 5.21601 0 6.56001 0 8.00001C0 9.44001 0.368 10.784 1.104 12.032C1.808 13.2373 2.76267 14.192 3.968 14.896C5.216 15.632 6.56 16 8 16C9.44 16 10.784 15.632 12.032 14.896C13.2373 14.192 14.192 13.2373 14.896 12.032C15.632 10.784 16 9.44001 16 8.00001C16 6.56001 15.632 5.21601 14.896 3.96801C14.192 2.76267 13.2373 1.80801 12.032 1.10401C10.784 0.368006 9.44 5.72205e-06 8 5.72205e-06Z"})))}}class Tt extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{width:"22px",height:"14px",viewBox:"0 0 22 14"},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-1344.000000, -552.000000)",fill:"inherit"},O.a.createElement("g",{transform:"translate(1147.000000, 542.000000)"},O.a.createElement("g",{transform:"translate(1.000000, 1.000000)"},O.a.createElement("g",{transform:"translate(138.000000, 0.000000)"},O.a.createElement("path",{d:"M63.6748519,23 L62.2292481,23 C61.8176589,23 61.4619872,22.8510143 61.1631497,22.5539741 C60.8633954,22.2569338 60.71306,21.8993681 60.71306,21.4831393 C60.71306,21.0678417 60.8597287,20.710276 61.1539829,20.4132358 C61.4473204,20.1161955 61.800242,19.9672098 62.2118312,19.9672098 L63.6565183,19.9672098 C64.0681075,19.9672098 64.4182791,19.8219488 64.7061166,19.5304955 C64.993954,19.2390422 65.1378727,18.8917193 65.1378727,18.4866644 L65.1378727,15.4371134 C65.1378727,15.0208846 64.993954,14.6670436 64.7061166,14.3755903 C64.4182791,14.084137 64.0745243,13.938876 63.6748519,13.938876 C63.2632628,13.938876 62.9103411,14.0869305 62.6170036,14.3849019 C62.3227494,14.6819421 62.1760807,15.0329897 62.1760807,15.4371134 C62.1760807,15.7294978 62.3016658,16.0563352 62.5519193,16.4185567 L62.575753,16.4530096 C62.8269232,16.8143 62.9515917,17.1420685 62.9515917,17.4344529 C62.9515917,17.8506817 62.8049229,18.2073163 62.5115854,18.5043565 C62.2173313,18.8023279 61.8653263,18.9503824 61.4537371,18.9503824 C60.7836443,18.9503824 60.2198863,18.5164616 59.7615465,17.6486199 C59.373791,16.9232458 59.1794549,16.1857665 59.1794549,15.4371134 C59.1794549,14.188427 59.6176278,13.1213169 60.4930568,12.234852 C61.3684859,11.3493183 62.4226675,10.9060858 63.6565183,10.9060858 C64.8912858,10.9060858 65.9482175,11.3493183 66.8300633,12.234852 C67.7109925,13.1213169 68.1519154,14.188427 68.1519154,15.4371134 L68.1519154,18.4866644 C68.1519154,19.7353508 67.7137425,20.7996674 66.8383134,21.6796142 C65.9628844,22.559561 64.9087028,23 63.6748519,23 Z M80,15.9269039 C80,16.3068174 79.8689148,16.6317925 79.6076611,16.9027602 C79.3454907,17.173728 79.0319863,17.3096774 78.6653144,17.3096774 L76.8438719,17.3096774 L76.8438719,18.6589292 C76.8438719,19.0388427 76.7127867,19.3638178 76.4506164,19.6347855 C76.1893627,19.9057532 75.8749415,20.0417027 75.5082697,20.0417027 C75.1315143,20.0417027 74.8125098,19.9057532 74.5503394,19.6347855 C74.2890857,19.3638178 74.1580005,19.0388427 74.1580005,18.6589292 L74.1580005,13.1464583 C74.1580005,12.00858 74.5485061,11.0355171 75.3276838,10.2272697 C76.1077782,9.41995344 77.0473748,9.01582973 78.1473904,9.01582973 L78.6653144,9.01582973 C79.0319863,9.01582973 79.3454907,9.15177918 79.6076611,9.42274692 C79.8689148,9.69371467 80,10.0186897 80,10.3986033 C80,10.7775856 79.8689148,11.1034919 79.6076611,11.3744596 C79.3454907,11.6454273 79.0319863,11.7804456 78.6653144,11.7804456 L78.162974,11.7804456 C77.7963021,11.7804456 77.481881,11.9163951 77.2206273,12.1873628 C76.9584569,12.4583306 76.8282884,12.7777187 76.8282884,13.1464583 L76.8282884,14.5450615 L78.6653144,14.5450615 C79.0319863,14.5450615 79.3454907,14.681011 79.6076611,14.9519787 C79.8689148,15.2229465 80,15.5479215 80,15.9269039 Z M72.6344789,18.6589292 C72.6344789,19.0388427 72.5043104,19.3638178 72.24214,19.6347855 C71.9808863,19.9057532 71.6664652,20.0417027 71.2997933,20.0417027 C70.9340382,20.0417027 70.616867,19.9057532 70.3501132,19.6347855 C70.0833594,19.3638178 69.9495242,19.0388427 69.9495242,18.6589292 L69.9495242,14.170735 C69.9495242,13.7917526 70.0806094,13.4667775 70.3418631,13.1958098 C70.6040335,12.9239109 70.9175379,12.7888926 71.2842098,12.7888926 C71.6508817,12.7888926 71.9671361,12.9239109 72.2348066,13.1958098 C72.5015604,13.4667775 72.6344789,13.7917526 72.6344789,14.170735 L72.6344789,18.6589292 Z M58.3370263,12.5356169 C58.1023563,11.7441304 58.0042716,10.9163286 58.0042716,10.9163286 C57.9721878,10.6937812 58.1243566,10.547589 58.3425264,10.5904223 C58.3425264,10.5904223 58.5350291,10.6267376 58.8017829,10.6807449 C59.0767868,10.7375457 59.4324585,10.8139009 59.7404628,10.8921184 C60.3473048,11.0448287 60.95323,11.2720319 60.95323,11.2720319 C60.95323,11.2720319 60.2904706,11.6621882 59.7239626,12.3018956 C59.1565379,12.9406718 58.8650338,13.8420353 58.8650338,13.8420353 C58.8650338,13.8420353 58.5716963,13.3280346 58.3370263,12.5356169 Z M69.088762,12.5356169 C69.323432,11.7441304 69.4224334,10.9163286 69.4224334,10.9163286 C69.4536005,10.6937812 69.3014317,10.547589 69.0832619,10.5904223 C69.0832619,10.5904223 68.2921674,10.7384769 67.6853254,10.8921184 C67.0794002,11.0448287 66.4725583,11.2720319 66.4725583,11.2720319 C66.4725583,11.2720319 67.1353177,11.6621882 67.7027424,12.3018956 C68.2692504,12.9406718 68.5616712,13.8420353 68.5616712,13.8420353 C68.5616712,13.8420353 68.8550087,13.3280346 69.088762,12.5356169 Z M72.6344789,10.3818424 C72.6344789,10.7617559 72.5043104,11.086731 72.24214,11.3576987 C71.9808863,11.6286664 71.6664652,11.7646159 71.2997933,11.7646159 C70.9340382,11.7646159 70.616867,11.6286664 70.3501132,11.3576987 C70.0833594,11.086731 69.9495242,10.7617559 69.9495242,10.3818424 C69.9495242,10.00286 70.0806094,9.67788494 70.3418631,9.40691719 C70.6040335,9.13594945 70.9175379,9 71.2842098,9 C71.6508817,9 71.9671361,9.13594945 72.2348066,9.40691719 C72.5015604,9.67788494 72.6344789,10.00286 72.6344789,10.3818424 Z"}))))))))}}class St extends O.a.PureComponent{render(){return O.a.createElement("div",{className:"emoji-picker__header modal-header"},O.a.createElement("button",{type:"button",className:"close emoji-picker__header-close-button",onClick:this.props.handleEmojiPickerClose},O.a.createElement("span",{"aria-hidden":"true"},"×"),O.a.createElement("span",{className:"sr-only"},O.a.createElement(ee.a,{id:"emoji_picker.close",defaultMessage:"Close"}))),O.a.createElement("h4",{className:"modal-title emoji-picker__header-title"},O.a.createElement(ee.a,{id:"emoji_picker.header",defaultMessage:"Emoji Picker"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(St,"propTypes",{handleEmojiPickerClose:C.a.func.isRequired});var Pt=a(143),Mt=a(234),Nt=a(90),It=(a(1257),a(118),a(1418)),jt=a.n(It),At=a(52);a(104);const Rt=(e,t,a,n)=>a&&n&&"custom"===a.category&&"custom"!==n.category?1:n&&a&&"custom"===n.category&&"custom"!==a.category?-1:e.localeCompare(t),kt=e=>"thumbsup"===e||"+1"===e?1:0,Lt=e=>"thumbsdown"===e||"-1"===e?-1:0,Dt={thumbsdown:kt,"-1":kt,thumbsup:Lt,"+1":Lt},xt=(e,t)=>e&&(e.name||e.aliases)?t?e.name||e.aliases.find(e=>e.startsWith(t))||e.aliases[0]:e.name||e.aliases[0]:"";function Ut(e,t,a){const n=xt(e,a),s=xt(t,a),i=n.startsWith(a);return i===s.startsWith(a)?Dt[n]&&Dt[n](s,t)||Rt(n,s,e,t):i?-1:1}var qt=a(1322),Ht=a.n(qt);function Ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Bt extends O.a.Component{constructor(...e){super(...e),Ft(this,"handleClick",e=>{e.preventDefault(),this.props.onCategoryClick(this.props.category)})}shouldComponentUpdate(e){return e.selected!==this.props.selected||e.enable!==this.props.enable}render(){let e="emoji-picker__category";return this.props.selected&&(e+=" emoji-picker__category--selected"),this.props.enable||(e+=" disable"),O.a.createElement("a",{className:e,href:"#",onClick:this.handleClick,"aria-label":this.props.category},this.props.icon)}}Ft(Bt,"propTypes",{category:C.a.string.isRequired,icon:C.a.node.isRequired,onCategoryClick:C.a.func.isRequired,selected:C.a.bool.isRequired,enable:C.a.bool.isRequired});var Gt=a(1200),Vt=a.n(Gt),Wt=a(322);function zt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kt extends O.a.Component{constructor(...e){super(...e),zt(this,"emojiItemRef",e=>{this.emojiItem=e}),zt(this,"emojiName",()=>{const{formatMessage:e}=this.props.intl;return e({id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji"},{emojiName:this.props.emoji.aliases[0].replace(/_/g," ")})}),zt(this,"handleMouseOver",()=>{this.props.isSelected||this.props.onItemOver(this.props.categoryIndex,this.props.emojiIndex)}),zt(this,"handleMouseOverThrottle",Vt()(this.handleMouseOver,150,{leading:!0,trailing:!0})),zt(this,"handleClick",()=>{this.props.onItemClick(this.props.emoji)})}shouldComponentUpdate(e){return e.isSelected!==this.props.isSelected}componentDidUpdate(e){if(!e.isSelected&&this.props.isSelected){const e=this.emojiItem.offsetTop,t=e+this.emojiItem.offsetHeight,{containerRef:a,containerTop:n,containerBottom:s}=this.props;e<n?a.scrollTop=e-10:t>s&&(a.scrollTop=t-a.offsetHeight+10)}}render(){const{emoji:e}=this.props;let t="emoji-picker__item";this.props.isSelected&&(t+=" selected");let a,n="emojisprite";return n+=" emoji-category-"+e.category+"-"+e.batch,n+=" emoji-"+e.filename,a=e.category&&e.batch?O.a.createElement("img",{alt:"emoji image","data-testid":e.aliases,onMouseOver:this.handleMouseOverThrottle,src:Ht.a,className:n,onClick:this.handleClick,id:"emoji-"+e.filename,"aria-label":this.emojiName(),role:"button"}):O.a.createElement("img",{alt:"custom emoji image",onMouseOver:this.handleMouseOver,src:Object(Wt.getEmojiImageUrl)(e),className:"emoji-category--custom",onClick:this.handleClick}),O.a.createElement("div",{className:t,ref:this.emojiItemRef},O.a.createElement("div",{"data-testid":"emojiItem"},a))}}zt(Kt,"propTypes",{emoji:C.a.object.isRequired,onItemOver:C.a.func.isRequired,onItemClick:C.a.func.isRequired,category:C.a.string.isRequired,isSelected:C.a.bool,categoryIndex:C.a.number.isRequired,emojiIndex:C.a.number.isRequired,containerRef:C.a.any,containerTop:C.a.number.isRequired,containerBottom:C.a.number.isRequired,intl:ne.a.isRequired});var Yt=Object(te.c)(Kt);function Qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zt extends O.a.PureComponent{constructor(...e){super(...e),Qt(this,"divRef",e=>{this.div=e})}componentDidMount(){this.updateOffsetFrame=window.requestAnimationFrame(()=>{this.props.updateCategoryOffset(this.props.categoryName,this.div.offsetTop)})}componentWillUnmount(){this.updateOffsetFrame&&window.cancelAnimationFrame(this.updateOffsetFrame)}render(){return O.a.createElement("div",{ref:this.divRef},O.a.createElement("div",{className:"emoji-picker-items__container"},O.a.createElement("div",{className:"emoji-picker__category-header",id:"emojipickercat-".concat(this.props.categoryName)},O.a.createElement(ee.a,{id:"emoji_picker."+this.props.categoryName}))),O.a.createElement("div",{className:"emoji-picker-items__container"},this.props.children))}}Qt(Zt,"propTypes",{categoryName:C.a.string.isRequired,children:C.a.any,updateCategoryOffset:C.a.func.isRequired});class Jt extends O.a.PureComponent{render(){const e=this.props.emoji;if(e){let t,a,n;return e.aliases&&e.category&&e.batch?(t=e.aliases[0],a=e.aliases,n=O.a.createElement("span",{className:"sprite-preview"},O.a.createElement("img",{id:"emojiPickerSpritePreview",alt:"emoji category image",src:Ht.a,className:"emojisprite-preview emoji-category-"+e.category+"-"+e.batch+" emoji-"+e.filename}))):(t=e.name,a=[e.name],n=O.a.createElement("img",{id:"emojiPickerSpritePreview",alt:"emoji preview image",className:"emoji-picker__preview-image",src:Object(Wt.getEmojiImageUrl)(e)})),O.a.createElement("div",{className:"emoji-picker__preview"},O.a.createElement("div",{className:"emoji-picker__preview-image-box"},n),O.a.createElement("div",{className:"emoji-picker__preview-image-label-box"},O.a.createElement("span",{className:"emoji-picker__preview-name"},t),O.a.createElement("span",{id:"emojiPickerAliasesPreview",className:"emoji-picker__preview-aliases"},":"+a[0]+":")))}return O.a.createElement("div",{className:"emoji-picker__preview emoji-picker__preview-placeholder"},O.a.createElement(ee.a,{id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}))}}function Xt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(a),!0).forEach((function(t){ea(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Jt,"propTypes",{emoji:C.a.object});Object(ve.b)("emoji_picker.searchResults");const ta={recent:{name:"recent",className:"fa fa-clock-o",id:Object(ve.b)("emoji_picker.recent"),message:"Recently Used",offset:0}},aa={people:{name:"people",className:"fa fa-smile-o",id:Object(ve.b)("emoji_picker.people"),message:"People",offset:0}},na=$t({},aa,{nature:{name:"nature",className:"fa fa-leaf",id:Object(ve.b)("emoji_picker.nature"),message:"Nature",offset:0},foods:{name:"foods",className:"fa fa-cutlery",id:Object(ve.b)("emoji_picker.foods"),message:"Foods",offset:0},activity:{name:"activity",className:"fa fa-futbol-o",id:Object(ve.b)("emoji_picker.activity"),message:"Activity",offset:0},places:{name:"places",className:"fa fa-plane",id:Object(ve.b)("emoji_picker.places"),message:"Places",offset:0},objects:{name:"objects",className:"fa fa-lightbulb-o",id:Object(ve.b)("emoji_picker.objects"),message:"Objects",offset:0},symbols:{name:"symbols",className:"fa fa-heart-o",id:Object(ve.b)("emoji_picker.symbols"),message:"Symbols",offset:0},flags:{name:"flags",className:"fa fa-flag-o",id:Object(ve.b)("emoji_picker.flags"),message:"Flags",offset:0},custom:{name:"custom",className:"fa fa-at",id:Object(ve.b)("emoji_picker.custom"),message:"Custom",offset:0}});function sa(e){return e.filename||e.id}class ia extends O.a.PureComponent{static getEmojis(e,t){const{categories:a,allEmojis:n}=t,s=e.emojiMap,i=s.customEmojis;for(const t of Object.keys(a)){let r=[];if("recent"===t&&e.recentEmojis.length){r=[...e.recentEmojis].reverse().filter(e=>s.has(e)).map(e=>s.get(e))}else{r=(At.b.get(t)||[]).map(e=>At.d[e]),"custom"===t&&(r=r.concat([...i.values()]))}a[t].emojiIds=r.map(e=>sa(e));for(let e=0;e<r.length;e++){const t=r[e],a=sa(t);n[a]=$t({},t,{visible:!1,offset:null}),t.filename||(n[a]=$t({},n[a],{aliases:[t.name],category:"custom",filename:a}))}}return{categories:a,allEmojis:n}}static getDerivedStateFromProps(e,t){let a={emojiMap:e.emojiMap};if(JSON.stringify(Object.keys(t.categories))!==t.categoryKeys||e.emojiMap!==t.emojiMap){const{categories:n,allEmojis:s}=ia.getEmojis(e,t);a=$t({},a,{categories:n,allEmojis:s,categoryKeys:JSON.stringify(Object.keys(n))})}return a}constructor(e){super(e),ea(this,"renderAllCategories",()=>{const e=this.props.recentEmojis.length?$t({},ta,{},na):na;this.setState(t=>({categories:$t({},e,{},t.categories),renderAllCategories:!0}))}),ea(this,"loadMoreCustomEmojis",async()=>{if(!this.props.customEmojisEnabled||this.loadingMoreEmojis)return;this.loadingMoreEmojis=!0;const{data:e}=await this.props.actions.getCustomEmojis(this.props.customEmojiPage,200);if(e){if(e.length<200)return this.missingPages=!1,void(this.loadingMoreEmojis=!1);await this.props.actions.incrementEmojiPickerPage(),this.loadingMoreEmojis=!1}else this.loadingMoreEmojis=!1}),ea(this,"lastVisibleEmojiRef",e=>{this.lastVisibleEmoji=e}),ea(this,"emojiPickerContainerRef",e=>{this.emojiPickerContainer=e}),ea(this,"emojiSearchInput",e=>{this.searchInput=e}),ea(this,"handleCategoryClick",e=>{this.setState({cursor:[Object.keys(this.state.categories).indexOf(e),0]}),this.updateEmojisToShow(this.state.categories[e].offset),this.emojiPickerContainer.scrollTop=this.state.categories[e].offset,this.searchInput.focus()}),ea(this,"handleFilterChange",e=>{e.preventDefault();const t=e.target.value.toLowerCase().replace(/^:|:$/g,"");this.props.customEmojisEnabled&&t&&""!==t.trim()&&this.props.actions.searchCustomEmojis(t),this.props.handleFilterChange(t),this.setState(()=>({cursor:[-1,-1]}))}),ea(this,"handleItemOver",(e,t)=>{this.setState({cursor:[e,t]})}),ea(this,"handleItemClick",e=>{this.props.onEmojiClick(e)}),ea(this,"handleCategoryKeyDown",e=>{switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji(),this.searchInput.focus();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji(),this.searchInput.focus();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(9),this.searchInput.focus();break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(9),this.searchInput.focus()}}),ea(this,"handleKeyDown",e=>{switch(e.key){case"ArrowRight":(-1!==this.state.cursor[0]||-1!==this.state.cursor[1]||e.target.selectionStart+1>this.props.filter.length)&&(e.preventDefault(),this.selectNextEmoji());break;case"ArrowLeft":this.state.cursor[0]>0||this.state.cursor[1]>0?(e.preventDefault(),this.selectPrevEmoji()):0===this.state.cursor[0]&&0===this.state.cursor[1]&&(this.setState({cursor:[-1,-1]}),e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length,e.preventDefault(),this.searchInput.focus());break;case"ArrowUp":e.preventDefault(),e.shiftKey?e.target.selectionStart=0:-1===this.state.cursor[0]?(e.target.selectionStart=0,e.target.selectionEnd=0):0===this.state.cursor[0]&&this.state.cursor[1]<9?(this.setState({cursor:[-1,-1]}),e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length,this.searchInput.focus()):this.selectPrevEmoji(9);break;case"ArrowDown":e.preventDefault(),e.shiftKey?e.target.selectionEnd=this.props.filter.length:this.props.filter&&0===e.target.selectionStart?(e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length):this.selectNextEmoji(9);break;case"Enter":e.preventDefault(),this.getCurrentEmojiByCursor(this.state.cursor)&&this.props.onEmojiClick(this.getCurrentEmojiByCursor(this.state.cursor))}}),ea(this,"handleScroll",()=>{this.emojiPickerContainer&&this.updateEmojisToShow(this.emojiPickerContainer.scrollTop)}),ea(this,"emojiCurrentResultsItems",(e,t,a)=>{const{cursor:n,emojisToShow:s}=this.state;let i=a;return t.map((t,a)=>{let r;return i++,i===s&&(r=this.lastVisibleEmojiRef),i>=s?O.a.createElement("div",{key:i,className:"emoji-picker__item",ref:r},O.a.createElement("img",{alt:"emoji image",src:Ht.a,className:"emojisprite"})):O.a.createElement(Yt,{key:t.filename+":"+a,emoji:t,onItemOver:this.handleItemOver,onItemClick:this.handleItemClick,onItemUnmount:t,category:t.category,isSelected:n[0]===e&&n[1]===a,categoryIndex:e,emojiIndex:a,containerRef:this.emojiPickerContainer,containerTop:this.state.divTopOffset,containerBottom:this.state.divTopOffset+this.divHeight})})}),ea(this,"updateCategoryOffset",(e,t)=>{"searchResults"!==e&&this.setState(a=>({categories:$t({},a.categories,{[e]:$t({},a.categories[e],{offset:t})})}))}),this.handleScrollThrottle=jt()(this.handleScroll,100,{leading:!1,trailing:!0}),this.divHeight=0,this.missingPages=!0,this.loadingMoreEmojis=!1;const t=e.recentEmojis.length?$t({},ta,{},aa):aa;this.state={allEmojis:{},categories:t,cursor:[-1,-1],divTopOffset:0,emojisToShow:1476,renderAllCategories:!1}}componentDidMount(){0===this.props.customEmojiPage&&this.loadMoreCustomEmojis(),window.requestAnimationFrame(()=>{this.searchInput&&this.searchInput.focus(),this.renderAllCategoriesFrame=window.requestAnimationFrame(()=>{this.renderAllCategories()})}),this.emojiPickerContainer&&(this.divHeight=this.emojiPickerContainer.offsetHeight);const e=document.getElementById("root");e&&e.classList.add("emoji-picker--active")}updateEmojisToShow(e){if(e!==this.state.divTopOffset&&(this.setState({divTopOffset:e}),this.lastVisibleEmoji)){const t=this.lastVisibleEmoji.offsetTop-(e+290+75);if(t<=0){const e=135+Math.ceil(t/27*9*-1);this.setState(t=>({emojisToShow:t.emojisToShow+e}))}}}componentWillUnmount(){this.renderAllCategoriesFrame&&window.cancelAnimationFrame(this.renderAllCategoriesFrame);const e=document.getElementById("root");e&&e.classList.remove("emoji-picker--active")}componentDidUpdate(e){if(this.props.visible&&!e.visible&&this.searchInput.focus(),!this.missingPages||!this.emojiPickerContainer)return;this.emojiPickerContainer.scrollHeight-this.state.divTopOffset-this.emojiPickerContainer.clientHeight<=500&&this.loadMoreCustomEmojis()}selectNextEmoji(e=1){const{cursor:t}=this.state;let a=[t[0],t[1]+e];this.getCurrentEmojiByCursor(a)?this.setState({cursor:a}):(a=[t[0]+1,0],this.getCurrentEmojiByCursor(a)&&this.setState({cursor:a}))}selectPrevEmoji(e=1){const{cursor:t}=this.state;let a=[t[0],t[1]-e];if(this.getCurrentEmojiByCursor(a))this.setState({cursor:a});else if(0!==t[0]){const e=this.getCategoryByIndex(t[0]-1),n=this.state.categories[e.name].emojiIds.length-1;a=[t[0]-1,n],this.getCurrentEmojiByCursor(a)&&this.setState({cursor:a})}}getCategoryByIndex(e){return this.props.filter&&0!==e?null:this.getCategoriesByKey(Object.keys(this.state.categories)[e])}getCurrentEmojiByCursor(e){const t=this.getCategoryByIndex(e[0]);return t?this.getEmojisByCategory(t)[e[1]]:null}getCategoriesByKey(e){return this.props.filter?{id:"searchResults",name:"searchResults"}:this.state.categories[e]}sortEmojis(e){const{recentEmojis:t}=this.props,a=[],n=[];Object.values(e).forEach(e=>{let s=n;for(let n=0;n<e.aliases.length;n++)t.includes(e.aliases[n].toLowerCase())&&(s=a);s.push(e)});const s=(e,t)=>Ut(e,t,this.props.filter);return a.sort(s),n.sort(s),[...a,...n]}getEmojisByCategory(e){if(this.props.filter){const e=Object.values(this.state.allEmojis).filter(e=>{for(let t=0;t<e.aliases.length;t++)if(e.aliases[t].toLowerCase().includes(this.props.filter))return!0;return!1});return this.sortEmojis(e)}return this.state.categories[e.name].emojiIds.map(e=>this.state.allEmojis[e])}getCurrentEmojiName(){const e=this.getCurrentEmojiByCursor(this.state.cursor);return e?e.aliases[0].replace(/_/g," "):""}getCurrentEmojiCategoryName(){const e=Object.keys(this.state.categories);let t=e[0];for(let a=e.length-1;a>=0;a--){const n=this.state.categories[e[a]];if(n.offset&&this.state.divTopOffset>n.offset-20){t=e[a];break}}return t}emojiCategories(){const e=this.props.recentEmojis.length?$t({},ta,{},na):na,t=Object.keys(e),a=this.props.filter?t[0]:this.getCurrentEmojiCategoryName(),n=t.map(t=>{const n=e[t];return O.a.createElement(Bt,{key:"header-"+n.name,category:n.name,icon:O.a.createElement(ee.a,{id:n.id,defaultMessage:n.message},e=>O.a.createElement("i",{className:n.className,title:e})),onCategoryClick:this.handleCategoryClick,selected:a===n.name,enable:!this.props.filter})});return O.a.createElement("div",{id:"emojiPickerCategories",className:"emoji-picker__categories",onKeyDown:this.handleCategoryKeyDown},n)}emojiSearch(){return O.a.createElement("div",{className:"emoji-picker__search-container"},O.a.createElement("span",{className:"fa fa-search emoji-picker__search-icon"}),O.a.createElement(ee.a,{id:"emoji_picker.search_emoji",defaultMessage:"Search for an emoji"},e=>O.a.createElement(Ee.a,{id:"emojiPickerSearch","aria-label":e,ref:this.emojiSearchInput,className:"emoji-picker__search","data-testid":"emojiInputSearch",type:"text",onChange:this.handleFilterChange,onKeyDown:this.handleKeyDown,autocomplete:"off",placeholder:{id:Object(ve.b)("emoji_picker.search"),defaultMessage:"Search Emoji"},value:this.props.filter})))}emojiCurrentResults(){const{filter:e}=this.props,t=e?["searchResults"]:Object.keys(this.state.categories);let a=0,n=[];for(let e=0;e<t.length;e++){const s=this.getCategoriesByKey(t[e]),i=this.getEmojisByCategory(s),r=this.emojiCurrentResultsItems(e,i,a);a+=r.length,n=[...n,O.a.createElement(Zt,{key:s.id,categoryName:s.name,updateCategoryOffset:this.updateCategoryOffset,role:"application"},r)]}return O.a.createElement("div",{ref:this.emojiPickerContainerRef,onScroll:this.handleScrollThrottle,className:"emoji-picker__items",style:{overflowY:this.state.renderAllCategories?"auto":"hidden"}},O.a.createElement("div",{className:"emoji-picker__container"},n))}render(){return O.a.createElement("div",{className:"emoji-picker__inner",role:"application"},O.a.createElement("div",{"aria-live":"assertive",className:"sr-only"},O.a.createElement(ee.a,{id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji",values:{emojiName:this.getCurrentEmojiName()}})),this.emojiSearch(),this.emojiCategories(),this.emojiCurrentResults(),O.a.createElement(Jt,{emoji:this.getCurrentEmojiByCursor(this.state.cursor)}))}}ea(ia,"propTypes",{listHeight:C.a.number,onEmojiClose:C.a.func.isRequired,onEmojiClick:C.a.func.isRequired,customEmojisEnabled:C.a.bool,emojiMap:C.a.object.isRequired,recentEmojis:C.a.array.isRequired,customEmojiPage:C.a.number.isRequired,visible:C.a.bool,actions:C.a.shape({getCustomEmojis:C.a.func.isRequired,searchCustomEmojis:C.a.func.isRequired,incrementEmojiPickerPage:C.a.func.isRequired}).isRequired,filter:C.a.string.isRequired,handleFilterChange:C.a.func.isRequired}),ea(ia,"defaultProps",{listHeight:245,customEmojiPage:0,customEmojisEnabled:!1});var ra=Object(n.connect)((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Object(Nt.a)(e),recentEmojis:Object(Nt.b)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({getCustomEmojis:Pt.getCustomEmojis,searchCustomEmojis:Pt.searchCustomEmojis,incrementEmojiPickerPage:Mt.b},e)}}))(ia);function oa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function la(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ca extends w.PureComponent{constructor(e){super(e),la(this,"handleEnterEmojiTab",()=>{this.setState({emojiTabVisible:!0})}),la(this,"handleExitEmojiTab",()=>{this.setState({emojiTabVisible:!1})}),la(this,"handleEmojiPickerClose",()=>{this.props.onEmojiClose()}),la(this,"handleFilterChange",e=>{this.setState({filter:e})}),this.state={emojiTabVisible:!0,filter:""}}render(){let e;!this.props.style||0===this.props.style.left&&0===this.props.style.top||(e="top"===this.props.placement||"bottom"===this.props.placement?{top:this.props.style.top,bottom:this.props.style.bottom,right:this.props.rightOffset}:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(a),!0).forEach((function(t){la(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.style),e.top&&(e.top+=this.props.topOffset));let t="emoji-picker";return"bottom"===this.props.placement&&(t+=" bottom"),this.props.enableGifPicker&&void 0!==this.props.onGifClick?O.a.createElement(de.a,{defaultActiveKey:1,id:"emoji-picker-tabs",style:e,className:t,justified:!0},O.a.createElement(St,{handleEmojiPickerClose:this.handleEmojiPickerClose}),O.a.createElement(me.a,{eventKey:1,onEnter:this.handleEnterEmojiTab,onExit:this.handleExitEmojiTab,title:O.a.createElement(Ot,null)},O.a.createElement(ra,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis,visible:this.state.emojiTabVisible,filter:this.state.filter,handleFilterChange:this.handleFilterChange})),O.a.createElement(me.a,{eventKey:2,title:O.a.createElement(Tt,null),mountOnEnter:!0,unmountOnExit:!0},O.a.createElement(wt,{onGifClick:this.props.onGifClick,defaultSearchText:this.state.filter,handleSearchTextChange:this.handleFilterChange}))):O.a.createElement("div",{id:"emojiPicker",style:e,className:"a11y__popup ".concat(t," emoji-picker--single")},O.a.createElement(St,{handleEmojiPickerClose:this.handleEmojiPickerClose}),O.a.createElement(ra,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis,filter:this.state.filter,handleFilterChange:this.handleFilterChange}))}}function da(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}la(ca,"propTypes",{style:C.a.object,rightOffset:C.a.number,topOffset:C.a.number,placement:C.a.oneOf(["top","bottom","left"]),customEmojis:C.a.object,onEmojiClose:C.a.func.isRequired,onEmojiClick:C.a.func.isRequired,onGifClick:C.a.func,enableGifPicker:C.a.bool}),la(ca,"defaultProps",{rightOffset:0,topOffset:0});class ma extends O.a.PureComponent{constructor(e){super(e),this.state={}}static emojiPickerPosition(e){const t=e.target();let a=N.j.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET;return t&&(a=window.innerWidth-t.getBoundingClientRect().left-N.j.DEFAULT_EMOJI_PICKER_LEFT_OFFSET,a<N.j.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET&&(a=N.j.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET)),a}static getPlacement(e){const t=e.target();if(t){const a=t.getBoundingClientRect();return Object(ce.a)(a,window.innerHeight,e.spaceRequiredAbove,e.spaceRequiredBelow)}return"top"}static getDerivedStateFromProps(e){return{placement:ma.getPlacement(e),rightOffset:ma.emojiPickerPosition(e)}}render(){return O.a.createElement(le.a,{show:this.props.show,placement:this.state.placement,rootClose:!0,container:this.props.container,onHide:this.props.onHide,target:this.props.target,animation:!1},O.a.createElement(ca,{enableGifPicker:this.props.enableGifPicker,onEmojiClose:this.props.onHide,onEmojiClick:this.props.onEmojiClick,onGifClick:this.props.onGifClick,rightOffset:this.state.rightOffset,topOffset:this.props.topOffset}))}}da(ma,"CENTER_SPACE_REQUIRED_ABOVE",476),da(ma,"CENTER_SPACE_REQUIRED_BELOW",497),da(ma,"RHS_SPACE_REQUIRED_ABOVE",420),da(ma,"RHS_SPACE_REQUIRED_BELOW",420),da(ma,"propTypes",{show:C.a.bool.isRequired,container:C.a.func,target:C.a.func.isRequired,onEmojiClick:C.a.func.isRequired,onGifClick:C.a.func,onHide:C.a.func.isRequired,topOffset:C.a.number,spaceRequiredAbove:C.a.number,spaceRequiredBelow:C.a.number,enableGifPicker:C.a.bool}),da(ma,"defaultProps",{spaceRequiredAbove:ma.CENTER_SPACE_REQUIRED_ABOVE,spaceRequiredBelow:ma.CENTER_SPACE_REQUIRED_BELOW,enableGifPicker:!1});var ua=a(1171);function ha(e,t,a){return async(n,s)=>{const i=s();return{data:Object(ua.searchAssociatedGroupsForReferenceLocal)(i,e,t,a)}}}var pa=a(1156),ga=a(1420),ba=a(23),fa=a(1320),_a=a(2),Ea=a.n(_a);function va(e,t){return t.type===N.Q.PRIVATE_CHANNEL?Object(U.haveIChannelPermission)(e,{channel:t.id,team:t.team_id,permission:Ea.a.MANAGE_PRIVATE_CHANNEL_MEMBERS}):t.type!==N.Q.OPEN_CHANNEL||Object(U.haveIChannelPermission)(e,{channel:t.id,team:t.team_id,permission:Ea.a.MANAGE_PUBLIC_CHANNEL_MEMBERS})}function ya(e,t,a,n){const s=t.indexOf(e);for(let e=1;e<t.length;e++){const i=j.mb(s+e*n,t.length);if(a.includes(t[i]))return i}return-1}function Ca(e){return Boolean(e&&0!==e.delete_at)}var wa=a(1155);function Oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ta={[x.Posts.POST_TYPES.ADD_TO_CHANNEL]:{id:Object(ve.b)("last_users_message.added_to_channel.type"),defaultMessage:"were **added to the channel** by {actor}."},[x.Posts.POST_TYPES.JOIN_CHANNEL]:{id:Object(ve.b)("last_users_message.joined_channel.type"),defaultMessage:"**joined the channel**."},[x.Posts.POST_TYPES.LEAVE_CHANNEL]:{id:Object(ve.b)("last_users_message.left_channel.type"),defaultMessage:"**left the channel**."},[x.Posts.POST_TYPES.REMOVE_FROM_CHANNEL]:{id:Object(ve.b)("last_users_message.removed_from_channel.type"),defaultMessage:"were **removed from the channel**."},[x.Posts.POST_TYPES.ADD_TO_TEAM]:{id:Object(ve.b)("last_users_message.added_to_team.type"),defaultMessage:"were **added to the team** by {actor}."},[x.Posts.POST_TYPES.JOIN_TEAM]:{id:Object(ve.b)("last_users_message.joined_team.type"),defaultMessage:"**joined the team**."},[x.Posts.POST_TYPES.LEAVE_TEAM]:{id:Object(ve.b)("last_users_message.left_team.type"),defaultMessage:"**left the team**."},[x.Posts.POST_TYPES.REMOVE_FROM_TEAM]:{id:Object(ve.b)("last_users_message.removed_from_team.type"),defaultMessage:"were **removed from the team**."}};class Sa extends O.a.PureComponent{constructor(e){super(e),Oa(this,"handleOnClick",e=>{e.preventDefault(),this.setState({expand:!0})}),Oa(this,"renderMessage",e=>O.a.createElement(wa.a,{message:e,options:this.props.formatOptions})),this.state={expand:!1}}render(){const{formatMessage:e}=this.props.intl,{expand:t}=this.state,{actor:a,expandedLocale:n,postType:s,usernames:i}=this.props,r=i[0],o=i.length-1,l=i[o];if(t){const t=e(n,{users:i.slice(0,o).join(", "),lastUser:l,actor:a});return this.renderMessage(t)}const c=e({id:"last_users_message.first",defaultMessage:"{firstUser} and "},{firstUser:r}),d=e({id:"last_users_message.others",defaultMessage:"{numOthers} others "},{numOthers:o}),m=e({id:Ta[s].id,defaultMessage:Ta[s].defaultMessage},{actor:a});return O.a.createElement("span",null,this.renderMessage(c),O.a.createElement("a",{onClick:this.handleOnClick},d),this.renderMessage(m))}}Oa(Sa,"propTypes",{actor:C.a.string,expandedLocale:C.a.object.isRequired,formatOptions:C.a.object.isRequired,intl:ne.a.isRequired,postType:C.a.string.isRequired,usernames:C.a.array.isRequired});var Pa=Object(te.c)(Sa);function Ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{JOIN_CHANNEL:Na,ADD_TO_CHANNEL:Ia,REMOVE_FROM_CHANNEL:ja,LEAVE_CHANNEL:Aa,JOIN_TEAM:Ra,ADD_TO_TEAM:ka,REMOVE_FROM_TEAM:La,LEAVE_TEAM:Da}=x.Posts.POST_TYPES,xa={[Na]:{one:{id:Object(ve.b)("combined_system_message.joined_channel.one"),defaultMessage:"{firstUser} **joined the channel**."},one_you:{id:Object(ve.b)("combined_system_message.joined_channel.one_you"),defaultMessage:"You **joined the channel**."},two:{id:Object(ve.b)("combined_system_message.joined_channel.two"),defaultMessage:"{firstUser} and {secondUser} **joined the channel**."},many_expanded:{id:Object(ve.b)("combined_system_message.joined_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the channel**."}},[Ia]:{one:{id:Object(ve.b)("combined_system_message.added_to_channel.one"),defaultMessage:"{firstUser} **added to the channel** by {actor}."},one_you:{id:Object(ve.b)("combined_system_message.added_to_channel.one_you"),defaultMessage:"You were **added to the channel** by {actor}."},two:{id:Object(ve.b)("combined_system_message.added_to_channel.two"),defaultMessage:"{firstUser} and {secondUser} **added to the channel** by {actor}."},many_expanded:{id:Object(ve.b)("combined_system_message.added_to_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the channel** by {actor}."}},[ja]:{one:{id:Object(ve.b)("combined_system_message.removed_from_channel.one"),defaultMessage:"{firstUser} was **removed from the channel**."},one_you:{id:Object(ve.b)("combined_system_message.removed_from_channel.one_you"),defaultMessage:"You were **removed from the channel**."},two:{id:Object(ve.b)("combined_system_message.removed_from_channel.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the channel**."},many_expanded:{id:Object(ve.b)("combined_system_message.removed_from_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the channel**."}},[Aa]:{one:{id:Object(ve.b)("combined_system_message.left_channel.one"),defaultMessage:"{firstUser} **left the channel**."},one_you:{id:Object(ve.b)("combined_system_message.left_channel.one_you"),defaultMessage:"You **left the channel**."},two:{id:Object(ve.b)("combined_system_message.left_channel.two"),defaultMessage:"{firstUser} and {secondUser} **left the channel**."},many_expanded:{id:Object(ve.b)("combined_system_message.left_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **left the channel**."}},[Ra]:{one:{id:Object(ve.b)("combined_system_message.joined_team.one"),defaultMessage:"{firstUser} **joined the team**."},one_you:{id:Object(ve.b)("combined_system_message.joined_team.one_you"),defaultMessage:"You **joined the team**."},two:{id:Object(ve.b)("combined_system_message.joined_team.two"),defaultMessage:"{firstUser} and {secondUser} **joined the team**."},many_expanded:{id:Object(ve.b)("combined_system_message.joined_team.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the team**."}},[ka]:{one:{id:Object(ve.b)("combined_system_message.added_to_team.one"),defaultMessage:"{firstUser} **added to the team** by {actor}."},one_you:{id:Object(ve.b)("combined_system_message.added_to_team.one_you"),defaultMessage:"You were **added to the team** by {actor}."},two:{id:Object(ve.b)("combined_system_message.added_to_team.two"),defaultMessage:"{firstUser} and {secondUser} **added to the team** by {actor}."},many_expanded:{id:Object(ve.b)("combined_system_message.added_to_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the team** by {actor}."}},[La]:{one:{id:Object(ve.b)("combined_system_message.removed_from_team.one"),defaultMessage:"{firstUser} was **removed from the team**."},one_you:{id:Object(ve.b)("combined_system_message.removed_from_team.one_you"),defaultMessage:"You were **removed from the team**."},two:{id:Object(ve.b)("combined_system_message.removed_from_team.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the team**."},many_expanded:{id:Object(ve.b)("combined_system_message.removed_from_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the team**."}},[Da]:{one:{id:Object(ve.b)("combined_system_message.left_team.one"),defaultMessage:"{firstUser} **left the team**."},one_you:{id:Object(ve.b)("combined_system_message.left_team.one_you"),defaultMessage:"You **left the team**."},two:{id:Object(ve.b)("combined_system_message.left_team.two"),defaultMessage:"{firstUser} and {secondUser} **left the team**."},many_expanded:{id:Object(ve.b)("combined_system_message.left_team.many_expanded"),defaultMessage:"{users} and {lastUser} **left the team**."}}};class Ua extends O.a.PureComponent{constructor(...e){super(...e),Ma(this,"loadUserProfiles",(e,t)=>{e.length>0&&this.props.actions.getMissingProfilesByIds(e),t.length>0&&this.props.actions.getMissingProfilesByUsernames(t)}),Ma(this,"getAllUsernames",()=>{const{allUserIds:e,allUsernames:t,currentUserId:a,currentUsername:n,userProfiles:s}=this.props,{formatMessage:i}=this.props.intl,r=s.reduce((e,t)=>(e[t.id]=t.username,e[t.username]=t.username,e),{}),o=i({id:Object(ve.b)("combined_system_message.you"),defaultMessage:"You"});return e.includes(a)?r[a]=o:t.includes(n)&&(r[n]=o),r}),Ma(this,"getUsernamesByIds",(e=[])=>{const{currentUserId:t,currentUsername:a}=this.props,n=this.getAllUsernames(),{formatMessage:s}=this.props.intl,i=s({id:Object(ve.b)("channel_loader.someone"),defaultMessage:"Someone"}),r=e.filter(e=>e!==t&&e!==a).map(e=>n[e]?"@".concat(n[e]):i).filter(e=>e&&""!==e);return e.includes(t)?r.unshift(n[t]):e.includes(a)&&r.unshift(n[a]),r})}componentDidMount(){this.loadUserProfiles(this.props.allUserIds,this.props.allUsernames)}componentDidUpdate(e){const{allUserIds:t,allUsernames:a}=this.props;t===e.allUserIds&&a===e.allUsernames||this.loadUserProfiles(t,a)}renderFormattedMessage(e,t,a){const{formatMessage:n}=this.props.intl,{currentUserId:s,currentUsername:i}=this.props,r=this.getUsernamesByIds(t);let o=a?this.getUsernamesByIds([a])[0]:"";!o||a!==s&&a!==i||(o=o.toLowerCase());const l=r[0],c=r[1],d=r.length-1,m={atMentions:!0,mentionKeys:[{key:l},{key:c},{key:o}],mentionHighlight:!1,singleline:!0};if(d>1)return O.a.createElement(Pa,{actor:o,expandedLocale:xa[e].many_expanded,formatOptions:m,postType:e,usernames:r});let u;0===d?(u=xa[e].one,t[0]!==this.props.currentUserId&&t[0]!==this.props.currentUsername||!xa[e].one_you||(u=xa[e].one_you)):1===d&&(u=xa[e].two);const h=n(u,{firstUser:l,secondUser:c,actor:o});return O.a.createElement(wa.a,{message:h,options:m})}renderMessage(e,t,a){return O.a.createElement(O.a.Fragment,{key:e+a},this.renderFormattedMessage(e,t,a),O.a.createElement("br",null))}render(){const{currentUserId:e,messageData:t}=this.props,a=[],n=[];for(const s of t){const{postType:t,actorId:i}=s;let r=s.userIds;if(!this.props.showJoinLeave&&i!==e){if(!(-1!==r.indexOf(e)))continue;r=[e]}t!==ja?a.push(this.renderMessage(t,r,i)):n.push(...r)}if(n.length>0){const t=n.filter((e,t,a)=>a.indexOf(e)===t);a.push(this.renderMessage(ja,t,e))}return O.a.createElement(O.a.Fragment,null,a)}}Ma(Ua,"propTypes",{allUserIds:C.a.array.isRequired,allUsernames:C.a.array.isRequired,currentUserId:C.a.string.isRequired,currentUsername:C.a.string.isRequired,intl:ne.a.isRequired,messageData:C.a.array.isRequired,showJoinLeave:C.a.bool.isRequired,userProfiles:C.a.array.isRequired,actions:C.a.shape({getMissingProfilesByIds:C.a.func.isRequired,getMissingProfilesByUsernames:C.a.func.isRequired}).isRequired}),Ma(Ua,"defaultProps",{allUserIds:[],allUsernames:[]});var qa=Object(te.c)(Ua);var Ha=Object(n.connect)((function(){const e=Object(u.makeGetProfilesByIdsAndUsernames)();return(t,a)=>{const n=Object(u.getCurrentUser)(t),{allUserIds:s,allUsernames:i}=a;return{currentUserId:n.id,currentUsername:n.username,showJoinLeave:Object(d.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,x.Preferences.ADVANCED_FILTER_JOIN_LEAVE,!0),userProfiles:e(t,{allUserIds:s,allUsernames:i})}}}),(function(e){return{actions:Object(s.bindActionCreators)({getMissingProfilesByIds:r.getMissingProfilesByIds,getMissingProfilesByUsernames:r.getMissingProfilesByUsernames},e)}}))(qa),Fa=a(27),Ba=a(1514);function Ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Va extends O.a.PureComponent{constructor(...e){super(...e),Ga(this,"handleAddChannelMember",()=>{const{currentUser:e,post:t,userIds:a,usernames:n}=this.props;if(t&&t.channel_id){let s=t.create_at;a.forEach((a,i)=>{s++,this.props.actions.addChannelMember(t.channel_id,a),Object(M.g)(e,n[i],a,t.channel_id,t.root_id,s)}),this.props.actions.removePost(t)}})}generateAtMentions(e=[]){if(1===e.length)return O.a.createElement(Ba.a,{mentionName:e[0]});if(e.length>1){function t(e){return O.a.createElement(ee.a,{key:e,id:"post_body.check_for_out_of_channel_mentions.link.and",defaultMessage:" and "})}function a(e){return O.a.createElement("span",{key:e},", ")}return O.a.createElement("span",null,e.map(e=>O.a.createElement(Ba.a,{key:e,mentionName:e})).reduce((e,n,s,i)=>0===s?[n]:s===i.length-1?[...e,t(s),n]:[...e,a(s),n],[]))}return""}render(){const{channelType:e,postId:t,usernames:a,noGroupsUsernames:n}=this.props;if(!t||!e)return null;let s,i,r,o;e===N.j.PRIVATE_CHANNEL?(s=Object(ve.b)("post_body.check_for_out_of_channel_mentions.link.private"),i="add them to this private channel"):e===N.j.OPEN_CHANNEL&&(s=Object(ve.b)("post_body.check_for_out_of_channel_mentions.link.public"),i="add them to the channel");const l=this.generateAtMentions(a);let c,d;1===a.length?(r=Object(ve.b)("post_body.check_for_out_of_channel_mentions.message.one"),o="did not get notified by this mention because they are not in the channel. Would you like to "):a.length>1&&(r=Object(ve.b)("post_body.check_for_out_of_channel_mentions.message.multiple"),o="did not get notified by this mention because they are not in the channel. Would you like to ");const m=this.generateAtMentions(n);n.length&&(c=Object(ve.b)("post_body.check_for_out_of_channel_groups_mentions.message"),d="did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.");var u=null,h=null;return a.length&&(u=O.a.createElement("p",null,l," ",O.a.createElement(ee.a,{id:r,defaultMessage:o}),O.a.createElement("a",{id:"add_channel_member_link",onClick:this.handleAddChannelMember},O.a.createElement(ee.a,{id:s,defaultMessage:i})),O.a.createElement(ee.a,{id:"post_body.check_for_out_of_channel_mentions.message_last",defaultMessage:"? They will have access to all message history."}))),n.length&&(h=O.a.createElement("p",null,m," ",O.a.createElement(ee.a,{id:c,defaultMessage:d}))),O.a.createElement(O.a.Fragment,null,u,h)}}Ga(Va,"propTypes",{currentUser:C.a.object.isRequired,channelType:C.a.string.isRequired,postId:C.a.string.isRequired,post:C.a.object.isRequired,userIds:C.a.array.isRequired,usernames:C.a.array.isRequired,noGroupsUsernames:C.a.array.isRequired,actions:C.a.shape({addChannelMember:C.a.func.isRequired,removePost:C.a.func.isRequired}).isRequired});var Wa=Object(n.connect)((function(e,t){const a=Object(Fa.getPost)(e,t.postId)||{};let n="";if(a&&a.channel_id){const t=Object(p.getChannel)(e,a.channel_id);t&&t.type&&(n=t.type)}return{channelType:n,currentUser:Object(u.getCurrentUser)(e),post:a}}),(function(e){return{actions:Object(s.bindActionCreators)({addChannelMember:o.addChannelMember,removePost:D.removePost},e)}}))(Va);function za(e){return Ka("@"===e[0]?e:"@".concat(e),{markdown:!1})}function Ka(e,t,a){return O.a.createElement(wa.a,{message:e,options:t,postId:a&&a.id,postType:a&&a.type})}function Ya(e){const t=za(e.props.username),a=za(e.props.addedUsername);return O.a.createElement(ee.a,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:a}})}const Qa={[x.Posts.POST_TYPES.JOIN_CHANNEL]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})},[x.Posts.POST_TYPES.GUEST_JOIN_CHANNEL]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.guest_join_channel.post_and_forget",defaultMessage:"{username} joined the channel as a guest.",values:{username:t}})},[x.Posts.POST_TYPES.LEAVE_CHANNEL]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})},[x.Posts.POST_TYPES.ADD_TO_CHANNEL]:Ya,[x.Posts.POST_TYPES.ADD_GUEST_TO_CHANNEL]:function(e){const t=za(e.props.username),a=za(e.props.addedUsername);return O.a.createElement(ee.a,{id:"api.channel.add_guest.added",defaultMessage:"{addedUsername} added to the channel as a guest by {username}.",values:{username:t,addedUsername:a}})},[x.Posts.POST_TYPES.REMOVE_FROM_CHANNEL]:function(e){const t=za(e.props.removedUsername);return O.a.createElement(ee.a,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})},[x.Posts.POST_TYPES.JOIN_TEAM]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})},[x.Posts.POST_TYPES.LEAVE_TEAM]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})},[x.Posts.POST_TYPES.ADD_TO_TEAM]:function(e){const t=za(e.props.username),a=za(e.props.addedUsername);return O.a.createElement(ee.a,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:a}})},[x.Posts.POST_TYPES.REMOVE_FROM_TEAM]:function(e){const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})},[x.Posts.POST_TYPES.HEADER_CHANGE]:function(e){if(!e.props.username)return null;const t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions,mentionHighlight:!0},a=za(e.props.username),n=e.props.old_header?Ka(e.props.old_header,t,e):null,s=e.props.new_header?Ka(e.props.new_header,t,e):null;return e.props.new_header?e.props.old_header?O.a.createElement(ee.a,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header from: {old} to: {new}",values:{username:a,old:n,new:s}}):O.a.createElement(ee.a,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:a,new:s}}):e.props.old_header?O.a.createElement(ee.a,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:a,old:n}}):null},[x.Posts.POST_TYPES.DISPLAYNAME_CHANGE]:function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;const t=za(e.props.username),a=e.props.old_displayname,n=e.props.new_displayname;return O.a.createElement(ee.a,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:a,new:n}})},[x.Posts.POST_TYPES.CONVERT_CHANNEL]:function(e){if(!e.props.username)return null;const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})},[x.Posts.POST_TYPES.PURPOSE_CHANGE]:function(e){if(!e.props.username)return null;const t=za(e.props.username),a=e.props.old_purpose,n=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?O.a.createElement(ee.a,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:a,new:n}}):O.a.createElement(ee.a,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:n}}):e.props.old_purpose?O.a.createElement(ee.a,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:a}}):null},[x.Posts.POST_TYPES.CHANNEL_DELETED]:function(e){if(!e.props.username)return null;const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})},[x.Posts.POST_TYPES.CHANNEL_UNARCHIVED]:function(e){if(!e.props.username)return null;const t=za(e.props.username);return O.a.createElement(ee.a,{id:"api.channel.restore_channel.unarchived",defaultMessage:"{username} has unarchived the channel.",values:{username:t}})},[x.Posts.POST_TYPES.ME]:function(e){return Ka(e.props&&e.props.message?e.props.message:e.message)}};function Za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xa extends O.a.PureComponent{render(){var e;let{message:t}=this.props;const{post:a,mentionKeys:n}=this.props;if(a){const e=function(e,t,a){if(e.props&&e.props.add_channel_member){const n=j.db(e);if((t.type===x.General.PRIVATE_CHANNEL||t.type===x.General.OPEN_CHANNEL)&&a&&n){const t=e.props.add_channel_member;return O.a.createElement(Wa,{postId:t.post_id,userIds:t.not_in_channel_user_ids,noGroupsUsernames:t.not_in_groups_usernames,usernames:t.not_in_channel_usernames})}return null}if(Qa[e.type])return Qa[e.type](e);if(e.type===x.Posts.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL)return Ya(e);if(e.type===x.Posts.POST_TYPES.COMBINED_USER_ACTIVITY){const{allUserIds:t,allUsernames:a,messageData:n}=e.props.user_activity;return O.a.createElement(Ha,{allUserIds:t,allUsernames:a,messageData:n})}return null}(a,this.props.channel,this.props.isUserCanManageMembers);if(e)return O.a.createElement("div",null,e)}const s=!a||!a.message_source||a.message===a.message_source,i=a&&a.props&&a.props.channel_mentions,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(a),!0).forEach((function(t){Ja(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Za(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.options,{disableGroupHighlight:!0===(null==a||null===(e=a.props)||void 0===e?void 0:e.disable_group_highlight)});return this.props.pluginHooks.forEach(e=>{e&&e.hook&&a&&(t=e.hook(a,t))}),O.a.createElement(wa.a,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:t,proxyImages:s,mentionKeys:n,options:r,channelNamesMap:i,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images,postId:this.props.post&&this.props.post.id})}}Ja(Xa,"propTypes",{imageProps:C.a.object,isRHS:C.a.bool,message:C.a.string.isRequired,post:C.a.object,channel:C.a.object,options:C.a.object,pluginHooks:C.a.arrayOf(C.a.object),hasPluginTooltips:C.a.bool,isUserCanManageMembers:C.a.bool,mentionKeys:C.a.array.isRequired}),Ja(Xa,"defaultProps",{isRHS:!1,pluginHooks:[],options:{}});var $a=Object(n.connect)((function(e,t){const a=Object(p.getChannel)(e,t.channelId),n=Object(ba.createSelector)(fa.getAllUserMentionKeys,u.getCurrentUserMentionKeys,(e,t)=>t,(e,t,a)=>{var n,s;let i=e;return(null==a||null===(n=a.props)||void 0===n?void 0:n.disable_group_highlight)&&(i=t),(null==a||null===(s=a.props)||void 0===s?void 0:s.mentionHighlightDisabled)&&(i=i.filter(e=>!["@all","@channel","@here"].includes(e.key))),i});return{channel:a,pluginHooks:e.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(e.plugins.components.LinkTooltip),isUserCanManageMembers:a&&va(e,a),mentionKeys:n(e,t.post)}}))(Xa),en=a(84),tn=a.n(en),an=a(39),nn=a(1151),sn=(a(176),a(1142)),rn=a(1169),on=a(1145),ln=a(1152);class cn extends ln.a{render(){const e=this.props.isSelection,t=this.props.item;let a,n,s;"all"===t.username?(a="all",n=O.a.createElement(ee.a,{id:"suggestion.mention.all",defaultMessage:"Notifies everyone in this channel"}),s=O.a.createElement(ee.a,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>O.a.createElement("span",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-account-multiple-outline",title:e})))):"channel"===t.username?(a="channel",n=O.a.createElement(ee.a,{id:"suggestion.mention.channel",defaultMessage:"Notifies everyone in this channel"}),s=O.a.createElement(ee.a,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>O.a.createElement("span",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-account-multiple-outline",title:e})))):"here"===t.username?(a="here",n=O.a.createElement(ee.a,{id:"suggestion.mention.here",defaultMessage:"Notifies everyone online in this channel"}),s=O.a.createElement(ee.a,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>O.a.createElement("span",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-account-multiple-outline",title:e})))):t.type===N.j.MENTION_GROUPS?(a=t.name,n="- ".concat(t.display_name),s=O.a.createElement(ee.a,{id:"generic_icons.member",defaultMessage:"Group Icon"},e=>O.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e}))):(a=t.username,(t.first_name||t.last_name)&&t.nickname?n="".concat(j.A(t)," (").concat(t.nickname,")"):t.nickname?n="(".concat(t.nickname,")"):(t.first_name||t.last_name)&&(n="".concat(j.A(t))),s=O.a.createElement(on.a,{size:"sm",username:t&&t.username,url:j.O(t.id,t.last_picture_update)}));let i=null;t.isCurrentUser&&(i=O.a.createElement("span",{className:"ml-1"},O.a.createElement(ee.a,{id:"suggestion.user.isCurrent",defaultMessage:"(you)"})));let r="mentions__name";return e&&(r+=" suggestion--selected"),O.a.createElement("div",Object.assign({className:r,"data-testid":"mentionSuggestion_".concat(a),onClick:this.handleClick,onMouseMove:this.handleMouseMove},ln.a.baseProps),s,O.a.createElement("span",null,O.a.createElement("span",{className:"mention--align"},"@"+a),O.a.createElement(sn.a,{show:Boolean(t.is_bot),className:"badge-autocomplete"}),O.a.createElement("span",{className:"light ml-2"},n,i),O.a.createElement(rn.a,{show:j.Y(t),className:"badge-autocomplete"})))}}function dn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function mn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(a),!0).forEach((function(t){un(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function un(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hn extends nn.a{constructor(e){super(),this.setProps(e),this.data=null,this.lastCompletedWord="",this.lastPrefixWithNoResults=""}setProps({currentUserId:e,profilesInChannel:t,profilesNotInChannel:a,autocompleteUsersInChannel:n,useChannelMentions:s,autocompleteGroups:i,searchAssociatedGroupsForReference:r}){this.currentUserId=e,this.profilesInChannel=t,this.profilesNotInChannel=a,this.autocompleteUsersInChannel=n,this.useChannelMentions=s,this.autocompleteGroups=i,this.searchAssociatedGroupsForReference=r}specialMentions(){return this.latestPrefix.startsWith("/msg")||!this.useChannelMentions?[]:["here","channel","all"].filter(e=>e.startsWith(this.latestPrefix)).map(e=>({username:e,type:N.j.MENTION_SPECIAL}))}getProfileSuggestions(e){const t=[];if(!e)return t;if(e.username){const a=Object(an.getSuggestionsSplitByMultiple)(e.username.toLowerCase(),N.j.AUTOCOMPLETE_SPLIT_CHARACTERS);t.push(...a)}return[e.first_name,e.last_name,e.nickname].forEach(e=>{const a=Object(an.getSuggestionsSplitBy)(e.toLowerCase()," ");t.push(...a)}),t.push(e.first_name.toLowerCase()+" "+e.last_name.toLowerCase()),t}getGroupSuggestions(e){const t=[];if(!e)return t;if(e.name){const a=Object(an.getSuggestionsSplitByMultiple)(e.name.toLowerCase(),N.j.AUTOCOMPLETE_SPLIT_CHARACTERS);t.push(...a)}const a=Object(an.getSuggestionsSplitBy)(e.display_name.toLowerCase()," ");return t.push(...a),t.push(e.display_name.toLowerCase()),t}filterProfile(e){if(!e)return!1;const t=this.latestPrefix.toLowerCase();return this.getProfileSuggestions(e).some(e=>e.startsWith(t))}filterGroup(e){if(!e)return!1;const t=this.latestPrefix.toLowerCase();return this.getGroupSuggestions(e).some(e=>e.startsWith(t))}localMembers(){return this.profilesInChannel.filter(e=>this.filterProfile(e)).map(e=>this.createFromProfile(e,N.j.MENTION_MEMBERS)).sort((e,t)=>e.username.localeCompare(t.username)).splice(0,25)}localGroups(){return this.autocompleteGroups.filter(e=>this.filterGroup(e)).map(e=>this.createFromGroup(e,N.j.MENTION_GROUPS)).sort((e,t)=>e.name.localeCompare(t.name)).splice(0,25)}remoteMembers(){if(!this.data)return[];return(this.data.users||[]).filter(e=>this.filterProfile(e)).map(e=>this.createFromProfile(e,N.j.MENTION_MEMBERS))}remoteGroups(){if(!this.data)return[];return(this.data.groups||[]).filter(e=>this.filterGroup(e)).map(e=>this.createFromGroup(e,N.j.MENTION_GROUPS))}remoteNonMembers(){return this.data?(this.data.out_of_channel||[]).filter(e=>this.filterProfile(e)).map(e=>mn({type:N.j.MENTION_NONMEMBERS},e)):[]}items(){const e=this.specialMentions(),t=this.localMembers(),a={};t.forEach(e=>{a[e.id]=!0});const n=this.remoteMembers().filter(e=>!a[e.id]),s=(e,t)=>{const a=e.username.startsWith(this.latestPrefix),n=t.username.startsWith(this.latestPrefix);return a&&n?e.username.localeCompare(t.username):a?-1:n?1:e.username.localeCompare(t.username)},i=t.concat(n).sort(s),r=this.localGroups(),o={};r.forEach(e=>{o[e.id]=!0});const l=this.remoteGroups().filter(e=>!o[e.id]),c=r.concat(l).sort((e,t)=>{const a=e.name.startsWith(this.latestPrefix),n=t.name.startsWith(this.latestPrefix);return a&&n?e.name.localeCompare(t.name):a?-1:n?1:e.name.localeCompare(t.name)}),d=this.remoteNonMembers().filter(e=>!a[e.id]).sort(s);return i.concat(c).concat(e).concat(d)}updateMatches(e,t){0===t.length?this.lastPrefixWithNoResults=this.latestPrefix:this.lastPrefixWithNoResults===this.latestPrefix&&(this.lastPrefixWithNoResults="");const a=t.map(e=>e.username?"@"+e.username:e.name?"@"+e.name:"");e({matchedPretext:"@".concat(this.latestPrefix),terms:a,items:t,component:cn})}handlePretextChanged(e,t){const a=tn.a.cache("(?:^|\\W)@([\\pL\\d\\-_. ]*)$","i").exec(e.toLowerCase());if(!a)return!1;if(this.lastCompletedWord&&a[0].trim().startsWith(this.lastCompletedWord.trim()))return!1;const n=a[1];if(this.lastPrefixWithNoResults&&n.startsWith(this.lastPrefixWithNoResults))return!1;this.startNewRequest(n),this.updateMatches(t,this.items());let s=setTimeout(()=>{this.shouldCancelDispatch(n)||(this.updateMatches(t,this.items().concat([{type:N.j.MENTION_MORE_MEMBERS,loading:!0}])),s=null)},500);return this.autocompleteUsersInChannel(n).then(({data:e})=>{s&&clearTimeout(s),this.shouldCancelDispatch(n)||(this.data=e,this.searchAssociatedGroupsForReference(n).then(e=>{this.data&&e&&e.data&&(this.data.groups=e.data),this.updateMatches(t,this.items())}))}),!0}handleCompleteWord(e){this.lastCompletedWord=e,this.lastPrefixWithNoResults=""}createFromProfile(e,t){return e.id===this.currentUserId?mn({type:t},e,{isCurrentUser:!0}):mn({type:t},e)}createFromGroup(e,t){return mn({type:t},e)}}var pn=hn,gn=a(89),bn=a(20);class fn extends ln.a{render(){const e=this.props.isSelection,t=this.props.item,a=t.channel.display_name,n=O.a.createElement("span",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon--no-spacing icon-globe"}));let s="mentions__name no-flex";e&&(s+=" suggestion--selected");const i="~"+t.channel.name;return O.a.createElement("div",Object.assign({className:s,onClick:this.handleClick,onMouseMove:this.handleMouseMove},ln.a.baseProps),O.a.createElement("div",{className:"d-flex align-items-center"},n,O.a.createElement("span",null,a),O.a.createElement("span",{className:"mention__channelname ml-2"},i)))}}class _n extends nn.a{constructor(e){super(),this.lastPrefixTrimmed="",this.lastPrefixWithNoResults="",this.lastCompletedWord="",this.autocompleteChannels=e}handlePretextChanged(e,t){this.resetRequest();const a=/\B(~([^~\r\n]*))$/i.exec(e.toLowerCase());if(!a)return!1;if(a.index>0&&"~"===e[a.index-1])return!1;const n=a[2];if(this.lastPrefixTrimmed&&n.trim()===this.lastPrefixTrimmed)return!0;if(this.lastPrefixTrimmed=n.trim(),this.lastPrefixWithNoResults&&n.startsWith(this.lastPrefixWithNoResults))return!1;if(this.lastCompletedWord&&a[0].startsWith(this.lastCompletedWord))return!1;this.lastCompletedWord="",this.startNewRequest(n);const s=n.toLowerCase().split(/\s+/),i={};var r=[];Object(p.getMyChannels)(bn.a.getState()).forEach(e=>{if("O"!==e.type||e.delete_at>0)return;const t=e.name.toLowerCase().split(/\s+/).concat(e.display_name.toLowerCase().split(/\s+/));for(var a=!0,n=0;a&&n<s.length;n++)if(s[n]){for(var o=!1,l=0;l<t.length;l++)if(t[l].startsWith(s[n])){o=!0;break}if(!o){a=!1;break}}a&&(i[e.id]=!0,r.push({type:N.j.MENTION_CHANNELS,channel:e}))});const o=(r=r.sort((e,t)=>Object(gn.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel))).map(e=>"~"+e.channel.name);t({terms:o.concat([" "]),items:r.concat([{type:N.j.MENTION_MORE_CHANNELS,loading:!0}]),component:fn,matchedPretext:a[1]});const l=(e,s)=>{if(n!==this.latestPrefix||this.shouldCancelDispatch(n))return;const o=Object(p.getMyChannelMemberships)(bn.a.getState());0!==e.length||s||(this.lastPrefixWithNoResults=n);const l=[];e.forEach(e=>{if(!(e.delete_at>0)||o[e.id]){if(o[e.id]&&!i[e.id])return i[e.id]=!0,void r.push({type:N.j.MENTION_CHANNELS,channel:e});if(!o[e.id]||!i[e.id]){if(!o[e.id]&&i[e.id]){delete i[e.id];const t=r.map(e=>e.channel.id).indexOf(e.id);t>=0&&r.splice(t,1)}l.push({type:N.j.MENTION_MORE_CHANNELS,channel:e})}}});const c=(r=r.sort((e,t)=>Object(gn.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel))).concat(l),d=c.map(e=>"~"+e.channel.name);t({matchedPretext:a[1],terms:d,items:c,component:fn})};return this.autocompleteChannels(n,e=>l(e,!1),()=>l([],!0)),!0}handleCompleteWord(e){this.lastCompletedWord=e,this.lastPrefixWithNoResults=""}}a(605);var En=a(22);class vn extends ln.a{render(){const{item:e,isSelection:t}=this.props;let a="slash-command";t&&(a+=" suggestion--selected");let n=O.a.createElement("div",{className:"slash-command__icon"},O.a.createElement("span",null,"/"));return""!==e.iconData&&(n=O.a.createElement("div",{className:"slash-command__icon",style:{backgroundColor:"transparent"}},O.a.createElement("img",{src:e.iconData}))),O.a.createElement("div",Object.assign({className:a,onClick:this.handleClick,onMouseMove:this.handleMouseMove},ln.a.baseProps),n,O.a.createElement("div",{className:"slash-command__info"},O.a.createElement("div",{className:"slash-command__title"},e.suggestion.substring(1)+" "+e.hint),O.a.createElement("div",{className:"slash-command__desc"},e.description)))}}class yn extends nn.a{handlePretextChanged(e,t){return!!e.startsWith("/")&&(I.n()?this.handleMobile(e,t):this.handleWebapp(e,t))}handleCompleteWord(e,t,a){a(e+" ")}handleMobile(e,t){const a=e.toLowerCase();return En.Client4.getCommandsList(Object(h.getCurrentTeamId)(bn.a.getState())).then(e=>{let n=[];e.forEach(e=>{if(e.auto_complete&&"shortcuts"!==e.trigger&&0===("/"+e.trigger).indexOf(a)){const t="/"+e.trigger;let a="";e.auto_complete_hint&&0!==e.auto_complete_hint.length&&(a=e.auto_complete_hint),n.push({suggestion:t,hint:a,description:e.auto_complete_desc})}}),n=n.sort((e,t)=>e.suggestion.localeCompare(t.suggestion));const s=n.map(e=>e.suggestion);t({matchedPretext:a,terms:s,items:n,component:vn})}).catch(()=>{}),!0}handleWebapp(e,t){const a=e.toLowerCase();return En.Client4.getCommandAutocompleteSuggestionsList(a,Object(h.getCurrentTeamId)(bn.a.getState())).then(e=>{const n=[];e.forEach(e=>{n.push({complete:"/"+e.Complete,suggestion:"/"+e.Suggestion,hint:e.Hint,description:e.Description,iconData:e.IconData})});const s=n.map(e=>e.complete);t({matchedPretext:a,terms:s,items:n,component:vn})}).catch(()=>{}),!0}}var Cn=a(72);const wn=["skintone"];class On extends ln.a{render(){const e=this.props.term,t=this.props.item.emoji;let a="emoticon-suggestion";return this.props.isSelection&&(a+=" suggestion--selected"),O.a.createElement("div",Object.assign({className:a,onClick:this.handleClick,onMouseMove:this.handleMouseMove},ln.a.baseProps),O.a.createElement("div",{className:"pull-left"},O.a.createElement("img",{alt:e,className:"emoticon-suggestion__image",src:Object(Wt.getEmojiImageUrl)(t),title:e})),O.a.createElement("div",{className:"pull-left"},e))}}class Tn extends nn.a{handlePretextChanged(e,t){const a=/(^|\s|^\+|^-)(:([^:\s]*))$/g.exec(e);if(!a)return!1;const n=a[1],s=a[2],i=a[3];if(i.length<2)return!1;if("-"!==n&&"+"!==n)for(const e of Object.keys(Cn.b))if(Cn.b[e].test(s))return!1;return"true"===bn.a.getState().entities.general.config.EnableCustomEmoji?bn.a.dispatch(Object(Pt.autocompleteCustomEmojis)(i)).then(()=>this.findAndSuggestEmojis(s,i,t)):this.findAndSuggestEmojis(s,i,t),!0}formatEmojis(e){return e.map(e=>":"+e.name+":")}findAndSuggestEmojis(e,t,a){const n=[],s=[],i=Object(Nt.a)(bn.a.getState()),r=Object(Nt.b)(bn.a.getState());for(const[e,a]of i)if(!wn.includes(a.category))if(a.aliases){for(const i of a.aliases)if(-1!==i.indexOf(t)){(r.includes(i)||r.includes(e)?n:s).push({name:i,emoji:a});break}}else if(-1!==e.indexOf(t)){if(i.hasSystemEmoji(e))continue;(r.includes(e)?n:s).push({name:e,emoji:a})}const o=(e,a)=>Ut(e,a,t);n.sort(o),s.sort(o),a({matchedPretext:e,terms:[...this.formatEmojis(n),...this.formatEmojis(s)],items:[...n,...s],component:On})}}var Sn=a(1195),Pn=a(1182);function Mn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nn extends O.a.PureComponent{constructor(e){super(e),Mn(this,"handleChange",e=>{this.props.onChange(e)}),Mn(this,"checkMessageLength",e=>{if(this.props.handlePostError)if(e.length>this.props.characterLimit){const t=O.a.createElement(ee.a,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:this.props.characterLimit}});this.props.handlePostError(t)}else this.props.handlePostError(null)}),Mn(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(e)}),Mn(this,"handleMouseUp",e=>{this.props.onMouseUp&&this.props.onMouseUp(e)}),Mn(this,"handleKeyUp",e=>{this.props.onKeyUp&&this.props.onKeyUp(e)}),Mn(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(e)}),Mn(this,"handleHeightChange",(e,t)=>{this.props.onHeightChange&&this.props.onHeightChange(e,t)}),Mn(this,"getInputBox",()=>this.refs.message.getTextbox()),Mn(this,"focus",()=>{const e=this.refs.message.getTextbox();e.focus(),j.ob(e),this.checkMessageLength(e.value)}),Mn(this,"blur",()=>{this.refs.message.getTextbox().blur()}),Mn(this,"recalculateSize",()=>{this.refs.message.recalculateSize()}),this.suggestionProviders=[new pn({currentUserId:this.props.currentUserId,profilesInChannel:this.props.profilesInChannel,profilesNotInChannel:this.props.profilesNotInChannel,autocompleteUsersInChannel:e=>this.props.actions.autocompleteUsersInChannel(e,this.props.channelId),useChannelMentions:this.props.useChannelMentions,autocompleteGroups:this.props.autocompleteGroups,searchAssociatedGroupsForReference:e=>this.props.actions.searchAssociatedGroupsForReference(e,this.props.currentTeamId,this.props.channelId)}),new _n(e.actions.autocompleteChannels),new Tn],e.supportsCommands&&this.suggestionProviders.push(new yn),this.checkMessageLength(e.value),this.wrapper=O.a.createRef()}updateSuggestions(e){if(this.props.channelId!==e.channelId||this.props.currentUserId!==e.currentUserId||this.props.profilesInChannel!==e.profilesInChannel||this.props.profilesNotInChannel!==e.profilesNotInChannel||this.props.autocompleteGroups!==e.autocompleteGroups){const e=this.suggestionProviders;for(let t=0;t<e.length;t++)e[t]instanceof pn&&e[t].setProps({currentUserId:this.props.currentUserId,currentChannelId:this.props.channelId,profilesInChannel:this.props.profilesInChannel,profilesNotInChannel:this.props.profilesNotInChannel,autocompleteUsersInChannel:e=>this.props.actions.autocompleteUsersInChannel(e,this.props.channelId),useChannelMentions:this.props.useChannelMentions,autocompleteGroups:this.props.autocompleteGroups,searchAssociatedGroupsForReference:e=>this.props.actions.searchAssociatedGroupsForReference(e,this.props.currentTeamId,this.props.channelId)})}e.value!==this.props.value&&this.checkMessageLength(this.props.value)}componentDidUpdate(e){!e.preview&&this.props.preview&&this.refs.preview.focus(),this.updateSuggestions(e)}render(){let e,t=null,a="form-control custom-textarea",n="textarea-wrapper";return this.props.emojiEnabled&&(a+=" custom-textarea--emoji-picker"),this.props.badConnection&&(a+=" bad-connection"),this.wrapper.current&&(e=this.getInputBox().clientHeight),this.props.preview&&(a+=" custom-textarea--preview",n+=" textarea-wrapper--preview",t=O.a.createElement("div",{tabIndex:"0",ref:"preview",className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},O.a.createElement($a,{isRHS:this.props.isRHS,message:this.props.value}))),O.a.createElement("div",{ref:this.wrapper,className:n},O.a.createElement(Sn.a,{id:this.props.id,ref:"message",className:a,spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp,onKeyUp:this.handleKeyUp,onComposition:this.props.onComposition,onBlur:this.handleBlur,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:ga.a,listComponent:Pn.a,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick,wrapperHeight:e}),t)}}Mn(Nn,"propTypes",{id:C.a.string.isRequired,channelId:C.a.string,value:C.a.string.isRequired,onChange:C.a.func.isRequired,onKeyPress:C.a.func.isRequired,onComposition:C.a.func,onHeightChange:C.a.func,createMessage:C.a.string.isRequired,onKeyDown:C.a.func,onMouseUp:C.a.func,onKeyUp:C.a.func,onBlur:C.a.func,supportsCommands:C.a.bool.isRequired,handlePostError:C.a.func,suggestionListStyle:C.a.string,emojiEnabled:C.a.bool,isRHS:C.a.bool,characterLimit:C.a.number.isRequired,disabled:C.a.bool,badConnection:C.a.bool,listenForMentionKeyClick:C.a.bool,currentUserId:C.a.string.isRequired,currentTeamId:C.a.string.isRequired,preview:C.a.bool,profilesInChannel:C.a.arrayOf(C.a.object).isRequired,profilesNotInChannel:C.a.arrayOf(C.a.object).isRequired,autocompleteGroups:C.a.arrayOf(C.a.object).isRequired,actions:C.a.shape({autocompleteUsersInChannel:C.a.func.isRequired,autocompleteChannels:C.a.func.isRequired,searchAssociatedGroupsForReference:C.a.func.isRequired}),useChannelMentions:C.a.bool.isRequired}),Mn(Nn,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1});var In=Object(n.connect)((e,t)=>{const a=Object(u.makeGetProfilesInChannel)(),n=Object(u.makeGetProfilesNotInChannel)(),s=Object(h.getCurrentTeamId)(e),i=Object(p.getCurrentChannelId)(e);return{currentUserId:Object(u.getCurrentUserId)(e),currentTeamId:s,profilesInChannel:a(e,t.channelId,!0),profilesNotInChannel:n(e,t.channelId,!0),autocompleteGroups:Object(ua.getAssociatedGroupsForReference)(e,s,i)}},e=>({actions:Object(s.bindActionCreators)({autocompleteUsersInChannel:E.a,autocompleteChannels:pa.b,searchAssociatedGroupsForReference:ha},e)}),null,{withRef:!0})(Nn),jn=a(1111);function An(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Rn extends O.a.PureComponent{constructor(...e){super(...e),An(this,"togglePreview",e=>{e.preventDefault(),this.props.updatePreview(!this.props.showPreview)})}render(){const{isMarkdownPreviewEnabled:e}=this.props,t=this.props.message&&this.props.message.length>0;let a,n="";this.props.message&&this.props.message.length>this.props.characterLimit&&(n="hidden"),a=this.props.previewMessageLink?O.a.createElement("span",null,this.props.previewMessageLink):O.a.createElement(ee.a,{id:"textbox.edit",defaultMessage:"Edit message"});let s=null;e&&(s=O.a.createElement("button",{id:"previewLink",onClick:this.togglePreview,className:"style--none textbox-preview-link color--link"},this.props.showPreview?a:O.a.createElement(ee.a,{id:"textbox.preview",defaultMessage:"Preview"})));const i=O.a.createElement("div",{style:{visibility:t?"visible":"hidden",opacity:t?"0.45":"0"},className:"help__format-text"},O.a.createElement("b",null,O.a.createElement(ee.a,{id:"textbox.bold",defaultMessage:"**bold**"})),O.a.createElement("i",null,O.a.createElement(ee.a,{id:"textbox.italic",defaultMessage:"_italic_"})),O.a.createElement("span",null,"~~",O.a.createElement("strike",null,O.a.createElement(ee.a,{id:"textbox.strike",defaultMessage:"strike"})),"~~ "),O.a.createElement("span",null,O.a.createElement(ee.a,{id:"textbox.inlinecode",defaultMessage:"`inline code`"})),O.a.createElement("span",null,O.a.createElement(ee.a,{id:"textbox.preformatted",defaultMessage:"```preformatted```"})),O.a.createElement("span",null,O.a.createElement(ee.a,{id:"textbox.quote",defaultMessage:">quote"})));return O.a.createElement("div",{className:"help__text "+n},i,s,O.a.createElement(jn.a,{target:"_blank",rel:"noopener noreferrer",to:"/help/messaging",className:"textbox-help-link"},O.a.createElement(ee.a,{id:"textbox.help",defaultMessage:"Help"})))}}An(Rn,"propTypes",{showPreview:C.a.bool,characterLimit:C.a.number.isRequired,previewMessageLink:C.a.string,updatePreview:C.a.func,message:C.a.string.isRequired,isMarkdownPreviewEnabled:C.a.bool.isRequired}),An(Rn,"defaultProps",{message:""});const kn=N.Q.PRE_RELEASE_FEATURES;var Ln=Object(n.connect)(e=>({isMarkdownPreviewEnabled:Object(j.V)(kn.MARKDOWN_PREVIEW,e)}))(Rn);function Dn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const xn=N.j.KeyCodes;class Un extends O.a.PureComponent{constructor(e){super(e),Dn(this,"setShowPreview",e=>{this.props.actions.setShowPreview(e)}),Dn(this,"getContainer",()=>this.refs.editModalBody),Dn(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker}),!this.state.showEmojiPicker&&this.editbox&&this.editbox.focus()}),Dn(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}),Dn(this,"handleEmojiClick",e=>{const t=e&&(e.name||e.aliases&&e.aliases[0]);if(t){if(""===this.state.editText)this.setState({editText:":"+t+": "});else{const{editText:e}=this.state,{firstPiece:a,lastPiece:n}=Object(ae.v)(this.state.caretPosition,e),s=""===a?":".concat(t,": ").concat(n):"".concat(a," :").concat(t,": ").concat(n),i=""===a?":".concat(t,": ").length:"".concat(a," :").concat(t,": ").length,r=this.editbox.getInputBox();this.setState({editText:s,caretPosition:i},()=>{j.sb(r,i)})}this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}}),Dn(this,"handleGifClick",e=>{if(""===this.state.editText)this.setState({editText:e});else{const t=/\s+$/.test(this.state.editText)?this.state.editText+e:this.state.editText+" "+e;this.setState({editText:t})}this.setState({showEmojiPicker:!1}),this.editbox.focus()}),Dn(this,"getEditPostControls",()=>this.refs.editPostEmoji),Dn(this,"handlePostError",e=>{this.state.postError!==e&&this.setState({postError:e})}),Dn(this,"handleEdit",async()=>{if(this.isSaveDisabled())return;const{actions:e,editingPost:t}=this.props,a={message:this.state.editText,id:t.postId,channel_id:t.post.channel_id};if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},N.j.ANIMATION_TIMEOUT);if(a.message===(t.post.message_source||t.post.message))return void this.handleHide();const n=t.post.file_ids&&t.post.file_ids.length>0;if(0!==a.message.trim().length||n)e.addMessageIntoHistory(a.message),await e.editPost(a)&&window.scrollTo(0,0),this.handleHide();else{this.handleHide(!1);const e={ModalId:N.u.DELETE_POST,dialogType:oe,dialogProps:{post:t.post,commentCount:t.commentCount,isRHS:t.isRHS}};this.props.actions.openModal(e)}}),Dn(this,"handleChange",e=>{const t=e.target.value;this.setState({editText:t})}),Dn(this,"handleEditKeyPress",e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:a}=this.props,{allowSending:n,ignoreKeyPress:s}=Object(ae.s)(e,this.state.editText,t,a,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(s)return e.preventDefault(),void e.stopPropagation();n&&(e.preventDefault(),this.editbox.blur(),this.handleEdit())}),Dn(this,"handleMouseUpKeyUp",e=>{const t=j.q(e.target);this.setState({caretPosition:t})}),Dn(this,"handleKeyDown",e=>{j.fb(e)?(e.stopPropagation(),this.setState({editText:j.Q(e)})):this.props.ctrlSend&&j.Z(e,xn.ENTER)&&!0===e.ctrlKey?this.handleEdit():j.Z(e,xn.ESCAPE)&&!this.state.showEmojiPicker&&this.handleHide()}),Dn(this,"handleHide",(e=!0)=>{this.refocusId=e?this.props.editingPost.refocusId:null,this.props.actions.hideEditPostModal()}),Dn(this,"handleCheckForChangesHide",()=>{this.state.editText===this.props.editingPost.post.message&&this.handleHide()}),Dn(this,"handleEntered",()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())}),Dn(this,"handleExit",()=>{this.props.actions.setShowPreview(!1)}),Dn(this,"handleExited",()=>{const e=this.refocusId;e&&setTimeout(()=>{const t=document.getElementById(e);t&&t.focus()}),this.refocusId=null,this.setState({editText:"",postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:!1}),this.props.actions.setShowPreview(!1)}),Dn(this,"setEditboxRef",e=>{e&&e.getWrappedInstance&&(this.editbox=e.getWrappedInstance()),this.editbox&&this.editbox.focus()}),Dn(this,"isSaveDisabled",()=>{const e=this.props.editingPost.post;return e&&e.file_ids&&e.file_ids.length>0||""!==this.state.editText?!this.props.canEditPost:!this.props.canDeletePost}),this.state={editText:"",caretPosition:"".length,postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:e.editingPost.show}}static getDerivedStateFromProps(e,t){return e.editingPost.show&&!t.prevShowState?{editText:e.editingPost.post.message_source||e.editingPost.post.message,prevShowState:e.editingPost.show}:null}render(){const{formatMessage:e}=this.props.intl,t="edit-post-footer"+(this.state.postError?" has-error":"");let a=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");a=O.a.createElement("label",{className:e},this.state.postError)}let n=null;const s=e({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();return"true"!==this.props.config.EnableEmojiPicker||this.props.shouldShowPreview||(n=O.a.createElement("div",null,O.a.createElement(ma,{show:this.state.showEmojiPicker,container:this.getContainer,target:this.getEditPostControls,onHide:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:"true"===this.props.config.EnableGifPicker,topOffset:-20}),O.a.createElement("button",{"aria-label":s,id:"editPostEmoji",ref:"editPostEmoji",className:"style--none post-action",onClick:this.toggleEmojiPicker},O.a.createElement(Ot,{className:"icon icon--emoji"})))),O.a.createElement($.a,{id:"editPostModal",dialogClassName:"a11y__modal edit-modal",show:this.props.editingPost.show,onKeyDown:this.handleKeyDown,onHide:this.handleCheckForChangesHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,keyboard:!1,role:"dialog","aria-labelledby":"editPostModalLabel"},O.a.createElement($.a.Header,{closeButton:!0,onHide:this.handleHide},O.a.createElement($.a.Title,{componentClass:"h1",id:"editPostModalLabel"},O.a.createElement(ee.a,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.props.editingPost.title}}))),O.a.createElement($.a.Body,{bsClass:"modal-body edit-modal-body".concat(this.state.showEmojiPicker?" edit-modal-body--add-reaction":""),ref:"editModalBody"},O.a.createElement("div",{className:"post-create__container"},O.a.createElement("div",{className:"textarea-wrapper"},O.a.createElement(In,{tabIndex:"0",onChange:this.handleChange,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,handlePostError:this.handlePostError,value:this.state.editText,channelId:this.props.editingPost.post&&this.props.editingPost.post.channel_id,emojiEnabled:"true"===this.props.config.EnableEmojiPicker,createMessage:j.lb("edit_post.editPost","Edit the post..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"edit_textbox",ref:this.setEditboxRef,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,useChannelMentions:this.props.useChannelMentions}),O.a.createElement("div",{className:"post-body__actions"},n)),O.a.createElement("div",{className:"post-create-footer"},O.a.createElement(Ln,{characterLimit:this.props.maxPostSize,showPreview:this.props.shouldShowPreview,ref:this.setTextboxLinksRef,updatePreview:this.setShowPreview,message:this.state.editText}),O.a.createElement("div",{className:t},a)))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleHide},O.a.createElement(ee.a,{id:"edit_post.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{id:"editButton",type:"button",className:"btn btn-primary",disabled:this.isSaveDisabled(),onClick:this.handleEdit},O.a.createElement(ee.a,{id:"edit_post.save",defaultMessage:"Save"}))))}}Dn(Un,"propTypes",{canEditPost:C.a.bool,canDeletePost:C.a.bool,codeBlockOnCtrlEnter:C.a.bool,ctrlSend:C.a.bool,config:C.a.object.isRequired,intl:ne.a.isRequired,maxPostSize:C.a.number.isRequired,shouldShowPreview:C.a.bool.isRequired,useChannelMentions:C.a.bool.isRequired,editingPost:C.a.shape({post:C.a.object,postId:C.a.string,refocusId:C.a.string,commentCount:C.a.number,show:C.a.bool.isRequired,title:C.a.string,isRHS:C.a.bool}).isRequired,actions:C.a.shape({addMessageIntoHistory:C.a.func.isRequired,editPost:C.a.func.isRequired,hideEditPostModal:C.a.func.isRequired,openModal:C.a.func.isRequired,setShowPreview:C.a.func.isRequired}).isRequired});var qn=Object(te.c)(Un);var Hn=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(X.a)(e),n=Object(u.getCurrentUserId)(e),s=Object(p.getCurrentChannelId)(e),i=Object(h.getCurrentTeamId)(e);let r=!1,o=!1;a&&a.post&&a.post.user_id===n?(r=Object(U.haveIChannelPermission)(e,{channel:s,team:i,permission:x.Permissions.DELETE_POST}),o=Object(U.haveIChannelPermission)(e,{channel:s,team:i,permission:x.Permissions.EDIT_POST})):(r=Object(U.haveIChannelPermission)(e,{channel:s,team:i,permission:x.Permissions.DELETE_OTHERS_POSTS}),o=Object(U.haveIChannelPermission)(e,{channel:s,team:i,permission:x.Permissions.EDIT_OTHERS_POSTS}));const l=Object(U.haveIChannelPermission)(e,{channel:s,team:i,permission:x.Permissions.USE_CHANNEL_MENTIONS});return{canEditPost:o,canDeletePost:r,codeBlockOnCtrlEnter:Object(d.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(d.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:t,editingPost:a,shouldShowPreview:K(e),maxPostSize:parseInt(t.MaxPostSize,10)||N.Q.DEFAULT_CHARACTER_LIMIT,useChannelMentions:l}}),(function(e){return{actions:Object(s.bindActionCreators)({addMessageIntoHistory:D.addMessageIntoHistory,editPost:Z,hideEditPostModal:Y.g,openModal:q.b,setShowPreview:G},e)}}))(qn),Fn=a(1656),Bn=a(1323),Gn=a(189),Vn=a.n(Gn),Wn=a(1305);function zn(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Yn=N.Q.ActionTypes;class Qn extends Vn.a{constructor(){super(),Kn(this,"addModalListener",(e,t)=>{this.on(e,t)}),Kn(this,"removeModalListener",(e,t)=>{this.removeListener(e,t)}),Kn(this,"handleEventPayload",e=>{const t=e.action,{type:a,value:n}=t,s=zn(t,["type","value"]);switch(a){case Yn.TOGGLE_SHORTCUTS_MODAL:case Yn.TOGGLE_IMPORT_THEME_MODAL:case Yn.TOGGLE_DELETE_POST_MODAL:case Yn.TOGGLE_GET_TEAM_INVITE_LINK_MODAL:case Yn.TOGGLE_GET_PUBLIC_LINK_MODAL:case Yn.TOGGLE_QUICK_SWITCH_MODAL:case Yn.TOGGLE_CHANNEL_PURPOSE_UPDATE_MODAL:case Yn.TOGGLE_CHANNEL_NAME_UPDATE_MODAL:case Yn.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL:this.emit(a,n,s)}}),this.dispatchToken=Wn.a.register(this.handleEventPayload)}}var Zn=new Qn,Jn=a(1234);function Xn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $n extends O.a.PureComponent{constructor(e){super(e),Xn(this,"textAreaRef",O.a.createRef()),Xn(this,"onHide",()=>{this.setState({copiedLink:!1}),this.props.onHide()}),Xn(this,"copyLink",()=>{const e=this.textAreaRef.current;if(e){e.focus(),e.setSelectionRange(0,this.props.link.length);try{this.setState({copiedLink:document.execCommand("copy")})}catch(e){this.setState({copiedLink:!1})}}}),this.state={copiedLink:!1}}render(){let e=null;this.props.helpText&&(e=O.a.createElement("p",null,this.props.helpText,O.a.createElement("br",null),O.a.createElement("br",null)));let t=null;document.queryCommandSupported("copy")&&(t=O.a.createElement("button",{id:"linkModalCopyLink","data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.copyLink},O.a.createElement(ee.a,{id:"get_link.copy",defaultMessage:"Copy Link"})));const a=O.a.createElement("textarea",{id:"linkModalTextArea",className:"form-control no-resize min-height",ref:this.textAreaRef,value:this.props.link,onClick:this.copyLink,readOnly:!0});let n=null;return this.state.copiedLink&&(n=O.a.createElement("p",{className:"alert alert-success alert--confirm"},O.a.createElement(Jn.a,null),O.a.createElement(ee.a,{id:"get_link.clipboard",defaultMessage:" Link copied"}))),O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onHide,role:"dialog","aria-labelledby":"getLinkModalLabel"},O.a.createElement($.a.Header,{id:"getLinkModalLabel",closeButton:!0},O.a.createElement("h4",{className:"modal-title"},this.props.title)),O.a.createElement($.a.Body,null,e,a),O.a.createElement($.a.Footer,null,O.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-link",onClick:this.onHide},O.a.createElement(ee.a,{id:"get_link.close",defaultMessage:"Close"})),t,n))}}function es(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Xn($n,"propTypes",{show:C.a.bool.isRequired,onHide:C.a.func.isRequired,title:C.a.string.isRequired,helpText:C.a.string,link:C.a.string.isRequired}),Xn($n,"defaultProps",{helpText:null});class ts extends O.a.PureComponent{constructor(e){super(e),es(this,"handleToggle",(e,t)=>{this.setState({show:e,fileId:t.fileId})}),es(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!1,fileId:""}}componentWillUnmount(){Zn.removeModalListener(N.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}componentDidMount(){Zn.addModalListener(N.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}componentDidUpdate(e,t){this.state.show&&!t.show&&this.props.actions.getFilePublicLink(this.state.fileId)}render(){return O.a.createElement($n,{show:this.state.show,onHide:this.onHide,title:j.lb("get_public_link_modal.title","Copy Public Link"),helpText:j.lb("get_public_link_modal.help","The link below allows anyone to see this file without being registered on this server."),link:this.props.link})}}es(ts,"propTypes",{link:C.a.string,actions:C.a.shape({getFilePublicLink:C.a.func.isRequired}).isRequired}),es(ts,"defaultProps",{link:""});var as=Object(n.connect)((function(e){return{link:Bn.getFilePublicLink(e).link}}),(function(e){return{actions:Object(s.bindActionCreators)({getFilePublicLink:Fn.getFilePublicLink},e)}}))(ts),ns=a(1128);function ss(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class is extends O.a.PureComponent{constructor(e){super(e),ss(this,"handleKeyPress",e=>{"Enter"===e.key&&this.state.show&&this.handleSubmit()}),ss(this,"handleSubmit",()=>{const{actions:e}=this.props,{channel:t}=this.state;if(t){const a=t.id;e.leaveChannel(a).then(e=>{e.data&&this.handleHide()})}}),ss(this,"handleToggle",e=>{this.setState({channel:e,show:null!==e})}),ss(this,"handleHide",()=>{this.setState({show:!1})}),this.state={show:!1}}componentDidMount(){Zn.addModalListener(N.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}componentWillUnmount(){Zn.removeModalListener(N.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}render(){let e,t;this.state.channel&&this.state.channel.display_name&&(e=O.a.createElement(ee.a,{id:"leave_private_channel_modal.title",defaultMessage:"Leave Private Channel {channel}",values:{channel:O.a.createElement("b",null,this.state.channel.display_name)}}),t=O.a.createElement(ee.a,{id:"leave_private_channel_modal.message",defaultMessage:"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.",values:{channel:O.a.createElement("b",null,this.state.channel.display_name)}}));const a=O.a.createElement(ee.a,{id:"leave_private_channel_modal.leave",defaultMessage:"Yes, leave channel"});return O.a.createElement(ns.a,{show:this.state.show,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:a,onConfirm:this.handleSubmit,onCancel:this.handleHide})}}ss(is,"propTypes",{actions:C.a.shape({leaveChannel:C.a.func.isRequired}).isRequired});var rs=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({leaveChannel:E.e},e)}}))(is),os=a(74),ls=a(181);function cs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ds(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(a),!0).forEach((function(t){ms(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cs(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ms(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class us extends O.a.PureComponent{constructor(e){super(e),ms(this,"hideModal",()=>{this.setState({show:!1})}),ms(this,"onConfirm",e=>{this.hideModal();const t=ds({},this.state.currentUserStatus);if(t.status=this.state.newStatus,this.props.actions.setStatus(t),e){const e={category:x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:t.user_id,name:t.user_id,value:"true"};this.props.actions.savePreferences(e.user_id,[e])}}),ms(this,"onCancel",e=>{if(this.hideModal(),e){const e=ds({},this.state.currentUserStatus),t={category:x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:e.user_id,name:e.user_id,value:"false"};this.props.actions.savePreferences(t.user_id,[t])}}),ms(this,"renderModalMessage",()=>this.props.currentUserStatus===N.O.OUT_OF_OFFICE?O.a.createElement(ee.a,{id:"modal.manual_status.auto_responder.message_".concat(this.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}" and disable Automatic Replies?',values:{status:Object(j.ub)(this.state.newStatus)}}):O.a.createElement(ee.a,{id:"modal.manual_status.message_".concat(this.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}"?',values:{status:Object(j.ub)(this.state.newStatus)}})),this.state={show:!1,currentUserStatus:{},newStatus:e.newStatus||"online"}}componentDidMount(){this.props.actions.autoResetStatus().then(e=>{const t=e.manual,a=""===this.props.autoResetPref;this.setState({currentUserStatus:e,show:Boolean(e.status===N.O.OUT_OF_OFFICE||t&&a)})})}render(){const e=this.state.currentUserStatus.status||"",t="modal.manual_status.title_"+e,a=O.a.createElement(ee.a,{id:t,defaultMessage:'Your Status is Set to "{status}"',values:{status:Object(j.ub)(e)}}),n=this.renderModalMessage(),s=O.a.createElement(ee.a,{id:"modal.manual_status.button_".concat(this.state.newStatus),defaultMessage:'Yes, set my status to "{status}"',values:{status:Object(j.ub)(this.state.newStatus)}}),i="modal.manual_status.cancel_"+e,r=O.a.createElement(ee.a,{id:i,defaultMessage:'No, keep it as "{status}"',values:{status:Object(j.ub)(e)}}),o=O.a.createElement(ee.a,{id:"modal.manual_status.ask",defaultMessage:"Do not ask me again"}),l=this.props.currentUserStatus!==N.O.OUT_OF_OFFICE;return O.a.createElement(ns.a,{show:this.state.show,title:a,message:n,confirmButtonText:s,onConfirm:this.onConfirm,cancelButtonText:r,onCancel:this.onCancel,onExited:this.props.onHide,showCheckbox:l,checkboxText:o})}}ms(us,"propTypes",{autoResetPref:C.a.string,currentUserStatus:C.a.string,newStatus:C.a.string,onHide:C.a.func,actions:C.a.shape({autoResetStatus:C.a.func.isRequired,setStatus:C.a.func.isRequired,savePreferences:C.a.func.isRequired}).isRequired}),Object(ve.b)("modal.manual_status.auto_responder.message_"),Object(ve.b)("modal.manual_status.auto_responder.message_away"),Object(ve.b)("modal.manual_status.auto_responder.message_dnd"),Object(ve.b)("modal.manual_status.auto_responder.message_offline"),Object(ve.b)("modal.manual_status.auto_responder.message_online"),Object(ve.b)("modal.manual_status.button_"),Object(ve.b)("modal.manual_status.button_away"),Object(ve.b)("modal.manual_status.button_dnd"),Object(ve.b)("modal.manual_status.button_offline"),Object(ve.b)("modal.manual_status.button_online"),Object(ve.b)("modal.manual_status.cancel_"),Object(ve.b)("modal.manual_status.cancel_away"),Object(ve.b)("modal.manual_status.cancel_dnd"),Object(ve.b)("modal.manual_status.cancel_offline"),Object(ve.b)("modal.manual_status.cancel_ooo"),Object(ve.b)("modal.manual_status.message_"),Object(ve.b)("modal.manual_status.message_away"),Object(ve.b)("modal.manual_status.message_dnd"),Object(ve.b)("modal.manual_status.message_offline"),Object(ve.b)("modal.manual_status.message_online"),Object(ve.b)("modal.manual_status.title_"),Object(ve.b)("modal.manual_status.title_away"),Object(ve.b)("modal.manual_status.title_dnd"),Object(ve.b)("modal.manual_status.title_offline"),Object(ve.b)("modal.manual_status.title_ooo");var hs=Object(n.connect)((function(e){const{currentUserId:t}=e.entities.users;return{autoResetPref:Object(d.get)(e,x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,t,""),currentUserStatus:Object(u.getStatusForUserId)(e,t)}}),(function(e){return{actions:Object(s.bindActionCreators)({autoResetStatus:ls.a,setStatus:r.setStatus,savePreferences:os.savePreferences},e)}}))(us),ps=a(1405);function gs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const bs=Object(ps.defineMessages)({mainHeader:{default:{id:Object(ve.b)("shortcuts.header"),defaultMessage:"Keyboard Shortcuts\tCtrl|/"},mac:{id:Object(ve.b)("shortcuts.header.mac"),defaultMessage:"Keyboard Shortcuts\t⌘|/"}},navHeader:{id:Object(ve.b)("shortcuts.nav.header"),defaultMessage:"Navigation"},navPrev:{default:{id:Object(ve.b)("shortcuts.nav.prev"),defaultMessage:"Previous channel:\tAlt|Up"},mac:{id:Object(ve.b)("shortcuts.nav.prev.mac"),defaultMessage:"Previous channel:\t⌥|Up"}},navNext:{default:{id:Object(ve.b)("shortcuts.nav.next"),defaultMessage:"Next channel:\tAlt|Down"},mac:{id:Object(ve.b)("shortcuts.nav.next.mac"),defaultMessage:"Next channel:\t⌥|Down"}},navUnreadPrev:{default:{id:Object(ve.b)("shortcuts.nav.unread_prev"),defaultMessage:"Previous unread channel:\tAlt|Shift|Up"},mac:{id:Object(ve.b)("shortcuts.nav.unread_prev.mac"),defaultMessage:"Previous unread channel:\t⌥|Shift|Up"}},navUnreadNext:{default:{id:Object(ve.b)("shortcuts.nav.unread_next"),defaultMessage:"Next unread channel:\tAlt|Shift|Down"},mac:{id:Object(ve.b)("shortcuts.nav.unread_next.mac"),defaultMessage:"Next unread channel:\t⌥|Shift|Down"}},teamNavPrev:{default:{id:Object(ve.b)("shortcuts.team_nav.prev"),defaultMessage:"Previous team:\tCtrl|Alt|Up"},mac:{id:Object(ve.b)("shortcuts.team_nav.prev.mac"),defaultMessage:"Previous team:\t⌘|⌥|Up"}},teamNavNext:{default:{id:Object(ve.b)("shortcuts.team_nav.next"),defaultMessage:"Next team:\tCtrl|Alt|Down"},mac:{id:Object(ve.b)("shortcuts.team_nav.next.mac"),defaultMessage:"Next team:\t⌘|⌥|Down"}},teamNavSwitcher:{default:{id:Object(ve.b)("shortcuts.team_nav.switcher"),defaultMessage:"Switch to a specific team:\tCtrl|Alt|[1-9]"},mac:{id:Object(ve.b)("shortcuts.team_nav.switcher.mac"),defaultMessage:"Switch to a specific team:\t⌘|⌥|[1-9]"}},navSwitcher:{default:{id:Object(ve.b)("shortcuts.nav.switcher"),defaultMessage:"Quick channel switcher:\tCtrl|K"},mac:{id:Object(ve.b)("shortcuts.nav.switcher.mac"),defaultMessage:"Quick channel switcher:\t⌘|K"}},navDMMenu:{default:{id:Object(ve.b)("shortcuts.nav.direct_messages_menu"),defaultMessage:"Direct messages menu:\tCtrl|Shift|K"},mac:{id:Object(ve.b)("shortcuts.nav.direct_messages_menu.mac"),defaultMessage:"Direct messages menu:\t⌘|Shift|K"}},navSettings:{default:{id:Object(ve.b)("shortcuts.nav.settings"),defaultMessage:"Account settings:\tCtrl|Shift|A"},mac:{id:Object(ve.b)("shortcuts.nav.settings.mac"),defaultMessage:"Account settings:\t⌘|Shift|A"}},navMentions:{default:{id:Object(ve.b)("shortcuts.nav.recent_mentions"),defaultMessage:"Recent mentions:\tCtrl|Shift|M"},mac:{id:Object(ve.b)("shortcuts.nav.recent_mentions.mac"),defaultMessage:"Recent mentions:\t⌘|Shift|M"}},navFocusCenter:{default:{id:Object(ve.b)("shortcuts.nav.focus_center"),defaultMessage:"Set focus to input field:\tCtrl|Shift|L"},mac:{id:Object(ve.b)("shortcuts.nav.focus_center.mac"),defaultMessage:"Set focus to input field:\t⌘|Shift|L"}},navOpenCloseSidebar:{default:{id:Object(ve.b)("shortcuts.nav.open_close_sidebar"),defaultMessage:"Open or close the right sidebar\tCtrl|."},mac:{id:Object(ve.b)("shortcuts.nav.open_close_sidebar.mac"),defaultMessage:"Open or close the right sidebar\t⌘|."}},msgHeader:{id:Object(ve.b)("shortcuts.msgs.header"),defaultMessage:"Messages"},msgInputHeader:{id:Object(ve.b)("shortcuts.msgs.input.header"),defaultMessage:"Works inside an empty input field"},msgEdit:{id:Object(ve.b)("shortcuts.msgs.edit"),defaultMessage:"Edit last message in channel:\tUp"},msgReply:{id:Object(ve.b)("shortcuts.msgs.reply"),defaultMessage:"Reply to last message in channel:\tShift|Up"},msgReprintPrev:{default:{id:Object(ve.b)("shortcuts.msgs.reprint_prev"),defaultMessage:"Reprint previous message:\tCtrl|Up"},mac:{id:Object(ve.b)("shortcuts.msgs.reprint_prev.mac"),defaultMessage:"Reprint previous message:\t⌘|Up"}},msgReprintNext:{default:{id:Object(ve.b)("shortcuts.msgs.reprint_next"),defaultMessage:"Reprint next message:\tCtrl|Down"},mac:{id:Object(ve.b)("shortcuts.msgs.reprint_next.mac"),defaultMessage:"Reprint next message:\t⌘|Down"}},msgCompHeader:{id:Object(ve.b)("shortcuts.msgs.comp.header"),defaultMessage:"Autocomplete"},msgCompUsername:{id:Object(ve.b)("shortcuts.msgs.comp.username"),defaultMessage:"Username:\t@|[a-z]|Tab"},msgCompChannel:{id:Object(ve.b)("shortcuts.msgs.comp.channel"),defaultMessage:"Channel:\t~|[a-z]|Tab"},msgCompEmoji:{id:Object(ve.b)("shortcuts.msgs.comp.emoji"),defaultMessage:"Emoji:\t:|[a-z]|Tab"},msgLastReaction:{default:{id:Object(ve.b)("shortcuts.msgs.comp.last_reaction"),defaultMessage:"React to last message:\tCtrl|Shift|⧵"},mac:{id:Object(ve.b)("shortcuts.msgs.comp.last_reaction.mac"),defaultMessage:"React to last message:\t⌘|Shift|⧵"}},filesHeader:{id:Object(ve.b)("shortcuts.files.header"),defaultMessage:"Files"},filesUpload:{default:{id:Object(ve.b)("shortcuts.files.upload"),defaultMessage:"Upload files:\tCtrl|U"},mac:{id:Object(ve.b)("shortcuts.files.upload.mac"),defaultMessage:"Upload files:\t⌘|U"}},browserHeader:{id:Object(ve.b)("shortcuts.browser.header"),defaultMessage:"Built-in Browser Commands"},browserChannelPrev:{default:{id:Object(ve.b)("shortcuts.browser.channel_prev"),defaultMessage:"Back in history:\tAlt|Left"},mac:{id:Object(ve.b)("shortcuts.browser.channel_prev.mac"),defaultMessage:"Back in history:\t⌘|["}},browserChannelNext:{default:{id:Object(ve.b)("shortcuts.browser.channel_next"),defaultMessage:"Forward in history:\tAlt|Right"},mac:{id:Object(ve.b)("shortcuts.browser.channel_next.mac"),defaultMessage:"Forward in history:\t⌘|]"}},browserFontIncrease:{default:{id:Object(ve.b)("shortcuts.browser.font_increase"),defaultMessage:"Zoom in:\tCtrl|+"},mac:{id:Object(ve.b)("shortcuts.browser.font_increase.mac"),defaultMessage:"Zoom in:\t⌘|+"}},browserFontDecrease:{default:{id:Object(ve.b)("shortcuts.browser.font_decrease"),defaultMessage:"Zoom out:\tCtrl|-"},mac:{id:Object(ve.b)("shortcuts.browser.font_decrease.mac"),defaultMessage:"Zoom out:\t⌘|-"}},browserInputHeader:{id:Object(ve.b)("shortcuts.browser.input.header"),defaultMessage:"Works inside an input field"},browserHighlightPrev:{id:Object(ve.b)("shortcuts.browser.highlight_prev"),defaultMessage:"Highlight text to the previous line:\tShift|Up"},browserHighlightNext:{id:Object(ve.b)("shortcuts.browser.highlight_next"),defaultMessage:"Highlight text to the next line:\tShift|Down"},browserNewline:{id:Object(ve.b)("shortcuts.browser.newline"),defaultMessage:"Create a new line:\tShift|Enter"},info:{id:Object(ve.b)("shortcuts.info"),defaultMessage:"Begin a message with / for a list of all the commands at your disposal."}});class fs extends O.a.PureComponent{constructor(e){super(e),gs(this,"handleToggle",()=>{this.setState({show:!this.state.show})}),gs(this,"handleHide",()=>{this.setState({show:!1})}),this.state={show:!1}}componentDidMount(){Zn.addModalListener(N.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}componentWillUnmount(){Zn.removeModalListener(N.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}getShortcuts(){const{isMac:e}=this.props,t={};return Object.keys(bs).forEach(a=>{e&&bs[a].mac?t[a]=bs[a].mac:!e&&bs[a].default?t[a]=bs[a].default:t[a]=bs[a]}),t}render(){const e=this.getShortcuts(),{formatMessage:t}=this.props.intl,a=j.ab();return O.a.createElement($.a,{dialogClassName:"a11y__modal shortcuts-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHide,role:"dialog","aria-labelledby":"shortcutsModalLabel"},O.a.createElement("div",{className:"shortcuts-content"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"shortcutsModalLabel"},O.a.createElement("strong",null,_s(t(e.mainHeader))))),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-sm-4"},O.a.createElement("div",{className:"section"},O.a.createElement("div",null,O.a.createElement("h4",{className:"section-title"},O.a.createElement("strong",null,t(e.navHeader))),_s(t(e.navPrev)),_s(t(e.navNext)),_s(t(e.navUnreadPrev)),_s(t(e.navUnreadNext)),!a&&_s(t(e.teamNavPrev)),!a&&_s(t(e.teamNavNext)),_s(t(e.teamNavSwitcher)),_s(t(e.navSwitcher)),_s(t(e.navDMMenu)),_s(t(e.navSettings)),_s(t(e.navMentions)),_s(t(e.navFocusCenter)),_s(t(e.navOpenCloseSidebar))))),O.a.createElement("div",{className:"col-sm-4"},O.a.createElement("div",{className:"section"},O.a.createElement("div",null,O.a.createElement("h4",{className:"section-title"},O.a.createElement("strong",null,t(e.msgHeader))),O.a.createElement("span",null,O.a.createElement("strong",null,t(e.msgInputHeader))),O.a.createElement("div",{className:"subsection"},_s(t(e.msgEdit)),_s(t(e.msgReply)),_s(t(e.msgLastReaction)),_s(t(e.msgReprintPrev)),_s(t(e.msgReprintNext))),O.a.createElement("span",null,O.a.createElement("strong",null,t(e.msgCompHeader))),O.a.createElement("div",{className:"subsection"},_s(t(e.msgCompUsername)),_s(t(e.msgCompChannel)),_s(t(e.msgCompEmoji)))))),O.a.createElement("div",{className:"col-sm-4"},O.a.createElement("div",{className:"section"},O.a.createElement("div",null,O.a.createElement("h4",{className:"section-title"},O.a.createElement("strong",null,t(e.filesHeader))),_s(t(e.filesUpload))),O.a.createElement("div",{className:"section--lower"},O.a.createElement("h4",{className:"section-title"},O.a.createElement("strong",null,t(e.browserHeader))),_s(t(e.browserChannelPrev)),_s(t(e.browserChannelNext)),_s(t(e.browserFontIncrease)),_s(t(e.browserFontDecrease)),O.a.createElement("span",null,O.a.createElement("strong",null,t(e.browserInputHeader))),O.a.createElement("div",{className:"subsection"},_s(t(e.browserHighlightPrev)),_s(t(e.browserHighlightNext)),_s(t(e.browserNewline))))))),O.a.createElement("div",{className:"info__label"},t(e.info)))))}}function _s(e){if(!e)return null;const t=e.split("\t"),a=O.a.createElement("span",null,t[0]);let n=null;return t.length>1&&(n=t[1].split("|").map(e=>O.a.createElement("span",{className:"shortcut-key",key:e},e))),O.a.createElement("div",{className:"shortcut-line"},a,n)}gs(fs,"propTypes",{intl:ne.a.isRequired,isMac:C.a.bool.isRequired});var Es=Object(te.c)(fs),vs=a(180),ys=a(42),Cs=a(1116),ws=a.n(Cs),Os=a(1657),Ts=a.n(Os),Ss=a(1658),Ps=a.n(Ss);const Ms=e=>{let t="file-overlay hidden";return"right"===e.overlayType?t+=" right-file-overlay":"center"===e.overlayType&&(t+=" center-file-overlay"),O.a.createElement("div",{className:t},O.a.createElement("div",{className:"overlay__indent"},O.a.createElement("div",{className:"overlay__circle"},O.a.createElement("img",{className:"overlay__files",src:Ts.a,alt:"Files"}),O.a.createElement("span",null,O.a.createElement(ee.a,{id:"generic_icons.upload",defaultMessage:"Upload Icon"},e=>O.a.createElement("i",{className:"fa fa-upload",title:e})),O.a.createElement(ee.a,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})),O.a.createElement("img",{className:"overlay__logo",src:Ps.a,width:"100",alt:"Logo"}))))};Ms.propTypes={overlayType:C.a.string.isRequired};var Ns=Ms,Is=a(1364),js=(a(99),a(100)),As=a.n(js),Rs=a(1201),ks=a.n(Rs);function Ls(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ds{constructor(e){Ls(this,"action",void 0),Ls(this,"timer",void 0),this.action=e,this.timer=-1,this.fire=this.fire.bind(this)}fire(){this.action(),this.timer=-1}fireAfter(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}cancel(){window.clearTimeout(this.timer)}}function xs(e){return e.views.system.websocketConnectionErrorCount}var Us=a(182),qs=a(147),Hs=a(34),Fs=a(5),Bs=a(179),Gs=a(1282);function Vs(e,t){return async(a,n)=>{const s=n();let i=e,r=i.indexOf(" ");r<0&&(r=i.length);const l=i.substring(0,r).toLowerCase();switch(i=l+" "+i.substring(r,i.length).trim(),l){case"/search":return a(Y.k(i.substring(r+1,i.length))),{data:!0};case"/shortcuts":if(I.n()){return{error:{message:Object(j.lb)("create_post.shortcutsNotSupported","Keyboard shortcuts are not supported on your device")}}}return M.m(),{data:!0};case"/leave":{if(t.channel_id&&(t.root_id||t.parent_id))return M.h("/leave is not supported in reply threads. Use it in the center channel instead.",t.channel_id,t.parent_id),{data:!0};const e=Object(p.getCurrentChannel)(s);if(e.type===N.j.PRIVATE_CHANNEL)return M.k(e),{data:!0};if(e.type===N.j.DM_CHANNEL||e.type===N.j.GM_CHANNEL){const t=Object(u.getCurrentUserId)(s);let n,i;e.type===N.j.DM_CHANNEL?(n=Object(j.K)(e),i=N.j.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(n=e.id,i=N.j.Preferences.CATEGORY_GROUP_CHANNEL_SHOW);const r=Object(h.getCurrentTeamId)(s),l=Object(p.getRedirectChannelNameForTeam)(s,r),c=Object(h.getCurrentRelativeTeamUrl)(s);return se.a.push("".concat(c,"/channels/").concat(l)),a(Object(os.savePreferences)(t,[{category:i,name:n,user_id:t,value:"false"}])),Object(gn.isFavoriteChannel)(e)&&a(Object(o.unfavoriteChannel)(e.id)),{data:!0}}break}case"/settings":return a(Object(q.b)({modalId:N.u.USER_SETTINGS,dialogType:Gs.a})),{data:!0};case"/collapse":case"/expand":a(Y.j())}let c;try{c=await En.Client4.executeCommand(i,t)}catch(e){return{error:e}}const d=c.goto_location&&Object(Bs.f)(c.goto_location);return"/logout"===i.trim()?(M.e(d?c.goto_location:"/"),{data:!0}):(c.trigger_id&&a({type:Fs.IntegrationTypes.RECEIVED_DIALOG_TRIGGER_ID,data:c.trigger_id}),d&&(c.goto_location.startsWith("/")?se.a.push(c.goto_location):c.goto_location.startsWith(Object(Bs.e)())?se.a.push(c.goto_location.substr(Object(Bs.e)().length)):window.open(c.goto_location)),{data:!0})}}function Ws(e){return async(t,a)=>{const n=a().plugins.components.MessageWillBePosted;if(!n||0===n.length)return{data:e};let s=e;for(const e of n){const t=await e.hook(s);if(t){if(t.error)return{error:t.error};s=t.post}}return{data:s}}}function zs(e,t){return async(a,n)=>{const s=n().plugins.components.SlashCommandWillBePosted;if(!s||0===s.length)return{data:{message:e,args:t}};let i=e,r=t;for(const e of s){const t=await e.hook(i,r);if(t){if(t.error)return{error:t.error};i=t.message,r=t.args}}return{data:{message:i,args:r}}}}var Ks=a(82),Ys=a(174);function Qs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Zs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(a),!0).forEach((function(t){Js(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qs(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Js(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xs(){return Object(Ks.a)(N.I.COMMENT_DRAFT,(e,t)=>t?Zs({},t,{uploadsInProgress:[]}):t)}function $s(e,t){return Object(Ks.e)("".concat(N.I.COMMENT_DRAFT).concat(e),t)}function ei(e,t){const a=Object(Fa.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.COMMENT);return()=>(n,s)=>{const i=Object(ys.i)(s(),N.I.COMMENT_DRAFT,e);if(""!==i.message&&i.message!==a(s()))return;-1===t?n(Object(D.moveHistoryIndexBack)(x.Posts.MESSAGE_TYPES.COMMENT)):1===t&&n(Object(D.moveHistoryIndexForward)(x.Posts.MESSAGE_TYPES.COMMENT));const r=a(s());n($s(e,Zs({},i,{message:r})))}}function ti(e,t,a){return async(n,s)=>{const i=s(),r=Object(u.getCurrentUserId)(i),o=j.I();let l={file_ids:[],message:a.message,channel_id:e,root_id:t,parent_id:t,pending_post_id:"".concat(r,":").concat(o),user_id:r,create_at:o,metadata:{},props:Zs({},a.props)};const c=await n(Ws(l));return c.error?{error:c.error}:(l=c.data,n(Y.b(l,a.fileInfos)))}}function ai(e,t,a){return(n={})=>async(s,i)=>{const r=Object(ys.i)(i(),N.I.COMMENT_DRAFT,t),{message:o}=r;s(Object(D.addMessageIntoHistory)(o)),s($s(t,null));const l=j.a.exec(o),c=Object(qs.getCustomEmojisByName)(i()),d=new Ys.a(c);var m,u,p;l&&d.has(l[2])?s((m=a,u=l[1],p=l[2],e=>{"+"===u?e(Y.a(m,p)):"-"===u&&e(Object(D.removeReaction)(m,p))})):0!==o.indexOf("/")||n.ignoreSlash?s(ti(e,t,r)):await s(function(e,t,a){return async(n,s)=>{const i=s(),r=Object(h.getCurrentTeamId)(i);let o={channel_id:e,team_id:r,root_id:t,parent_id:t},{message:l}=a;const c=await n(zs(l,o));if(c.error)return{error:c.error};if(!c.data.message&&!c.data.args)return{};l=c.data.message,o=c.data.args;const{error:d}=await n(Vs(l,o));if(d){if(d.sendMessage)return n(ti(e,t,a));throw d}return{}}}(e,t,r))}}function ni(e,t){const a=function(e,t){return Object(ba.createSelector)(u.getCurrentUserId,t=>Object(Fa.getPostIdsInChannel)(t,e),e=>t=>Object(Fa.getPost)(e,t),(e,a,n)=>{let s=null;if(!a)return s;for(const i of a){const a=n(i)||{};if(!(a.user_id!==e||a.props&&a.props.from_webhook||a.state===N.j.POST_DELETED||a.type&&a.type.startsWith(N.j.SYSTEM_MESSAGE_PREFIX)||Object(Hs.isPostPendingOrFailed)(a))){if(!t){s=a;break}if(a.root_id===t||a.id===t){s=a;break}}}return s})}(e,t),n=Object(Fa.makeGetCommentCountForPost)();return()=>(e,t)=>{const s=t(),i=a(s);return i?e(Y.l(i.id,n(s,{post:i}),"reply_textbox",j.lb("create_comment.commentTitle","Comment"),!0)):{data:!1}}}var si=a(1163);function ii(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;const t=e.getData("text/html");if(!/<table/i.test(t))return!1;const a=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return a||!1}function ri(e){return/\b(js|blob|diff)-./.test(e)}function oi(e){return null==e.textContent?" ":e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")}function li(e,t){const a=Array.from(e.querySelectorAll("tr")),n=a.shift(),s=n?(i=n,Array.from(i.querySelectorAll("td, th")).map(oi)):[];var i;const r=s.map(()=>"---"),o="|".concat(s.join(" | "),"|\n|").concat(r.join(" | "),"|\n"),l=a.map(e=>"|".concat(Array.from(e.querySelectorAll("td")).map(oi).join(" | "),"|")).join("\n"),c="".concat(o).concat(l,"\n");return t?"".concat(t,"\n\n").concat(c):c}function ci(e,t,a){const{firstPiece:n,lastPiece:s}=Object(ae.v)(e,t),i=""===s?"":"\n",r=(""===n?"":"\n")+"```\n"+function(e){return-1!==Array.from(e.types).indexOf("text/plain")&&e.getData("text/plain")}(a)+"\n```"+i;return{formattedMessage:"".concat(n).concat(r).concat(s),formattedCodeBlock:r}}var di=a(1387),mi=a(1123);class ui extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.attach",defaultMessage:"Attachment Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"img","aria-label":e},O.a.createElement("g",{fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-1029.000000, -954.000000)",fillRule:"nonzero",fill:"inherit"},O.a.createElement("g",{transform:"translate(25.000000, 937.000000)"},O.a.createElement("g",{transform:"translate(1004.000000, 17.000000)"},O.a.createElement("path",{d:"M5.35,15.56 C3.98,15.56 2.61,15.039 1.567,13.997 C0.557,12.984 0,11.642 0,10.212 C0,8.783 0.557,7.44 1.566,6.429 L6.869,1.126 C8.371,-0.376 10.812,-0.375 12.314,1.125 C13.815,2.627 13.815,5.069 12.314,6.57 L7.011,11.873 C6.094,12.792 4.603,12.79 3.687,11.873 C2.771,10.958 2.771,9.467 3.687,8.551 L8.99,3.248 C9.323,2.916 9.861,2.916 10.193,3.248 C10.525,3.579 10.525,4.118 10.193,4.449 L4.89,9.752 C4.637,10.006 4.637,10.418 4.89,10.672 C5.143,10.923 5.555,10.925 5.809,10.672 L11.113,5.369 C11.952,4.53 11.952,3.166 11.113,2.327 C10.276,1.49 8.911,1.488 8.073,2.327 L2.769,7.631 C2.079,8.32 1.699,9.237 1.699,10.212 C1.699,11.188 2.079,12.104 2.768,12.794 C4.19,14.216 6.502,14.216 7.925,12.798 L7.929,12.794 C7.929,12.793 7.929,12.793 7.929,12.793 L15.355,5.369 C15.687,5.037 16.224,5.037 16.556,5.369 C16.888,5.7 16.888,6.239 16.556,6.57 L8.779,14.348 L8.761,14.332 C7.776,15.15 6.562,15.56 5.35,15.56 Z"}))))))))}}var hi=a(1176);class pi extends O.a.PureComponent{render(){const{canDownload:e,children:t,compactDisplay:a,fileInfo:n,handleImageClick:s,iconClass:i}=this.props,r=n.name,o=Object(hi.f)(r);let l;return l=a?O.a.createElement(mi.a,{delayShow:1e3,placement:"top",overlay:O.a.createElement(di.a,{id:"file-name__tooltip"},r)},O.a.createElement("a",{id:"file-attachment-link",href:"#",onClick:s,className:"post-image__name",rel:"noopener noreferrer"},O.a.createElement(ui,{className:"icon"}),o)):e?O.a.createElement("div",{className:i||"post-image__name"},O.a.createElement(mi.a,{delayShow:1e3,placement:"top",overlay:O.a.createElement(di.a,{id:"file-name__tooltip"},Object(j.lb)("view_image_popover.download","Download"))},O.a.createElement("a",{href:Object(si.getFileDownloadUrl)(n.id),"aria-label":Object(j.lb)("view_image_popover.download","Download").toLowerCase(),download:r,target:"_blank",rel:"noopener noreferrer"},t||o))):O.a.createElement("span",{className:"post-image__name"},o),l}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(pi,"propTypes",{fileInfo:C.a.any.isRequired,handleImageClick:C.a.func,compactDisplay:C.a.bool,canDownload:C.a.bool,children:C.a.node,iconClass:C.a.string});a(1673);var gi=a(1412);function bi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fi extends O.a.PureComponent{constructor(...e){super(...e),bi(this,"handleRemove",()=>{this.props.handleRemove(this.props.clientId)})}render(){let e,t,a,n=0;const{fileInfo:s,clientId:i}=this.props;if(s){n=s.percent?s.percent:0;const i=" (".concat(n.toFixed(0),"%)"),r=Object(hi.d)(s.type);t=O.a.createElement("div",{className:"file-icon "+j.B(r)}),e=O.a.createElement(O.a.Fragment,null,O.a.createElement(pi,{fileInfo:s,compactDisplay:!1,canDownload:!1}),O.a.createElement("span",{className:"post-image__uploadingTxt"},100===n?O.a.createElement(ee.a,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):O.a.createElement(O.a.Fragment,null,O.a.createElement(ee.a,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."}),O.a.createElement("span",null,i)))),n&&(a=O.a.createElement(gi.a,{className:"post-image__progressBar",now:n,active:100===n}))}return O.a.createElement("div",{ref:i,key:i,className:"file-preview post-image__column","data-client-id":i},O.a.createElement("div",{className:"post-image__thumbnail"},t),O.a.createElement("div",{className:"post-image__details"},O.a.createElement("div",{className:"post-image__detail_wrapper"},O.a.createElement("div",{className:"post-image__detail"},e)),O.a.createElement("div",null,O.a.createElement("a",{className:"file-preview__remove",onClick:this.handleRemove},O.a.createElement("i",{className:"icon icon-close"}))),a))}}function _i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}bi(fi,"propTypes",{handleRemove:C.a.func.isRequired,clientId:C.a.string.isRequired,fileInfo:C.a.any.isRequired});class Ei extends O.a.PureComponent{constructor(...e){super(...e),_i(this,"handleRemove",e=>{this.props.onRemove(e)})}render(){const e=[];if(this.props.fileInfos.forEach(t=>{const a=j.z(t.extension);let n,s="file-preview post-image__column";if(a===N.n.SVG&&this.props.enableSVGs)n=O.a.createElement("img",{alt:"file preview",className:"post-image normal",src:Object(si.getFileUrl)(t.id)});else if(a===N.n.IMAGE){let e="post-image";t.width&&t.width<N.Q.THUMBNAIL_WIDTH&&t.height&&t.height<N.Q.THUMBNAIL_HEIGHT?e+=" small":e+=" normal";let a=Object(si.getFileThumbnailUrl)(t.id);j.X(t.extension)&&!t.has_preview_image&&(a=Object(si.getFileUrl)(t.id)),n=O.a.createElement("div",{className:e,style:{backgroundImage:"url(".concat(a,")"),backgroundSize:"cover"}})}else s+=" custom-file",n=O.a.createElement("div",{className:"file-icon "+j.B(a)});e.push(O.a.createElement("div",{key:t.id,className:s},O.a.createElement("div",{className:"post-image__thumbnail"},n),O.a.createElement("div",{className:"post-image__details"},O.a.createElement("div",{className:"post-image__detail_wrapper"},O.a.createElement("div",{className:"post-image__detail"},O.a.createElement(pi,{fileInfo:t,compactDisplay:!1,canDownload:!1}),t.extension&&O.a.createElement("span",{className:"post-image__type"},t.extension.toUpperCase()),O.a.createElement("span",{className:"post-image__size"},j.n(t.size)))),O.a.createElement("div",null,O.a.createElement("a",{className:"file-preview__remove",onClick:this.handleRemove.bind(this,t.id)},O.a.createElement("i",{className:"icon icon-close"}))))))}),this.props.uploadsInProgress&&this.props.uploadsProgressPercent){const t=this.props.uploadsProgressPercent;this.props.uploadsInProgress.forEach(a=>{const n=t[a];n&&e.push(O.a.createElement(fi,{key:a,clientId:a,fileInfo:n,handleRemove:this.handleRemove}))})}return O.a.createElement("div",{className:"file-preview__container",ref:"container"},e)}}_i(Ei,"propTypes",{enableSVGs:C.a.bool.isRequired,onRemove:C.a.func.isRequired,fileInfos:C.a.arrayOf(C.a.oneOfType([C.a.any,C.a.shape({name:C.a.string.isRequired,percent:C.a.number,type:C.a.string})])),uploadsInProgress:C.a.arrayOf(C.a.string),uploadsProgressPercent:C.a.objectOf(C.a.oneOfType([C.a.any,C.a.shape({name:C.a.string.isRequired,percent:C.a.number,type:C.a.string})]))}),_i(Ei,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var vi=Object(n.connect)((function(e){return{enableSVGs:"true"===Object(m.getConfig)(e).EnableSVGs}}))(Ei),yi=a(83),Ci=a(1422),wi=a.n(Ci),Oi=a(63);function Ti(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Si(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pi(e,t,a,n,s){return n=>(n({type:Fs.FileTypes.UPLOAD_FILES_REQUEST}),wi.a.post(En.Client4.getFilesRoute()).set(En.Client4.getOptions({method:"post"}).headers).attach("files",e,t).field("channel_id",a).field("client_ids",s).accept("application/json"))}function Mi(e,t,a,n,s,{err:i,res:r}){return(e,t)=>{if(i){let o;o=r&&r.body&&r.body.id?r.body:0!==i.status&&i.status?{message:j.lb("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+i.status+")"}:{message:j.lb("file_upload.generic_error","There was a problem uploading your files.")},Object(Oi.forceLogoutIfNecessary)(i,e,t);const l={type:Fs.FileTypes.UPLOAD_FILES_FAILURE,clientIds:[s],channelId:a,rootId:n,error:i};return e(Object(yi.batchActions)([l,Object(Q.getLogErrorAction)(i)])),{error:o}}const o=r.body.file_infos.map((e,t)=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(a),!0).forEach((function(t){Si(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ti(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{clientId:r.body.client_ids[t]}));return e(Object(yi.batchActions)([{type:Fs.FileTypes.RECEIVED_UPLOAD_FILES,data:o,channelId:a,rootId:n},{type:Fs.FileTypes.UPLOAD_FILES_SUCCESS}])),{data:r.body}}}var Ni=a(316),Ii=a.n(Ni);var ji=a(1137),Ai=a(1130);function Ri(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ki(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(a),!0).forEach((function(t){Li(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ri(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Li(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Di=Object(ps.defineMessages)({limited:{id:Object(ve.b)("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:Object(ve.b)("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:Object(ve.b)("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:Object(ve.b)("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:Object(ve.b)("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:Object(ve.b)("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:Object(ve.b)("file_upload.upload_files"),defaultMessage:"Upload files"}}),xi={left:"inherit",right:0,bottom:"100%",top:"auto"};class Ui extends w.PureComponent{constructor(e){super(e),Li(this,"fileUploadSuccess",(e,t,a)=>{if(e){this.props.onFileUpload(e.file_infos,e.client_ids,t,a);const s=Object.assign({},this.state.requests);for(var n=0;n<e.client_ids.length;n++)Reflect.deleteProperty(s,e.client_ids[n]);this.setState({requests:s})}}),Li(this,"fileUploadFail",(e,t,a,n)=>{this.props.onUploadError(e,t,a,n)}),Li(this,"pluginUploadFiles",e=>{this.props.onUploadError(null),this.uploadFiles(e)}),Li(this,"checkPluginHooksAndUploadFiles",e=>{this.props.onUploadError(null);let t=Array.from(e).sort((e,t)=>e.name.localeCompare(t.name,this.props.locale,{numeric:!0}));const a=this.props.pluginFilesWillUploadHooks;for(const e of a){const a=e.hook(t,this.pluginUploadFiles);a.message&&this.props.onUploadError(a.message),t=a.files}t&&this.uploadFiles(t)}),Li(this,"uploadFiles",e=>{const{currentChannelId:t,rootId:a}=this.props,n=N.Q.MAX_UPLOAD_FILES-this.props.fileCount;let s=0;const i=[],r=[],o=[];for(let l=0;l<e.length&&s<n;l++){if(e[l].size>this.props.maxFileSize){i.push(e[l]);continue}0===e[l].size&&r.push(e[l]);const n=Object(j.p)(),c=this.props.actions.uploadFile(e[l],e[l].name,t,a,n);c.on("progress",t=>{this.props.onUploadProgress({clientId:n,name:e[l].name,percent:t.percent,type:e[l].type})}),c.end((s,i)=>{const{error:r,data:o}=this.props.actions.handleFileUploadEnd(e[l],e[l].name,t,a,n,{err:s,res:i});r?this.fileUploadFail(r,n,t,a):o&&this.fileUploadSuccess(o,t,a)}),this.setState({requests:ki({},this.state.requests,{[n]:c})}),o.push(n),s+=1}this.props.onUploadStart(o,t);const{formatMessage:l}=this.props.intl,c=[];if(e.length>n&&c.push(l(Di.limited,{count:N.Q.MAX_UPLOAD_FILES})),i.length>1){var d=i.map(e=>e.name).join(", ");c.push(l(Di.filesAbove,{max:this.props.maxFileSize/1048576,filenames:d}))}else i.length>0&&c.push(l(Di.fileAbove,{max:this.props.maxFileSize/1048576,filename:i[0].name}));if(r.length>1){var m=r.map(e=>e.name).join(", ");c.push(l(Di.zeroBytesFiles,{filenames:m}))}else r.length>0&&c.push(l(Di.zeroBytesFile,{filename:r[0].name}));c.length>0&&this.props.onUploadError(c.join(", "))}),Li(this,"handleChange",e=>{e.target.files.length>0&&(this.checkPluginHooksAndUploadFiles(e.target.files),Object(j.d)(e.target)),this.props.onFileUploadChange()}),Li(this,"handleDrop",e=>{if(!this.props.canUploadFiles)return void this.props.onUploadError(Object(j.lb)("file_upload.disabled","File attachments are disabled."));this.props.onUploadError(null);const t=e.dataTransfer.items||[],a=e.dataTransfer.files,n=[];Array.from(a).forEach((e,a)=>{const s=t[a];s&&s.webkitGetAsEntry&&(null===s.webkitGetAsEntry()||s.webkitGetAsEntry().isDirectory)||n.push(e)});const s=e.dataTransfer.types;if(s){if(Object(j.gb)(e.dataTransfer))return;if(s.includes&&!s.includes("Files"))return;if(s.contains&&!s.contains("Files"))return}0!==n.length?(n.length&&this.checkPluginHooksAndUploadFiles(n),this.props.onFileUploadChange()):this.props.onUploadError(Object(j.lb)("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))}),Li(this,"registerDragEvents",(e,t)=>{const a=this,n=document.querySelector(t),s=new Ds(()=>{n.classList.add("hidden")});let i={};i=this.props.canUploadFiles?{enter(e){var t=e.detail.dataTransfer;!Object(j.gb)(t)&&Object(j.W)(t)&&n.classList.remove("hidden")},leave(e){var t=e.detail.dataTransfer;!Object(j.gb)(t)&&Object(j.W)(t)&&n.classList.add("hidden"),s.cancel()},over(){s.fireAfter(500)},drop(e){n.classList.add("hidden"),s.cancel(),a.handleDrop(e.detail)}}:{drop(e){a.handleDrop(e.detail)}},this.unbindDragsterEvents=function(e,t){const a=()=>{},n={enter:a,leave:a,over:a,drop:a},s=Object.assign(n,t),i=document.querySelector(e);if(!i)return a;let r=!1,o=!1;const l=e=>{if(r)return void(o=!0);r=!0;const t=new CustomEvent("dragster:enter",{detail:e});i.dispatchEvent(t),e.preventDefault()},c=e=>{if(o?o=!1:r&&(r=!1),!r&&!o){const t=new CustomEvent("dragster:leave",{detail:e});i.dispatchEvent(t)}e.preventDefault()},d=e=>{const t=new CustomEvent("dragster:over",{detail:e});i.dispatchEvent(t),e.preventDefault()},m=e=>{if(o?o=!1:r&&(r=!1),!r&&!o){const t=new CustomEvent("dragster:drop",{detail:e});i.dispatchEvent(t)}e.preventDefault()};return i.addEventListener("dragenter",l),i.addEventListener("dragleave",c),i.addEventListener("dragover",d),i.addEventListener("drop",m),i.addEventListener("dragster:enter",s.enter),i.addEventListener("dragster:leave",s.leave),i.addEventListener("dragster:over",s.over),i.addEventListener("dragster:drop",s.drop),()=>{i.removeEventListener("dragenter",l),i.removeEventListener("dragleave",c),i.removeEventListener("dragover",d),i.removeEventListener("drop",m),i.removeEventListener("dragster:enter",s.enter),i.removeEventListener("dragster:leave",s.leave),i.removeEventListener("dragster:over",s.over),i.removeEventListener("dragster:drop",s.drop)}}(e,i)}),Li(this,"containsEventTarget",(e,t)=>e&&e.contains(t)),Li(this,"pasteUpload",e=>{const{formatMessage:t}=this.props.intl;if(!e.clipboardData||!e.clipboardData.items||ii(e.clipboardData))return;const a=this.props.getTarget(),n=Ii.a.findDOMNode(a);if(!this.containsEventTarget(n,e.target))return;this.props.onUploadError(null);const s=[];for(let t=0;t<e.clipboardData.items.length;t++){const a=e.clipboardData.items[t];"file"===a.kind&&s.push(a)}if(s&&s.length>0){if(!this.props.canUploadFiles)return void this.props.onUploadError(Object(j.lb)("file_upload.disabled","File attachments are disabled."));const e=[];for(let a=0;a<s.length;a++){const n=s[a].getAsFile();if(!n)continue;var i=new Date;let o=i.getHours();o=o<10?"0".concat(o):"".concat(o);let l=i.getMinutes();l=l<10?"0".concat(l):"".concat(l);var r="";n.name?n.name.includes(".")&&(r=n.name.substr(n.name.lastIndexOf("."))):s[a].type.includes("/")&&(r="."+s[a].type.split("/")[1].toLowerCase());const c=t(Di.pasted)+i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+o+"-"+l+r,d=new Blob([n],{type:n.type});d.name=c,e.push(d)}e.length>0&&(this.checkPluginHooksAndUploadFiles(e),this.props.onFileUploadChange())}}),Li(this,"keyUpload",e=>{if(Object(j.e)(e)&&Object(j.Z)(e,N.Q.KeyCodes.U)){if(e.preventDefault(),!this.props.canUploadFiles)return void this.props.onUploadError(Object(j.lb)("file_upload.disabled","File attachments are disabled."));const t="post"===this.props.postType&&"post_textbox"===document.activeElement.id,a="comment"===this.props.postType&&"reply_textbox"===document.activeElement.id;(t||a)&&(this.fileInput.current.focus(),this.fileInput.current.click())}}),Li(this,"cancelUpload",e=>{const t=Object.assign({},this.state.requests),a=t[e];a&&(a.abort(),Reflect.deleteProperty(t,e),this.setState({requests:t}))}),Li(this,"handleMaxUploadReached",e=>{e&&e.preventDefault();const{onUploadError:t}=this.props,{formatMessage:a}=this.props.intl;t(a(Di.limited,{count:N.Q.MAX_UPLOAD_FILES}))}),Li(this,"toggleMenu",e=>{this.setState({menuOpen:e})}),Li(this,"handleLocalFileUploaded",e=>{N.Q.MAX_UPLOAD_FILES-this.props.fileCount>0?this.props.onClick&&this.props.onClick():this.handleMaxUploadReached(e),this.setState({menuOpen:!1})}),Li(this,"simulateInputClick",e=>{e.preventDefault(),e.stopPropagation(),this.fileInput.current.click()}),this.state={requests:{},menuOpen:!1},this.fileInput=O.a.createRef()}componentDidMount(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}componentWillUnmount(){document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),this.unbindDragsterEvents()}render(){const{formatMessage:e}=this.props.intl;let t=!0;Object(I.o)()&&(t=!1);let a="";Object(I.i)()&&(a="image/*");const n=N.Q.MAX_UPLOAD_FILES-this.props.fileCount;let s;const i=e({id:"accessibility.button.attachment",defaultMessage:"attachment"});if(0===this.props.pluginFileUploadMethods.length)s=O.a.createElement("div",null,O.a.createElement("button",{type:"button",id:"fileUploadButton","aria-label":i,className:"style--none post-action icon icon--attachment",onClick:this.simulateInputClick,onTouchEnd:this.simulateInputClick},O.a.createElement(ui,{className:"d-flex"})),O.a.createElement("input",{id:"fileUploadInput",tabIndex:"-1","aria-label":e(Di.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:a}));else{const n=this.props.pluginFileUploadMethods.map(e=>O.a.createElement("li",{key:e.pluginId+"_fileuploadpluginmenuitem",onClick:()=>{e.action&&e.action(this.checkPluginHooksAndUploadFiles),this.setState({menuOpen:!1})}},O.a.createElement("a",{href:"#"},O.a.createElement("span",{className:"mr-2"},e.icon),e.text)));s=O.a.createElement("div",null,O.a.createElement("input",{tabIndex:"-1","aria-label":e(Di.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:a}),O.a.createElement(ji.a,null,O.a.createElement("button",{type:"button","aria-label":i,className:"style--none post-action"},O.a.createElement("div",{id:"fileUploadButton",className:"icon icon--attachment"},O.a.createElement(ui,{className:"d-flex"}))),O.a.createElement(Ai.a,{id:"fileUploadOptions",openLeft:!0,openUp:!0,ariaLabel:e({id:"file_upload.menuAriaLabel",defaultMessage:"Upload type selector"}),customStyles:xi},O.a.createElement("li",null,O.a.createElement("a",{href:"#",onClick:this.simulateInputClick,onTouchEnd:this.simulateInputClick},O.a.createElement("span",{className:"mr-2"},O.a.createElement("i",{className:"fa fa-laptop"})),O.a.createElement(ee.a,{id:"yourcomputer",defaultMessage:"Your computer"}))),n)))}return this.props.canUploadFiles||(s=null),O.a.createElement("div",{className:n<=0?" style--none btn-file__disabled":"style--none"},s)}}Li(Ui,"propTypes",{currentChannelId:C.a.string.isRequired,rootId:C.a.string,fileCount:C.a.number.isRequired,getTarget:C.a.func.isRequired,intl:ne.a.isRequired,locale:C.a.string.isRequired,onClick:C.a.func,onFileUpload:C.a.func,onFileUploadChange:C.a.func,onUploadError:C.a.func,onUploadStart:C.a.func,postType:C.a.string,maxFileSize:C.a.number,canUploadFiles:C.a.bool.isRequired,pluginFileUploadMethods:C.a.arrayOf(C.a.object),pluginFilesWillUploadHooks:C.a.arrayOf(C.a.object),onUploadProgress:C.a.func.isRequired,actions:C.a.shape({uploadFile:C.a.func.isRequired,handleFileUploadEnd:C.a.func.isRequired}).isRequired}),Li(Ui,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});const qi=Object(te.c)(Ui,{forwardRef:!0});qi.displayName="injectIntl(FileUpload)";var Hi=qi;var Fi=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=parseInt(t.MaxFileSize,10);return{currentChannelId:Object(p.getCurrentChannelId)(e),maxFileSize:a,canUploadFiles:Object(hi.b)(t),locale:Object(Us.a)(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}}),(function(e){return{actions:Object(s.bindActionCreators)({uploadFile:Pi,handleFileUploadEnd:Mi},e)}}),null,{withRef:!0})(Hi),Bi=a(1682);function Gi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vi extends O.a.PureComponent{constructor(...e){super(...e),Gi(this,"getTypingText",()=>{let e=[],t=0;if(this.props.typingUsers&&(e=[...this.props.typingUsers],t=e.length),0===t)return"";if(1===t)return O.a.createElement(ee.a,{id:"msg_typing.isTyping",defaultMessage:"{user} is typing...",values:{user:e[0]}});const a=e.pop();return O.a.createElement(ee.a,{id:"msg_typing.areTyping",defaultMessage:"{users} and {last} are typing...",values:{users:e.join(", "),last:a}})})}render(){return O.a.createElement("span",{className:"msg-typing"},this.getTypingText())}}Gi(Vi,"propTypes",{typingUsers:C.a.arrayOf(C.a.string).isRequired});var Wi=Object(n.connect)((function(){const e=Object(Bi.makeGetUsersTypingByChannelAndPost)();return function(t,a){return{typingUsers:e(t,{channelId:a.channelId,postId:a.postId})}}}))(Vi);class zi extends O.a.Component{shouldComponentUpdate(e){return e.show!==this.props.show}render(){return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onHide,role:"dialog","aria-labelledby":"postDeletedModalLabel","data-testid":"postDeletedModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"postDeletedModalLabel"},O.a.createElement(ee.a,{id:"post_delete.notPosted",defaultMessage:"Comment could not be posted"}))),O.a.createElement($.a.Body,null,O.a.createElement("p",null,O.a.createElement(ee.a,{id:"post_delete.someone",defaultMessage:"Someone deleted the message on which you tried to post a comment."}))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-primary",autoFocus:!0,onClick:this.props.onHide,"data-testid":"postDeletedModalOkButton"},O.a.createElement(ee.a,{id:"post_delete.okay",defaultMessage:"Okay"}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(zi,"propTypes",{show:C.a.bool.isRequired,onHide:C.a.func.isRequired});var Ki=a(1120);function Yi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qi extends O.a.PureComponent{constructor(...e){super(...e),Yi(this,"renderSlashCommandError",()=>{if(!this.props.submittedMessage)return this.props.error.message;const e=this.props.submittedMessage.split(" ")[0];return O.a.createElement(O.a.Fragment,null,O.a.createElement(ee.a,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of ''{command}'' not found. ",values:{command:e}}),O.a.createElement("a",{href:"#",onClick:this.props.handleSubmit},O.a.createElement(ee.a,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})))})}render(){const e=this.props.error;if(!e)return null;let t=e.message;return Object(ae.m)(e)&&(t=this.renderSlashCommandError()),O.a.createElement("div",{className:"has-error"},O.a.createElement("label",{className:"control-label"},t))}}Yi(Qi,"propTypes",{error:C.a.shape({message:C.a.oneOfType([C.a.string,C.a.any]).isRequired}).isRequired,handleSubmit:C.a.func.isRequired,submittedMessage:C.a.string});var Zi=Qi;function Ji(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(a),!0).forEach((function(t){$i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ji(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const er=N.Q.KeyCodes;class tr extends O.a.PureComponent{static getDerivedStateFromProps(e,t){let a={createPostErrorId:e.createPostErrorId,rootId:e.rootId,messageInHistory:e.messageInHistory,draft:t.draft||Xi({},e.draft,{caretPosition:e.draft.message.length,uploadsInProgress:[]})};const n=e.rootId!==t.rootId,s=e.messageInHistory!==t.messageInHistory;return(n||s)&&(a=Xi({},a,{draft:Xi({},e.draft,{uploadsInProgress:n?[]:e.draft.uploadsInProgress})})),"api.post.create_post.root_id.app_error"===e.createPostErrorId&&e.createPostErrorId!==t.createPostErrorId&&(a=Xi({},a,{showPostDeletedModal:!0})),a}constructor(e){super(e),$i(this,"setShowPreview",e=>{this.props.setShowPreview(e)}),$i(this,"focusTextboxIfNecessary",e=>{this.props.rhsExpanded&&(document.getElementsByClassName("channel-switch-modal").length||Object(ae.t)(e,document.activeElement)&&this.focusTextbox())}),$i(this,"setCaretPosition",e=>{const t=this.refs.textbox.getWrappedInstance().getInputBox();this.setState({caretPosition:e},()=>{j.sb(t,e)})}),$i(this,"pasteHandler",e=>{if(!e.clipboardData||!e.clipboardData.items||"reply_textbox"!==e.target.id)return;const{clipboardData:t}=e,a=ii(t);if(!a)return;e.preventDefault();const{draft:n}=this.state;let s=n.message;if(ri(a.className)){const{formattedMessage:e,formattedCodeBlock:a}=ci(this.state.caretPosition,s,t),n=this.state.caretPosition+a.length;s=e,this.setCaretPosition(n)}else s=li(a,n.message.trim());const i=Xi({},n,{message:s});this.props.onUpdateCommentDraft(i),this.setState({draft:i})}),$i(this,"handleNotifyAllConfirmation",e=>{this.hideNotifyAllModal(),this.doSubmit(e)}),$i(this,"hideNotifyAllModal",()=>{this.setState({showConfirmModal:!1})}),$i(this,"showNotifyAllModal",()=>{this.setState({showConfirmModal:!0})}),$i(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),$i(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1})}),$i(this,"handleEmojiClick",e=>{const t=e.name||e.aliases[0];if(!t)return;const{draft:a}=this.state;let n="";if(""===a.message)n=":".concat(t,": ");else{const{draft:{message:e}}=this.state,{firstPiece:a,lastPiece:s}=Object(ae.v)(this.state.caretPosition,e);n=""===a?":".concat(t,": ").concat(s," "):"".concat(a," :").concat(t,": ").concat(s," ");const i=""===a?":".concat(t,": ").length:"".concat(a," :").concat(t,": ").length;this.setCaretPosition(i)}const s=Xi({},a,{message:n});this.props.onUpdateCommentDraft(s),this.draftsForPost[this.props.rootId]=s,this.setState({showEmojiPicker:!1,draft:s})}),$i(this,"handleGifClick",e=>{const{draft:t}=this.state;let a="";a=""===t.message?e:/\s+$/.test(t.message)?"".concat(t.message).concat(e," "):"".concat(t.message," ").concat(e," ");const n=Xi({},t,{message:a});this.props.onUpdateCommentDraft(n),this.draftsForPost[this.props.rootId]=n,this.setState({showEmojiPicker:!1,draft:n}),this.focusTextbox()}),$i(this,"handlePostError",e=>{this.setState({postError:e})}),$i(this,"handleSubmit",async e=>{e.preventDefault(),this.setShowPreview(!1);const{channelMembersCount:t,enableConfirmNotificationsToChannel:a,useChannelMentions:n,isTimezoneEnabled:s,groupsWithAllowReference:i,channelMemberCountsByGroup:r,useGroupMentions:o}=this.props,{draft:l}=this.state,c=a&&n;let d=0,m=0,u=[];const h=!Object(ae.c)(l.message);if(a&&h&&o&&(u=Object(ae.k)(l.message,i),u.length>0&&(u=u.map(e=>{const t=r[e.id];return t&&t.channel_member_count>N.Q.NOTIFY_ALL_MEMBERS&&t.channel_member_count>d&&(d=t.channel_member_count,m=t.channel_member_timezones_count),"@".concat(e.name)}),u=[...new Set(u)])),!o&&u.length>0){const e=Xi({},l,{props:Xi({},l.props,{disable_group_highlight:!0})});this.props.onUpdateCommentDraft(e),this.setState({draft:e})}if(c&&t>N.Q.NOTIFY_ALL_MEMBERS&&!h&&(d=t-1,u=["@all","@channel"],s)){const{data:e}=await this.props.getChannelTimezones(this.props.channelId);m=e?e.length:0}if(!n&&Object(ae.c)(l.message,{checkAllMentions:!0})){const e=Xi({},l,{props:Xi({},l.props,{mentionHighlightDisabled:!0})});this.props.onUpdateCommentDraft(e),this.setState({draft:e})}if(d>0)return this.setState({channelTimezoneCount:m,memberNotifyCount:d,mentions:u}),void this.showNotifyAllModal();await this.doSubmit(e)}),$i(this,"doSubmit",async e=>{e&&e.preventDefault();const{draft:t}=this.state;if(!this.shouldEnableAddButton())return;if(t.uploadsInProgress.length>0)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},N.Q.ANIMATION_TIMEOUT);if(this.props.rootDeleted)return void this.showPostDeletedModal();const a=Date.now()-this.lastBlurAt<150;this.focusTextbox(a);const n=this.state.serverError;let s=!1;Object(ae.m)(n)&&t.message===n.submittedMessage&&(s=!0);const i={ignoreSlash:s};try{await this.props.onSubmit(i),this.setState({postError:null,serverError:null})}catch(e){return Object(ae.m)(e)&&this.props.onUpdateCommentDraft(t),e.submittedMessage=t.message,void this.setState({serverError:e})}this.setState({draft:Xi({},this.props.draft,{uploadsInProgress:[]})})}),$i(this,"commentMsgKeyPress",e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:a}=this.props,{allowSending:n,withClosedCodeBlock:s,message:i}=Object(ae.s)(e,this.state.draft.message,t,a,0,0,this.state.caretPosition);if(n){if(e.persist(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),s&&i){const{draft:t}=this.state,a=Xi({},t,{message:i});this.props.onUpdateCommentDraft(a),this.setState({draft:a},()=>this.handleSubmit(e)),this.draftsForPost[this.props.rootId]=a}else this.handleSubmit(e);this.setShowPreview(!1),setTimeout(()=>{this.focusTextbox()})}this.emitTypingEvent()}),$i(this,"reactToLastMessage",e=>{e.preventDefault();const{emitShortcutReactToLastPostFrom:t}=this.props;t(N.t.RHS_ROOT)}),$i(this,"emitTypingEvent",()=>{const{channelId:e,rootId:t}=this.props;M.d(e,t)}),$i(this,"scrollToBottom",()=>{const e=As()(".post-right__scroll");e[0]&&e.parent().scrollTop(e[0].scrollHeight)}),$i(this,"handleChange",e=>{const t=e.target.value;let a=this.state.serverError;Object(ae.m)(a)&&(a=null);const{draft:n}=this.state,s=Xi({},n,{message:t});this.props.onUpdateCommentDraft(s),this.setState({draft:s,serverError:a},()=>{this.scrollToBottom()}),this.draftsForPost[this.props.rootId]=s}),$i(this,"handleMouseUpKeyUp",e=>{const t=j.q(e.target);this.setState({caretPosition:t})}),$i(this,"handleKeyDown",e=>{const t=(e.ctrlKey||e.metaKey)&&e.shiftKey&&j.Z(e,er.BACK_SLASH);if(j.fb(e))return void this.setState({draft:Xi({},this.state.draft,{message:j.Q(e)})});if((this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&j.Z(e,N.Q.KeyCodes.ENTER)&&(e.ctrlKey||e.metaKey))return this.setShowPreview(!1),void this.commentMsgKeyPress(e);const{draft:a}=this.state,{message:n}=a;if(!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&j.Z(e,N.Q.KeyCodes.UP)&&""===n){e.preventDefault(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur();const{data:t}=this.props.onEditLatestPost();t||this.focusTextbox(!0)}!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey||(j.Z(e,N.Q.KeyCodes.UP)?(e.preventDefault(),this.props.onMoveHistoryIndexBack()):j.Z(e,N.Q.KeyCodes.DOWN)&&(e.preventDefault(),this.props.onMoveHistoryIndexForward())),t&&this.reactToLastMessage(e)}),$i(this,"handleFileUploadChange",()=>{this.focusTextbox()}),$i(this,"handleUploadStart",e=>{const{draft:t}=this.state,a=Xi({},t,{uploadsInProgress:[...t.uploadsInProgress,...e]});this.props.onUpdateCommentDraft(a),this.setState({draft:a}),this.draftsForPost[this.props.rootId]=a,this.focusTextbox()}),$i(this,"handleUploadProgress",({clientId:e,name:t,percent:a,type:n})=>{const s=Xi({},this.state.uploadsProgressPercent,{[e]:{percent:a,name:t,type:n}});this.setState({uploadsProgressPercent:s})}),$i(this,"handleFileUploadComplete",(e,t,a,n)=>{const s=this.draftsForPost[n],i=[...s.uploadsInProgress],r=Object(si.sortFileInfos)([...s.fileInfos,...e],this.props.locale);for(let e=0;e<t.length;e++){const a=i.indexOf(t[e]);-1!==a&&i.splice(a,1)}const o=Xi({},s,{fileInfos:r,uploadsInProgress:i});this.props.updateCommentDraftWithRootId(n,o),this.draftsForPost[n]=o,this.props.rootId===n&&this.setState({draft:o})}),$i(this,"handleUploadError",(e,t=-1,a,n=-1)=>{if(-1!==t){const e=Xi({},this.draftsForPost[n]),a=[...e.uploadsInProgress],s=a.indexOf(t);-1!==s&&a.splice(s,1);const i=Xi({},e,{uploadsInProgress:a});this.props.updateCommentDraftWithRootId(n,i),this.draftsForPost[n]=i,this.props.rootId===n&&this.setState({draft:i})}let s=e;e&&"string"==typeof e&&(s=new Error(e)),this.setState({serverError:s},()=>{s&&this.scrollToBottom()})}),$i(this,"removePreview",e=>{const{draft:t}=this.state,a=[...t.fileInfos],n=[...t.uploadsInProgress];this.handleUploadError(null);let s=a.findIndex(t=>t.id===e);-1===s?(s=n.indexOf(e),-1!==s&&(n.splice(s,1),this.refs.fileUpload&&this.refs.fileUpload.getWrappedInstance()&&this.refs.fileUpload.getWrappedInstance().cancelUpload(e))):a.splice(s,1);const i=Xi({},t,{fileInfos:a,uploadsInProgress:n});this.props.onUpdateCommentDraft(i),this.setState({draft:i}),this.draftsForPost[this.props.rootId]=i,this.handleFileUploadChange()}),$i(this,"getFileCount",()=>{const{draft:{fileInfos:e,uploadsInProgress:t}}=this.state;return e.length+t.length}),$i(this,"getFileUploadTarget",()=>this.refs.textbox.getWrappedInstance()),$i(this,"getCreateCommentControls",()=>this.refs.createCommentControls),$i(this,"focusTextbox",(e=!1)=>{!this.refs.textbox||!e&&I.n()||this.refs.textbox.getWrappedInstance().focus()}),$i(this,"shouldEnableAddButton",()=>!!this.props.enableAddButton||Object(ae.m)(this.state.serverError)),$i(this,"showPostDeletedModal",()=>{this.setState({showPostDeletedModal:!0})}),$i(this,"hidePostDeletedModal",()=>{this.setState({showPostDeletedModal:!1}),this.props.resetCreatePostRequest()}),$i(this,"handleBlur",()=>{this.lastBlurAt=Date.now()}),$i(this,"handleHeightChange",(e,t)=>{this.setState({renderScrollbar:e>t})}),this.state={showPostDeletedModal:!1,showConfirmModal:!1,showEmojiPicker:!1,channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1,suggestionListStyle:"top",mentions:[],memberNotifyCount:0},this.lastBlurAt=0,this.draftsForPost={},this.doInitialScrollToBottom=!1}componentDidMount(){const{useGroupMentions:e,getChannelMemberCountsByGroup:t,channelId:a,clearCommentDraftUploads:n,onResetHistoryIndex:s,setShowPreview:i,draft:r}=this.props;n(),s(),i(!1),this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.focusTextboxIfNecessary),e&&t(a),""!==r.message&&(this.doInitialScrollToBottom=!0)}componentWillUnmount(){this.props.resetCreatePostRequest(),document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.focusTextboxIfNecessary)}componentDidUpdate(e,t){t.draft.uploadsInProgress.length<this.state.draft.uploadsInProgress.length&&this.scrollToBottom(),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox(),e.shouldShowPreview&&!this.props.shouldShowPreview&&this.focusTextbox(),e.rootId===this.props.rootId&&e.selectedPostFocussedAt===this.props.selectedPostFocussedAt||(this.props.useGroupMentions&&this.props.getChannelMemberCountsByGroup(this.props.channelId),this.focusTextbox()),this.doInitialScrollToBottom&&(this.scrollToBottom(),this.doInitialScrollToBottom=!1)}render(){const{draft:e}=this.state,t=this.props.readOnlyChannel||!this.props.canPost,{formatMessage:a}=this.props.intl,n=this.shouldEnableAddButton(),{renderScrollbar:s,channelTimezoneCount:i,mentions:r,memberNotifyCount:o}=this.state,l=j.lb("accessibility.sections.rhsFooter","reply input region");let c="",d="";r.includes("@all")||r.includes("@channel")?(d=O.a.createElement(ee.a,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),c=i>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone",defaultMessage:"By using **@all** or **@channel** you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:o,timezones:i}}):O.a.createElement(Ki.b,{id:"notify_all.question",defaultMessage:"By using **@all** or **@channel** you are about to send notifications to **{totalMembers} people**. Are you sure you want to do this?",values:{totalMembers:o}})):r.length>0&&(d=O.a.createElement(ee.a,{id:"notify_all.title.confirm_groups",defaultMessage:"Confirm sending notifications to groups"}),c=1===r.length?i>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone_one_group",defaultMessage:"By using **{mention}** you are about to send notifications of up to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{mention:r[0],totalMembers:o,timezones:i}}):O.a.createElement(Ki.b,{id:"notify_all.question_one_group",defaultMessage:"By using **{mention}** you are about to send notifications of up to **{totalMembers} people**. Are you sure you want to do this?",values:{mention:r[0],totalMembers:o}}):i>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone_groups",defaultMessage:"By using **{mentions}** and **{finalMention}** you are about to send notifications of up to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{mentions:r.slice(0,-1).join(", "),finalMention:r[r.length-1],totalMembers:o,timezones:i}}):O.a.createElement(Ki.b,{id:"notify_all.question_groups",defaultMessage:"By using **{mentions}** and **{finalMention}** you are about to send notifications of up to **{totalMembers} people**. Are you sure you want to do this?",values:{mentions:r.slice(0,-1).join(", "),finalMention:r[r.length-1],totalMembers:o}}));const m=O.a.createElement(ee.a,{id:"notify_all.confirm",defaultMessage:"Confirm"});let u=null;this.state.serverError&&(u=O.a.createElement(Zi,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let h=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");h=O.a.createElement("label",{className:e},this.state.postError)}let p=null;!t&&(e.fileInfos.length>0||e.uploadsInProgress.length>0)&&(p=O.a.createElement(vi,{fileInfos:e.fileInfos,onRemove:this.removePreview,uploadsInProgress:e.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent,ref:"preview"}));let g=null;e.uploadsInProgress.length>0&&(g=O.a.createElement("span",{className:"post-right-comments-upload-in-progress"},1===e.uploadsInProgress.length?O.a.createElement(ee.a,{id:"create_comment.file",defaultMessage:"File uploading"}):O.a.createElement(ee.a,{id:"create_comment.files",defaultMessage:"Files uploading"})));let b,f="btn btn-primary comment-btn";n||(f+=" disabled"),t||this.props.shouldShowPreview||(b=O.a.createElement(Fi,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,rootId:this.props.rootId,postType:"comment"}));let _=null;const E=a({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let v;!this.props.enableEmojiPicker||t||this.props.shouldShowPreview||(_=O.a.createElement("div",null,O.a.createElement(ma,{show:this.state.showEmojiPicker,target:this.getCreateCommentControls,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:55}),O.a.createElement("button",{"aria-label":E,type:"button",onClick:this.toggleEmojiPicker,className:ws()("emoji-picker__container","post-action",{"post-action--active":this.state.showEmojiPicker})},O.a.createElement(Ot,{className:"icon icon--emoji emoji-rhs "})))),v=t?j.lb("create_post.read_only","This channel is read-only. Only members with permission can post here."):j.lb("create_comment.addComment","Add a comment...");let y="";s&&(y=" scroll");const C=this.refs.textbox;if(C){C.getWrappedInstance().getInputBox().getBoundingClientRect().top<N.Q.SUGGESTION_LIST_SPACE_RHS?this.setState({suggestionListStyle:"bottom"}):this.setState({suggestionListStyle:"top"})}return O.a.createElement("form",{onSubmit:this.handleSubmit},O.a.createElement("div",{role:"form",id:"rhsFooter","aria-label":l,tabIndex:"-1",className:"post-create a11y__region".concat(y),"data-a11y-sort-order":"4"},O.a.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},O.a.createElement("div",{className:"post-body__cell"},O.a.createElement(In,{onChange:this.handleChange,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:t?"":e.message,onBlur:this.handleBlur,createMessage:v,emojiEnabled:this.props.enableEmojiPicker,initialText:"",channelId:this.props.channelId,isRHS:!0,popoverMentionKeyClick:!0,id:"reply_textbox",ref:"textbox",disabled:t,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,suggestionListStyle:this.state.suggestionListStyle,badConnection:this.props.badConnection,listenForMentionKeyClick:!0,useChannelMentions:this.props.useChannelMentions}),O.a.createElement("span",{ref:"createCommentControls",className:"post-body__actions"},b,_))),O.a.createElement("div",{className:"post-create-footer"},O.a.createElement("div",{className:"d-flex justify-content-between"},O.a.createElement("div",{className:"col"},O.a.createElement(Wi,{channelId:this.props.channelId,postId:this.props.rootId}),h),O.a.createElement("div",{className:"col col-auto"},O.a.createElement(Ln,{characterLimit:this.props.maxPostSize,showPreview:this.props.shouldShowPreview,updatePreview:this.setShowPreview,message:t?"":this.state.message,isMarkdownPreviewEnabled:this.props.isMarkdownPreviewEnabled}))),O.a.createElement("div",{className:"text-right mt-2"},g,O.a.createElement("input",{type:"button",disabled:!n,id:"addCommentButton",className:f,value:a({id:"create_comment.comment",defaultMessage:"Add Comment"}),onClick:this.handleSubmit}),p,u))),O.a.createElement(zi,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),O.a.createElement(ns.a,{title:d,message:c,confirmButtonText:m,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}$i(tr,"propTypes",{channelId:C.a.string.isRequired,channelMembersCount:C.a.number.isRequired,rootId:C.a.string.isRequired,rootDeleted:C.a.bool.isRequired,messageInHistory:C.a.string,draft:C.a.shape({message:C.a.string.isRequired,uploadsInProgress:C.a.array.isRequired,fileInfos:C.a.array.isRequired}).isRequired,enableAddButton:C.a.bool.isRequired,codeBlockOnCtrlEnter:C.a.bool,ctrlSend:C.a.bool,latestPostId:C.a.string,locale:C.a.string.isRequired,createPostErrorId:C.a.string,clearCommentDraftUploads:C.a.func.isRequired,intl:ne.a.isRequired,onUpdateCommentDraft:C.a.func.isRequired,updateCommentDraftWithRootId:C.a.func.isRequired,onSubmit:C.a.func.isRequired,onResetHistoryIndex:C.a.func.isRequired,onMoveHistoryIndexBack:C.a.func.isRequired,onMoveHistoryIndexForward:C.a.func.isRequired,onEditLatestPost:C.a.func.isRequired,getChannelTimezones:C.a.func.isRequired,resetCreatePostRequest:C.a.func.isRequired,readOnlyChannel:C.a.bool,enableConfirmNotificationsToChannel:C.a.bool.isRequired,enableEmojiPicker:C.a.bool.isRequired,enableGifPicker:C.a.bool.isRequired,badConnection:C.a.bool.isRequired,maxPostSize:C.a.number.isRequired,rhsExpanded:C.a.bool.isRequired,isTimezoneEnabled:C.a.bool.isRequired,selectedPostFocussedAt:C.a.number.isRequired,isMarkdownPreviewEnabled:C.a.bool.isRequired,emitShortcutReactToLastPostFrom:C.a.func,canPost:C.a.bool.isRequired,useChannelMentions:C.a.bool.isRequired,useGroupMentions:C.a.bool.isRequired,setShowPreview:C.a.func.isRequired,shouldShowPreview:C.a.bool.isRequired,getChannelMemberCountsByGroup:C.a.func.isRequired,groupsWithAllowReference:C.a.object,channelMemberCountsByGroup:C.a.object});var ar=Object(te.c)(tr);var nr=Object(n.connect)((function(){const e=Object(Fa.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.COMMENT);return(t,a)=>{const n=t.requests.posts.createPost.error||{},s=Object(ys.i)(t,N.I.COMMENT_DRAFT,a.rootId),i=0!==s.message.trim().length||0!==s.fileInfos.length,r=Object(p.getAllChannelStats)(t)[a.channelId]?Object(p.getAllChannelStats)(t)[a.channelId].member_count:1,o=e(t),l=t.entities.channels.channels[a.channelId]||{},c=Object(m.getConfig)(t),h=Object(m.getLicense)(t),g="true"===c.EnableConfirmNotificationsToChannel,b="true"===c.EnableEmojiPicker,f="true"===c.EnableGifPicker,_=xs(t)>1,E="true"===c.ExperimentalTimezone,v=Object(U.haveIChannelPermission)(t,{channel:l.id,team:l.team_id,permission:x.Permissions.CREATE_POST}),y=Object(U.haveIChannelPermission)(t,{channel:l.id,team:l.team_id,permission:x.Permissions.USE_CHANNEL_MENTIONS}),C="true"===(null==h?void 0:h.IsLicensed)&&"true"===(null==h?void 0:h.LDAPGroups)&&Object(U.haveIChannelPermission)(t,{channel:l.id,team:l.team_id,permission:x.Permissions.USE_GROUP_MENTIONS}),w=Object(p.getChannelMemberCountsByGroup)(t,a.channelId);return{draft:s,messageInHistory:o,enableAddButton:i,channelMembersCount:r,codeBlockOnCtrlEnter:Object(d.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(d.getBool)(t,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),createPostErrorId:n.server_error_id,readOnlyChannel:!Object(u.isCurrentUserSystemAdmin)(t)&&"true"===c.ExperimentalTownSquareIsReadOnly&&l.name===N.j.DEFAULT_CHANNEL,enableConfirmNotificationsToChannel:g,enableEmojiPicker:b,enableGifPicker:f,locale:Object(Us.a)(t),maxPostSize:parseInt(c.MaxPostSize,10)||N.j.DEFAULT_CHARACTER_LIMIT,rhsExpanded:Object(ys.a)(t),badConnection:_,isTimezoneEnabled:E,selectedPostFocussedAt:Object(ys.r)(t),canPost:v,useChannelMentions:y,shouldShowPreview:V(t),groupsWithAllowReference:new Map(Object(ua.getAssociatedGroupsForReference)(t,l.team_id,l.id).map(e=>["@".concat(e.name),e])),useGroupMentions:C,channelMemberCountsByGroup:w}}}),(function(){let e,t,a,n,i,r,l,c;function d(){return Object(D.resetHistoryIndex)(x.Posts.MESSAGE_TYPES.COMMENT)}return(m,u)=>(r!==u.rootId&&(e=function(e){return t=>$s(e,t)}(u.rootId),a=ei(u.rootId,-1),n=ei(u.rootId,1)),r===u.rootId&&l===u.channelId||(i=ni(u.channelId,u.rootId)),r===u.rootId&&l===u.channelId&&c===u.latestPostId||(t=ai(u.channelId,u.rootId,u.latestPostId)),r=u.rootId,l=u.channelId,c=u.latestPostId,Object(s.bindActionCreators)({clearCommentDraftUploads:Xs,onUpdateCommentDraft:e,updateCommentDraftWithRootId:$s,onSubmit:t,onResetHistoryIndex:d,onMoveHistoryIndexBack:a,onMoveHistoryIndexForward:n,onEditLatestPost:i,resetCreatePostRequest:D.resetCreatePostRequest,getChannelTimezones:o.getChannelTimezones,emitShortcutReactToLastPostFrom:Y.d,setShowPreview:H,getChannelMemberCountsByGroup:o.getChannelMemberCountsByGroup},m))}))(ar),sr=a(185),ir=a(186),rr=a(114),or=a(138),lr=a.n(or);class cr extends O.a.PureComponent{render(){const{value:e,timeZone:t}=this.props,a=new Date(e);if(function(e){const t=new Date;return dr(e,t)}(a))return O.a.createElement(ee.a,{id:"date_separator.today",defaultMessage:"Today"});if(function(e){const t=new Date;return t.setDate(t.getDate()-1),dr(e,t)}(a))return O.a.createElement(ee.a,{id:"date_separator.yesterday",defaultMessage:"Yesterday"});const n={timeZone:t,weekday:"short",month:"short",day:"2-digit",year:"numeric"},s=this.props.intl.formatDate(e,n);if(s!==String(a)&&s!==String(e))return s;const i=e?lr()(e):lr()();return t&&i.tz(t),i.format("ddd, MMM D, YYYY")}}function dr(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(cr,"propTypes",{timeZone:C.a.string,value:C.a.oneOfType([C.a.number,C.a.instanceOf(Date)]).isRequired,intl:C.a.any.isRequired});var mr=Object(te.c)(cr);a(1424);class ur extends O.a.PureComponent{render(){const{children:e}=this.props;return O.a.createElement("div",{"data-testid":"basicSeparator",className:"Separator BasicSeparator"},O.a.createElement("hr",{className:"separator__hr"}),e&&O.a.createElement("div",{className:"separator__text"},e))}}class hr extends O.a.PureComponent{render(){const{date:e,enableTimezone:t,timeZone:a}=this.props,n=t&&a?{timeZone:a}:{};return O.a.createElement(ur,null,O.a.createElement(mr,Object.assign({},n,{value:e,weekday:"short",month:"short",day:"2-digit",year:"numeric"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(hr,"propTypes",{date:C.a.oneOfType([C.a.number,C.a.instanceOf(Date)]).isRequired,timeZone:C.a.string,enableTimezone:C.a.bool});var pr=Object(n.connect)((function(e,t){const a=Object(u.getCurrentUserId)(e);let n;return n=t.userTimezone?t.userTimezone:Object(sr.getUserTimezone)(e,a),{enableTimezone:Object(rr.a)(e),timeZone:Object(ir.getUserCurrentTimezone)(n)}}))(hr),gr=a(43),br=a(1363);class fr extends O.a.PureComponent{render(){const{isMobile:e,createAt:t,isScrolling:a,isRhsPost:n,toastPresent:s}=this.props;if(!e||0===t)return null;const i=O.a.createElement(mr,{value:t}),r=ws()("post-list__timestamp",{scrolling:a,rhs:n,toastAdjustment:s});return O.a.createElement("div",{className:r,"data-testid":"floatingTimestamp"},O.a.createElement("div",null,O.a.createElement("span",null,i)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(fr,"propTypes",{isScrolling:C.a.bool.isRequired,isMobile:C.a.bool.isRequired,createAt:C.a.oneOfType([C.a.instanceOf(Date),C.a.number]).isRequired,toastPresent:C.a.bool.isRequired,isRhsPost:C.a.bool.isRequired});var _r=Object(n.connect)((function(e,t){let a=t.postId;if(gr.isCombinedUserActivityPost(a)){const e=gr.getPostIdsForCombinedUserActivityPost(a);a=e[e.length-1]}const n=Object(Fa.getPost)(e,a),s=Object(br.b)(e);return{createAt:n?n.create_at:0,toastPresent:s}}))(fr);function Er(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vr extends O.a.PureComponent{render(){return this.props.hasPermission&&!this.props.invert||!this.props.hasPermission&&this.props.invert?this.props.children:null}}Er(vr,"defaultProps",{invert:!1}),Er(vr,"propTypes",{channelId:C.a.string,teamId:C.a.string,permissions:C.a.arrayOf(C.a.string).isRequired,hasPermission:C.a.bool.isRequired,invert:C.a.bool.isRequired,children:C.a.node.isRequired});var yr=Object(n.connect)((function(e,t){if(!t.channelId||null===t.teamId||void 0===t.teamId)return{hasPermission:!1};for(const a of t.permissions)if(Object(U.haveIChannelPermission)(e,{channel:t.channelId,team:t.teamId,permission:a}))return{hasPermission:!0};return{hasPermission:!1}}))(vr);class Cr extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement("svg",{width:"14px",height:"4px",viewBox:"0 0 14 4",role:"img","aria-label":"dots horizontal icon"},O.a.createElement("path",{d:"M10.2 2.00001C10.2 1.56267 10.3547 1.18934 10.664 0.880006C10.984 0.560006 11.3627 0.400006 11.8 0.400006C12.2373 0.400006 12.6107 0.560006 12.92 0.880006C13.24 1.18934 13.4 1.56267 13.4 2.00001C13.4 2.43734 13.24 2.81601 12.92 3.13601C12.6107 3.44534 12.2373 3.60001 11.8 3.60001C11.3627 3.60001 10.984 3.44534 10.664 3.13601C10.3547 2.81601 10.2 2.43734 10.2 2.00001ZM5.4 2.00001C5.4 1.56267 5.55467 1.18934 5.864 0.880006C6.184 0.560006 6.56267 0.400006 7 0.400006C7.43733 0.400006 7.81067 0.560006 8.12 0.880006C8.44 1.18934 8.6 1.56267 8.6 2.00001C8.6 2.43734 8.44 2.81601 8.12 3.13601C7.81067 3.44534 7.43733 3.60001 7 3.60001C6.56267 3.60001 6.184 3.44534 5.864 3.13601C5.55467 2.81601 5.4 2.43734 5.4 2.00001ZM0.6 2.00001C0.6 1.56267 0.754667 1.18934 1.064 0.880006C1.384 0.560006 1.76267 0.400006 2.2 0.400006C2.63733 0.400006 3.01067 0.560006 3.32 0.880006C3.64 1.18934 3.8 1.56267 3.8 2.00001C3.8 2.43734 3.64 2.81601 3.32 3.13601C3.01067 3.44534 2.63733 3.60001 2.2 3.60001C1.76267 3.60001 1.384 3.44534 1.064 3.13601C0.754667 2.81601 0.6 2.43734 0.6 2.00001Z"})))}}function wr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Or extends O.a.PureComponent{constructor(e){super(e),wr(this,"handleEditDisable",()=>{this.setState({canEdit:!1})}),wr(this,"handleFlagMenuItemActivated",()=>{this.props.isFlagged?this.props.actions.unflagPost(this.props.post.id):this.props.actions.flagPost(this.props.post.id)}),wr(this,"handleAddReactionMenuItemActivated",e=>{e.preventDefault(),this.props.handleAddReactionClick&&this.props.handleAddReactionClick()}),wr(this,"copyLink",()=>{const e="".concat(this.props.currentTeamUrl,"/pl/").concat(this.props.post.id),t=navigator.clipboard;if(t)t.writeText(e);else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}),wr(this,"handlePinMenuItemActivated",()=>{this.props.post.is_pinned?this.props.actions.unpinPost(this.props.post.id):this.props.actions.pinPost(this.props.post.id)}),wr(this,"handleUnreadMenuItemActivated",e=>{e.preventDefault(),this.props.actions.markPostAsUnread(this.props.post)}),wr(this,"handleDeleteMenuItemActivated",e=>{e.preventDefault();const t={ModalId:N.u.DELETE_POST,dialogType:oe,dialogProps:{post:this.props.post,commentCount:this.props.commentCount,isRHS:this.props.location===N.t.RHS_ROOT||this.props.location===N.t.RHS_COMMENT}};this.props.actions.openModal(t)}),wr(this,"handleEditMenuItemActivated",()=>{this.props.actions.setEditingPost(this.props.post.id,this.props.commentCount,this.props.location===N.t.CENTER?"post_textbox":"reply_textbox",this.props.post.root_id?j.lb("rhs_comment.comment","Comment"):j.lb("create_post.post","Post"),this.props.location===N.t.RHS_ROOT||this.props.location===N.t.RHS_COMMENT)}),wr(this,"tooltip",O.a.createElement(di.a,{id:"dotmenu-icon-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"post_info.dot_menu.tooltip.more_actions",defaultMessage:"More actions"}))),wr(this,"refCallback",e=>{if(e){const t=e.rect(),a=this.buttonRef.current.getBoundingClientRect(),n=void 0===a.y?a.top:a.y,s=window.innerHeight-80,i=n-N.j.CHANNEL_HEADER_HEIGHT,r=s-(i+N.j.POST_AREA_HEIGHT);this.setState({openUp:i>r,width:t.width})}}),wr(this,"renderDivider",e=>O.a.createElement("li",{id:"divider_post_".concat(this.props.post.id,"_").concat(e),className:"MenuItem__divider",role:"menuitem"})),this.editDisableAction=new Ds(this.handleEditDisable),this.state={openUp:!1,width:0,canEdit:e.canEdit&&!e.isReadOnly},this.buttonRef=O.a.createRef()}disableCanEditPostByTime(){const{post:e,isLicensed:t,postEditTimeLimit:a}=this.props,{canEdit:n}=this.state;if(n&&t&&String(a)!==String(N.j.UNSET_POST_EDIT_TIME_LIMIT)){const t=1e3,n=e.create_at+a*t-j.I();n>0&&this.editDisableAction.fireAfter(n+t)}}componentDidMount(){this.disableCanEditPostByTime()}static getDerivedStateFromProps(e){return{canEdit:e.canEdit&&!e.isReadOnly,canDelete:e.canDelete&&!e.isReadOnly}}componentWillUnmount(){this.editDisableAction.cancel()}render(){const e=ae.p(this.props.post),t=j.cb(),a=this.props.pluginMenuItems.filter(e=>e.filter?e.filter(this.props.post.id):e).map(e=>e.subMenu?O.a.createElement(Ai.a.ItemSubMenu,{key:e.id+"_pluginmenuitem",id:e.text.id,postId:this.props.post.id,text:e.text,subMenu:e.subMenu,action:e.action,xOffset:this.state.width,root:!0}):O.a.createElement(Ai.a.ItemAction,{key:e.id+"_pluginmenuitem",text:e.text,onClick:()=>{e.action&&e.action(this.props.post.id)}}));return this.state.canDelete||this.state.canEdit||0!==a.length||!e?O.a.createElement(ji.a,{onToggle:this.props.handleDropdownOpened},O.a.createElement(mi.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:this.tooltip,rootClose:!0},O.a.createElement("button",{ref:this.buttonRef,id:"".concat(this.props.location,"_button_").concat(this.props.post.id),"aria-label":j.lb("post_info.dot_menu.tooltip.more_actions","More actions").toLowerCase(),className:ws()("post-menu__item",{"post-menu__item--active":this.props.isMenuOpen}),type:"button","aria-expanded":"false"},O.a.createElement(Cr,{className:"icon icon--small"}))),O.a.createElement(Ai.a,{id:"".concat(this.props.location,"_dropdown_").concat(this.props.post.id),openLeft:!0,openUp:this.state.openUp,ref:this.refCallback,ariaLabel:j.lb("post_info.menuAriaLabel","Post extra options")},O.a.createElement(Ai.a.ItemAction,{show:!e&&this.props.location===N.t.CENTER,text:j.lb("post_info.reply","Reply"),onClick:this.props.handleCommentClick}),O.a.createElement(yr,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[Ea.a.ADD_REACTION]},O.a.createElement(Ai.a.ItemAction,{show:t&&!e&&!this.props.isReadOnly&&this.props.enableEmojiPicker,text:j.lb("rhs_root.mobile.add_reaction","Add Reaction"),onClick:this.handleAddReactionMenuItemActivated})),O.a.createElement(Ai.a.ItemAction,{id:"unread_post_".concat(this.props.post.id),show:!e&&!this.props.channelIsArchived&&this.props.location!==N.t.SEARCH,text:j.lb("post_info.unread","Mark as Unread"),onClick:this.handleUnreadMenuItemActivated}),O.a.createElement(Ai.a.ItemAction,{id:"permalink_".concat(this.props.post.id),show:!e,text:j.lb("post_info.permalink","Copy Link"),onClick:this.copyLink}),O.a.createElement(Ai.a.ItemAction,{show:t&&!e&&this.props.isFlagged,text:j.lb("rhs_root.mobile.unflag","Unflag"),onClick:this.handleFlagMenuItemActivated}),O.a.createElement(Ai.a.ItemAction,{show:t&&!e&&!this.props.isFlagged,text:j.lb("rhs_root.mobile.flag","Flag"),onClick:this.handleFlagMenuItemActivated}),O.a.createElement(Ai.a.ItemAction,{id:"unpin_post_".concat(this.props.post.id),show:!e&&!this.props.isReadOnly&&this.props.post.is_pinned,text:j.lb("post_info.unpin","Unpin"),onClick:this.handlePinMenuItemActivated}),O.a.createElement(Ai.a.ItemAction,{id:"pin_post_".concat(this.props.post.id),show:!e&&!this.props.isReadOnly&&!this.props.post.is_pinned,text:j.lb("post_info.pin","Pin"),onClick:this.handlePinMenuItemActivated}),!e&&(this.state.canEdit||this.state.canDelete)&&this.renderDivider("edit"),O.a.createElement(Ai.a.ItemAction,{id:"edit_post_".concat(this.props.post.id),show:this.state.canEdit,text:j.lb("post_info.edit","Edit"),onClick:this.handleEditMenuItemActivated}),O.a.createElement(Ai.a.ItemAction,{id:"delete_post_".concat(this.props.post.id),show:this.state.canDelete,text:j.lb("post_info.del","Delete"),onClick:this.handleDeleteMenuItemActivated,isDangerous:!0}),(a.length>0||this.props.components.PostDropdownMenuItem&&this.props.components.PostDropdownMenuItem.length>0)&&this.renderDivider("plugins"),a,O.a.createElement(k.a,{postId:this.props.post.id,pluggableName:"PostDropdownMenuItem"}))):null}}wr(Or,"propTypes",{post:C.a.object.isRequired,teamId:C.a.string,location:C.a.oneOf([N.t.CENTER,N.t.RHS_ROOT,N.t.RHS_COMMENT,N.t.SEARCH]).isRequired,commentCount:C.a.number,isFlagged:C.a.bool,handleCommentClick:C.a.func,handleDropdownOpened:C.a.func,handleAddReactionClick:C.a.func,isMenuOpen:C.a.bool,isReadOnly:C.a.bool,pluginMenuItems:C.a.arrayOf(C.a.object),isLicensed:C.a.bool.isRequired,postEditTimeLimit:C.a.string.isRequired,enableEmojiPicker:C.a.bool.isRequired,channelIsArchived:C.a.bool.isRequired,currentTeamUrl:C.a.string.isRequired,components:C.a.object.isRequired,actions:C.a.shape({flagPost:C.a.func.isRequired,unflagPost:C.a.func.isRequired,setEditingPost:C.a.func.isRequired,pinPost:C.a.func.isRequired,unpinPost:C.a.func.isRequired,openModal:C.a.func.isRequired,markPostAsUnread:C.a.func.isRequired}).isRequired,canEdit:C.a.bool.isRequired,canDelete:C.a.bool.isRequired}),wr(Or,"defaultProps",{post:{},commentCount:0,isFlagged:!1,isReadOnly:!1,pluginMenuItems:[],location:N.t.CENTER,enableEmojiPicker:!1});var Tr=Object(n.connect)((function(e,t){const{post:a}=t,n=Object(m.getLicense)(e),s=Object(m.getConfig)(e),i=Object(u.getCurrentUserId)(e),r=Object(p.getChannel)(e,t.post.channel_id),o=Object(h.getCurrentTeam)(e)||{},l="".concat(Object(Bs.e)(),"/").concat(o.name);return{channelIsArchived:Ca(r),components:e.plugins.components,postEditTimeLimit:Object(m.getConfig)(e).PostEditTimeLimit,isLicensed:"true"===Object(m.getLicense)(e).IsLicensed,teamId:Object(h.getCurrentTeamId)(e),pluginMenuItems:e.plugins.components.PostDropdownMenu,shouldShowDotMenu:ae.u(e,a,r),canEdit:ae.b(e,a,n,s,r,i),canDelete:ae.a(e,a,r),currentTeamUrl:l}}),(function(e){return{actions:Object(s.bindActionCreators)({flagPost:Y.e,unflagPost:Y.n,setEditingPost:Y.l,pinPost:Y.i,unpinPost:Y.o,openModal:q.b,markPostAsUnread:Y.h},e)}}))(Or);class Sr extends O.a.PureComponent{render(){const{fileInfo:e}=this.props,t=Object(j.z)(e.extension);let a;if(t===N.n.IMAGE){let t="post-image";e.width<N.Q.THUMBNAIL_WIDTH&&e.height<N.Q.THUMBNAIL_HEIGHT?t+=" small":t+=" normal";let a=Object(si.getFileThumbnailUrl)(e.id);return Object(j.X)(e.extension)&&!e.has_preview_image&&(a=Object(si.getFileUrl)(e.id)),O.a.createElement("div",{className:t,style:{backgroundImage:"url(".concat(a,")"),backgroundSize:"cover"}})}return a=e.extension===N.n.SVG&&this.props.enableSVGs?O.a.createElement("img",{alt:"file thumbnail image",className:"post-image normal",src:Object(si.getFileUrl)(e.id)}):O.a.createElement("div",{className:"file-icon "+Object(j.B)(t)}),a}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Sr,"propTypes",{enableSVGs:C.a.bool.isRequired,fileInfo:C.a.any.isRequired});var Pr=Object(n.connect)((function(e){return{enableSVGs:"true"===Object(m.getConfig)(e).EnableSVGs}}))(Sr);function Mr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nr extends O.a.PureComponent{constructor(e){super(e),Mr(this,"mounted",!1),Mr(this,"loadFiles",()=>{const e=this.props.fileInfo;if(Object(j.z)(e.extension)===N.n.IMAGE){const t=Object(si.getFileThumbnailUrl)(e.id);Object(j.kb)(t,this.handleImageLoaded)}else e.extension===N.n.SVG&&this.props.enableSVGs&&Object(j.kb)(Object(si.getFileUrl)(e.id),this.handleImageLoaded)}),Mr(this,"handleImageLoaded",()=>{this.mounted&&this.setState({loaded:!0})}),Mr(this,"onAttachmentClick",e=>{e.preventDefault(),"blur"in e.target&&e.target.blur(),this.props.handleImageClick&&this.props.handleImageClick(this.props.index)}),this.state={loaded:Object(j.z)(e.fileInfo.extension)!==N.n.IMAGE,fileInfo:e.fileInfo}}componentDidMount(){this.mounted=!0,this.loadFiles()}static getDerivedStateFromProps(e,t){if(e.fileInfo.id!==t.fileInfo.id){const t=e.fileInfo.extension;return{loaded:Object(j.z)(t)!==N.n.IMAGE&&!(e.enableSVGs&&t===N.n.SVG),fileInfo:e.fileInfo}}return null}componentDidUpdate(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}componentWillUnmount(){this.mounted=!1}render(){const{compactDisplay:e,fileInfo:t}=this.props,a=Object(hi.f)(t.name);let n,s;const i="".concat(Object(j.lb)("file_attachment.thumbnail","file thumbnail")," ").concat(t.name).toLowerCase();let r;return e||(n=O.a.createElement("a",{"aria-label":i,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick},this.state.loaded?O.a.createElement(Pr,{fileInfo:t}):O.a.createElement("div",{className:"post-image__load"})),s=O.a.createElement("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick},O.a.createElement("div",{className:"post-image__detail"},O.a.createElement("span",{className:"post-image__name"},a),O.a.createElement("span",{className:"post-image__type"},t.extension.toUpperCase()),O.a.createElement("span",{className:"post-image__size"},Object(j.n)(t.size))))),this.props.canDownloadFiles&&(r=O.a.createElement(pi,{fileInfo:t,compactDisplay:e,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download"},O.a.createElement("i",{className:"icon icon-download-outline"}))),O.a.createElement("div",{className:"post-image__column"},n,O.a.createElement("div",{className:"post-image__details"},s,r))}}Mr(Nr,"propTypes",{fileInfo:C.a.any.isRequired,index:C.a.number.isRequired,handleImageClick:C.a.func,compactDisplay:C.a.bool,canDownloadFiles:C.a.bool,enableSVGs:C.a.bool.isRequired});var Ir=Object(n.connect)((function(e){const t=Object(m.getConfig)(e);return{canDownloadFiles:Object(hi.a)(t),enableSVGs:"true"===t.EnableSVGs}}))(Nr),jr=a(1233),Ar=a(1279);function Rr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class kr extends O.a.PureComponent{constructor(e){super(e),Rr(this,"imageLoaded",()=>{this.mounted&&this.setState({loaded:!0})}),Rr(this,"handleImageClick",e=>{e.preventDefault(),this.setState({showPreviewModal:!0})}),Rr(this,"showPreviewModal",()=>{this.setState({showPreviewModal:!1})}),Rr(this,"toggleEmbedVisibility",()=>{this.props.actions.toggleEmbedVisibility(this.props.postId)}),this.state={loaded:!1,showPreviewModal:!1,dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}}}componentDidMount(){this.mounted=!0}static getDerivedStateFromProps(e,t){return e.fileInfo.width!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}}:null}componentWillUnmount(){this.mounted=!1}render(){const{fileInfo:e,compactDisplay:t}=this.props,{loaded:a}=this.state,{has_preview_image:n,id:s}=e,i=Object(si.getFileUrl)(s),r=n?Object(si.getFilePreviewUrl)(s):i,o=e.height,l=e.width;let c="";(l<50||o<50)&&(c="min-preview ",o>l&&(c+="min-preview--portrait ")),t&&(c+=" compact-display");const d=O.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility});let m="image-name";t&&(m+=" compact-display");const u=O.a.createElement("div",{"data-testid":"image-name",className:m},O.a.createElement("div",{onClick:this.handleImageClick},e.name),d);let h,p="";let g={},b={},f="";return Object(j.z)(e.extension)===N.n.SVG&&(f="svg",this.state.dimensions.height?g={width:"100%"}:b={height:350,maxWidth:"100%"}),a&&(h=O.a.createElement(Ar.a,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),p="image-fade-in"),O.a.createElement("div",{className:"file-view--single"},O.a.createElement("div",{className:"file__image"},u,this.props.isEmbedVisible&&O.a.createElement("div",{className:"image-container",style:b},O.a.createElement("div",{className:"image-loaded ".concat(p," ").concat(f),style:g},O.a.createElement(jr.a,{onClick:this.handleImageClick,className:c,src:r,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible,handleSmallImageContainer:!0}))),h))}}Rr(kr,"propTypes",{postId:C.a.string.isRequired,fileInfo:C.a.object.isRequired,isRhsOpen:C.a.bool.isRequired,compactDisplay:C.a.bool,isEmbedVisible:C.a.bool,actions:C.a.shape({toggleEmbedVisibility:C.a.func.isRequired}).isRequired}),Rr(kr,"defaultProps",{fileInfo:{},compactDisplay:!1});var Lr=Object(n.connect)((function(e){return{isRhsOpen:Object(ys.c)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({toggleEmbedVisibility:Y.m},e)}}))(kr);function Dr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xr extends O.a.PureComponent{constructor(e){super(e),Dr(this,"handleImageClick",e=>{this.setState({showPreviewModal:!0,startImgIndex:e})}),Dr(this,"hidePreviewModal",()=>{this.setState({showPreviewModal:!1})}),this.state={showPreviewModal:!1,startImgIndex:0}}render(){const{compactDisplay:e,enableSVGs:t,fileInfos:a,fileCount:n,locale:s}=this.props;if(a&&1===a.length){const n=Object(j.z)(a[0].extension);if(n===N.n.IMAGE||n===N.n.SVG&&t)return O.a.createElement(Lr,{fileInfo:a[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id,compactDisplay:e})}else if(1===n&&this.props.isEmbedVisible)return O.a.createElement("div",{style:Ur.minHeightPlaceholder});const i=Object(si.sortFileInfos)(a,s),r=[];if(i&&i.length>0)for(let t=0;t<i.length;t++){const a=i[t];r.push(O.a.createElement(Ir,{key:a.id,fileInfo:i[t],index:t,handleImageClick:this.handleImageClick,compactDisplay:e}))}else if(n>0)for(let e=0;e<n;e++)r.push(O.a.createElement("div",{key:"fileCount-".concat(e),className:"post-image__column post-image__column--placeholder"}));return O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{"data-testid":"fileAttachmentList",className:"post-image__columns clearfix"},r),O.a.createElement(Ar.a,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:i,postId:this.props.post.id}))}}Dr(xr,"propTypes",{post:C.a.object.isRequired,fileCount:C.a.number.isRequired,fileInfos:C.a.arrayOf(C.a.object),compactDisplay:C.a.bool,enableSVGs:C.a.bool,isEmbedVisible:C.a.bool,locale:C.a.string.isRequired});const Ur={minHeightPlaceholder:{minHeight:"385px"}};var qr=Object(n.connect)((function(){const e=Object(Bn.makeGetFilesForPost)();return function(t,a){const n=a.post?a.post.id:"",s=e(t,n);let i=0;return a.post.metadata&&a.post.metadata.files?i=(a.post.metadata.files||[]).length:a.post.file_ids?i=a.post.file_ids.length:a.post.filenames&&(i=a.post.filenames.length),{enableSVGs:"true"===Object(m.getConfig)(t).EnableSVGs,fileInfos:s,fileCount:i,isEmbedVisible:Object(X.b)(t,a.post.id),locale:Object(Us.a)(t)}}}))(xr),Hr=a(1177),Fr=a(1321);function Br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Gr extends O.a.PureComponent{constructor(...e){super(...e),Br(this,"getProfilePictureURL",()=>{const{post:e,user:t}=this.props;return t&&t.id===e.user_id?j.O(t.id,t.last_picture_update):e.user_id?j.O(e.user_id):""}),Br(this,"getStatus",(e,t,a)=>e||t||a&&a.is_bot?"":this.props.status),Br(this,"getPostIconURL",(e,t,a)=>{const{enablePostIconOverride:n,hasImageProxy:s,post:i}=this.props,r=i.props;let o="",l="";return r&&(o=r.override_icon_url,l=r.use_user_icon),this.props.compactDisplay?"":!t&&a&&!l&&n?o&&""!==o?ae.f(o,s):N.Q.DEFAULT_WEBHOOK_LOGO:e})}render(){const{compactDisplay:e,isBusy:t,isRHS:a,post:n,user:s,isBot:i}=this.props,r=ae.p(n),o=ae.n(n);if(r&&!e&&!o&&!i)return O.a.createElement(Fr.a,{className:"icon"});const l=ae.e(n),c=!l&&!o,d=this.getProfilePictureURL(),m=this.getPostIconURL(d,l,o),u=n.props?n.props.override_icon_emoji:"",h=n.props?n.props.override_username:"",p="string"==typeof u&&""!==u,g=this.getStatus(l,o,s);return O.a.createElement(Hr.a,{hasMention:c,isBusy:t,isRHS:a,size:"md",src:m,profileSrc:d,isEmoji:p,status:g,userId:s?s.id:null,username:s?s.username:null,overwriteIcon:this.props.overwriteIcon,overwriteName:h,post:this.props.post})}}Br(Gr,"propTypes",{compactDisplay:C.a.bool.isRequired,enablePostIconOverride:C.a.bool.isRequired,hasImageProxy:C.a.bool.isRequired,isBusy:C.a.bool,isRHS:C.a.bool,post:C.a.object.isRequired,status:C.a.string,user:C.a.object,isBot:C.a.bool,postIconOverrideURL:C.a.string,overwriteIcon:C.a.string}),Br(Gr,"defaultProps",{status:N.O.OFFLINE});var Vr=Object(n.connect)((function(e,t){const a=Object(m.getConfig)(e),n=Object(u.getUser)(e,t.userId),s="true"===a.EnablePostIconOverride&&t.post&&t.post.props&&t.post.props.override_icon_url;let i;return s&&(i=En.Client4.getAbsoluteUrl(s)),{enablePostIconOverride:"true"===a.EnablePostIconOverride,overwriteIcon:i,hasImageProxy:"true"===a.HasImageProxy,status:Object(u.getStatusForUserId)(e,t.userId),isBot:Boolean(n&&n.is_bot),user:n}}))(Gr);function Wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kr extends O.a.PureComponent{constructor(...e){super(...e),zr(this,"retryPost",e=>{e.preventDefault();const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(a),!0).forEach((function(t){zr(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.post);Reflect.deleteProperty(t,"id"),this.props.actions.createPost(t)}),zr(this,"cancelPost",e=>{e.preventDefault(),this.props.actions.removePost(this.props.post)})}render(){return O.a.createElement("span",{className:"pending-post-actions"},O.a.createElement("a",{className:"post-retry",href:"#",onClick:this.retryPost},O.a.createElement(ee.a,{id:"pending_post_actions.retry",defaultMessage:"Retry"}))," - ",O.a.createElement("a",{className:"post-cancel",href:"#",onClick:this.cancelPost},O.a.createElement(ee.a,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})))}}zr(Kr,"propTypes",{post:C.a.object.isRequired,actions:C.a.shape({createPost:C.a.func.isRequired,removePost:C.a.func.isRequired}).isRequired});var Yr=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({createPost:Y.b,removePost:D.removePost},e)}}))(Kr);class Qr extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.flag",defaultMessage:"Flag Icon"},e=>O.a.createElement("svg",{width:"14px",height:"16px",viewBox:"0 0 15 17",role:"img","aria-label":e},O.a.createElement("path",{d:"M7.36 2.59999L7.72 4.39999H12.4V9.79999H9.34L8.98 7.99999H2.5V2.59999H7.36ZM8.8 0.799987H0.7V16.1H2.5V9.79999H7.54L7.9 11.6H14.2V2.59999H9.16L8.8 0.799987Z"}))))}}class Zr extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.flagged",defaultMessage:"Flagged Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"img","aria-label":e},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-1073.000000, -33.000000)",fillRule:"nonzero",fill:"inherit"},O.a.createElement("g",{transform:"translate(-1.000000, 0.000000)"},O.a.createElement("g",{transform:"translate(1064.000000, 22.000000)"},O.a.createElement("g",{transform:"translate(10.000000, 11.000000)"},O.a.createElement("path",{d:"M8,1 L2,1 C2,0.447 1.553,0 1,0 C0.447,0 0,0.447 0,1 L0,15.5 C0,15.776 0.224,16 0.5,16 L1.5,16 C1.776,16 2,15.776 2,15.5 L2,11 L7,11 L7,12 C7,12.553 7.447,13 8,13 L15,13 C15.553,13 16,12.553 16,12 L16,4 C16,3.447 15.553,3 15,3 L9,3 L9,2 C9,1.447 8.553,1 8,1 Z"})))))))))}}function Jr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xr extends O.a.PureComponent{constructor(){super(),Jr(this,"handlePress",e=>{e.preventDefault();const{actions:t,isFlagged:a,postId:n}=this.props;a?t.unflagPost(n):t.flagPost(n)}),Jr(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),Jr(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),this.buttonRef=O.a.createRef(),this.state={a11yActive:!1}}componentDidMount(){this.buttonRef.current&&(this.buttonRef.current.addEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.addEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentWillUnmount(){this.buttonRef.current&&(this.buttonRef.current.removeEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.removeEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentDidUpdate(){this.state.a11yActive&&this.buttonRef.current&&this.buttonRef.current.dispatchEvent(new Event(N.c.UPDATE))}render(){if(this.props.isEphemeral)return null;const e=this.props.isFlagged,t=e?"visible":"";let a;return a=e?O.a.createElement(Zr,{className:"icon"}):O.a.createElement(Qr,{className:"icon"}),O.a.createElement("button",{ref:this.buttonRef,id:"".concat(this.props.location,"_flagIcon_").concat(this.props.postId),"aria-label":e?Object(j.lb)("flag_post.unflag","Unflag").toLowerCase():Object(j.lb)("flag_post.flag","Flag for follow up").toLowerCase(),className:"style--none flag-icon__container "+t,onClick:this.handlePress},O.a.createElement(mi.a,{key:"flagtooltipkey"+t,delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,{id:"flagTooltip"},O.a.createElement(ee.a,{id:e?Object(ve.b)("flag_post.unflag"):Object(ve.b)("flag_post.flag"),defaultMessage:e?"Unflag":"Flag for follow up"}))},a))}}Jr(Xr,"propTypes",{location:C.a.oneOf([N.t.CENTER,N.t.RHS_ROOT,N.t.RHS_COMMENT,N.t.SEARCH]).isRequired,postId:C.a.string.isRequired,isFlagged:C.a.bool.isRequired,isEphemeral:C.a.bool,actions:C.a.shape({flagPost:C.a.func.isRequired,unflagPost:C.a.func.isRequired}).isRequired}),Jr(Xr,"defaultProps",{isEphemeral:!1,location:N.t.CENTER});var $r=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({flagPost:Y.e,unflagPost:Y.n},e)}}))(Xr),eo=a(1361);function to(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ao extends O.a.PureComponent{constructor(...e){super(...e),to(this,"handleClick",()=>{Object(j.cb)()&&M.c()})}render(){const e=O.a.createElement(eo.a,{eventTime:this.props.eventTime});if(Object(I.n)()||!this.props.isPermalink)return O.a.createElement("div",{role:"presentation",className:"post__permalink"},e);const{location:t,postId:a,teamUrl:n}=this.props;return O.a.createElement(jn.a,{id:"".concat(t,"_time_").concat(a),to:"".concat(n,"/pl/").concat(a),className:"post__permalink",onClick:this.handleClick},e)}}to(ao,"propTypes",{isPermalink:C.a.bool.isRequired,eventTime:C.a.number.isRequired,location:C.a.oneOf([N.t.CENTER,N.t.RHS_ROOT,N.t.RHS_COMMENT,N.t.SEARCH]).isRequired,postId:C.a.string,teamUrl:C.a.string}),to(ao,"defaultProps",{eventTime:0,location:N.t.CENTER});var no=Object(n.connect)((function(e){return{teamUrl:Object(h.getCurrentRelativeTeamUrl)(e)}}))(ao);function so(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class io extends O.a.PureComponent{constructor(...e){super(...e),so(this,"handleAddEmoji",e=>{this.setState({showEmojiPicker:!1});const t=e.name||e.aliases[0];this.props.actions.addReaction(this.props.postId,t),this.props.toggleEmojiPicker()})}render(){const{channelId:e,location:t,postId:a,showEmojiPicker:n,teamId:s}=this.props;let i,r;return t!==N.t.RHS_ROOT&&t!==N.t.RHS_COMMENT||(i=ma.RHS_SPACE_REQUIRED_ABOVE,r=ma.RHS_SPACE_REQUIRED_BELOW),O.a.createElement(yr,{channelId:e,teamId:s,permissions:[Ea.a.ADD_REACTION]},O.a.createElement(O.a.Fragment,null,O.a.createElement(ma,{show:n,target:this.props.getDotMenuRef,onHide:this.props.toggleEmojiPicker,onEmojiClose:this.props.toggleEmojiPicker,onEmojiClick:this.handleAddEmoji,topOffset:-7,spaceRequiredAbove:i,n:!0,spaceRequiredBelow:r}),O.a.createElement(mi.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:O.a.createElement(di.a,{id:"reaction-icon-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"post_info.tooltip.add_reactions",defaultMessage:"Add Reaction"}))},O.a.createElement("button",{"data-testid":"post-reaction-emoji-icon",id:"".concat(t,"_reaction_").concat(a),"aria-label":Object(j.lb)("post_info.tooltip.add_reactions","Add Reaction").toLowerCase(),className:ws()("post-menu__item","post-menu__item--reactions",{"post-menu__item--active":n}),onClick:this.props.toggleEmojiPicker},O.a.createElement(Ot,{className:"icon icon--small"})))))}}so(io,"propTypes",{channelId:C.a.string,postId:C.a.string.isRequired,teamId:C.a.string.isRequired,getDotMenuRef:C.a.func.isRequired,location:C.a.oneOf([N.t.CENTER,N.t.RHS_ROOT,N.t.RHS_COMMENT]).isRequired,showEmojiPicker:C.a.bool.isRequired,toggleEmojiPicker:C.a.func.isRequired,actions:C.a.shape({addReaction:C.a.func.isRequired}).isRequired}),so(io,"defaultProps",{location:N.t.CENTER,showEmojiPicker:!1});var ro=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({addReaction:Y.a},e)}}))(io),oo=a(616),lo=a.n(oo);function co(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class mo extends O.a.PureComponent{constructor(...e){super(...e),co(this,"handleAddReaction",e=>{e.preventDefault();const{actions:t,post:a,emojiName:n}=this.props;t.addReaction(a.id,n)}),co(this,"handleRemoveReaction",e=>{e.preventDefault(),this.props.actions.removeReaction(this.props.post.id,this.props.emojiName)}),co(this,"loadMissingProfiles",async()=>{const e=this.props.reactions.map(e=>e.user_id);this.props.actions.getMissingProfilesByIds(e)})}render(){if(!this.props.emojiImageUrl)return null;const{currentUserReacted:e,users:t}=this.props.sortedUsers,a=this.props.otherUsersCount;let n,s;n=a>0?t.length>0?O.a.createElement(ee.a,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:t.join(", "),otherUsers:a}}):O.a.createElement(ee.a,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:a}}):t.length>1?O.a.createElement(ee.a,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:t.slice(0,-1).join(", "),lastUser:t[t.length-1]}}):t[0],s=t.length+a>1?e?O.a.createElement(ee.a,{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}):O.a.createElement(ee.a,{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):e?O.a.createElement(ee.a,{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}):O.a.createElement(ee.a,{id:"reaction.reactionVerb.user",defaultMessage:"reacted"});const i=O.a.createElement(ee.a,{id:"reaction.reacted",defaultMessage:"{users} {reactionVerb} with {emoji}",values:{users:O.a.createElement("b",null,n),reactionVerb:s,emoji:O.a.createElement("b",null,":"+this.props.emojiName+":")}});let r,o,l="post-reaction";const c=this.props.emojiName.replace(/_/g," ");let d="".concat(j.lb("reaction.reactWidth.ariaLabel","react with")," ").concat(c);return e?(this.props.canRemoveReaction?(r=this.handleRemoveReaction,d="".concat(j.lb("reaction.removeReact.ariaLabel","remove reaction")," ").concat(c),o=O.a.createElement(ee.a,{id:"reaction.clickToRemove",defaultMessage:"(click to remove)"})):l+=" post-reaction--read-only",l+=" post-reaction--current-user"):!e&&this.props.canAddReaction?(r=this.handleAddReaction,o=O.a.createElement(ee.a,{id:"reaction.clickToAdd",defaultMessage:"(click to add)"})):l+=" post-reaction--read-only",O.a.createElement("button",{id:"postReaction-".concat(this.props.post.id,"-").concat(this.props.emojiName),"aria-label":d,className:"style--none ".concat(l),onClick:r},O.a.createElement(mi.a,{delayShow:500,placement:"top",shouldUpdatePosition:!0,overlay:O.a.createElement(di.a,{id:"".concat(this.props.post.id,"-").concat(this.props.emojiName,"-reaction")},i,O.a.createElement("br",null),o),onEnter:this.loadMissingProfiles},O.a.createElement("span",{className:"d-flex align-items-center"},O.a.createElement("span",{className:"post-reaction__emoji emoticon",style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),O.a.createElement("span",{className:"post-reaction__count"},this.props.reactionCount))))}}function uo(e,t,a,n,s,i,r,o){return!!Object(U.haveIChannelPermission)(e,{team:t,channel:a,permission:o})&&!(n===lo.a.DEFAULT_CHANNEL&&"true"===s.ExperimentalTownSquareIsReadOnly&&"true"===i.IsLicensed&&!r.roles.includes("system_admin"))}co(mo,"propTypes",{post:C.a.object.isRequired,currentUserId:C.a.string.isRequired,emojiName:C.a.string.isRequired,reactionCount:C.a.number.isRequired,profiles:C.a.array.isRequired,otherUsersCount:C.a.number.isRequired,reactions:C.a.arrayOf(C.a.object).isRequired,canAddReaction:C.a.bool.isRequired,canRemoveReaction:C.a.bool.isRequired,emojiImageUrl:C.a.string.isRequired,actions:C.a.shape({addReaction:C.a.func.isRequired,getMissingProfilesByIds:C.a.func.isRequired,removeReaction:C.a.func.isRequired}),sortedUsers:C.a.object.isRequired});var ho=Object(n.connect)((function(){const e=Object(u.makeGetProfilesForReactions)();return function(t,a){const n=Object(m.getConfig)(t),s=Object(m.getLicense)(t),i=Object(u.getCurrentUser)(t),r=e(t,a.reactions);let o;if(At.a.has(a.emojiName))o=At.d[At.a.get(a.emojiName)];else{o=Object(qs.getCustomEmojisByName)(t).get(a.emojiName)}let l="";o&&(l=Object(Wt.getEmojiImageUrl)(o));const c=Object(p.getChannel)(t,a.post.channel_id)||{},h=0!==c.delete_at,g=c.team_id,b=Object(u.getCurrentUserId)(t),f=Object(d.getTeammateNameDisplaySetting)(t);let _=!1,E=!1;return h||(_=uo(t,g,a.post.channel_id,c.name,n,s,i,Ea.a.REMOVE_REACTION),E=uo(t,g,a.post.channel_id,c.name,n,s,i,Ea.a.ADD_REACTION)),{profiles:r,otherUsersCount:a.reactions.length-r.length,currentUserId:b,reactionCount:a.reactions.length,canAddReaction:_,canRemoveReaction:E,emojiImageUrl:l,sortedUsers:Object(j.H)(a.reactions,b,r,f)}}}),(function(e){return{actions:Object(s.bindActionCreators)({addReaction:Y.a,removeReaction:D.removeReaction,getMissingProfilesByIds:r.getMissingProfilesByIds},e)}}))(mo);class po extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.add-reaction",defaultMessage:"Add Reaction Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"img","aria-label":e},O.a.createElement("path",{d:"M10 8.00001C10.32 8.00001 10.5973 7.88267 10.832 7.64801C11.0773 7.40267 11.2 7.12001 11.2 6.80001C11.2 6.48001 11.0773 6.20267 10.832 5.96801C10.5973 5.72267 10.32 5.60001 10 5.60001C9.68 5.60001 9.39733 5.72267 9.152 5.96801C8.91733 6.20267 8.8 6.48001 8.8 6.80001C8.8 7.12001 8.91733 7.40267 9.152 7.64801C9.39733 7.88267 9.68 8.00001 10 8.00001ZM5.2 8.00001C5.52 8.00001 5.79733 7.88267 6.032 7.64801C6.27733 7.40267 6.4 7.12001 6.4 6.80001C6.4 6.48001 6.27733 6.20267 6.032 5.96801C5.79733 5.72267 5.52 5.60001 5.2 5.60001C4.88 5.60001 4.59733 5.72267 4.352 5.96801C4.11733 6.20267 4 6.48001 4 6.80001C4 7.12001 4.11733 7.40267 4.352 7.64801C4.59733 7.88267 4.88 8.00001 5.2 8.00001ZM13.584 7.93601C13.584 7.97867 13.584 8.05334 13.584 8.16001L13.6 8.40001C13.6 9.48801 13.328 10.496 12.784 11.424C12.2507 12.3307 11.5307 13.0507 10.624 13.584C9.696 14.128 8.688 14.4 7.6 14.4C6.512 14.4 5.504 14.128 4.576 13.584C3.66933 13.0507 2.94933 12.3307 2.416 11.424C1.872 10.496 1.6 9.48801 1.6 8.40001C1.6 7.31201 1.872 6.30401 2.416 5.37601C2.94933 4.46934 3.66933 3.74934 4.576 3.21601C5.504 2.67201 6.512 2.40001 7.6 2.40001L8.064 2.41601C8.17067 1.84001 8.352 1.32801 8.608 0.880006C8.23467 0.826673 7.89867 0.800006 7.6 0.800006C6.224 0.800006 4.944 1.14667 3.76 1.84001C2.61867 2.51201 1.712 3.41867 1.04 4.56001C0.346667 5.74401 0 7.02401 0 8.40001C0 9.77601 0.346667 11.056 1.04 12.24C1.712 13.3813 2.61867 14.288 3.76 14.96C4.944 15.6533 6.224 16 7.6 16C8.976 16 10.256 15.6533 11.44 14.96C12.5813 14.288 13.488 13.3813 14.16 12.24C14.8533 11.056 15.2 9.77601 15.2 8.40001C15.2 8.10134 15.1733 7.76534 15.12 7.39201C14.672 7.64801 14.16 7.82934 13.584 7.93601ZM12 5.72205e-06H13.6V2.40001H16V4.00001H13.6V6.40001H12V4.00001H9.6V2.40001H12V5.72205e-06ZM3.504 10C3.83467 10.832 4.36267 11.504 5.088 12.016C5.84533 12.5387 6.68267 12.8 7.6 12.8C8.51733 12.8 9.35467 12.5387 10.112 12.016C10.8373 11.504 11.3653 10.832 11.696 10H3.504Z"}))))}}function go(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bo extends O.a.PureComponent{constructor(e){super(e),go(this,"getTarget",()=>this.refs.addReactionButton),go(this,"handleEmojiClick",e=>{this.setState({showEmojiPicker:!1});const t=e.name||e.aliases[0];this.props.actions.addReaction(this.props.post.id,t)}),go(this,"hideEmojiPicker",()=>{this.setState({showEmojiPicker:!1})}),go(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),this.state={showEmojiPicker:!1}}render(){const e=new Map,t=[];if(this.props.reactions)for(const a of Object.values(this.props.reactions)){const n=a.emoji_name;e.has(n)?e.get(n).push(a):(t.push(n),e.set(n,[a]))}if(0===e.size)return null;const a=t.map(t=>O.a.createElement(ho,{key:t,post:this.props.post,emojiName:t,reactions:e.get(t)||[]})),n=this.getTarget();let s=15;n&&(s=window.innerWidth-n.getBoundingClientRect().right-260,s<0&&(s=15));let i=null;if(this.props.enableEmojiPicker){const e=O.a.createElement(di.a,{id:"addReactionTooltip"},O.a.createElement(ee.a,{id:"reaction_list.addReactionTooltip",defaultMessage:"Add a reaction"}));i=O.a.createElement("span",{className:"emoji-picker__container"},O.a.createElement(ma,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,rightOffset:s,topOffset:-5}),O.a.createElement(yr,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[Ea.a.ADD_REACTION]},O.a.createElement(mi.a,{placement:"top",delayShow:N.Q.OVERLAY_TIME_DELAY,overlay:e},O.a.createElement("button",{"aria-label":Object(j.lb)("reaction.add.ariaLabel","Add a reaction"),className:"style--none post-reaction",onClick:this.toggleEmojiPicker},O.a.createElement("span",{id:"addReaction-".concat(this.props.post.id),className:"post-reaction__add",ref:"addReactionButton"},O.a.createElement(po,null))))))}let r="post-add-reaction";return this.state.showEmojiPicker&&(r+=" post-add-reaction-emoji-picker-open"),O.a.createElement("div",{"aria-label":Object(j.lb)("reaction.container.ariaLabel","reactions"),className:"post-reaction-list"},a,O.a.createElement("div",{className:r},i))}}go(bo,"propTypes",{post:C.a.object.isRequired,teamId:C.a.string,reactions:C.a.object,enableEmojiPicker:C.a.bool.isRequired,actions:C.a.shape({addReaction:C.a.func.isRequired})});var fo=Object(n.connect)((function(){const e=Object(Fa.makeGetReactionsForPost)();return function(t,a){const n="true"===Object(m.getConfig)(t).EnableEmojiPicker&&!a.isReadOnly;return{teamId:(Object(p.getChannel)(t,a.post.channel_id)||{}).team_id,reactions:e(t,a.post.id),enableEmojiPicker:n}}}),(function(e){return{actions:Object(s.bindActionCreators)({addReaction:Y.a},e)}}))(bo),_o=a(1683),Eo=a.n(_o),vo=a(1249);function yo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Co extends O.a.PureComponent{constructor(e){super(e),yo(this,"toggleCollapse",e=>{e.preventDefault(),this.setState(e=>({isCollapsed:!e.isCollapsed}))}),yo(this,"checkTextOverflow",()=>{this.overflowRef&&window.cancelAnimationFrame(this.overflowRef),this.overflowRef=window.requestAnimationFrame(()=>{const e=this.refs.textContainer;let t=!1;e&&e.scrollHeight>this.maxHeight&&(t=!0),t!==this.state.isOverflow&&this.setState({isOverflow:t})})}),yo(this,"handleResize",()=>{this.checkTextOverflow()}),this.maxHeight=this.props.isAttachmentText?200:600,this.state={isCollapsed:!0,isOverflow:!1}}componentDidMount(){this.checkTextOverflow(),window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflow()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}render(){const{isCollapsed:e,isOverflow:t}=this.state,{children:a,isAttachmentText:n,compactDisplay:s}=this.props;let i,r="post-message";e?(i=this.maxHeight,r+=" post-message--collapsed"):r+=" post-message--expanded";let o="post-collapse__gradient",l="post-collapse__show-more";n&&(o="post-attachment-collapse__gradient",l="post-attachment-collapse__show-more");let c=null;if(t){!n&&e&&s&&(i-=22);let t="fa fa-angle-up",a=Object(j.lb)("post_info.message.show_less","Show less");e&&(t="fa fa-angle-down",a=Object(j.lb)("post_info.message.show_more","Show more")),c=O.a.createElement("div",{className:"post-collapse"},O.a.createElement("div",{id:"collapseGradient",className:o}),O.a.createElement("div",{className:l},O.a.createElement("div",{className:"post-collapse__show-more-line"}),O.a.createElement("button",{id:"showMoreButton",className:"post-collapse__show-more-button",onClick:this.toggleCollapse},O.a.createElement("span",{className:t}),a),O.a.createElement("div",{className:"post-collapse__show-more-line"}))),r+=" post-message--overflow"}return O.a.createElement("div",{className:r},O.a.createElement("div",{style:{maxHeight:i},className:"post-message__text-container",ref:"textContainer"},a),c)}}yo(Co,"propTypes",{children:C.a.node,checkOverflow:C.a.number,isAttachmentText:C.a.bool,isRHSExpanded:C.a.bool.isRequired,isRHSOpen:C.a.bool.isRequired,text:C.a.string,compactDisplay:C.a.bool.isRequired});var wo=Object(n.connect)((function(e){return{isRHSExpanded:Object(ys.a)(e),isRHSOpen:Object(ys.c)(e),compactDisplay:Object(d.get)(e,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.MESSAGE_DISPLAY,N.B.MESSAGE_DISPLAY_DEFAULT)===N.B.MESSAGE_DISPLAY_COMPACT}}))(Co);class Oo extends O.a.PureComponent{getStatusColors(e){return{good:"#00c100",warning:"#dede01",danger:e.errorTextColor,default:e.centerChannelColor,primary:e.buttonBg,success:e.onlineIndicator}}render(){const{action:e,handleAction:t,disabled:a,theme:n}=this.props;let s;if(e.style){const t=this.getStatusColors(n)[e.style]||n[e.style]||e.style.match("^#(?:[0-9a-fA-F]{3}){1,2}$")&&e.style;t&&(s={borderColor:Object(he.changeOpacity)(t,.25),backgroundColor:"#ffffff",color:t,borderWidth:2})}return O.a.createElement("button",{"data-action-id":e.id,"data-action-cookie":e.cookie,disabled:a,key:e.id,onClick:t,style:s},O.a.createElement(wa.a,{message:e.name,options:{mentionHighlight:!1,markdown:!1,autolinkedUrlSchemes:[]}}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Oo,"propTypes",{action:C.a.object.isRequired,handleAction:C.a.func.isRequired,disabled:C.a.bool,theme:C.a.object.isRequired});var To=Object(n.connect)((function(e){return{theme:Object(d.getTheme)(e)}}))(Oo),So=a(1380),Po=a(1300),Mo=a(1381),No=a(1383);var Io=O.a.createContext({handlePopupOpened:null});function jo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ao extends O.a.PureComponent{constructor(e){super(e),jo(this,"handleSelected",e=>{if(!e)return;const{action:t}=this.props;let a="",n="";"users"===t.data_source?(n=e.username,a=e.id):"channels"===t.data_source?(n=e.display_name,a=e.id):(n=e.text,a=e.value),this.props.actions.selectAttachmentMenuAction(this.props.postId,this.props.action.id,this.props.action.cookie,this.props.action.data_source,n,a),this.setState({value:n})});const t=e.action;let a;this.providers=[],t&&("users"===t.data_source?this.providers=[new Po.a(e.actions.autocompleteUsers)]:"channels"===t.data_source?this.providers=[new Mo.a(e.actions.autocompleteChannels)]:t.options&&(this.providers=[new So.a(t.options)]));let n="";t.default_option&&t.options&&(a=t.options.find(e=>e.value===t.default_option),n=a?a.text:""),this.state={selected:a,value:n}}static getDerivedStateFromProps(e,t){return e.selected&&e.selected!==t.selected?{value:e.selected.text,selected:e.selected}:null}render(){const{action:e,disabled:t}=this.props;return O.a.createElement(Io.Consumer,null,({handlePopupOpened:a})=>O.a.createElement(No.a,{providers:this.providers,onSelected:this.handleSelected,placeholder:e.name,inputClassName:"post-attachment-dropdown",value:this.state.value,toggleFocus:a,disabled:t}))}}jo(Ao,"propTypes",{postId:C.a.string.isRequired,action:C.a.object.isRequired,selected:C.a.object,disabled:C.a.bool,actions:C.a.shape({autocompleteChannels:C.a.func.isRequired,selectAttachmentMenuAction:C.a.func.isRequired,autocompleteUsers:C.a.func.isRequired}).isRequired});var Ro=Object(n.connect)((function(e,t){const a=e.views.posts.menuActions[t.postId];return{selected:a&&a[t.action&&t.action.id]}}),(function(e){return{actions:Object(s.bindActionCreators)({selectAttachmentMenuAction:J,autocompleteChannels:pa.b,autocompleteUsers:ls.b},e)}}))(Ao),ko=a(563);class Lo extends ko.a{link(e,t,a){let n=e;Object(Bs.c)(e)||(n="http://".concat(n));let s='<a class="theme markdown__link" href="'.concat(n,'" target="_blank"');return t&&(s+=' title="'+t+'"'),s+=">".concat(a,"</a>"),s}}function Do(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xo extends O.a.PureComponent{constructor(e){super(e),Do(this,"handleHeightReceivedForThumbUrl",({height:e})=>{const{attachment:t}=this.props;(!this.props.imagesMetadata||this.props.imagesMetadata&&!this.props.imagesMetadata[t.thumb_url])&&this.handleHeightReceived(e)}),Do(this,"handleHeightReceivedForImageUrl",({height:e})=>{const{attachment:t}=this.props;(!this.props.imagesMetadata||this.props.imagesMetadata&&!this.props.imagesMetadata[t.image_url])&&this.handleHeightReceived(e)}),Do(this,"handleHeightReceived",e=>{this.mounted&&e>0&&this.setState(e=>({checkOverflow:e.checkOverflow+1}))}),Do(this,"renderPostActions",()=>{const e=this.props.attachment.actions;if(!e||!e.length)return"";const t=[];return e.forEach(e=>{if(e.id&&e.name)switch(e.type){case"select":t.push(O.a.createElement(Ro,{key:e.id,postId:this.props.postId,action:e,disabled:e.disabled}));break;case"button":default:t.push(O.a.createElement(To,{key:e.id,action:e,disabled:e.disabled,handleAction:this.handleAction}))}}),O.a.createElement("div",{className:"attachment-actions"},t)}),Do(this,"handleAction",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-action-id"),a=e.currentTarget.getAttribute("data-action-cookie");this.props.actions.doPostActionWithCookie(this.props.postId,t,a)}),Do(this,"getFieldsTable",()=>{const e=this.props.attachment.fields;if(!e||!e.length)return"";const t=[];let a=[],n=[],s=0,i=!1,r=0;const o={markdown:!1,mentionHighlight:!1};return e.forEach((e,l)=>{(2===s||!0!==e.short||i)&&(t.push(O.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+r},O.a.createElement("thead",null,O.a.createElement("tr",null,a)),O.a.createElement("tbody",null,O.a.createElement("tr",null,n)))),a=[],n=[],s=0,r+=1,i=!1),a.push(O.a.createElement("th",{className:"attachment-field__caption",key:"attachment__field-caption-"+l+"__"+r,width:"50%"},O.a.createElement(wa.a,{message:e.title,options:o}))),n.push(O.a.createElement("td",{className:"attachment-field",key:"attachment__field-"+l+"__"+r},O.a.createElement(wa.a,{message:e.value}))),s+=1,i=!(!0===e.short)}),a.length>0&&t.push(O.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+r},O.a.createElement("thead",null,O.a.createElement("tr",null,a)),O.a.createElement("tbody",null,O.a.createElement("tr",null,n)))),O.a.createElement("div",null,t)}),Do(this,"handleFormattedTextClick",e=>j.L(e,this.props.currentRelativeTeamUrl)),this.state={checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{attachment:e,options:t}=this.props;let a,n="";e.pretext&&(n="attachment--pretext",a=O.a.createElement("div",{className:"attachment__thumb-pretext"},O.a.createElement(wa.a,{message:e.pretext})));let s,i,r,o,l,c=[];if((e.author_name||e.author_icon)&&(e.author_icon&&c.push(O.a.createElement(vo.a,{key:"attachment__author-icon",src:e.author_icon,imageMetadata:this.props.imagesMetadata[e.author_icon]},e=>O.a.createElement("img",{alt:"attachment author icon",className:"attachment__author-icon",src:e,height:"14",width:"14"}))),e.author_name&&c.push(O.a.createElement("span",{className:"attachment__author-name",key:"attachment__author-name"},e.author_name))),e.author_link&&Object(Bs.f)(e.author_link)&&(c=O.a.createElement("a",{href:e.author_link,target:"_blank",rel:"noopener noreferrer"},c)),e.title&&(s=e.title_link&&Object(Bs.f)(e.title_link)?O.a.createElement("h1",{className:"attachment__title"},O.a.createElement("a",{className:"attachment__title-link",href:e.title_link,target:"_blank",rel:"noopener noreferrer"},e.title)):O.a.createElement("h1",{className:"attachment__title"},O.a.createElement(wa.a,{message:e.title,options:{mentionHighlight:!1,renderer:new Lo,autolinkedUrlSchemes:[]}}))),e.text&&(i=O.a.createElement(wo,{checkOverflow:this.state.checkOverflow,isAttachmentText:!0,text:e.text},O.a.createElement(wa.a,{message:e.text||"",options:t,imageProps:this.imageProps}))),e.image_url){const t=this.props.imagesMetadata[e.image_url];r=O.a.createElement("div",{className:"attachment__image-container"},O.a.createElement(vo.a,{src:e.image_url,imageMetadata:t},e=>O.a.createElement(jr.a,{className:"attachment__image",onImageLoaded:this.handleHeightReceivedForImageUrl,src:e,dimensions:t})))}if(e.footer){let t;if(e.footer_icon){const a=this.props.imagesMetadata[e.footer_icon];t=O.a.createElement(vo.a,{src:e.footer_icon,imageMetadata:a},e=>O.a.createElement("img",{alt:"attachment footer icon",className:"attachment__footer-icon",src:e,height:"16",width:"16"}))}o=O.a.createElement("div",{className:"attachment__footer-container"},t,O.a.createElement("span",null,Eo()(e.footer,{length:N.j.MAX_ATTACHMENT_FOOTER_LENGTH,omission:"…"})))}if(e.thumb_url){const t=this.props.imagesMetadata[e.thumb_url];l=O.a.createElement("div",{className:"attachment__thumb-container"},O.a.createElement(vo.a,{src:e.thumb_url,imageMetadata:t},e=>O.a.createElement(jr.a,{onImageLoaded:this.handleHeightReceivedForThumbUrl,src:e,dimensions:t})))}const d=this.getFieldsTable(),m=this.renderPostActions();let u;return e.color&&"#"===e.color[0]&&(u={borderLeftColor:e.color}),O.a.createElement("div",{className:"attachment "+n,ref:"attachment"},a,O.a.createElement("div",{className:"attachment__content"},O.a.createElement("div",{className:u?"clearfix attachment__container":"clearfix attachment__container attachment__container--"+e.color,style:u},c,s,O.a.createElement("div",null,O.a.createElement("div",{className:l?"attachment__body":"attachment__body attachment__body--no_thumb",onClick:this.handleFormattedTextClick},i,r,d,o,m),l,O.a.createElement("div",{style:Uo.footer})))))}}Do(xo,"propTypes",{postId:C.a.string.isRequired,attachment:C.a.object.isRequired,options:C.a.object,imagesMetadata:C.a.object,actions:C.a.shape({doPostActionWithCookie:C.a.func.isRequired}).isRequired,currentRelativeTeamUrl:C.a.string.isRequired});const Uo={footer:{clear:"both"}};var qo=Object(n.connect)((function(e){return{getCurrentRelativeTeamUrl:Object(h.getCurrentRelativeTeamUrl)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({doPostActionWithCookie:D.doPostActionWithCookie},e)}}))(xo);function Ho(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fo extends O.a.PureComponent{render(){const e=[];return this.props.attachments.forEach((t,a)=>{e.push(O.a.createElement(qo,{attachment:t,postId:this.props.postId,key:"att_"+a,options:this.props.options,imagesMetadata:this.props.imagesMetadata}))}),O.a.createElement("div",{id:"messageAttachmentList_".concat(this.props.postId),className:"attachment__list"},e)}}function Bo(e,t,a="x",n="y"){return Math.sqrt(Math.pow(e[a]-t[a],2)+Math.pow(e[n]-t[n],2))}function Go(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Vo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ho(Fo,"propTypes",{postId:C.a.string.isRequired,attachments:C.a.array.isRequired,options:C.a.object,imagesMetadata:C.a.object}),Ho(Fo,"defaultProps",{imagesMetadata:{}});const Wo={height:80,width:80};class zo extends O.a.PureComponent{constructor(...e){super(...e),Vo(this,"getImageMetadata",e=>{if(!e)return null;const t=this.props.post.metadata.images;return t?t[e]:null}),Vo(this,"isLargeImage",e=>{if(!e)return!1;const{height:t,width:a}=e;return a>=150&&a/t>=16/9}),Vo(this,"handleRemovePreview",async()=>{const e=Object.assign({},this.props.post.props);e[N.A.REMOVE_LINK_PREVIEW]="true";const t={id:this.props.post.id,props:e};return this.props.actions.editPost(t)})}renderImageToggle(){return O.a.createElement("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}renderLargeImage(e,t){return this.props.isEmbedVisible?O.a.createElement(vo.a,{src:e,imageMetadata:t},e=>O.a.createElement(jr.a,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})):null}renderSmallImage(e,t){return this.props.isEmbedVisible?O.a.createElement("div",{className:"attachment__image__container--opengraph"},O.a.createElement(vo.a,{src:e,imageMetadata:t},e=>O.a.createElement(jr.a,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t}))):null}truncateText(e){return e&&e.length>300?e.substring(0,300-"...".length)+"...":e}hasPreviewBeenRemoved(){const{post:e}=this.props;return!(!e||!e.props)&&"true"===e.props[N.A.REMOVE_LINK_PREVIEW]}render(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||Object(ae.p)(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;const e=this.props.openGraphData;if(!e)return null;const t=function(e,t){if(!e||!e.images||0===e.images.length)return null;const a=e.images.map(e=>{const a=e.secure_url||e.url;return e.width&&e.height||!t||!t[a]?e:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(a),!0).forEach((function(t){Vo(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Go(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{height:e.height||t[a].height,width:e.width||t[a].width})}),n=function(e,t,a="x",n="y"){var s={};for(const i of t)(void 0===s[a]||void 0===s[n]||Bo(i,e,a,n)<Bo(s,e,a,n))&&(s=i);return s}(Wo,a,"width","height");return n.secure_url||n.url}(e,this.props.post.metadata.images),a=this.getImageMetadata(t),n=this.isLargeImage(a);let s,i;return this.props.currentUserId===this.props.post.user_id&&(s=O.a.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview,"data-testid":"removeLinkPreviewButton"},O.a.createElement("span",{"aria-hidden":"true"},"×"))),(e.description||t)&&(i=O.a.createElement("div",{className:"attachment__body attachment__body--opengraph"},O.a.createElement("div",null,this.truncateText(e.description)," ",t&&n&&this.renderImageToggle()),t&&n&&this.renderLargeImage(t,a))),O.a.createElement("div",{className:"attachment attachment--opengraph"},O.a.createElement("div",{className:"attachment__content"},O.a.createElement("div",{className:"clearfix attachment__container attachment__container--opengraph"},O.a.createElement("div",{className:"attachment__body__wrap attachment__body__wrap--opengraph"},O.a.createElement("span",{className:"sitename"},this.truncateText(e.site_name)),s,O.a.createElement("h1",{className:"attachment__title attachment__title--opengraph"+(e.title?"":" is-url")},O.a.createElement("a",{className:"attachment__title-link attachment__title-link--opengraph",href:Object(Bs.g)(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link},this.truncateText(e.title||e.url||this.props.link))),i),t&&!n&&this.renderSmallImage(t,a))))}}Vo(zo,"propTypes",{link:C.a.string.isRequired,currentUserId:C.a.string,post:C.a.object,openGraphData:C.a.object,enableLinkPreviews:C.a.bool.isRequired,previewEnabled:C.a.bool.isRequired,isEmbedVisible:C.a.bool,toggleEmbedVisibility:C.a.func.isRequired,actions:C.a.shape({editPost:C.a.func.isRequired}).isRequired});var Ko=Object(n.connect)((function(e,t){const a=Object(m.getConfig)(e);return{currentUserId:Object(u.getCurrentUserId)(e),enableLinkPreviews:"true"===a.EnableLinkPreviews,openGraphData:Object(Fa.getOpenGraphMetadataForUrl)(e,t.postId,t.link),previewEnabled:Object(d.getBool)(e,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.LINK_PREVIEW_DISPLAY,!0)}}),(function(e){return{actions:Object(s.bindActionCreators)({editPost:Z},e)}}))(zo);function Yo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qo extends O.a.PureComponent{constructor(e){super(e),Yo(this,"showModal",e=>{e.preventDefault(),this.setState({showModal:!0})}),Yo(this,"hideModal",()=>{this.setState({showModal:!1})}),this.state={showModal:!1}}render(){return O.a.createElement("div",{className:"post__embed-container"},O.a.createElement(vo.a,{src:this.props.link,imageMetadata:this.props.imageMetadata},e=>O.a.createElement(O.a.Fragment,null,O.a.createElement(jr.a,{className:"img-div attachment__image cursor--pointer",src:e,dimensions:this.props.imageMetadata,showLoader:!0,onClick:this.showModal}),O.a.createElement(Ar.a,{show:this.state.showModal,onModalDismissed:this.hideModal,post:this.props.post,startIndex:0,fileInfos:[{has_preview_image:!1,link:e,extension:this.props.imageMetadata.format}]}))))}}Yo(Qo,"propTypes",{imageMetadata:C.a.object.isRequired,link:C.a.string.isRequired,post:C.a.object.isRequired});var Zo=Qo;const Jo=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/;function Xo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $o extends O.a.PureComponent{constructor(e){super(e),Xo(this,"play",()=>{this.setState({playing:!0})}),Xo(this,"stop",()=>{this.setState({playing:!1})}),this.state={playing:!1}}static getDerivedStateFromProps(e,t){return!e.show&&t.playing?{playing:!1}:null}render(){const{metadata:e,link:t}=this.props,a=function(e){const t=e.trim().match(Jo);return t&&11===t[1].length?t[1]:null}(t),n=function(e){var t,a,n,s,i,r;const o=e.match(/[\\?&](t|time|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!(null==o?void 0:o[0]))return"";const l=null!==(t=null===(a=o[2])||void 0===a?void 0:a.match(/([0-9]+)h/))&&void 0!==t?t:null,c=null!==(n=null===(s=o[3])||void 0===s?void 0:s.match(/([0-9]+)m/))&&void 0!==n?n:null,d=null!==(i=null===(r=o[4])||void 0===r?void 0:r.match(/([0-9]+)s?/))&&void 0!==i?i:null;let m=0;return(null==l?void 0:l[1])&&(m+=3600*parseInt(l[1],10)),(null==c?void 0:c[1])&&(m+=60*parseInt(c[1],10)),(null==d?void 0:d[1])&&(m+=parseInt(d[1],10)),"&start=".concat(m)}(t),s=O.a.createElement("h4",null,O.a.createElement("span",{className:"video-type"},"YouTube - "),O.a.createElement("span",{className:"video-title"},O.a.createElement("a",{href:this.props.link,target:"blank",rel:"noopener noreferrer"},e.title)));let i;if(this.state.playing)i=O.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+a+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+n,width:"480px",height:"360px",type:"text/html",frameBorder:"0",allowFullScreen:"allowfullscreen"});else{const t=e.images[0];i=O.a.createElement("div",{className:"embed-responsive video-div__placeholder"},O.a.createElement("div",{className:"video-thumbnail__container"},O.a.createElement(vo.a,{src:t.secure_url||t.url},e=>O.a.createElement("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail"})),O.a.createElement("div",{className:"block"},O.a.createElement("span",{className:"play-button"},O.a.createElement("span",null)))))}return O.a.createElement("div",{className:"post__embed-container"},O.a.createElement("div",null,s,O.a.createElement("div",{className:"video-div embed-responsive-item",onClick:this.play},i)))}static isYoutubeLink(e){return e.trim().match(Jo)}}Xo($o,"propTypes",{link:C.a.string.isRequired,show:C.a.bool.isRequired,metadata:C.a.object});var el=Object(n.connect)((function(e,t){const a=Object(m.getConfig)(e);return{currentChannelId:Object(p.getCurrentChannelId)(e),googleDeveloperKey:a.GoogleDeveloperKey,hasImageProxy:"true"===a.HasImageProxy,metadata:Object(Fa.getOpenGraphMetadataForUrl)(e,t.postId,t.link)}}))($o);function tl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class al extends O.a.PureComponent{constructor(...e){super(...e),tl(this,"toggleEmbedVisibility",()=>{this.props.actions.toggleEmbedVisibility(this.props.post.id)}),tl(this,"getEmbed",()=>{const{metadata:e}=this.props.post;return Object(Hs.getEmbedFromMetadata)(e)}),tl(this,"isEmbedToggleable",e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const a of t)if(a.match(e))return Boolean(a.toggleable);return"image"===e.type||"opengraph"===e.type&&el.isYoutubeLink(e.url)}),tl(this,"renderEmbed",e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const a of t)if(a.match(e)){const t=a.component;return this.props.isEmbedVisible&&O.a.createElement(t,{embed:e})}switch(e.type){case"image":return this.props.isEmbedVisible?O.a.createElement(Zo,{imageMetadata:this.props.post.metadata.images[e.url],link:e.url,post:this.props.post}):null;case"message_attachment":{let e=[];return this.props.post.props&&this.props.post.props.attachments&&(e=this.props.post.props.attachments),O.a.createElement(Fo,{attachments:e,postId:this.props.post.id,options:this.props.options,imagesMetadata:this.props.post.metadata.images})}case"opengraph":return el.isYoutubeLink(e.url)?this.props.isEmbedVisible?O.a.createElement(el,{postId:this.props.post.id,link:e.url,show:this.props.isEmbedVisible}):null:O.a.createElement(Ko,{postId:this.props.post.id,link:e.url,isEmbedVisible:this.props.isEmbedVisible,post:this.props.post,toggleEmbedVisibility:this.toggleEmbedVisibility});default:return null}}),tl(this,"renderToggle",e=>O.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility color--link ".concat(e?"pull-left":""),"data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility}))}render(){const e=this.getEmbed();if(e){const t=this.isEmbedToggleable(e),a=/^\s*https?:\/\/.*$/.test(this.props.post.message);return O.a.createElement("div",null,t&&a&&this.renderToggle(!0),this.props.children,t&&!a&&this.renderToggle(!1),this.renderEmbed(e))}return this.props.children}}tl(al,"propTypes",{post:C.a.object.isRequired,pluginPostWillRenderEmbedComponents:C.a.arrayOf(C.a.object),children:C.a.element,isEmbedVisible:C.a.bool,options:C.a.object,actions:C.a.shape({toggleEmbedVisibility:C.a.func.isRequired}).isRequired});var nl=Object(n.connect)((function(e,t){return{isEmbedVisible:Object(X.b)(e,t.post.id),pluginPostWillRenderEmbedComponents:e.plugins.components.PostWillRenderEmbedComponent}}),(function(e){return{actions:Object(s.bindActionCreators)({toggleEmbedVisibility:Y.m},e)}}))(al);function sl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class il extends O.a.PureComponent{constructor(e){super(e),sl(this,"handleHeightReceived",e=>{e>0&&this.setState(e=>({checkOverflow:e.checkOverflow+1}))}),sl(this,"handleFormattedTextClick",e=>j.L(e,this.props.currentRelativeTeamUrl)),this.state={collapse:!0,hasOverflow:!1,checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived}}renderDeletedPost(){return O.a.createElement("p",null,O.a.createElement(ee.a,{id:"post_body.deleted",defaultMessage:"(message deleted)"}))}renderEditedIndicator(){return ae.l(this.props.post)?O.a.createElement("span",{id:"postEdited_".concat(this.props.post.id),className:"post-edited__indicator"},O.a.createElement(ee.a,{id:"post_message_view.edited",defaultMessage:"(edited)"})):null}render(){const{post:e,enableFormatting:t,options:a,pluginPostTypes:n,compactDisplay:s,isRHS:i,theme:r}=this.props;if(e.state===x.Posts.POST_DELETED)return this.renderDeletedPost();if(!t)return O.a.createElement("span",null,e.message);const o=e.props&&e.props.type?e.props.type:e.type;if(n.hasOwnProperty(o)){const t=n[o].component;return O.a.createElement(t,{post:e,compactDisplay:s,isRHS:i,theme:r})}let l=e.message;const c=j.db(e);if(s&&c){const e=j.lb("post_info.message.visible.compact"," (Only visible to you)");l=l.concat(e)}const d=i?"rhsPostMessageText_".concat(e.id):"postMessageText_".concat(e.id);return O.a.createElement(wo,{checkOverflow:this.state.checkOverflow,text:l},O.a.createElement("div",{"aria-readonly":"true",tabIndex:"0",id:d,className:"post-message__text",onClick:this.handleFormattedTextClick},O.a.createElement($a,{message:l,imageProps:this.imageProps,isRHS:i,options:a,post:e,channelId:e.channel_id})),this.renderEditedIndicator(),O.a.createElement(k.a,{pluggableName:"PostMessageAttachment",postId:e.id,onHeightChange:this.handleHeightReceived}))}}sl(il,"propTypes",{post:C.a.object.isRequired,enableFormatting:C.a.bool,options:C.a.object,compactDisplay:C.a.bool,isRHS:C.a.bool,isRHSOpen:C.a.bool,isRHSExpanded:C.a.bool,theme:C.a.object.isRequired,pluginPostTypes:C.a.object,currentRelativeTeamUrl:C.a.string.isRequired}),sl(il,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var rl=Object(n.connect)((function(e){return{enableFormatting:Object(d.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:Object(ys.a)(e),isRHSOpen:Object(ys.c)(e),pluginPostTypes:e.plugins.postTypes,theme:Object(d.getTheme)(e),currentRelativeTeamUrl:Object(h.getCurrentRelativeTeamUrl)(e)}}))(il);function ol({post:e,previewCollapsed:t,previewEnabled:a,isEmbedVisible:n,pluginPostTypes:s}){const i=e.type&&s.hasOwnProperty(e.type);let r;const o=O.a.createElement(rl,{post:e,isRHS:!0,hasMention:!0});return r=e.state===x.Posts.POST_DELETED||i?o:O.a.createElement(nl,{post:e,previewCollapsed:t,previewEnabled:a,isEmbedVisible:n},o),r}var ll=a(1226);class cl extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>O.a.createElement("svg",{className:"svg-text-color","aria-label":e,width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-1015.000000, -516.000000)",fill:"inherit"},O.a.createElement("path",{d:"M1027,540 C1020.37258,540 1015,534.627417 1015,528 C1015,521.372583 1020.37258,516 1027,516 C1033.62742,516 1039,521.372583 1039,528 C1039,534.627417 1033.62742,540 1027,540 Z M1027,527 C1025.89543,527 1025,527.895431 1025,529 L1025,533 C1025,534.104569 1025.89543,535 1027,535 C1028.10457,535 1029,534.104569 1029,533 L1029,529 C1029,527.895431 1028.10457,527 1027,527 Z M1027,525 C1028.10457,525 1029,524.104569 1029,523 C1029,521.895431 1028.10457,521 1027,521 C1025.89543,521 1025,521.895431 1025,523 C1025,524.104569 1025.89543,525 1027,525 Z"}))))))}}var dl=a(1205);function ml(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ul extends O.a.PureComponent{constructor(e){super(e),ml(this,"handleShortcutReactToLastPost",e=>{if(e){const{isReadOnly:e,channelIsArchived:t,enableEmojiPicker:a,post:n,actions:{emitShortcutReactToLastPostFrom:s}}=this.props;s(N.t.NO_WHERE);const i=n&&n.state===x.Posts.POST_DELETED,r=n&&Object(Hs.isPostEphemeral)(n),o=n&&ae.p(n),l=n&&ae.e(n),c=n&&n.failed,d=this.postHeaderRef.current.getBoundingClientRect();!(d.top-110>0&&d.bottom<window.innerHeight)||r||o||e||c||l||i||t||Object(j.cb)()||!a||this.setState({hover:!0},()=>{this.toggleEmojiPicker()})}}),ml(this,"removePost",()=>{this.props.removePost(this.props.post)}),ml(this,"createRemovePostButton",()=>O.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:this.removePost},"×")),ml(this,"renderPostTime",()=>{const e=this.props.post,t=!(x.Posts.POST_DELETED===e.state||Object(Hs.isPostPendingOrFailed)(e));return O.a.createElement(no,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:N.t.RHS_COMMENT})}),ml(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e})}),ml(this,"getClassName",(e,t,a)=>{let n="post post--thread same--root post--comment";return this.props.currentUserId===e.user_id&&(n+=" current--user"),(t||a)&&(n+=" post--system"),this.props.compactDisplay&&(n+=" post--compact"),e.is_pinned&&(n+=" post--pinned"),(this.state.dropdownOpened||this.state.showEmojiPicker)&&(n+=" post--hovered"),this.props.isConsecutivePost&&(n+=" same--user"),this.state.alt&&!this.props.channelIsArchived&&(n+=" cursor--pointer"),n}),ml(this,"handleAlt",e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})}),ml(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),ml(this,"getDotMenuRef",()=>this.refs.dotMenu),ml(this,"setHover",()=>{this.setState({hover:!0})}),ml(this,"unsetHover",()=>{this.setState({hover:!1})}),ml(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0})}),ml(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1})}),ml(this,"handlePostClick",e=>{this.props.channelIsArchived||e.altKey&&this.props.actions.markPostAsUnread(this.props.post)}),ml(this,"handlePostFocus",()=>{const{post:e,author:t,reactions:a,isFlagged:n,intl:s,emojiMap:i}=this.props;this.setState({currentAriaLabel:ae.d(e,t,n,a,s,i)})}),this.postRef=O.a.createRef(),this.state={showEmojiPicker:!1,dropdownOpened:!1,alt:!1,hover:!1,a11yActive:!1,currentAriaLabel:""},this.postHeaderRef=O.a.createRef()}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.addEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.removeEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentDidUpdate(e){const{shortcutReactToLastPostEmittedFrom:t,isLastPost:a}=this.props;this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(N.c.UPDATE)),e.shortcutReactToLastPostEmittedFrom!==t&&t===N.t.RHS_ROOT&&this.handleShortcutReactToLastPost(a)}render(){const{post:e,isConsecutivePost:t,isReadOnly:a,channelIsArchived:n}=this.props,s=e&&e.state===x.Posts.POST_DELETED,i=Object(Hs.isPostEphemeral)(e),r=ae.p(e),o=Object(Hs.isMeMessage)(e),l=ae.e(e);let c,d,m,u,h=null;(this.props.compactDisplay||Object(j.cb)())&&(h=O.a.createElement(dl.a,{userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),t||(h=O.a.createElement(dl.a,{userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0}),d=O.a.createElement(Vr,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:e,userId:e.user_id}),e.props&&e.props.from_webhook?(h=e.props.override_username&&this.props.enablePostUsernameOverride?O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username,disablePopover:!0}):O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,disablePopover:!0}),c=O.a.createElement(sn.a,{className:"col col__name"})):l?(h=O.a.createElement("span",{className:"auto-responder"},O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),c=O.a.createElement(ll.a,{className:"col col__name"},O.a.createElement(ee.a,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):r&&(h=O.a.createElement(dl.a,{overwriteName:O.a.createElement(ee.a,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:N.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}),m=O.a.createElement("span",{className:"post__visibility"},O.a.createElement(ee.a,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))));let p="";e.failed&&(p+=" post-failed",u=O.a.createElement(Yr,{post:this.props.post})),ae.l(this.props.post)&&(p+=" post--edited");let g,b,f,_=null;if(e.file_ids&&e.file_ids.length>0&&(_=O.a.createElement(qr,{post:e,compactDisplay:this.props.compactDisplay})),a||i||e.failed||r||!this.props.enableEmojiPicker||n||(g=O.a.createElement(ro,{channelId:e.channel_id,postId:e.id,teamId:this.props.teamId,getDotMenuRef:this.getDotMenuRef,location:N.t.RHS_COMMENT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker})),i)b=O.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton());else if(s)b=null;else if(!r&&(Object(j.cb)()||this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker)){const e=O.a.createElement(Tr,{post:this.props.post,location:N.t.RHS_COMMENT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,isReadOnly:a||n,isMenuOpen:this.state.dropdownOpened,enableEmojiPicker:this.props.enableEmojiPicker});b=O.a.createElement("div",{ref:"dotMenu",className:"col post-menu"},e,g)}e.is_pinned&&(f=O.a.createElement("span",{className:"post__pinned-badge"},O.a.createElement(ee.a,{id:"post_info.pinned",defaultMessage:"Pinned"})));let E=null;(this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker||this.props.isFlagged)&&(E=O.a.createElement($r,{location:N.t.RHS_COMMENT,postId:e.id,isFlagged:this.props.isFlagged,isEphemeral:i}));const v=this.renderPostTime();let y;return e.props&&e.props.card&&(y=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,null,O.a.createElement(ee.a,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},O.a.createElement("button",{className:"post-menu__item post-menu__item--show",onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},O.a.createElement(cl,{className:"icon icon__info","aria-hidden":"true"})))),O.a.createElement("div",{role:"listitem",ref:this.postRef,id:"rhsPost_"+e.id,tabIndex:"-1",className:"a11y__section ".concat(this.getClassName(e,r,o)),onClick:this.handlePostClick,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,"aria-label":this.state.currentAriaLabel,onFocus:this.handlePostFocus,"data-a11y-sort-order":this.props.a11yIndex},O.a.createElement("div",{role:"application",className:"post__content"},O.a.createElement("div",{className:"post__img"},d),O.a.createElement("div",null,O.a.createElement("div",{className:"post__header",ref:this.postHeaderRef},O.a.createElement("div",{className:"col col__name"},h,c),O.a.createElement("div",{className:"col"},v,f,y,E,m),b),O.a.createElement("div",{className:"post__body"},O.a.createElement("div",{className:p},u,O.a.createElement(ol,{post:e,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),_,O.a.createElement(fo,{post:e,isReadOnly:a||n})))))}}ml(ul,"propTypes",{post:C.a.object,teamId:C.a.string.isRequired,currentUserId:C.a.string.isRequired,compactDisplay:C.a.bool,author:C.a.string,reactions:C.a.object,isFlagged:C.a.bool,isBusy:C.a.bool,removePost:C.a.func.isRequired,previewCollapsed:C.a.string.isRequired,previewEnabled:C.a.bool.isRequired,isEmbedVisible:C.a.bool,enableEmojiPicker:C.a.bool.isRequired,enablePostUsernameOverride:C.a.bool.isRequired,isReadOnly:C.a.bool.isRequired,pluginPostTypes:C.a.object,channelIsArchived:C.a.bool.isRequired,isConsecutivePost:C.a.bool,handleCardClick:C.a.func,a11yIndex:C.a.number,isLastPost:C.a.bool,shortcutReactToLastPostEmittedFrom:C.a.string,intl:ne.a.isRequired,actions:C.a.shape({markPostAsUnread:C.a.func.isRequired,emitShortcutReactToLastPostFrom:C.a.func}),emojiMap:C.a.object.isRequired});var hl=Object(te.c)(ul);function pl(e,t){const a=t.post,n=t.previousPostId&&Object(Fa.getPost)(e,t.previousPostId);let s=!1;if(n){const e=Boolean(a.props&&a.props.from_webhook),t=Boolean(n.props&&n.props.from_webhook);!(n&&n.user_id===a.user_id&&a.create_at-n.create_at<=x.Posts.POST_COLLAPSE_TIMEOUT)||e||t||Object(Hs.isSystemMessage)(a)||Object(Hs.isSystemMessage)(n)||n.root_id!==a.root_id&&n.id!==a.root_id||(s=!0)}return s}var gl=Object(n.connect)((function(e,t){const a=Object(Fa.makeGetReactionsForPost)(),n=Object(u.makeGetDisplayName)(),s=Object(Nt.a)(e),i=Object(m.getConfig)(e),r="true"===i.EnableEmojiPicker,o="true"===i.EnablePostUsernameOverride,l=t.teamId||Object(h.getCurrentTeamId)(e),c=e.entities.channels.channels[t.post.channel_id],g=Object(Nt.c)(e);return{author:n(e,t.post.user_id),reactions:a(e,t.post.id),enableEmojiPicker:r,enablePostUsernameOverride:o,isEmbedVisible:Object(X.b)(e,t.post.id),isReadOnly:Object(p.isChannelReadOnlyById)(e,t.post.channel_id),teamId:l,pluginPostTypes:e.plugins.postTypes,channelIsArchived:Ca(c),isConsecutivePost:pl(e,t),isFlagged:null!=Object(d.get)(e,N.B.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(d.get)(e,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.MESSAGE_DISPLAY,N.B.MESSAGE_DISPLAY_DEFAULT)===N.B.MESSAGE_DISPLAY_COMPACT,shortcutReactToLastPostEmittedFrom:g,emojiMap:s}}),(function(e){return{actions:Object(s.bindActionCreators)({markPostAsUnread:Y.h,emitShortcutReactToLastPostFrom:Y.d},e)}}))(hl);function bl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fl extends O.a.PureComponent{constructor(...e){super(...e),bl(this,"handleBack",e=>{switch(e.preventDefault(),this.props.previousRhsState){case N.C.SEARCH:this.props.actions.showSearchResults();break;case N.C.MENTION:this.props.actions.showMentions();break;case N.C.FLAG:this.props.actions.showFlaggedPosts();break;case N.C.PIN:this.props.actions.showPinnedPosts()}}),bl(this,"handleJumpClick",()=>{Object(j.cb)()&&this.props.actions.closeRightHandSide(),this.props.actions.setRhsExpanded(!1);const e=this.props.relativeTeamUrl;se.a.push("".concat(e,"/pl/").concat(this.props.rootPostId))})}render(){let e;const t=O.a.createElement(di.a,{id:"closeSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"}));let a;switch(this.props.previousRhsState){case N.C.SEARCH:case N.C.MENTION:a=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to search results"}));break;case N.C.FLAG:a=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to flagged posts"}));break;case N.C.PIN:a=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to pinned posts"}))}const n=O.a.createElement(di.a,{id:"expandSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),s=O.a.createElement(di.a,{id:"shrinkSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"})),i=this.props.channel.display_name;return a&&(e=O.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},O.a.createElement(ee.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-back-ios","aria-label":e}))))),O.a.createElement("div",{className:"sidebar--right__header"},O.a.createElement("span",{className:"sidebar--right__title"},e,O.a.createElement(ee.a,{id:"rhs_header.details",defaultMessage:"Thread"}),i&&O.a.createElement("button",{onClick:this.handleJumpClick,className:"style--none sidebar--right__title__channel"},i)),O.a.createElement("div",{className:"pull-right"},O.a.createElement("button",{type:"button",className:"sidebar--right__expand btn-icon","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-expand","aria-label":e}))),O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:s},O.a.createElement(ee.a,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-collapse","aria-label":e})))),O.a.createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close btn-icon","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},O.a.createElement(ee.a,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-close","aria-label":e}))))))}}bl(fl,"propTypes",{rootPostId:C.a.string.isRequired,channel:C.a.object.isRequired,previousRhsState:C.a.oneOf(Object.values(N.C)),relativeTeamUrl:C.a.string.isRequired,actions:C.a.shape({setRhsExpanded:C.a.func,showMentions:C.a.func,showSearchResults:C.a.func,showFlaggedPosts:C.a.func,showPinnedPosts:C.a.func,closeRightHandSide:C.a.func,toggleRhsExpanded:C.a.func})});var _l=Object(n.connect)((function(e){return{relativeTeamUrl:Object(h.getCurrentRelativeTeamUrl)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({setRhsExpanded:vs.l,showSearchResults:vs.q,showMentions:vs.n,showFlaggedPosts:vs.m,showPinnedPosts:vs.o,closeRightHandSide:vs.b,toggleRhsExpanded:vs.t},e)}}))(fl);function El(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vl extends O.a.PureComponent{constructor(e){super(e),El(this,"handleShortcutReactToLastPost",e=>{if(e){const{post:t,enableEmojiPicker:a,channelIsArchived:n,actions:{emitShortcutReactToLastPostFrom:s}}=this.props;s(N.t.NO_WHERE);const i=t&&t.state===x.Posts.POST_DELETED,r=t&&j.db(t),o=t&&ae.p(t),l=t&&t.failed,c=t&&t.type===N.Q.PostTypes.FAKE_PARENT_DELETED,d=this.postHeaderRef.current.getBoundingClientRect();d.top-110>0&&d.bottom<window.innerHeight&&(r||o||i||l||j.cb()||n||c||!a||this.toggleEmojiPicker(e))}}),El(this,"renderPostTime",e=>{const t=this.props.post;if(t.type===N.Q.PostTypes.FAKE_PARENT_DELETED)return null;const a=!(e||x.Posts.POST_DELETED===t.state||Hs.isPostPendingOrFailed(t));return O.a.createElement(no,{isPermalink:a,eventTime:t.create_at,postId:t.id,location:N.t.RHS_ROOT})}),El(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e})}),El(this,"getClassName",(e,t,a)=>{let n="post post--root post--thread";return this.props.currentUserId===e.user_id&&(n+=" current--user"),(t||a)&&(n+=" post--system"),this.props.compactDisplay&&(n+=" post--compact"),e.is_pinned&&(n+=" post--pinned"),(this.state.dropdownOpened||this.state.showEmojiPicker)&&(n+=" post--hovered"),this.state.alt&&!this.props.channelIsArchived&&(n+=" cursor--pointer"),n}),El(this,"handleAlt",e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})}),El(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),El(this,"handlePostClick",e=>{this.props.channelIsArchived||e.altKey&&this.props.actions.markPostAsUnread(this.props.post)}),El(this,"handlePostFocus",()=>{const{post:e,author:t,reactions:a,isFlagged:n,emojiMap:s}=this.props;this.setState({currentAriaLabel:ae.d(e,t,n,a,this.props.intl,s)})}),El(this,"getDotMenuRef",()=>this.refs.dotMenu),this.state={alt:!1,showEmojiPicker:!1,testStateObj:!0,dropdownOpened:!1,currentAriaLabel:""},this.postHeaderRef=O.a.createRef()}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt)}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt)}componentDidUpdate(e){const{shortcutReactToLastPostEmittedFrom:t,isLastPost:a}=this.props;e.shortcutReactToLastPostEmittedFrom!==t&&t===N.t.RHS_ROOT&&this.handleShortcutReactToLastPost(a)}render(){const{post:e,isReadOnly:t,teamId:a,channelIsArchived:n}=this.props,s=e&&e.state===x.Posts.POST_DELETED,i=j.db(e),r=ae.p(e),o=Hs.isMeMessage(e);let l;t||i||e.failed||r||!this.props.enableEmojiPicker||n||(l=O.a.createElement(ro,{channelId:e.channel_id,postId:e.id,teamId:a,getDotMenuRef:this.getDotMenuRef,location:N.t.RHS_ROOT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker}));let c,d,m=null;e.file_ids&&e.file_ids.length>0&&(m=O.a.createElement(qr,{post:e,compactDisplay:this.props.compactDisplay})),r?c=O.a.createElement(dl.a,{overwriteName:O.a.createElement(ee.a,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:N.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}):e.props&&e.props.from_webhook?(c=e.props.override_username&&this.props.enablePostUsernameOverride?O.a.createElement(dl.a,{key:e.user_id,userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username,disablePopover:!0}):O.a.createElement(dl.a,{key:e.user_id,userId:e.user_id,hideStatus:!0,disablePopover:!0}),d=O.a.createElement(sn.a,null)):c=O.a.createElement(dl.a,{key:e.user_id,userId:e.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0});let u,h="";ae.l(this.props.post)&&(h+=" post--edited"),e.is_pinned&&(u=O.a.createElement("span",{className:"post__pinned-badge"},O.a.createElement(ee.a,{id:"post_info.pinned",defaultMessage:"Pinned"})));const p=O.a.createElement(Tr,{post:this.props.post,location:N.t.RHS_ROOT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,commentCount:this.props.commentCount,isMenuOpen:this.state.dropdownOpened,isReadOnly:t||n,enableEmojiPicker:this.props.enableEmojiPicker});let g,b;let f;return s||this.props.post.type===N.Q.PostTypes.FAKE_PARENT_DELETED||(g=O.a.createElement("div",{ref:"dotMenu",className:"col post-menu"},p,l)),!i&&!e.failed&&!r&&(b=O.a.createElement($r,{location:N.t.RHS_ROOT,postId:e.id,isFlagged:this.props.isFlagged})),this.props.post.props&&this.props.post.props.card&&(f=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,null,O.a.createElement(ee.a,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},O.a.createElement("button",{className:"post-menu__item post-menu__item--show",onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},O.a.createElement(cl,{className:"icon icon__info","aria-hidden":"true"})))),O.a.createElement("div",{role:"listitem",id:"rhsPost_"+e.id,tabIndex:"-1",className:"thread__root a11y__section ".concat(this.getClassName(e,r,o)),"aria-label":this.state.currentAriaLabel,onClick:this.handlePostClick,onFocus:this.handlePostFocus,"data-a11y-sort-order":"0"},O.a.createElement("div",{role:"application",className:"post__content"},O.a.createElement("div",{className:"post__img"},O.a.createElement(Vr,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:e,userId:e.user_id})),O.a.createElement("div",null,O.a.createElement("div",{className:"post__header",ref:this.postHeaderRef},O.a.createElement("div",{className:"col__name"},c,d),O.a.createElement("div",{className:"col"},this.renderPostTime(i),u,f,b),g),O.a.createElement("div",{className:"post__body"},O.a.createElement("div",{className:h},O.a.createElement(ol,{post:e,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),m,O.a.createElement(fo,{post:e,isReadOnly:t||n})))))}}El(vl,"propTypes",{post:C.a.object.isRequired,teamId:C.a.string.isRequired,currentUserId:C.a.string.isRequired,compactDisplay:C.a.bool,commentCount:C.a.number.isRequired,author:C.a.string,reactions:C.a.object,isFlagged:C.a.bool,previewCollapsed:C.a.string,previewEnabled:C.a.bool,isBusy:C.a.bool,isEmbedVisible:C.a.bool,enableEmojiPicker:C.a.bool.isRequired,enablePostUsernameOverride:C.a.bool.isRequired,isReadOnly:C.a.bool.isRequired,pluginPostTypes:C.a.object,channelIsArchived:C.a.bool.isRequired,handleCardClick:C.a.func.isRequired,isLastPost:C.a.bool,shortcutReactToLastPostEmittedFrom:C.a.string,intl:ne.a.isRequired,actions:C.a.shape({markPostAsUnread:C.a.func.isRequired,emitShortcutReactToLastPostFrom:C.a.func}),emojiMap:C.a.object.isRequired}),El(vl,"defaultProps",{commentCount:0});var yl=Object(te.c)(vl);var Cl=Object(n.connect)((function(e,t){const a=Object(Fa.makeGetReactionsForPost)(),n=Object(u.makeGetDisplayName)(),s=Object(m.getConfig)(e),i="true"===s.EnableEmojiPicker,r="true"===s.EnablePostUsernameOverride,o=t.teamId||Object(h.getCurrentTeamId)(e),l=Object(p.getChannel)(e,t.post.channel_id)||{},c=Object(Nt.a)(e),g=Object(Nt.c)(e);return{author:n(e,t.post.user_id),reactions:a(e,t.post.id),emojiMap:c,enableEmojiPicker:i,enablePostUsernameOverride:r,isEmbedVisible:Object(X.b)(e,t.post.id),isReadOnly:Object(p.isChannelReadOnlyById)(e,t.post.channel_id),teamId:o,pluginPostTypes:e.plugins.postTypes,channelIsArchived:Ca(l),isFlagged:null!=Object(d.get)(e,N.B.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(d.get)(e,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.MESSAGE_DISPLAY,N.B.MESSAGE_DISPLAY_DEFAULT)===N.B.MESSAGE_DISPLAY_COMPACT,shortcutReactToLastPostEmittedFrom:g}}),(function(e){return{actions:Object(s.bindActionCreators)({markPostAsUnread:Y.h,emitShortcutReactToLastPostFrom:Y.d},e)}}))(yl);function wl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ol(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Tl(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Sl(){return O.a.createElement("div",null)}function Pl(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class Ml extends O.a.Component{static getDerivedStateFromProps(e,t){let a={selected:e.selected};return t.selected&&e.selected&&t.selected.id!==e.selected.id&&(a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(a),!0).forEach((function(t){Ol(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{openTime:(new Date).getTime()})),a}constructor(e){super(e),Ol(this,"scrollStopAction",void 0),Ol(this,"handleResize",()=>{this.setState({windowWidth:j.wb(),windowHeight:j.vb()}),I.n()&&"reply_textbox"===document.activeElement.id&&this.scrollToBottom()}),Ol(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),Ol(this,"handleCardClickPost",e=>{e&&this.props.actions.selectPostCard(e)}),Ol(this,"onBusy",e=>{this.setState({isBusy:e})}),Ol(this,"filterPosts",(e,t,a)=>{const n=[];return e.forEach(e=>{"system_ephemeral"===e.type&&e.create_at<a||e.root_id===t.id&&n.unshift(e)}),n}),Ol(this,"scrollToBottom",()=>{As()(".post-right__scroll")[0]&&As()(".post-right__scroll").parent().scrollTop(As()(".post-right__scroll")[0].scrollHeight)}),Ol(this,"updateFloatingTimestamp",()=>{if(j.cb()&&this.props.posts){const e=this.refs.rhspostlist.childNodes,t=this.refs.rhspostlist.getBoundingClientRect();let a="";const n=100;for(let s=0;s<e.length;s++)if(e[s].offsetTop+t.top-n>0){a=this.props.posts[s].id;break}a!==this.state.topRhsPostId&&this.setState({topRhsPostId:a})}}),Ol(this,"handleScroll",()=>{this.updateFloatingTimestamp(),this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(N.Q.SCROLL_DELAY)}),Ol(this,"handleScrollStop",()=>{this.setState({isScrolling:!1})}),this.scrollStopAction=new Ds(this.handleScrollStop);const t=(new Date).getTime();this.state={windowWidth:j.wb(),windowHeight:j.vb(),isScrolling:!1,topRhsPostId:"",openTime:t}}componentDidMount(){this.scrollToBottom(),window.addEventListener("resize",this.handleResize),this.props.posts.length<j.G(this.props.posts).reply_count+1&&this.props.actions.getPostThread(this.props.selected.id,!0)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){const t=e.posts||[],a=this.props.posts||[];this.props.socketConnectionStatus&&!e.socketConnectionStatus&&this.props.actions.getPostThread(this.props.selected.id),t.length>=a.length||a[0].user_id===this.props.currentUserId&&this.scrollToBottom()}shouldComponentUpdate(e,t){return!j.c(t.postsArray,this.props.posts)||(!j.c(t.selected,this.props.selected)||(e.previewEnabled!==this.props.previewEnabled||(t.isBusy!==this.state.isBusy||(t.isScrolling!==this.state.isScrolling||t.topRhsPostId!==this.state.topRhsPostId))))}render(){if(null==this.props.posts||null==this.props.selected)return O.a.createElement("div",null);const e=this.filterPosts(this.props.posts,this.props.selected,this.state.openTime),t=e.length,{selected:a,currentUserId:n}=this.props;let s=!1,i={};0===t?s=!0:i=e[t-1];let r=a.create_at;!r&&this.props.posts.length>0&&(r=this.props.posts[this.props.posts.length-1].create_at);const o=j.t(r);let l=o;const c=[];let d,m=1;for(let a=0;a<t;a++){const t=e[a],s=a>0?e[a-1].id:"",r=j.t(t.create_at);r.toDateString()!==l.toDateString()&&(l=r,c.push(O.a.createElement(pr,{key:r.toString(),date:r})));const o=t.id?t.id:t.pending_post_id;c.push(O.a.createElement(gl,{key:o+"commentKey",ref:t.id,post:t,previousPostId:s,teamId:this.props.channel.team_id,currentUserId:n,isBusy:this.state.isBusy,removePost:this.props.actions.removePost,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,handleCardClick:this.handleCardClickPost,a11yIndex:m++,isLastPost:t.id===i.id}))}const u=a.type===N.Q.PostTypes.FAKE_PARENT_DELETED,h=0!==this.props.channel.delete_at;if(u||(d=h?O.a.createElement("div",{className:"channel-archived-warning"},O.a.createElement(Ki.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."})):O.a.createElement("div",{className:"post-create__container"},O.a.createElement(nr,{channelId:a.channel_id,rootId:a.id,rootDeleted:a.state===x.Posts.POST_DELETED,latestPostId:t>0?e[t-1].id:a.id}))),this.props.channel.type===N.Q.DM_CHANNEL){const e=this.props.directTeammate;e&&e.delete_at&&(d=O.a.createElement("div",{className:"post-create-message"},O.a.createElement(ee.a,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})))}return O.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body"},O.a.createElement(_r,{isScrolling:this.state.isScrolling,isMobile:j.cb(),postId:this.state.topRhsPostId,isRhsPost:!0}),O.a.createElement(_l,{rootPostId:a.id,channel:this.props.channel,previousRhsState:this.props.previousRhsState}),O.a.createElement(ks.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Sl,renderThumbVertical:Pl,renderView:Tl,onScroll:this.handleScroll},O.a.createElement("div",{className:"post-right__scroll"},O.a.createElement("div",{role:"application",id:"rhsContent","aria-label":j.lb("accessibility.sections.rhsContent","message details complimentary region"),className:"post-right__content a11y__region","data-a11y-sort-order":"3","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0},!u&&O.a.createElement(pr,{date:o}),O.a.createElement(Cl,{ref:a.id,post:a,commentCount:t,teamId:this.props.channel.team_id,currentUserId:this.props.currentUserId,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isBusy:this.state.isBusy,handleCardClick:this.handleCardClick,isLastPost:s}),u&&o&&O.a.createElement(pr,{date:o}),O.a.createElement("div",{ref:"rhspostlist",className:"post-right-comments-container",id:"rhsPostList"},c)),d)))}}Ol(Ml,"propTypes",{posts:C.a.arrayOf(C.a.any).isRequired,channel:C.a.oneOfType([C.a.any,C.a.oneOf([null])]),selected:C.a.oneOfType([C.a.any,C.a.any]).isRequired,previousRhsState:C.a.string,currentUserId:C.a.string.isRequired,previewCollapsed:C.a.string.isRequired,previewEnabled:C.a.bool.isRequired,socketConnectionStatus:C.a.bool.isRequired,actions:C.a.shape({removePost:C.a.func.isRequired,selectPostCard:C.a.func.isRequired,getPostThread:C.a.func.isRequired}).isRequired,directTeammate:C.a.any.isRequired});var Nl=Object(n.connect)((function(){const e=Object(Fa.makeGetPostsForThread)();return function(t){const a=Object(ys.o)(t),n=Object(Is.a)(t);let s=null,i=[];a&&(i=e(t,{rootId:a.id}),s=Object(p.getChannel)(t,a.channel_id));const r=Object(d.get)(t,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.COLLAPSE_DISPLAY,N.B.COLLAPSE_DISPLAY_DEFAULT);return{selected:a,channel:s,posts:i,socketConnectionStatus:n.connected,previewCollapsed:r,previewEnabled:Object(d.getBool)(t,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.LINK_PREVIEW_DISPLAY,"true"===N.B.LINK_PREVIEW_DISPLAY_DEFAULT),directTeammate:Object(j.v)(t,s.id)}}}),(function(e){return{actions:Object(s.bindActionCreators)({removePost:D.removePost,selectPostCard:vs.h,getPostThread:D.getPostThread},e)}}))(Ml);function Il(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class jl extends O.a.PureComponent{constructor(...e){super(...e),Il(this,"handleBack",e=>{switch(e.preventDefault(),this.props.previousRhsState){case N.C.SEARCH:this.props.actions.showSearchResults();break;case N.C.MENTION:this.props.actions.showMentions();break;case N.C.FLAG:this.props.actions.showFlaggedPosts();break;case N.C.PIN:this.props.actions.showPinnedPosts()}})}render(){let e,t;switch(this.props.previousRhsState){case N.C.SEARCH:case N.C.MENTION:t=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to search results"}));break;case N.C.FLAG:t=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to flagged posts"}));break;case N.C.PIN:t=O.a.createElement(di.a,{id:"backToResultsTooltip"},O.a.createElement(ee.a,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to pinned posts"}))}const a=O.a.createElement(di.a,{id:"closeSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),n=O.a.createElement(di.a,{id:"expandSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),s=O.a.createElement(di.a,{id:"shrinkSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return t&&(e=O.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},O.a.createElement(ee.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-back-ios","aria-label":e}))))),O.a.createElement("div",{className:"sidebar--right__header"},O.a.createElement("span",{className:"sidebar--right__title"},e,O.a.createElement(ee.a,{id:"search_header.title5",defaultMessage:"Extra information"})),O.a.createElement("div",{className:"pull-right"},O.a.createElement("button",{type:"button",className:"sidebar--right__expand btn-icon","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-expand","aria-label":e}))),O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:s},O.a.createElement(ee.a,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-collapse","aria-label":e})))),O.a.createElement("button",{type:"button",className:"sidebar--right__close btn-icon","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},O.a.createElement(ee.a,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},e=>O.a.createElement("i",{className:"icon icon-close","aria-label":e}))))))}}Il(jl,"propTypes",{previousRhsState:C.a.oneOf(Object.values(N.C)),actions:C.a.shape({showMentions:C.a.func,showSearchResults:C.a.func,showFlaggedPosts:C.a.func,showPinnedPosts:C.a.func,closeRightHandSide:C.a.func,toggleRhsExpanded:C.a.func.isRequired})});var Al=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({showMentions:vs.n,showSearchResults:vs.q,showFlaggedPosts:vs.m,showPinnedPosts:vs.o,closeRightHandSide:vs.b,toggleRhsExpanded:vs.t},e)}}))(jl);function Rl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kl(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Ll(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Dl(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class xl extends O.a.Component{constructor(e){super(e),Rl(this,"handleScroll",()=>{this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(N.Q.SCROLL_DELAY)}),Rl(this,"handleScrollStop",()=>{this.setState({isScrolling:!1})}),Rl(this,"handleClick",()=>{j.cb()&&M.c()}),this.scrollStopAction=new Ds(this.handleScrollStop),this.state={isScrolling:!1,topRhsPostCreateAt:0}}shouldComponentUpdate(e,t){return!j.c(t.selected,this.props.selected)||t.isScrolling!==this.state.isScrolling}render(){if(null==this.props.selected)return O.a.createElement("div",null);const{selected:e,pluginPostCardTypes:t,teamUrl:a}=this.props,n=e.type;let s=null;if(t.hasOwnProperty(n)){const a=t[n].component;s=O.a.createElement(a,{post:e})}s||(s=O.a.createElement("div",{className:"info-card"},O.a.createElement(wa.a,{message:e.props&&e.props.card})));let i=O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,disablePopover:!0});e.props.override_username&&this.props.enablePostUsernameOverride&&(i=O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,disablePopover:!0,overwriteName:e.props.override_username}));const r=O.a.createElement(Vr,{compactDisplay:!1,post:e,userId:e.user_id});return O.a.createElement("div",{className:"sidebar-right__body sidebar-right__card"},O.a.createElement(Al,{previousRhsState:this.props.previousRhsState}),O.a.createElement(ks.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Ll,renderThumbVertical:Dl,renderView:kl,onScroll:this.handleScroll},O.a.createElement("div",{className:"post-right__scroll"},s,O.a.createElement("div",{className:"d-flex post-card--info"},O.a.createElement("div",{className:"post-card--post-by overflow--ellipsis"},O.a.createElement(ee.a,{id:"rhs_card.message_by",defaultMessage:"Message by {avatar} {user}",values:{user:i,avatar:r}})),O.a.createElement("div",{className:"post-card--view-post"},O.a.createElement(jn.a,{to:"".concat(a,"/pl/").concat(e.id),className:"post__permalink",onClick:this.handleClick},O.a.createElement(ee.a,{id:"rhs_card.jump",defaultMessage:"Jump"})))))))}}Rl(xl,"propTypes",{selected:C.a.object,pluginPostCardTypes:C.a.object,previousRhsState:C.a.oneOf(Object.values(N.C)),enablePostUsernameOverride:C.a.bool,teamUrl:C.a.string}),Rl(xl,"defaultProps",{pluginPostCardTypes:{}});var Ul=Object(n.connect)((function(e){const t=Object(ys.p)(e);return{enablePostUsernameOverride:"true"===Object(m.getConfig)(e).EnablePostUsernameOverride,selected:t,pluginPostCardTypes:e.plugins.postCardTypes,teamUrl:Object(h.getCurrentRelativeTeamUrl)(e)}}))(xl);a(122);class ql extends ln.a{render(){const{item:e,isSelection:t,teammate:a}=this.props;let n="search-autocomplete__item";t&&(n+=" selected a11y--focused");const s=function(e){let t=e;if(e.type===N.Q.DM_CHANNEL){const a=O.a.createElement(on.a,{username:e.username,url:Object(j.O)(e.name.substr(0,e.name.indexOf("_")),e.last_picture_update),size:"sm"});t=O.a.createElement(O.a.Fragment,null,a,O.a.createElement("span",{className:"ml-3"},"@",e.display_name))}return e.type===N.Q.GM_CHANNEL&&(t=O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"search-autocomplete__icon"},O.a.createElement("div",{className:"status status--group"},"G")),O.a.createElement("span",{className:"ml-3"},"@",e.display_name.replace(/ /g,"")))),e.type===N.Q.OPEN_CHANNEL&&(t=O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"search-autocomplete__icon"},O.a.createElement("i",{className:"icon light icon--standard icon--no-spacing icon-globe"})),O.a.createElement("span",{className:"ml-3"},e.display_name),O.a.createElement("span",{className:"ml-2 light"},"~",e.name))),e.type===N.Q.PRIVATE_CHANNEL&&(t=O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"search-autocomplete__icon"},O.a.createElement("i",{className:"icon light icon--standard icon--no-spacing icon-lock-outline"})),O.a.createElement("span",{className:"ml-3"},e.display_name),O.a.createElement("span",{className:"ml-2 light"},"~",e.name))),t}(e);let i=null;return e.type===N.Q.DM_CHANNEL&&(i=O.a.createElement(sn.a,{show:Boolean(a&&a.is_bot),className:"badge-popoverlist"})),O.a.createElement("div",Object.assign({onClick:this.handleClick,onMouseMove:this.handleMouseMove,className:n,ref:e=>{this.node=e}},ln.a.baseProps),O.a.createElement("span",{"data-testid":"listItem",className:"search-autocomplete__name"},s),i)}}var Hl=Object(n.connect)((e,t)=>({teammate:Object(j.v)(e,t.item.id)}))(ql);function Fl(e){return e.type===N.Q.DM_CHANNEL?"@"+e.display_name:e.type===N.Q.GM_CHANNEL?"@"+e.display_name.replace(/ /g,""):(e.type===N.Q.OPEN_CHANNEL||(e.type,N.Q.PRIVATE_CHANNEL),e.name)}class Bl extends nn.a{constructor(e){super(),this.autocompleteChannelsForSearch=e}handlePretextChanged(e,t){const a=/\b(?:in|channel):\s*(\S*)$/i.exec(e.toLowerCase());if(a){const e=a[1];this.startNewRequest(e),this.autocompleteChannelsForSearch(e,a=>{if(this.shouldCancelDispatch(e))return;const n=a.sort(gn.sortChannelsByTypeAndDisplayName.bind(null,"en")),s=n.map(Fl);t({matchedPretext:e,terms:s,items:n,component:Hl})})}return Boolean(a)}}var Gl=a(1183);function Vl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zl extends Pn.a{constructor(e){super(e),Wl(this,"getContent",()=>As()(Ii.a.findDOMNode(this.popoverRef.current)).find(".popover-content")),this.itemRefs=new Map,this.popoverRef=O.a.createRef(),this.suggestionReadOut=O.a.createRef()}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):e.type===N.Q.DM_CHANNEL||e.type===N.Q.GM_CHANNEL?this.currentLabel=e.display_name:this.currentLabel=e.name,this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderChannelDivider(e){let t;return t=e===N.Q.OPEN_CHANNEL?O.a.createElement(ee.a,{id:"suggestion.search.public",defaultMessage:"Public Channels"}):e===N.Q.PRIVATE_CHANNEL?O.a.createElement(ee.a,{id:"suggestion.search.private",defaultMessage:"Private Channels"}):O.a.createElement(ee.a,{id:"suggestion.search.direct",defaultMessage:"Direct Messages"}),O.a.createElement("div",{key:e+"-divider",className:"search-autocomplete__divider"},O.a.createElement("span",null,t))}render(){if(0===this.props.items.length)return null;const e=[];for(let t=0;t<this.props.items.length;t++){const a=this.props.items[t],n=this.props.terms[t],s=n===this.props.selection,i=this.props.components[t];this.props.renderDividers&&(0!==t&&a.type===this.props.items[t-1].type||(a.type===N.Q.OPEN_CHANNEL?e.push(this.renderChannelDivider(N.Q.OPEN_CHANNEL)):a.type===N.Q.PRIVATE_CHANNEL?e.push(this.renderChannelDivider(N.Q.PRIVATE_CHANNEL)):0!==t&&this.props.items[t-1].type!==N.Q.OPEN_CHANNEL&&this.props.items[t-1].type!==N.Q.PRIVATE_CHANNEL||e.push(this.renderChannelDivider(N.Q.DM_CHANNEL)))),s&&(this.currentItem=a),e.push(O.a.createElement(i,{key:n,ref:e=>this.itemRefs.set(n,e),item:a,term:n,matchedPretext:this.props.matchedPretext[t],isSelection:s,onClick:this.props.onCompleteWord,onMouseMove:this.props.onItemHover}))}return O.a.createElement(Gl.a,{ref:this.popoverRef,id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},O.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",className:"hidden-label"}),e)}}Wl(zl,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(a),!0).forEach((function(t){Wl(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Pn.a.propTypes));class Kl extends O.a.PureComponent{render(){if(0===this.props.items.length)return null;const e=this.props.items[0],t=this.props.terms[0],a=this.props.components[0],n=O.a.createElement(a,{key:t,ref:t,item:e,term:t,matchedPretext:this.props.matchedPretext[0],isSelection:!1,onClick:this.props.onCompleteWord});return O.a.createElement(Gl.a,{id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},n)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Kl,"propTypes",{onCompleteWord:C.a.func.isRequired,items:C.a.array.isRequired,terms:C.a.array.isRequired,components:C.a.array.isRequired,matchedPretext:C.a.array.isRequired});class Yl extends ln.a{render(){const{item:e,isSelection:t}=this.props;let a="search-autocomplete__item";t&&(a+=" selected a11y--focused");const n=e.username;let s="";return(e.first_name||e.last_name)&&e.nickname?s="".concat(j.A(e)," (").concat(e.nickname,")"):e.nickname?s="(".concat(e.nickname,")"):(e.first_name||e.last_name)&&(s="".concat(j.A(e))),O.a.createElement("div",Object.assign({className:a,ref:e=>{this.node=e},onClick:this.handleClick,onMouseMove:this.handleMouseMove},ln.a.baseProps),O.a.createElement(on.a,{size:"sm",username:n,url:j.O(e.id,e.last_picture_update)}),O.a.createElement("div",{className:"mention--align ml-3"},O.a.createElement("span",null,"@",n),O.a.createElement(sn.a,{show:Boolean(e.is_bot),className:"badge-autocomplete"}),O.a.createElement("span",{className:"ml-2 mention__fullname"},s)))}}class Ql extends nn.a{constructor(e){super(),this.autocompleteUsersInTeam=e}handlePretextChanged(e,t){const a=/\bfrom:\s*(\S*)$/i.exec(e.toLowerCase());return this.doAutocomplete(a,t),Boolean(a)}async doAutocomplete(e,t){if(!e)return;const a=e[1];this.startNewRequest(a);const n=await this.autocompleteUsersInTeam(a);if(this.shouldCancelDispatch(a))return;const s=Object.assign([],n.users);t({matchedPretext:a,terms:s.map(e=>e.username),items:s,component:Yl})}allowDividers(){return!0}}var Zl=a(188),Jl=a(1695),Xl=a.n(Jl);a(1702);class $l extends ln.a{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleDayClick",e=>{const t=e.toISOString().split("T")[0];this.props.onClick(t,this.props.matchedPretext)})}render(){let e;return this.props.currentDate&&(e={today:this.props.currentDate}),O.a.createElement(Xl.a,{onDayClick:this.handleDayClick,showOutsideDays:!0,modifiers:e,ref:e=>{this.node=e}})}}var ec=Object(n.connect)((function(e){const t=Object(u.getCurrentUserId)(e),a=Object(sr.getUserTimezone)(e,t);let n;return Object(rr.a)(e)&&(n=a.useAutomaticTimezone?Object(Zl.c)(a.automaticTimezone):Object(Zl.c)(a.manualTimezone)),{currentDate:n}}))($l);class tc extends nn.a{handlePretextChanged(e,t){const a=/\b(?:on|before|after):\s*(\S*)$/i.exec(e.toLowerCase());if(a){const e=a[1];this.startNewRequest(e);const n=Object.assign([],[{label:"Selected Date",date:e}]);t({matchedPretext:e,terms:n.map(e=>e.date),items:n,component:ec})}return Boolean(a)}allowDividers(){return!1}presentationType(){return"date"}}function ac({iconComponent:e,ariaLabel:t,buttonClass:a,buttonId:n,onClick:s,tooltipKey:i,tooltipText:r,isRhsOpen:o}){const l={flaggedPosts:{class:"text-nowrap",id:"flaggedTooltip",messageID:Object(ve.b)("channel_header.flagged"),message:"Flagged posts"},pinnedPosts:{class:"",id:"pinnedPostTooltip",messageID:Object(ve.b)("channel_header.pinnedPosts"),message:"Pinned posts"},recentMentions:{class:"",id:"recentMentionsTooltip",messageID:Object(ve.b)("channel_header.recentMentions"),message:"Recent mentions"},search:{class:"",id:"searchTooltip",messageID:Object(ve.b)("channel_header.search"),message:"Search"}};let c,d;return c="plugin"===i&&r?O.a.createElement(di.a,{id:"pluginTooltip",className:""},O.a.createElement("span",null,r)):function(e){return null==l[e]?null:O.a.createElement(di.a,{id:l[e].id,className:l[e].class},O.a.createElement(ee.a,{id:l[e].messageID,defaultMessage:l[e].message}))}(i),t&&(d="".concat(Object(j.lb)(l[i].messageID,l[i].message))),c?O.a.createElement("div",{className:"flex-child"},O.a.createElement(mi.a,{trigger:["hover"],delayShow:N.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:o?O.a.createElement(O.a.Fragment,null):c},O.a.createElement("button",{id:n,"aria-label":d,className:a||"channel-header__icon",onClick:s},e))):O.a.createElement("div",{className:"flex-child"},O.a.createElement("button",{id:n,className:a||"channel-header__icon",onClick:s},e))}ac.propTypes={ariaLabel:C.a.bool,buttonClass:C.a.string,buttonId:C.a.string.isRequired,iconComponent:C.a.element.isRequired,onClick:C.a.func.isRequired,tooltipKey:C.a.string,tooltipText:C.a.node,isRhsOpen:C.a.bool};const nc=e=>O.a.createElement(O.a.Fragment,null,e.withTitle&&O.a.createElement("h4",{className:"search-hint__title"},O.a.createElement(ee.a,{id:"search_bar.usage.title",defaultMessage:"Search Options"})),O.a.createElement("ul",{role:"list",className:"search-hint__suggestions-list",onMouseDown:e.onMouseDown},e.options.map((t,a)=>O.a.createElement("li",{className:ws()("search-hint__suggestions-list__option",{highlighted:a===e.highlightedIndex}),key:t.searchTerm,onClick:()=>e.onOptionSelected(t.searchTerm),onMouseOver:()=>(t=>{e.onOptionHover&&e.onOptionHover(t)})(a)},O.a.createElement("div",{className:"search-hint__suggestion-list__flex-wrap"},O.a.createElement("span",{className:"search-hint__suggestion-list__label"},t.searchTerm)),O.a.createElement("div",{className:"search-hint__suggestion-list__value"},O.a.createElement(ee.a,{id:t.message.id,defaultMessage:t.message.defaultMessage}))))));nc.propTypes={withTitle:C.a.bool,onOptionSelected:C.a.func.isRequired,onMouseDown:C.a.func,options:C.a.arrayOf(C.a.shape({searchTerm:C.a.string.isRequired,message:C.a.any.isRequired})).isRequired,highlightedIndex:C.a.number,onOptionHover:C.a.func};var sc=nc,ic=a(1327),rc=a(1186),oc=a(1157);function lc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{KeyCodes:cc}=N.Q;class dc extends O.a.PureComponent{constructor(e){super(e),lc(this,"handleClose",()=>{this.props.actions.closeRightHandSide()}),lc(this,"handleKeyDown",e=>{const{index:t}=this.state;if(j.Z(e,cc.ESCAPE)&&(this.search.blur(),e.stopPropagation(),e.preventDefault()),j.Z(e,cc.DOWN)){const e=t===N.R.length?0:t+1;this.setState({index:e})}if(j.Z(e,cc.UP)){const e=t<=0?N.R.length-1:t-1;this.setState({index:e})}j.Z(e,cc.ENTER)&&t>=0&&(this.handleUpdateSearchTerm(N.R[t].searchTerm),this.setState({keepInputFocused:!0}))}),lc(this,"handleChange",e=>{var t=e.target.value;this.props.actions.updateSearchTerms(t)}),lc(this,"handleUserBlur",()=>{setTimeout(()=>{!0===this.state.keepInputFocused?this.setState({keepInputFocused:!1}):this.setState({focused:!1})},0),this.setState({iindex:-1})}),lc(this,"onClear",()=>{this.props.actions.updateSearchTerms(""),this.props.isMentionSearch&&this.setState({keepInputFocused:!1}),this.setState({termsUsed:0})}),lc(this,"handleUserFocus",()=>{this.setState({focused:!0})}),lc(this,"handleSearch",async e=>{if(e.length){const{error:e}=await this.props.actions.showSearchResults();e||this.handleSearchOnSuccess()}}),lc(this,"handleSearchOnSuccess",()=>{j.cb()&&this.search&&(this.search.value="")}),lc(this,"handleSubmit",e=>{e.preventDefault();const t=this.props.searchTerms.trim();0!==t.length&&(this.handleSearch(t),this.search.blur())}),lc(this,"searchMentions",e=>{e.preventDefault(),this.props.isMentionSearch?this.props.actions.closeRightHandSide():this.props.actions.showMentions()}),lc(this,"getFlagged",e=>{e.preventDefault(),this.props.isFlaggedPosts?this.props.actions.closeRightHandSide():this.props.actions.showFlaggedPosts()}),lc(this,"handleUpdateSearchTerm",e=>{if(0===this.state.termsUsed)this.props.actions.updateSearchTerms(e.toLowerCase());else{const t=this.props.searchTerms.split(" ");t.pop(),t.push(e.toLowerCase()),this.props.actions.updateSearchTerms(t.join(" "))}this.focus(),this.setState({index:-1}),this.setState({termsUsed:this.state.termsUsed+1})}),lc(this,"focus",()=>{setTimeout(()=>{this.search.focus(),this.setState({focused:!0})},0),'""'===this.search.value?(this.search.selectionStart=this.search.length-1,this.search.selectionEnd=this.search.length-1):this.search.selectionStart=this.search.length}),lc(this,"keepInputFocused",()=>{this.setState({keepInputFocused:!0})}),lc(this,"setHoverHintIndex",e=>{this.setState({index:e})}),lc(this,"getSearch",e=>{this.search=e,this.props.getFocus&&this.props.getFocus(this.focus)}),this.state={focused:!1,keepInputFocused:!1,index:-1,termsUsed:0},this.suggestionProviders=[new tc,new Bl(e.actions.autocompleteChannelsForSearch),new Ql(e.actions.autocompleteUsersInTeam)]}componentDidMount(){j.cb()&&setTimeout(()=>{const e=document.querySelector(".app__body .sidebar--menu");e&&e.classList.remove("visible")})}renderHintPopover(){if(j.cb())return null;let e;const t=this.props.searchTerms.split(" "),a=t[t.length-1];try{e=N.R.filter(e=>new RegExp(a,"ig").test(e.searchTerm)&&e.searchTerm.toLowerCase()!==a.toLowerCase())}catch(t){e=[]}if(e.length>0&&!this.props.isMentionSearch){let t="search-help-popover";return this.state.focused&&this.state.termsUsed<=1&&(t+=" visible"),O.a.createElement(Gl.a,{id:this.props.isSideBarRight?"sbr-searchbar-help-popup":"searchbar-help-popup",placement:"bottom",className:t},O.a.createElement(sc,{options:e,withTitle:!0,onOptionSelected:this.handleUpdateSearchTerm,onMouseDown:this.keepInputFocused,highlightedIndex:this.state.index,onOptionHover:this.setHoverHintIndex}))}return O.a.createElement(O.a.Fragment,null)}render(){let e,t;if(this.props.showMentionFlagBtns){e=O.a.createElement(ac,{iconComponent:O.a.createElement(ic.a,{className:"icon icon--standard","aria-hidden":"true"}),ariaLabel:!0,buttonClass:ws()("channel-header__icon",{"channel-header__icon--active":this.props.isMentionSearch}),buttonId:this.props.isSideBarRight?"sbrChannelHeaderMentionButton":"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions",isRhsOpen:this.props.isRhsOpen});var a=this.props.isFlaggedPosts?"channel-header__icon--active":"";t=O.a.createElement(ac,{iconComponent:O.a.createElement(Qr,{className:"icon icon--standard"}),ariaLabel:!0,buttonClass:"channel-header__icon "+a,buttonId:this.props.isSideBarRight?"sbrChannelHeaderFlagButton":"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts",isRhsOpen:this.props.isRhsOpen})}let n="search__form";return this.state.focused&&(n+=" search__form--focused"),O.a.createElement("div",{className:"sidebar-right__table"},O.a.createElement("div",{className:"sidebar-collapse__container"},O.a.createElement("div",{id:this.props.isSideBarRight?"sbrSidebarCollapse":"sidebarCollapse",className:"sidebar-collapse",onClick:this.handleClose},O.a.createElement(ee.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>O.a.createElement("span",{className:"fa fa-2x fa-angle-left",title:e})))),O.a.createElement("div",{id:this.props.isSideBarRight?"sbrSearchFormContainer":"searchFormContainer",className:"search-form__container"},O.a.createElement("form",{role:"application",className:n,onSubmit:this.handleSubmit,style:mc.searchForm,autoComplete:"off","aria-labelledby":"searchBox"},O.a.createElement(rc.a,{className:"search__icon","aria-hidden":"true"}),O.a.createElement(Sn.a,{ref:this.getSearch,id:this.props.isSideBarRight?"sbrSearchBox":"searchBox",tabIndex:"0",className:"search-bar a11y__region",containerClass:"w-full","data-a11y-sort-order":"9","aria-describedby":this.props.isSideBarRight?"sbr-searchbar-help-popup":"searchbar-help-popup","aria-label":j.lb("search_bar.search","Search"),placeholder:j.lb("search_bar.search","Search"),value:this.props.searchTerms,onFocus:this.handleUserFocus,onBlur:this.handleUserBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,listComponent:zl,dateComponent:Kl,providers:this.suggestionProviders,type:"search",autoFocus:this.props.isFocus&&""===this.props.searchTerms,delayInputUpdate:!0,renderDividers:!0,clearable:!0,onClear:this.onClear}),this.props.isSearchingTerm&&O.a.createElement(oc.a,null),this.renderHintPopover())),e,t)}}lc(dc,"propTypes",{isSearchingTerm:C.a.bool,searchTerms:C.a.string,isMentionSearch:C.a.bool,isFlaggedPosts:C.a.bool,showMentionFlagBtns:C.a.bool,isFocus:C.a.bool,isSideBarRight:C.a.bool,isRhsOpen:C.a.bool,getFocus:C.a.func,actions:C.a.shape({updateSearchTerms:C.a.func,showSearchResults:C.a.func,showMentions:C.a.func,showFlaggedPosts:C.a.func,closeRightHandSide:C.a.func,autocompleteChannelsForSearch:C.a.func.isRequired,autocompleteUsersInTeam:C.a.func.isRequired})}),lc(dc,"defaultProps",{showMentionFlagBtns:!0,isFocus:!1});const mc={searchForm:{overflow:"visible"}};var uc=Object(n.connect)((function(e){const t=Object(ys.k)(e);return{isSearchingTerm:Object(ys.g)(e),searchTerms:Object(ys.m)(e),isMentionSearch:t===N.C.MENTION,isFlaggedPosts:t===N.C.FLAG,isRhsOpen:Object(ys.c)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({updateSearchTerms:vs.v,showSearchResults:vs.q,showMentions:vs.n,showFlaggedPosts:vs.m,closeRightHandSide:vs.b,autocompleteChannelsForSearch:pa.c,autocompleteUsersInTeam:ls.c},e)}}))(dc),hc=a(140);class pc extends O.a.Component{render(){const e=O.a.createElement(di.a,{id:"closeSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close the sidebar"})),t=O.a.createElement(di.a,{id:"expandSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand the sidebar"})),a=O.a.createElement(di.a,{id:"shrinkSidebarTooltip"},O.a.createElement(ee.a,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink the sidebar"}));return O.a.createElement("div",{className:"sidebar--right__header"},O.a.createElement("span",{className:"sidebar--right__title"},this.props.children),O.a.createElement("div",{className:"pull-right"},O.a.createElement("button",{type:"button",className:"sidebar--right__expand btn-icon","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},O.a.createElement(ee.a,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand the sidebar icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-expand","aria-label":e}))),O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},O.a.createElement(ee.a,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink the sidebar icon"},e=>O.a.createElement("i",{className:"icon icon-arrow-collapse","aria-label":e})))),O.a.createElement("button",{id:"searchResultsCloseButton",type:"button",className:"sidebar--right__close btn-icon","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e},O.a.createElement(ee.a,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close the sidebar icon"},e=>O.a.createElement("i",{className:"icon icon-close","aria-label":e}))))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(pc,"propTypes",{children:C.a.node,actions:C.a.shape({closeRightHandSide:C.a.func,toggleRhsExpanded:C.a.func.isRequired})});var gc=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({closeRightHandSide:vs.b,toggleRhsExpanded:vs.t},e)}}))(pc);class bc extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.reply",defaultMessage:"Reply Icon"},e=>O.a.createElement("svg",{width:"16px",height:"14px",viewBox:"0 0 16 14",style:fc,role:"img","aria-label":e},O.a.createElement("path",{d:"M5.2 3.88001V5.48001L6.72 5.56001C8.85333 5.63467 10.64 6.51467 12.08 8.20001C11.312 7.94401 10.448 7.76801 9.488 7.67201C8.76267 7.59734 7.84 7.56001 6.72 7.56001H5.12V9.72001L2.16 6.76001L5.2 3.88001ZM6.64 0.600005C6.48 0.600005 6.34667 0.626672 6.24 0.680005L0.08 6.44001C0.048 6.47201 0.0266667 6.50934 0.016 6.55201C0.00533333 6.59467 0 6.66934 0 6.77601C0 6.87201 0.0266667 6.94667 0.08 7.00001L6.24 12.92C6.29333 12.9733 6.4 13 6.56 13C6.61333 12.9467 6.65067 12.8987 6.672 12.856C6.704 12.792 6.72 12.7067 6.72 12.6V9.08001C8.17067 9.08001 9.328 9.16001 10.192 9.32001C11.312 9.53334 12.272 9.91734 13.072 10.472C13.9573 11.0907 14.72 11.9867 15.36 13.16C15.4667 13.2667 15.5467 13.32 15.6 13.32H15.68C15.7653 13.2773 15.824 13.2187 15.856 13.144C15.888 13.0693 15.8827 12.9947 15.84 12.92C15.872 12.8133 15.8453 12.5413 15.76 12.104C15.6533 11.5707 15.4827 11.0107 15.248 10.424C14.96 9.66667 14.5973 8.95201 14.16 8.28001C13.2853 6.88267 12.2187 5.81067 10.96 5.06401C9.70133 4.30667 8.288 3.88534 6.72 3.80001V0.840006C6.752 0.765339 6.75733 0.706672 6.736 0.664005C6.71467 0.621339 6.68267 0.600005 6.64 0.600005Z"}))))}}const fc={enableBackground:"new -158 242 18 18"};function _c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ec extends O.a.PureComponent{render(){let e=null,t="post-menu__item post-menu__item--wide post-menu__item--comment";this.props.commentCount>0?(t+=" post-menu__item--show",e=O.a.createElement("span",{className:"post-menu__comment-count"},this.props.commentCount)):""!==this.props.searchStyle&&(t=t+" "+this.props.searchStyle);const a=O.a.createElement(di.a,{id:"comment-icon-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"post_info.comment_icon.tooltip.reply",defaultMessage:"Reply"}));return O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:a},O.a.createElement("button",{id:"".concat(this.props.location,"_commentIcon_").concat(this.props.postId),"aria-label":Object(j.lb)("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:t+" "+this.props.extraClass,onClick:this.props.handleCommentClick},O.a.createElement("span",{className:"d-flex align-items-center"},O.a.createElement(bc,{className:"icon icon--small"}),e)))}}_c(Ec,"propTypes",{location:C.a.oneOf(["CENTER","SEARCH"]),handleCommentClick:C.a.func.isRequired,searchStyle:C.a.string,commentCount:C.a.number,postId:C.a.string,extraClass:C.a.string}),_c(Ec,"defaultProps",{location:"CENTER",searchStyle:"",commentCount:0,extraClass:""});class vc extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.archive",defaultMessage:"Archive Icon"},e=>O.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",role:"img","aria-label":e},O.a.createElement("path",{d:"M8.5 6.5q0-0.203-0.148-0.352t-0.352-0.148h-2q-0.203 0-0.352 0.148t-0.148 0.352 0.148 0.352 0.352 0.148h2q0.203 0 0.352-0.148t0.148-0.352zM13 5v7.5q0 0.203-0.148 0.352t-0.352 0.148h-11q-0.203 0-0.352-0.148t-0.148-0.352v-7.5q0-0.203 0.148-0.352t0.352-0.148h11q0.203 0 0.352 0.148t0.148 0.352zM13.5 1.5v2q0 0.203-0.148 0.352t-0.352 0.148h-12q-0.203 0-0.352-0.148t-0.148-0.352v-2q0-0.203 0.148-0.352t0.352-0.148h12q0.203 0 0.352 0.148t0.148 0.352z"}))))}}function yc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Cc extends O.a.PureComponent{constructor(e){super(e),yc(this,"handleFocusRHSClick",e=>{e.preventDefault(),this.props.actions.selectPost(this.props.post)}),yc(this,"handleJumpClick",e=>{e.preventDefault(),j.cb()&&this.props.actions.closeRightHandSide(),this.props.actions.setRhsExpanded(!1),se.a.push("/".concat(this.props.currentTeamName,"/pl/").concat(this.props.post.id))}),yc(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),yc(this,"handleDropdownOpened",e=>{this.setState({dropdownOpened:e})}),yc(this,"renderPostTime",()=>{const e=this.props.post,t=!(x.Posts.POST_DELETED===e.state||Hs.isPostPendingOrFailed(e));return O.a.createElement(no,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:N.t.SEARCH})}),yc(this,"getClassName",()=>{let e="post post--thread";return this.props.compactDisplay&&(e+=" post--compact"),this.state.dropdownOpened&&(e+=" post--hovered"),e}),yc(this,"handleSearchItemFocus",()=>{this.setState({currentAriaLabel:"".concat(this.getChannelName(),", ").concat(this.props.createAriaLabel(this.props.intl))})}),yc(this,"getChannelName",()=>{const{channelType:e}=this.props;let{channelName:t}=this.props;return e===N.Q.DM_CHANNEL&&(t=this.props.intl.formatMessage({id:"search_item.direct",defaultMessage:"Direct Message (with {username})"},{username:this.props.displayName})),t}),this.state={dropdownOpened:!1}}render(){const{post:e,channelIsArchived:t}=this.props,a=this.getChannelName();let n,s=!1;e.props&&e.props.from_webhook&&e.props.override_username&&this.props.enablePostUsernameOverride&&(n=e.props.override_username,s=!0);const i=O.a.createElement(Vr,{compactDisplay:this.props.compactDisplay,post:e,userId:e.user_id}),r=O.a.createElement("div",{className:"post__img"},i);let o="";ae.l(this.props.post)&&(o+=" post--edited");let l,c,d,m,u,h=null;e.file_ids&&e.file_ids.length>0&&(h=O.a.createElement(qr,{post:e,compactDisplay:this.props.compactDisplay})),e.state===N.Q.POST_DELETED||e.state===x.Posts.POST_DELETED?l=O.a.createElement("p",null,O.a.createElement(ee.a,{id:"post_body.deleted",defaultMessage:"(message deleted)"})):(c=O.a.createElement($r,{location:N.t.SEARCH,postId:e.id,isFlagged:this.props.isFlagged}),e.props&&e.props.card&&(d=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,null,O.a.createElement(ee.a,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},O.a.createElement("button",{className:"post-menu__item post-menu__item--show",onClick:e=>{e.preventDefault(),this.handleCardClick(this.props.post)}},O.a.createElement(cl,{className:"icon icon__info","aria-hidden":"true"})))),m=O.a.createElement("div",{className:"col__controls post-menu"},O.a.createElement(Tr,{post:e,location:N.t.SEARCH,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,commentCount:this.props.commentCountForPost,isMenuOpen:this.state.dropdownOpened,isReadOnly:t||null}),O.a.createElement(Ec,{location:N.t.SEARCH,handleCommentClick:this.handleFocusRHSClick,commentCount:this.props.replyCount,postId:e.id,searchStyle:"search-item__comment",extraClass:this.props.replyCount?"icon--visible":""}),O.a.createElement("a",{href:"#",onClick:this.handleJumpClick,className:"search-item__jump"},O.a.createElement(ee.a,{id:"search_item.jump",defaultMessage:"Jump"}))),l=O.a.createElement(nl,{post:e,options:{searchTerm:this.props.term,searchMatches:this.props.matches}},O.a.createElement(rl,{post:e,options:{searchTerm:this.props.term,searchMatches:this.props.matches,mentionHighlight:this.props.isMentionSearch},isRHS:!0}))),e.is_pinned&&(u=O.a.createElement("span",{className:"post__pinned-badge"},O.a.createElement(ee.a,{id:"post_info.pinned",defaultMessage:"Pinned"})));const p=j.t(e.create_at);return O.a.createElement("div",{"data-testid":"search-item-container",className:"search-item__container"},O.a.createElement(pr,{date:p}),O.a.createElement("div",{className:"a11y__section ".concat(this.getClassName()),"aria-label":this.state.currentAriaLabel,onFocus:this.handleSearchItemFocus,"data-a11y-sort-order":this.props.a11yIndex},O.a.createElement("div",{className:"search-channel__name","aria-hidden":"true"},a,t&&O.a.createElement("span",{className:"search-channel__archived"},O.a.createElement(vc,{className:"icon icon__archive channel-header-archived-icon svg-text-color"}),O.a.createElement(ee.a,{id:"search_item.channelArchived",defaultMessage:"Archived"}))),O.a.createElement("div",{role:"application",className:"post__content"},r,O.a.createElement("div",null,O.a.createElement("div",{className:"post__header"},O.a.createElement("div",{className:"col col__name"},O.a.createElement(dl.a,{userId:e.user_id,overwriteName:n,disablePopover:s,isRHS:!0}),O.a.createElement(sn.a,{show:Boolean(e.props&&e.props.from_webhook&&!this.props.isBot)})),O.a.createElement("div",{className:"col"},this.renderPostTime(),u,d,c),m),O.a.createElement("div",{className:"search-item-snippet post__body"},O.a.createElement("div",{className:o},l,h))))))}}yc(Cc,"propTypes",{post:C.a.object,createAriaLabel:C.a.func,matches:C.a.array,channelName:C.a.string,channelType:C.a.string,channelIsArchived:C.a.bool,compactDisplay:C.a.bool,isMentionSearch:C.a.bool,term:C.a.string,isFlagged:C.a.bool,currentTeamName:C.a.string,commentCountForPost:C.a.number,enablePostUsernameOverride:C.a.bool.isRequired,isBot:C.a.bool.isRequired,a11yIndex:C.a.number,actions:C.a.shape({closeRightHandSide:C.a.func.isRequired,selectPost:C.a.func.isRequired,selectPostCard:C.a.func.isRequired,setRhsExpanded:C.a.func.isRequired}).isRequired,intl:ne.a.isRequired,directTeammate:C.a.string.isRequired,displayName:C.a.string.isRequired,replyCount:C.a.number}),yc(Cc,"defaultProps",{isBot:!1,channelIsArchived:!1});var wc=Object(te.c)(Cc);var Oc=Object(n.connect)((function(){const e=Object(ae.r)(),t=Object(ae.q)(),a=Object(Fa.makeGetCommentCountForPost)();return(n,s)=>{const i=Object(m.getConfig)(n),r=Object(d.getMyPreferences)(n),o="true"===i.EnablePostUsernameOverride,{post:l}=s,c=Object(u.getUser)(n,l.user_id),g=Object(p.getChannel)(n,l.channel_id)||{delete_at:0},b=Object(j.v)(n,g.id);return{createAriaLabel:t(n,l),channelId:g.id,channelName:g.display_name,channelType:g.type,channelIsArchived:0!==g.delete_at,currentTeamName:Object(h.getCurrentTeam)(n).name,commentCountForPost:a(n,{post:l}),enablePostUsernameOverride:o,isFlagged:Object(Hs.isPostFlagged)(l.id,r),isBot:!!c&&c.is_bot,directTeammate:b,displayName:Object(j.x)(n,b),replyCount:e(n,l)}}}),(function(e){return{actions:Object(s.bindActionCreators)({closeRightHandSide:vs.b,selectPost:vs.j,selectPostCard:vs.i,setRhsExpanded:vs.l},e)}}))(wc);class Tc extends w.PureComponent{render(){return O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usage.dataRetention",defaultMessage:"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.",values:{days:this.props.dataRetentionMessageRetentionDays}}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Tc,"propTypes",{dataRetentionMessageRetentionDays:C.a.string});class Sc extends w.PureComponent{render(){return O.a.createElement(O.a.Fragment,null,O.a.createElement("ul",null,O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usageFlag1",defaultMessage:"You haven't flagged any messages yet."})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usageFlag2",defaultMessage:"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.",values:{flagIcon:O.a.createElement(Qr,{className:"usage__icon"})}})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usageFlag4",defaultMessage:"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users."})),this.props.dataRetentionEnableMessageDeletion&&O.a.createElement(Tc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Sc,"propTypes",{dataRetentionEnableMessageDeletion:C.a.bool,dataRetentionMessageRetentionDays:C.a.string});class Pc extends w.PureComponent{render(){return O.a.createElement(O.a.Fragment,null,O.a.createElement("h4",{id:"noResultsMessage"},O.a.createElement(ee.a,{id:"search_results.noResults",defaultMessage:"No results found. Try again?"})),O.a.createElement("ul",null,O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.noResults.partialPhraseSuggestion",defaultMessage:'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term.'})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.noResults.stopWordsSuggestion",defaultMessage:'Two letter searches and common words like "this", "a" and "is" won\'t appear in search results due to the excessive results returned.'})),this.props.dataRetentionEnableMessageDeletion&&O.a.createElement(Tc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pc,"propTypes",{dataRetentionEnableMessageDeletion:C.a.bool,dataRetentionMessageRetentionDays:C.a.string});class Mc extends w.PureComponent{render(){return O.a.createElement(O.a.Fragment,null,O.a.createElement("ul",null,O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usagePin1",defaultMessage:"There are no pinned messages yet."})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usagePin2",defaultMessage:"All members of this channel can pin important or useful messages."})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usagePin3",defaultMessage:"Pinned messages are visible to all channel members."})),O.a.createElement("li",null,O.a.createElement(ee.a,{id:"search_results.usagePin4",defaultMessage:'To pin a message: Go to the message that you want to pin and click [...] > "Pin to channel".'})),this.props.dataRetentionEnableMessageDeletion&&O.a.createElement(Tc,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Mc,"propTypes",{dataRetentionEnableMessageDeletion:C.a.bool,dataRetentionMessageRetentionDays:C.a.string});var Nc=a(1168);function Ic(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jc(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Ac(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Rc(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class kc extends O.a.Component{constructor(e){super(e),Ic(this,"handleResize",()=>{this.setState({windowWidth:j.wb(),windowHeight:j.vb()})}),Ic(this,"scrollToTop",()=>{this.refs.scrollbars.scrollToTop()}),Ic(this,"handleScroll",()=>{if(!(this.props.isFlaggedPosts||this.props.isPinnedPosts||this.props.isSearchingTerm||this.props.isSearchGettingMore)){const e=this.refs.scrollbars.getScrollHeight();this.refs.scrollbars.getScrollTop()+this.refs.scrollbars.getClientHeight()+30>=e&&this.loadMorePosts()}}),Ic(this,"loadMorePosts",Object(Oi.debounce)(()=>{this.props.actions.getMorePostsForSearch()},100)),this.state={windowWidth:j.wb(),windowHeight:j.vb()}}componentDidMount(){this.scrollToTop(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}shouldComponentUpdate(e,t){return function(e,t,a,n){for(const a in t)if(t.hasOwnProperty(a)&&"results"!==a&&t[a]!==e[a])return!0;for(const e in n)if(n.hasOwnProperty(e)&&n[e]!==a[e])return!0;const s=e.results,i=t.results;if(s.length!==i.length)return!0;for(let e=0;e<s.length;e++)if(s[e]!==i[e])return!0;return!1}(this.props,e,this.state,t)}componentDidUpdate(e){this.props.searchTerms!==e.searchTerms&&this.scrollToTop()}render(){const e=this.props.results,t=!e||0===e.length,a=this.props.searchTerms;let n=null,s=null;if(this.props.isSearchingTerm||this.props.isSearchingFlaggedPost||this.props.isSearchingPinnedPost||!this.props.isOpened)n=O.a.createElement("div",{className:"sidebar--right__subheader a11y__section"},O.a.createElement("div",{className:"sidebar--right__loading"},O.a.createElement(Nc.a,{text:j.lb("search_header.loading","Searching")})));else if(this.props.isFlaggedPosts&&t)n=O.a.createElement("div",{className:"sidebar--right__subheader a11y__section"},O.a.createElement(Sc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(this.props.isPinnedPosts&&t)n=O.a.createElement("div",{className:"sidebar--right__subheader a11y__section"},O.a.createElement(Mc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(!a&&t)n=O.a.createElement("div",{className:"sidebar--right__subheader a11y__section"},O.a.createElement(sc,{onOptionSelected:this.props.updateSearchTerms,options:N.R}));else if(t)n=O.a.createElement("div",{className:"sidebar--right__subheader a11y__section"},O.a.createElement(Pc,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else{let t;this.props.isPinnedPosts?(t=[...e],t.sort((e,t)=>t.create_at-e.create_at)):t=e,n=t.map((e,t)=>O.a.createElement(Oc,{key:e.id,compactDisplay:this.props.compactDisplay,post:e,matches:this.props.matches[e.id],term:this.props.isFlaggedPosts||this.props.isPinnedPosts||this.props.isMentionSearch?"":a,isMentionSearch:this.props.isMentionSearch,a11yIndex:t}),this),this.props.isSearchAtEnd||this.props.isFlaggedPosts||this.props.isPinnedPosts||(s=O.a.createElement("div",{className:"loading-screen"},O.a.createElement("div",{className:"loading__content"},O.a.createElement("div",{className:"round round-1"}),O.a.createElement("div",{className:"round round-2"}),O.a.createElement("div",{className:"round round-3"}))))}var i=this.props.intl.formatMessage({id:"search_header.results",defaultMessage:"Search Results"});const r=this.props.channelDisplayName;return!a&&t?i=this.props.intl.formatMessage({id:"search_bar.search",defaultMessage:"Search"}):this.props.isMentionSearch?i=this.props.intl.formatMessage({id:"search_header.title2",defaultMessage:"Recent Mentions"}):this.props.isFlaggedPosts?i=this.props.intl.formatMessage({id:"search_header.title3",defaultMessage:"Flagged Posts"}):this.props.isPinnedPosts?i=this.props.intl.formatMessage({id:"channel_header.pinnedPosts",defaultMessage:"Pinned Posts"}):this.props.isCard&&(i=this.props.intl.formatMessage({id:"search_header.title5",defaultMessage:"Extra information"})),O.a.createElement("div",{id:"searchContainer",className:"sidebar-right__body"},O.a.createElement(gc,null,i,r&&O.a.createElement("div",{className:"sidebar--right__title__channel"},r)),O.a.createElement(ks.a,{ref:"scrollbars",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Ac,renderThumbVertical:Rc,renderView:jc,onScroll:this.handleScroll},O.a.createElement("div",{id:"search-items-container",role:"application",className:"search-items-container post-list__table a11y__region","data-a11y-sort-order":"3","data-a11y-focus-child":!0,"data-a11y-loop-navigation":!1,"aria-label":this.props.intl.formatMessage({id:"accessibility.sections.rhs",defaultMessage:"{regionTitle} complimentary region"},{regionTitle:i})},n,s)))}}Ic(kc,"propTypes",{results:C.a.array,matches:C.a.object,currentUser:C.a.object,searchTerms:C.a.string,isSearchingTerm:C.a.bool,isSearchingFlaggedPost:C.a.bool,isSearchingPinnedPost:C.a.bool,isSearchGettingMore:C.a.bool,isSearchAtEnd:C.a.bool,compactDisplay:C.a.bool,isMentionSearch:C.a.bool,isFlaggedPosts:C.a.bool,isPinnedPosts:C.a.bool,isCard:C.a.bool,channelDisplayName:C.a.string.isRequired,dataRetentionEnableMessageDeletion:C.a.bool.isRequired,dataRetentionMessageRetentionDays:C.a.string,isOpened:C.a.bool,updateSearchTerms:C.a.func.isRequired,actions:C.a.shape({getMorePostsForSearch:C.a.func.isRequired}),intl:ne.a.isRequired}),Ic(kc,"defaultProps",{matches:{},currentUser:{}});var Lc=Object(te.c)(kc);var Dc=Object(n.connect)((function(){let e,t;return function(a){const n=Object(m.getConfig)(a),s="true"===n.DataRetentionEnableMessageDeletion,i=n.DataRetentionMessageRetentionDays,r="true"===n.ExperimentalViewArchivedChannels,o=Object(Fa.getSearchResults)(a);o&&o!==e&&(e=o,t=[],e.forEach(e=>{if(!e)return;const n=Object(p.getChannel)(a,e.channel_id);n&&0!==n.delete_at&&!r||t.push(e)}));const l=Object(fa.getCurrentSearchForCurrentTeam)(a)||{};return{results:t,matches:Object(Fa.getSearchMatches)(a),currentUser:Object(u.getCurrentUser)(a),searchTerms:Object(ys.l)(a),isSearchingTerm:Object(ys.g)(a),isSearchingFlaggedPost:Object(ys.e)(a),isSearchingPinnedPost:Object(ys.f)(a),isSearchGettingMore:Object(ys.d)(a),isSearchAtEnd:l.isEnd,compactDisplay:d.get(a,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.MESSAGE_DISPLAY,N.B.MESSAGE_DISPLAY_DEFAULT)===N.B.MESSAGE_DISPLAY_COMPACT,dataRetentionEnableMessageDeletion:s,dataRetentionMessageRetentionDays:i}}}),(function(e){return{actions:Object(s.bindActionCreators)({getMorePostsForSearch:hc.getMorePostsForSearch},e)}}))(Lc);class xc extends O.a.PureComponent{render(){return O.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body"},O.a.createElement(gc,null,this.props.title),O.a.createElement(k.a,{pluggableName:"RightHandSidebarComponent",pluggableId:this.props.pluggableId}))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(xc,"propTypes",{title:C.a.oneOfType([C.a.string,C.a.object]),pluggableId:C.a.string.isRequired});var Uc=Object(n.connect)((function(e){const t=e.plugins.components.RightHandSidebarComponent,a=Object(ys.h)(e),n=t.find(e=>e.id===a);return{title:n?n.title:"",pluggableId:a}}))(xc);function qc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Hc extends O.a.PureComponent{constructor(e){super(e),qc(this,"setPrevious",()=>{this.props.isOpen&&(this.previous={searchVisible:this.props.searchVisible,isMentionSearch:this.props.isMentionSearch,isPinnedPosts:this.props.isPinnedPosts,isFlaggedPosts:this.props.isFlaggedPosts,selectedPostId:this.props.selectedPostId,selectedPostCardId:this.props.selectedPostCardId,previousRhsState:this.props.previousRhsState})}),qc(this,"handleShortcut",e=>{j.e(e)&&j.Z(e,N.Q.KeyCodes.PERIOD)&&(e.preventDefault(),this.props.isOpen?this.props.actions.closeRightHandSide():this.props.actions.openAtPrevious(this.previous))}),qc(this,"determineTransition",()=>{const e=window.getComputedStyle(this.sidebarRight.current).getPropertyValue("transition"),t=Boolean(e)&&"all 0s ease 0s"!==e;this.sidebarRight.current&&t?(this.setState({isOpened:this.props.isOpen}),this.sidebarRight.current.addEventListener("transitionend",this.onFinishTransition)):(this.setState({isOpened:!0}),this.sidebarRight.current&&this.sidebarRight.current.removeEventListener("transitionend",this.onFinishTransition))}),qc(this,"onFinishTransition",e=>{"transform"===e.propertyName&&this.setState({isOpened:this.props.isOpen})}),qc(this,"onShrink",()=>{this.props.actions.setRhsExpanded(!1)}),qc(this,"handleUpdateSearchTerms",e=>{this.props.actions.updateSearchTerms(e),this.focusSearchBar()}),qc(this,"getSearchBarFocus",e=>{this.focusSearchBar=e}),this.sidebarRight=O.a.createRef(),this.state={isOpened:!1}}componentDidMount(){window.addEventListener("resize",this.determineTransition),document.addEventListener("keydown",this.handleShortcut),this.determineTransition()}componentWillUnmount(){window.removeEventListener("resize",this.determineTransition),document.removeEventListener("keydown",this.handleShortcut),this.sidebarRight.current&&this.sidebarRight.current.removeEventListener("transitionend",this.onFinishTransition)}componentDidUpdate(e){const t=e.searchVisible||e.postRightVisible,a=this.props.searchVisible||this.props.postRightVisible;!t&&a&&(this.determineTransition(),Object(qe.d)("ui","ui_rhs_opened"));const{actions:n,isPinnedPosts:s,rhsChannel:i,channel:r}=this.props;s&&e.isPinnedPosts===s&&i.id!==e.rhsChannel.id&&n.showPinnedPosts(i.id),r&&e.channel&&r.id!==e.channel.id&&this.props.actions.setRhsExpanded(!1),this.setPrevious()}render(){const{rhsChannel:e,currentUserId:t,isFlaggedPosts:a,isMentionSearch:n,isPinnedPosts:s,postRightVisible:i,postCardVisible:r,previousRhsState:o,searchVisible:l,isPluginView:c}=this.props;let d=null,m="";this.props.isExpanded&&(m="sidebar--right--expanded");var u=null;t&&(u=O.a.createElement(uc,{isFocus:l&&!a&&!s,isSideBarRight:!0,getFocus:this.getSearchBarFocus}));let h="";return e&&(h=e.display_name),l?d=O.a.createElement("div",{className:"sidebar--right__content"},O.a.createElement("div",{className:"search-bar__container channel-header alt"},u),O.a.createElement(Dc,{isMentionSearch:n,isFlaggedPosts:a,isPinnedPosts:s,toggleSize:this.toggleSize,shrink:this.onShrink,channelDisplayName:h,isOpened:this.state.isOpened,updateSearchTerms:this.handleUpdateSearchTerms})):i?d=O.a.createElement("div",{className:"post-right__container"},O.a.createElement(Ns,{overlayType:"right"}),O.a.createElement("div",{className:"search-bar__container channel-header alt"},u),O.a.createElement(Nl,{previousRhsState:o,currentUserId:t,toggleSize:this.toggleSize,shrink:this.onShrink})):c?d=O.a.createElement("div",{className:"post-right__container"},O.a.createElement("div",{className:"search-bar__container channel-header alt"},u),O.a.createElement(Uc,null)):r&&(d=O.a.createElement("div",{className:"post-right__container"},O.a.createElement("div",{className:"search-bar__container channel-header alt"},u),O.a.createElement(Ul,{previousRhsState:o}))),d||(m=""),O.a.createElement("div",{className:ws()("sidebar--right",m,{"move--left":this.props.isOpen}),id:"sidebar-right",role:"complementary",ref:this.sidebarRight},O.a.createElement("div",{onClick:this.onShrink,className:"sidebar--right__bg"}),O.a.createElement("div",{className:"sidebar-right-container"},d))}}qc(Hc,"propTypes",{isExpanded:C.a.bool.isRequired,isOpen:C.a.bool.isRequired,currentUserId:C.a.string.isRequired,channel:C.a.object,postRightVisible:C.a.bool,postCardVisible:C.a.bool,searchVisible:C.a.bool,isMentionSearch:C.a.bool,isFlaggedPosts:C.a.bool,isPinnedPosts:C.a.bool,isPluginView:C.a.bool,previousRhsState:C.a.string,rhsChannel:C.a.object,selectedPostId:C.a.string,selectedPostCardId:C.a.string,actions:C.a.shape({setRhsExpanded:C.a.func.isRequired,showPinnedPosts:C.a.func.isRequired,openRHSSearch:C.a.func.isRequired,closeRightHandSide:C.a.func.isRequired,openAtPrevious:C.a.func.isRequired,updateSearchTerms:C.a.func.isRequired})});var Fc=Object(n.connect)((function(e){const t=Object(ys.k)(e),a=Object(p.getCurrentChannel)(e),n=Object(ys.n)(e);let s=null;n&&(s=Object(p.getChannel)(e,n));const i=Object(ys.s)(e),r=Object(ys.q)(e);return{isExpanded:Object(ys.a)(e),isOpen:Object(ys.c)(e),channel:a,currentUserId:Object(u.getCurrentUserId)(e),postRightVisible:Boolean(i),postCardVisible:Boolean(r),searchVisible:Boolean(t)&&t!==N.C.PLUGIN,previousRhsState:Object(ys.j)(e),isMentionSearch:t===N.C.MENTION,isFlaggedPosts:t===N.C.FLAG,isPinnedPosts:t===N.C.PIN,isPluginView:t===N.C.PLUGIN,rhsChannel:s,selectedPostId:i,selectedPostCardId:r}}),(function(e){return{actions:Object(s.bindActionCreators)({setRhsExpanded:vs.l,showPinnedPosts:vs.o,openRHSSearch:vs.f,closeRightHandSide:vs.b,openAtPrevious:vs.d,updateSearchTerms:vs.v},e)}}))(Hc),Bc=a(2022),Gc=a(1703),Vc=a.n(Gc),Wc=a(1704),zc=a.n(Wc);function Kc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Yc=N.Q.Preferences,Qc=N.Q.TutorialSteps;class Zc extends O.a.PureComponent{constructor(e){super(e),Kc(this,"targetRef",void 0),Kc(this,"show",()=>{this.setState({show:!0})}),Kc(this,"hide",()=>{this.setState({show:!1})}),Kc(this,"handleNext",()=>{if(this.state.currentScreen<this.props.screens.length-1)return void this.setState({currentScreen:this.state.currentScreen+1});if(this.props.diagnosticsTag){let e=this.props.diagnosticsTag;this.props.screens.length>1&&(e+="_"+(this.state.currentScreen+1).toString()),this.state.currentScreen===this.props.screens.length-1?e+="_okay":e+="_next",Object(qe.d)("tutorial",e)}const{currentUserId:e,actions:t}=this.props,{closeRhsMenu:a,savePreferences:n}=t,s=[{user_id:e,category:Yc.TUTORIAL_STEP,name:e,value:(this.props.step+1).toString()}];a(),this.hide(),n(e,s)}),Kc(this,"skipTutorial",e=>{if(e.preventDefault(),this.props.diagnosticsTag){let e=this.props.diagnosticsTag;this.props.screens.length>1&&(e+="_"+this.state.currentScreen),e+="_skip",Object(qe.d)("tutorial",e)}const{currentUserId:t,actions:a}=this.props,n=[{user_id:t,category:Yc.TUTORIAL_STEP,name:t,value:Qc.FINISHED.toString()}];a.savePreferences(t,n)}),Kc(this,"handleCircleClick",(e,t)=>{e.preventDefault(),this.setState({currentScreen:t})}),Kc(this,"getTarget",()=>this.targetRef.current),this.state={currentScreen:0,show:!1},this.targetRef=O.a.createRef()}render(){const e=this.state.currentScreen===this.props.screens.length-1?O.a.createElement(ee.a,{id:"tutorial_tip.ok",defaultMessage:"Okay"}):O.a.createElement(ee.a,{id:"tutorial_tip.next",defaultMessage:"Next"}),t=[];if(this.props.screens.length>1)for(let e=0;e<this.props.screens.length;e++){let a="circle";e===this.state.currentScreen&&(a+=" active"),t.push(O.a.createElement("a",{href:"#",key:"dotactive"+e,className:a,"data-screen":e,onClick:t=>this.handleCircleClick(t,e)}))}let a=Vc.a;return"tip-overlay--header"!==this.props.overlayClass&&"tip-overlay--sidebar"!==this.props.overlayClass&&"tip-overlay--header--up"!==this.props.overlayClass||(a=zc.a),O.a.createElement("div",{id:"tipButton",className:"tip-div "+this.props.overlayClass,onClick:this.show},O.a.createElement("img",{alt:"tutorial tip",className:"tip-button",src:a,width:"35",onClick:this.show,ref:this.targetRef}),O.a.createElement(le.a,{show:this.state.show},O.a.createElement("div",{className:"tip-backdrop"})),O.a.createElement(le.a,{placement:this.props.placement,show:this.state.show,rootClose:!0,onHide:this.hide,target:this.getTarget},O.a.createElement("div",{className:"tip-overlay "+this.props.overlayClass},O.a.createElement("div",{className:"arrow"}),this.props.screens[this.state.currentScreen],O.a.createElement("div",{className:"tutorial__footer"},O.a.createElement("div",{className:"tutorial__circles"},t),O.a.createElement("div",{className:"text-right"},O.a.createElement("button",{id:"tipNextButton",className:"btn btn-primary",onClick:this.handleNext},e),O.a.createElement("div",{className:"tip-opt"},O.a.createElement(ee.a,{id:"tutorial_tip.seen",defaultMessage:"Seen this before? "}),O.a.createElement("a",{href:"#",onClick:this.skipTutorial},O.a.createElement(ee.a,{id:"tutorial_tip.out",defaultMessage:"Opt out of these tips."}))))))))}}Kc(Zc,"propTypes",{currentUserId:C.a.string.isRequired,step:C.a.number.isRequired,screens:C.a.any.isRequired,placement:C.a.string.isRequired,overlayClass:C.a.string,diagnosticsTag:C.a.string,actions:C.a.shape({closeRhsMenu:C.a.func.isRequired,savePreferences:C.a.func.isRequired}).isRequired}),Kc(Zc,"defaultProps",{overlayClass:""});var Jc=Object(n.connect)((function(e){const t=Object(u.getCurrentUserId)(e);return{currentUserId:t,step:Object(d.getInt)(e,N.B.TUTORIAL_STEP,t,0)}}),(function(e){return{actions:Object(s.bindActionCreators)({closeRhsMenu:vs.a,savePreferences:os.savePreferences},e)}}))(Zc);const Xc=({toggleFunc:e,onBottom:t})=>{const a=[];a.push(O.a.createElement("div",null,O.a.createElement("h4",null,O.a.createElement(ee.a,{id:"sidebar_header.tutorial.title",defaultMessage:"Main Menu"})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar_header.tutorial.body1",defaultMessage:"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**."})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar_header.tutorial.body2",defaultMessage:"Team administrators can also access their **Team Settings** from this menu."})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar_header.tutorial.body3",defaultMessage:"System administrators will find a **System Console** option to administrate the entire system."}))));let n="right",s="left";return t&&(n="bottom",s="up"),O.a.createElement("div",{onClick:e},O.a.createElement(Jc,{placement:n,screens:a,overlayClass:"tip-overlay--header--"+s,diagnosticsTag:"tutorial_tip_3_main_menu"}))};Xc.propTypes={toggleFunc:C.a.func,onBottom:C.a.bool.isRequired};var $c=Xc,ed=a(1187);function td(e,t,a){return async(n,s)=>{t.length>0&&await n(l.getTeamMembersByIds(e,t.map(e=>e.id)));const i=s(),r=[],o=[],c=[];for(const a of t){const t=Object(h.getTeamMember)(i,e,a.id);Object(j.Y)(a)?o.push({user:a,reason:Object(j.lb)("invite.members.user-is-guest","Contact your admin to make this guest a full member.")}):t?o.push({user:a,reason:Object(j.lb)("invite.members.already-member","This person is already a team member.")}):c.push(a)}if(c.length>0){const t=(await n(Object(_.c)(e,c.map(e=>e.id)))).data||[];for(const e of c){const a=t.find(t=>t.user_id===e.id&&t.error);a?o.push({user:e,reason:a.error.message}):r.push({user:e,reason:Object(j.lb)("invite.members.added-to-team","This member has been added to the team.")})}}if(a.length>0){let t;try{t=await n(l.sendEmailInvitesToTeamGracefully(e,a))}catch(e){t={data:a.map(e=>({email:e,error:{error:Object(j.lb)("invite.members.unable-to-add-the-user-to-the-team","Unable to add the user to the team.")}}))}}const s=t.data||[];for(const e of a){const t=s.find(t=>e===t.email&&t.error);t?o.push({email:e,reason:t.error.message}):r.push({email:e,reason:Object(j.lb)("invite.members.invite-sent","An invitation email has been sent.")})}}return{sent:r,notSent:o}}}function ad(e,t,a,n,s){return async(i,r)=>{a.length>0&&await i(l.getTeamMembersByIds(e,a.map(e=>e.id)));const c=r(),d=[],m=[],u=Object(p.getChannelMembersInChannels)(c),h=await Promise.all(a.map(a=>async function(e,t,a,n,s){if(!Object(j.Y)(t))return{notSent:{user:t,reason:Object(j.lb)("invite.members.user-is-not-guest","This person is already a member.")}};let i=!0,r=!1;for(const e of n){s&&s[e]&&s[e][t.id]?r=!0:i=!1}if(i)return{notSent:{user:t,reason:Object(j.lb)("invite.guests.already-all-channels-member","This person is already a member of all the channels.")}};try{await e(Object(_.c)(a,[t.id]));for(const i of n){s&&s[i]&&s[i][t.id]||await e(Object(o.joinChannel)(t.id,a,i))}}catch(e){return{notSent:{user:t,reason:Object(j.lb)("invite.guests.unable-to-add-the-user-to-the-channels","Unable to add the guest to the channels.")}}}return r?{notSent:{user:t,reason:Object(j.lb)("invite.guests.already-some-channels-member","This person is already a member of some of the channels.")}}:{sent:{user:t,reason:{id:Object(ve.b)("invite.guests.new-member"),message:"This guest has been added to the team and {count, plural, one {channel} other {channels}}.",values:{count:n.length}}}}}(i,a,e,t,u)));for(const e of h)e.sent&&d.push(e.sent),e.notSent&&m.push(e.notSent);if(n.length>0){let a;try{a=await i(l.sendEmailGuestInvitesToChannelsGracefully(e,t,n,s))}catch(e){a={data:n.map(e=>({email:e,error:{error:Object(j.lb)("invite.guests.unable-to-add-the-user-to-the-channels","Unable to add the guest to the channels.")}}))}}for(const e of a.data||[])e.error?m.push({email:e.email,reason:e.error.message}):d.push({email:e.email,reason:Object(j.lb)("invite.guests.added-to-channel","An invitation email has been sent.")})}return{sent:d,notSent:m}}}class nd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{fillRule:"nonzero",d:"M18 7.209L16.791 6 12 10.791 7.209 6 6 7.209 10.791 12 6 16.791 7.209 18 12 13.209 16.791 18 18 16.791 13.209 12z"}))))}}class sd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}))))}}a(1705);function id(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rd extends O.a.PureComponent{constructor(...e){super(...e),id(this,"modal",O.a.createRef()),id(this,"enforceFocus",()=>{setTimeout(()=>{const e=document.activeElement;this.modal&&this.modal.current&&!this.modal.current.contains(e)&&this.modal.current.focus()})}),id(this,"handleKeypress",e=>{"Escape"===e.key&&this.props.show&&this.close()}),id(this,"close",()=>{this.props.onClose()})}componentDidMount(){document.addEventListener("keydown",this.handleKeypress),document.addEventListener("focus",this.enforceFocus,!0),this.enforceFocus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeypress),document.removeEventListener("focus",this.enforceFocus,!0)}render(){return O.a.createElement(Bc.a,{in:this.props.show,classNames:"FullScreenModal",mountOnEnter:!0,unmountOnExit:!0,timeout:100,appear:!0},O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"FullScreenModal",ref:this.modal,tabIndex:-1,"aria-modal":!0,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,role:"dialog"},this.props.onGoBack&&O.a.createElement("button",{onClick:this.props.onGoBack,className:"back","aria-label":this.props.intl.formatMessage({id:"full_screen_modal.back",defaultMessage:"Back"})},O.a.createElement(sd,{id:"backIcon"})),O.a.createElement("button",{onClick:this.close,className:"close-x","aria-label":this.props.intl.formatMessage({id:"full_screen_modal.close",defaultMessage:"Close"})},O.a.createElement(nd,{id:"closeIcon"})),this.props.children),O.a.createElement("div",{tabIndex:0,style:{display:"none"}})))}}id(rd,"propTypes",{show:C.a.bool.isRequired,onClose:C.a.func.isRequired,onGoBack:C.a.func,children:C.a.node.isRequired,ariaLabel:C.a.string,ariaLabelledBy:C.a.string,intl:C.a.any.isRequired});const od=Object(te.c)(rd,{forwardRef:!0});od.displayName="injectIntl(FullScreenModal)";var ld=od;class cd extends O.a.PureComponent{constructor(e){super(e),this.el=document.createElement("div")}componentDidMount(){const e=document.getElementById("root-portal");e&&e.appendChild(this.el)}componentWillUnmount(){const e=document.getElementById("root-portal");e&&e.removeChild(this.el)}render(){return Ii.a.createPortal(this.props.children,this.el)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(cd,"propTypes",{children:C.a.node});class dd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.invite",defaultMessage:"Invite Icon"},e=>O.a.createElement("svg",{width:"126px",height:"32px",viewBox:"0 0 126 32",role:"img","aria-label":e},O.a.createElement("path",{d:"M 106,18 86,5.52 V 4 c 0,-2.22 1.78,-4 4,-4 h 32 c 2.20914,0 4,1.790861 4,4 v 1.5 z m 20,10 c 0,2.209139 -1.79086,4 -4,4 H 90 c -2.22,0 -4,-1.8 -4,-4 V 10.22 l 4,2.5 V 28 h 32 V 12.72 l 4,-2.5 z M 1,15 h 62 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 1 C 0.44771525,17 0,16.552285 0,16 0,15.447715 0.44771525,15 1,15 Z M 21,5 h 48 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 21 C 20.447715,7 20,6.552285 20,6 20,5.447715 20.447715,5 21,5 Z m 0,20 h 48 c 0.552285,0 1,0.447715 1,1 0,0.552285 -0.447715,1 -1,1 H 21 c -0.552285,0 -1,-0.447715 -1,-1 0,-0.552285 0.447715,-1 1,-1 z"}))))}}class md extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.channel.arrow-right",defaultMessage:"Arrow right"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img",title:e},O.a.createElement("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}))))}}a(1706);function ud(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class hd extends O.a.PureComponent{constructor(...e){super(...e),ud(this,"onMembersKeyDown",e=>{const t=e.which;13!==t&&32!==t||this.props.goToMembers()}),ud(this,"onGuestsKeyDown",e=>{const t=e.which;13!==t&&32!==t||this.props.goToGuests()})}render(){const e=this.props.teamName;return O.a.createElement("div",{className:"InvitationModalInitialStep"},O.a.createElement("div",{className:"modal-icon"},O.a.createElement(dd,null)),O.a.createElement("h1",{id:"invitation_modal_title"},O.a.createElement(Ki.b,{id:"invitation_modal.title",defaultMessage:"Invite people to **{teamName}**",values:{teamName:e}})),O.a.createElement("div",{className:"invitation-modal-option",onClick:this.props.goToMembers,"data-testid":"inviteMembersLink",tabIndex:"0",onKeyDown:this.onMembersKeyDown,"aria-labelledby":"inviteMembersSectionHeader","aria-describedby":"inviteMembersSectionDescription"},O.a.createElement("div",{"data-testid":"inviteMembersSection"},O.a.createElement("h2",{id:"inviteMembersSectionHeader"},O.a.createElement(Ki.b,{id:"invitation_modal.invite_members.title",defaultMessage:"Invite **Members**"})),this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.invite_members.description",defaultMessage:"Invite new team members with a link or by email. Team members have access to messages and files in open teams and public channels."},e=>O.a.createElement("span",{id:"inviteMembersSectionDescription"},e)),!this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.invite_members.description-email-disabled",defaultMessage:"Invite new team members with a link. Team members have access to messages and files in open teams and public channels."},e=>O.a.createElement("span",{id:"inviteMembersSectionDescription"},e))),O.a.createElement(md,{className:"arrow"})),O.a.createElement("div",{className:"invitation-modal-option",onClick:this.props.goToGuests,"data-testid":"inviteGuestLink",tabIndex:"0",onKeyDown:this.onGuestsKeyDown,"aria-labelledby":"inviteGuestsSectionHeader","aria-describedby":"inviteGuestsSectionDescription"},O.a.createElement("div",null,O.a.createElement("h2",{id:"inviteGuestsSectionHeader"},O.a.createElement(Ki.b,{id:"invitation_modal.invite_guests.title",defaultMessage:"Invite **Guests**"})),O.a.createElement(ee.a,{id:"invitation_modal.invite_guests.description",defaultMessage:"Invite guests to one or more channels. Guests only have access to messages, files, and people in the channels they are members of."},e=>O.a.createElement("span",{id:"inviteGuestsSectionDescription"},e))),O.a.createElement(md,{className:"arrow"})))}}ud(hd,"propTypes",{teamName:C.a.string.isRequired,goToMembers:C.a.func.isRequired,goToGuests:C.a.func.isRequired,emailInvitationsEnabled:C.a.bool.isRequired});var pd=a(46);class gd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.invite_members",defaultMessage:"Invite Members Icon"},e=>O.a.createElement("svg",{width:"126px",height:"38px",viewBox:"0 0 126 38",role:"img","aria-label":e},O.a.createElement("path",{d:"M 108.83398 0.03515625 C 108.64165 0.03515625 108.4496 0.04983111 108.25977 0.08203125 C 109.08339 0.57981559 109.86736 1.165576 110.60156 1.8359375 C 113.34699 4.3426243 115.07813 7.1515117 115.07812 10.777344 L 115.07812 15.908203 C 115.07812 17.577458 114.81586 19.392207 114.32812 21.453125 C 114.19039 22.035006 114.02467 22.601886 113.83008 23.152344 C 116.57398 24.811724 118.17106 25.88194 118.62109 26.361328 C 120.0119 27.842823 120.78516 29.798054 120.78516 31.830078 L 120.78516 32 C 122.99178 32 124.78125 32.008356 124.78125 30.001953 C 124.78125 26.755542 122.78085 23.90476 118.77734 21.453125 L 118.46875 21.267578 L 118.46094 21.285156 C 118.44384 21.330296 118.43871 21.318446 118.44531 21.253906 L 118.46875 21.267578 L 118.47266 21.251953 C 118.52056 21.104379 118.6246 20.690139 118.78516 20.011719 C 119.2074 18.22759 119.07227 17.224165 119.07227 15.908203 L 119.07227 10.777344 C 119.07227 8.5210935 117.78998 3.8565489 115.79297 2.0332031 C 113.81134 0.22387865 111.50192 0.03515625 108.83594 0.03515625 L 108.83398 0.03515625 z M 100.84375 2.0332031 C 98.23721 2.0332031 95.848767 2.9659792 93.835938 4.7363281 C 91.761167 6.5611731 90.535156 8.4793085 90.535156 10.777344 L 90.535156 15.908203 C 90.535156 17.293336 90.80759 18.870238 91.328125 20.703125 C 91.751681 22.194536 92.389981 23.518449 93.25 24.634766 L 87.810547 27.792969 C 87.734577 27.827779 87.659451 27.865141 87.585938 27.904297 C 87.562827 27.916627 87.538385 27.928746 87.515625 27.941406 C 87.254658 28.067724 87.009242 28.216755 86.775391 28.382812 L 86.509766 28.574219 C 85.454567 29.323561 84.826172 30.535879 84.826172 31.830078 L 84.826172 33.994141 C 84.826172 36.20075 86.615661 37.992188 88.822266 37.992188 L 112.79492 37.992188 C 115.00153 37.992188 116.79102 36.20075 116.79102 33.994141 L 116.79102 31.830078 C 116.79102 30.814065 116.40241 29.834497 115.70703 29.09375 C 115.33382 28.696209 114.89968 28.36777 114.42188 28.113281 L 114.13867 27.962891 C 114.10527 27.945041 114.06897 27.932866 114.03516 27.916016 C 113.99746 27.894746 113.96392 27.869949 113.92578 27.849609 L 108.53711 24.673828 C 109.43906 23.498248 110.06724 22.107856 110.43945 20.535156 C 110.86169 18.751027 111.08203 17.224166 111.08203 15.908203 L 111.08203 10.777344 C 111.08203 8.5210941 109.90325 6.6104541 107.90625 4.7871094 C 105.92461 2.977785 103.50974 2.0332043 100.84375 2.0332031 z M 100.84375 6.0273438 C 102.50853 6.0273438 103.96628 6.5982778 105.21484 7.7382812 C 106.46343 8.878286 107.08789 9.8906745 107.08789 10.777344 L 107.08789 15.908203 C 107.08789 16.870874 106.90948 18.105944 106.55273 19.613281 C 106.19601 21.12062 105.52977 22.279175 104.55469 23.089844 C 104.24552 23.343181 104.012 23.661015 103.85742 24.041016 C 103.70244 24.421017 103.65168 24.811463 103.69922 25.216797 C 103.72302 25.622132 103.84065 25.997842 104.05469 26.339844 C 104.26872 26.681846 104.54401 26.953582 104.87695 27.15625 L 112.04492 31.375 C 112.09262 31.40033 112.13432 31.425832 112.16992 31.451172 C 112.20552 31.476502 112.23401 31.488281 112.25781 31.488281 L 112.54297 31.640625 C 112.63817 31.691295 112.72361 31.754092 112.79492 31.830078 L 112.79492 33.994141 L 88.822266 33.994141 L 88.822266 31.830078 L 89.089844 31.640625 C 89.196862 31.564625 89.297447 31.513613 89.392578 31.488281 C 89.416398 31.462951 89.439071 31.442357 89.462891 31.429688 C 89.486711 31.416988 89.513289 31.412109 89.537109 31.412109 L 96.921875 27.117188 C 97.254845 26.939854 97.526184 26.681846 97.740234 26.339844 C 97.954274 25.997845 98.073886 25.622132 98.097656 25.216797 C 98.145256 24.811463 98.089577 24.421017 97.935547 24.041016 C 97.780967 23.661012 97.562734 23.343179 97.277344 23.089844 C 96.302254 22.279177 95.599958 21.120619 95.171875 19.613281 C 94.743792 18.105943 94.529297 16.870874 94.529297 15.908203 L 94.529297 10.777344 C 94.529297 9.8906751 95.178468 8.8782834 96.474609 7.7382812 C 97.770749 6.5982776 99.22654 6.0273453 100.84375 6.0273438 z M 21 7.9707031 C 20.447715 7.9707031 20 8.4184181 20 8.9707031 C 20 9.5229881 20.447715 9.9707031 21 9.9707031 L 69 9.9707031 C 69.552285 9.9707031 70 9.5229881 70 8.9707031 C 70 8.4184181 69.552285 7.9707031 69 7.9707031 L 21 7.9707031 z M 1 17.970703 C 0.4477153 17.970703 -2.220446e-16 18.418418 0 18.970703 C 0 19.522988 0.4477153 19.970703 1 19.970703 L 63 19.970703 C 63.552285 19.970703 64 19.522988 64 18.970703 C 64 18.418418 63.552285 17.970703 63 17.970703 L 1 17.970703 z M 21 27.970703 C 20.447715 27.970703 20 28.418418 20 28.970703 C 20 29.522988 20.447715 29.970703 21 29.970703 L 69 29.970703 C 69.552285 29.970703 70 29.522988 70 28.970703 C 70 28.418418 69.552285 27.970703 69 27.970703 L 21 27.970703 z"}))))}}var bd=a(1713),fd=a.n(bd),_d=a(1235);class Ed extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.mail",defaultMessage:"Mail Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4M12,11L20,6H4L12,11M4,18H20V8.37L12,13.36L4,8.37V18Z"}))))}}class vd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.add-mail",defaultMessage:"Add Mail Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M3,4C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H14V18H3V8.37L11,13.36L19,8.37V13H21V6A2,2 0 0,0 19,4H3M3,6H19L11,11L3,6M19,15V18H16V20H19V23H21V20H24V18H21V15H19Z"}))))}}class yd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"img","aria-label":e},O.a.createElement("path",{d:"m 8,0 c 4.424,0 8,3.576 8,8 0,4.424 -3.576,8 -8,8 C 3.576,16 0,12.424 0,8 0,3.576 3.576,0 8,0 Z M 10.872,4 8,6.872 5.128,4 4,5.128 6.872,8 4,10.872 5.128,12 8,9.128 10.872,12 12,10.872 9.128,8 12,5.128 Z"}))))}}a(1707);function Cd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wd extends O.a.PureComponent{constructor(e){super(e),Cd(this,"renderUserName",e=>{const t=Object(j.D)(e);let a=null;t.fullName&&(a=O.a.createElement("span",{className:"fullname"},t.fullName));let n=null;return t.nickname&&(n=O.a.createElement("span",{className:"nickname"},t.nickname)),O.a.createElement(O.a.Fragment,null,t.displayName,a,n)}),Cd(this,"loadingMessage",()=>{const e=O.a.createElement(ee.a,{id:this.props.loadingMessageId,defaultMessage:this.props.loadingMessageDefault});return O.a.createElement(oc.a,{text:e})}),Cd(this,"getOptionValue",e=>e.id||e.value),Cd(this,"formatOptionLabel",(e,t)=>{const a=Object(j.O)(e.id,e.last_picture_update);let n=null;return!Object(pd.isEmail)(e.value)&&Object(j.Y)(e)&&(n=O.a.createElement(rn.a,null)),"menu"===t.context?e.value&&Object(pd.isEmail)(e.value)?this.getCreateLabel(e.value):O.a.createElement(O.a.Fragment,null,O.a.createElement(on.a,{size:"lg",username:e.username,url:a}),this.renderUserName(e),n):e.value&&Object(pd.isEmail)(e.value)?O.a.createElement(O.a.Fragment,null,O.a.createElement(Ed,{className:"mail-icon"}),O.a.createElement("span",null,e.value)):O.a.createElement(O.a.Fragment,null,O.a.createElement(on.a,{size:"sm",username:e.username,url:a}),Object(j.w)(e),n)}),Cd(this,"onChange",e=>{this.props.onChange&&this.props.onChange(e.map(e=>e.id?e:e.value))}),Cd(this,"getCreateLabel",e=>O.a.createElement(O.a.Fragment,null,O.a.createElement(vd,{className:"mail-plus-icon"}),O.a.createElement(Ki.b,{key:"widgets.users_emails_input.valid_email",id:this.props.validAddressMessageId,defaultMessage:this.props.validAddressMessageDefault,values:{email:e},disableLinks:!0}))),Cd(this,"NoOptionsMessage",e=>{const t=e.selectProps.inputValue;return t?O.a.createElement("div",{className:"users-emails-input__option users-emails-input__option--no-matches"},O.a.createElement(Ki.b,{id:this.props.noMatchMessageId,defaultMessage:this.props.noMatchMessageDefault,values:{text:t},disableLinks:!0},t=>O.a.createElement(_d.a.NoOptionsMessage,e,t))):null}),Cd(this,"MultiValueRemove",({children:e,innerProps:t})=>O.a.createElement("div",t,e||O.a.createElement(yd,null))),Cd(this,"components",{NoOptionsMessage:this.NoOptionsMessage,MultiValueRemove:this.MultiValueRemove,IndicatorsContainer:()=>null}),Cd(this,"handleInputChange",(e,t)=>{if("input-blur"===t.action&&""!==e){const e=this.props.value.map(e=>e.id?e:{label:e,value:e});for(const t of this.state.options){if(this.props.inputValue===t.username||this.props.inputValue==="@"+t.username)return this.onChange([...e,t]),void this.props.onInputChange("");if(this.props.inputValue===t.email)return this.onChange([...e,t]),void this.props.onInputChange("")}if(this.props.emailInvitationsEnabled&&Object(pd.isEmail)(this.props.inputValue)){const t=this.props.inputValue;this.onChange([...e,{value:t,label:t}]),this.props.onInputChange("")}}"input-blur"!==t.action&&"menu-close"!==t.action&&this.props.onInputChange(e)}),Cd(this,"optionsLoader",(e,t)=>{const a=e=>{this.setState({options:e}),t(e)},n=this.props.usersLoader(this.props.inputValue,a);n&&n.then&&n.then(a)}),Cd(this,"showAddEmail",(e,t,a)=>this.props.emailInvitationsEnabled&&0===a.length&&Object(pd.isEmail)(e)),Cd(this,"onFocus",()=>{this.selectRef.current.handleInputChange(this.props.inputValue,{action:"custom"})}),this.selectRef=O.a.createRef(),this.state={options:[]}}render(){const e=this.props.value.map(e=>e.id?e:{label:e,value:e});return O.a.createElement(fd.a,{ref:this.selectRef,styles:this.customStyles,onChange:this.onChange,loadOptions:this.optionsLoader,isValidNewOption:this.showAddEmail,isMulti:!0,isClearable:!1,className:ws()("UsersEmailsInput",{empty:""===this.props.inputValue}),classNamePrefix:"users-emails-input",placeholder:this.props.placeholder,components:this.components,getOptionValue:this.getOptionValue,formatOptionLabel:this.formatOptionLabel,defaultOptions:!1,defaultMenuIsOpen:!1,openMenuOnClick:!1,loadingMessage:this.loadingMessage,onInputChange:this.handleInputChange,inputValue:this.props.inputValue,openMenuOnFocus:!0,onFocus:this.onFocus,tabSelectsValue:!0,value:e,"aria-label":this.props.ariaLabel})}}Cd(wd,"propTypes",{placeholder:C.a.string,ariaLabel:C.a.string.isRequired,usersLoader:C.a.func,onChange:C.a.func,value:C.a.arrayOf(C.a.oneOfType([C.a.object,C.a.string])),onInputChange:C.a.func,inputValue:C.a.string,noMatchMessageId:C.a.string,noMatchMessageDefault:C.a.string,validAddressMessageId:C.a.string,validAddressMessageDefault:C.a.string,loadingMessageId:C.a.string,loadingMessageDefault:C.a.string,emailInvitationsEnabled:C.a.bool}),Cd(wd,"defaultProps",{noMatchMessageId:Object(ve.b)("widgets.users_emails_input.no_user_found_matching"),noMatchMessageDefault:"No one found matching **{text}**, type email address",validAddressMessageId:Object(ve.b)("widgets.users_emails_input.valid_email"),validAddressMessageDefault:"Add **{email}**",loadingMessageId:Object(ve.b)("widgets.users_emails_input.loading"),loadingMessageDefault:"Loading"});class Od extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.link",defaultMessage:"Link Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"}))))}}a(1731);function Td(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Sd extends O.a.PureComponent{constructor(e){super(e),Td(this,"copyLink",()=>{const e=this.inviteLinkRef.current,t=document.createElement("textarea");t.innerText=e.value,t.style.position="fixed",t.style.opacity=0,document.body.appendChild(t),t.select();try{this.setState({copiedLink:document.execCommand("copy")})}catch(e){this.setState({copiedLink:!1})}t.remove(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.setState({copiedLink:!1})},3e3)}),Td(this,"debouncedSearchProfiles",Object(Oi.debounce)((e,t)=>{this.props.searchProfiles(e,{not_in_team_id:this.props.currentTeamId}).then(({data:a})=>{t(a),0===a.length?this.setState({termWithoutResults:e}):this.setState({termWithoutResults:null})}).catch(()=>{t([])})},150)),Td(this,"usersLoader",(e,t)=>{if(this.state.termWithoutResults&&e.startsWith(this.state.termWithoutResults))t([]);else try{this.debouncedSearchProfiles(e,t)}catch(e){t([])}}),Td(this,"onChange",e=>{this.setState({usersAndEmails:e}),this.props.onEdit(e.length>0||this.state.usersInputValue)}),Td(this,"onUsersInputChange",e=>{this.setState({usersInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||e)}),Td(this,"submit",()=>{const e=[],t=[];for(const a of this.state.usersAndEmails)Object(pd.isEmail)(a)?t.push(a):e.push(a);this.props.onSubmit(e,t,this.state.usersInputValue)}),this.inviteLinkRef=O.a.createRef(),this.timeout=null,this.state={usersAndEmails:[],copiedLink:!1,termWithoutResults:null,usersInputValue:""}}render(){const e=Object(Bs.e)()+"/signup_user_complete/?id="+this.props.inviteId;let t=Object(j.lb)("invitation_modal.members.search-and-add.placeholder","Add members or email addresses"),a=Object(ve.b)("invitation_modal.members.users_emails_input.no_user_found_matching"),n="No one found matching **{text}**, type email to invite";return this.props.emailInvitationsEnabled||(t=Object(j.lb)("invitation_modal.members.search-and-add.placeholder-email-disabled","Add members"),a=Object(ve.b)("invitation_modal.members.users_emails_input.no_user_found_matching-email-disabled"),n="No one found matching **{text}**"),O.a.createElement("div",{className:"InvitationModalMembersStep"},O.a.createElement("div",{className:"modal-icon"},O.a.createElement(gd,null)),O.a.createElement("h1",{id:"invitation_modal_title"},O.a.createElement(Ki.b,{id:"invitation_modal.members.title",defaultMessage:"Invite **Members** to {teamName}",values:{teamName:this.props.teamName}})),O.a.createElement("div",{className:"share-link","data-testid":"shareLink"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.members.share_link.title",defaultMessage:"Share This Link"})),O.a.createElement("div",{className:"share-link-input-block"},O.a.createElement("input",{ref:this.inviteLinkRef,className:"share-link-input",type:"text",readOnly:!0,value:e,"aria-label":this.props.intl.formatMessage({id:"invitation_modal.members.share_link.input",defaultMessage:"team invite link"}),"data-testid":"shareLinkInput"}),O.a.createElement("button",{className:"share-link-input-button",onClick:this.copyLink,"data-testid":"shareLinkInputButton"},O.a.createElement(Od,null),!this.state.copiedLink&&O.a.createElement(ee.a,{id:"invitation_modal.members.share_link.copy_button",defaultMessage:"Copy Link"}),this.state.copiedLink&&O.a.createElement(ee.a,{id:"invitation_modal.members.share_link.link_copied",defaultMessage:"Link Copied"}))),O.a.createElement("div",{className:"help-text"},O.a.createElement(ee.a,{id:"invitation_modal.members.share_link.description",defaultMessage:"Share this link to invite people to this team."}))),O.a.createElement("div",{className:"invitation-modal-or"},O.a.createElement("hr",null),O.a.createElement("div",null,O.a.createElement(ee.a,{id:"invitation_modal.members.or",defaultMessage:"OR"}))),O.a.createElement("div",{className:"search-and-add","data-testid":"searchAdd"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.members.search_and_add.title",defaultMessage:"Add or Invite People"})),O.a.createElement("div",{"data-testid":"inputPlaceholder"},O.a.createElement(wd,{usersLoader:this.usersLoader,placeholder:t,ariaLabel:Object(j.lb)("invitation_modal.members.search_and_add.title","Invite People"),onChange:this.onChange,value:this.state.usersAndEmails,validAddressMessageId:Object(ve.b)("invitation_modal.members.users_emails_input.valid_email"),validAddressMessageDefault:"Invite **{email}** as a team member",noMatchMessageId:a,noMatchMessageDefault:n,onInputChange:this.onUsersInputChange,inputValue:this.state.usersInputValue,emailInvitationsEnabled:this.props.emailInvitationsEnabled})),O.a.createElement("div",{className:"help-text"},this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.members.search-and-add.description",defaultMessage:"Add existing members or send email invites to new members."}),!this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.members.search-and-add.description-email-disabled",defaultMessage:"Add existing members to this team."}))),O.a.createElement("div",{className:"invite-members"},O.a.createElement("button",{className:"btn "+(0===this.state.usersAndEmails.length?"btn-inactive":"btn-primary"),onClick:this.submit,disabled:0===this.state.usersAndEmails.length,id:"inviteMembersButton"},O.a.createElement(ee.a,{id:"invitation_modal.members.invite_button",defaultMessage:"Invite Members"}))))}}Td(Sd,"propTypes",{teamName:C.a.string.isRequired,currentTeamId:C.a.string.isRequired,intl:C.a.any,inviteId:C.a.string.isRequired,searchProfiles:C.a.func.isRequired,emailInvitationsEnabled:C.a.bool.isRequired,onEdit:C.a.func.isRequired,onSubmit:C.a.func.isRequired});var Pd=Object(te.c)(Sd);class Md extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.close",defaultMessage:"Close Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"}))))}}var Nd=a(1431),Id=a.n(Nd),jd=a(1214),Ad=a(1215);a(1732);function Rd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class kd extends O.a.PureComponent{constructor(e){super(e),Rd(this,"getOptionValue",e=>e.id),Rd(this,"handleInputChange",(e,t)=>{if("input-blur"===t.action&&""!==e)for(const e of this.state.options)if(this.props.inputValue===e.name)return this.onChange([...this.props.value,e]),void this.props.onInputChange("");"input-blur"!==t.action&&"menu-close"!==t.action&&this.props.onInputChange(e)}),Rd(this,"optionsLoader",(e,t)=>{const a=e=>{this.setState({options:e}),t(e)},n=this.props.channelsLoader(this.props.inputValue,a);n&&n.then&&n.then(a)}),Rd(this,"loadingMessage",()=>{const e=O.a.createElement(ee.a,{id:this.props.loadingMessageId,defaultMessage:this.props.loadingMessageDefault});return O.a.createElement(oc.a,{text:e})}),Rd(this,"NoOptionsMessage",e=>{const t=e.selectProps.inputValue;return t?O.a.createElement("div",{className:"channels-input__option channels-input__option--no-matches"},O.a.createElement(Ki.b,{id:this.props.noOptionsMessageId,defaultMessage:this.props.noOptionsMessageDefault,values:{text:t}},t=>O.a.createElement(_d.a.NoOptionsMessage,e,t))):null}),Rd(this,"formatOptionLabel",e=>{let t=O.a.createElement(jd.a,{className:"public-channel-icon"});return e.type===N.j.PRIVATE_CHANNEL&&(t=O.a.createElement(Ad.a,{className:"private-channel-icon"})),O.a.createElement(O.a.Fragment,null,t,e.display_name,O.a.createElement("span",{className:"channel-name"},e.name))}),Rd(this,"onChange",e=>{this.props.onChange&&this.props.onChange(e)}),Rd(this,"MultiValueRemove",({children:e,innerProps:t})=>O.a.createElement("div",t,e||O.a.createElement(yd,null))),Rd(this,"components",{NoOptionsMessage:this.NoOptionsMessage,MultiValueRemove:this.MultiValueRemove,IndicatorsContainer:()=>null}),Rd(this,"onFocus",()=>{this.selectRef.current.handleInputChange(this.props.inputValue,{action:"custom"})}),this.selectRef=O.a.createRef(),this.state={options:[]}}render(){return O.a.createElement(Id.a,{ref:this.selectRef,styles:this.customStyles,onChange:this.onChange,loadOptions:this.optionsLoader,isMulti:!0,isClearable:!1,className:ws()("ChannelsInput",{empty:""===this.props.inputValue}),classNamePrefix:"channels-input",placeholder:this.props.placeholder,components:this.components,getOptionValue:this.getOptionValue,formatOptionLabel:this.formatOptionLabel,noOptionsMessage:this.noOptionsMessage,loadingMessage:this.loadingMessage,defaultOptions:!1,defaultMenuIsOpen:!1,openMenuOnClick:!1,onInputChange:this.handleInputChange,inputValue:this.props.inputValue,openMenuOnFocus:!0,onFocus:this.onFocus,tabSelectsValue:!0,value:this.props.value,"aria-label":this.props.ariaLabel})}}Rd(kd,"propTypes",{placeholder:C.a.string,ariaLabel:C.a.string.isRequired,channelsLoader:C.a.func,onChange:C.a.func,value:C.a.arrayOf(C.a.object),onInputChange:C.a.func,inputValue:C.a.string,loadingMessageId:C.a.string,loadingMessageDefault:C.a.string,noOptionsMessageId:C.a.string,noOptionsMessageDefault:C.a.string}),Rd(kd,"defaultProps",{loadingMessageId:Object(ve.b)("widgets.channels_input.loading"),loadingMessageDefault:"Loading",noOptionsMessageId:Object(ve.b)("widgets.channels_input.empty"),noOptionsMessageDefault:"No channels found"});a(1733);function Ld(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Dd extends O.a.PureComponent{constructor(e){super(e),Ld(this,"onUsersEmailsChange",e=>{this.setState({usersAndEmails:e}),this.props.onEdit(e.length>0||this.state.channels.length>0||""!==this.state.customMessage||this.state.usersInputValue||this.state.channelsInputValue)}),Ld(this,"onChannelsChange",e=>{this.setState({channels:e}),this.props.onEdit(this.state.usersAndEmails.length>0||e.length>0||""!==this.state.customMessage||this.state.usersInputValue||this.state.channelsInputValue)}),Ld(this,"onMessageChange",e=>{this.setState({customMessage:e.target.value}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==e.target.value||this.state.usersInputValue||this.state.channelsInputValue)}),Ld(this,"onUsersInputChange",e=>{this.setState({usersInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==this.state.customMessage||e||this.state.channelsInputValue)}),Ld(this,"onChannelsInputChange",e=>{this.setState({channelsInputValue:e}),this.props.onEdit(this.state.usersAndEmails.length>0||this.state.channels.length>0||""!==this.state.customMessage||this.state.usersInputValue||e)}),Ld(this,"debouncedSearchProfiles",Object(Oi.debounce)((e,t)=>{this.props.searchProfiles(e).then(({data:a})=>{t(a),0===a.length?this.setState({termWithoutResults:e}):this.setState({termWithoutResults:null})}).catch(()=>{t([])})},150)),Ld(this,"usersLoader",(e,t)=>{if(this.state.termWithoutResults&&e.startsWith(this.state.termWithoutResults))t([]);else try{this.debouncedSearchProfiles(e,t)}catch(e){t([])}}),Ld(this,"debouncedSearchChannels",Object(Oi.debounce)(e=>this.props.searchChannels(this.props.currentTeamId,e),150)),Ld(this,"channelsLoader",async e=>e?(this.debouncedSearchChannels(e),this.props.myInvitableChannels.filter(t=>t.display_name.toLowerCase().startsWith(e.toLowerCase())||t.name.toLowerCase().startsWith(e.toLowerCase()))):this.props.myInvitableChannels),Ld(this,"openCustomMessage",()=>{this.setState({customMessageOpen:!0}),setTimeout(()=>{this.textareaRef.current&&this.textareaRef.current.focus()})}),Ld(this,"closeCustomMessage",()=>{this.setState({customMessageOpen:!1})}),Ld(this,"sendInvites",()=>{const e=[],t=[];for(const a of this.state.usersAndEmails)Object(pd.isEmail)(a)?t.push(a):e.push(a);this.props.onSubmit(e,t,this.state.channels,this.state.customMessageOpen?this.state.customMessage:"",this.state.usersInputValue,this.state.channelsInputValue)}),this.textareaRef=O.a.createRef(),this.state={customMessageOpen:Boolean(e.defaultMessage),customMessage:e.defaultMessage||"",usersAndEmails:[],channels:e.defaultChannels||[],usersInputValue:"",channelsInputValue:""}}render(){let e=Object(j.lb)("invitation_modal.guests.search-and-add.placeholder","Add guests or email addresses"),t=Object(ve.b)("invitation_modal.guests.users_emails_input.no_user_found_matching"),a="No one found matching **{text}**, type email to invite";return this.props.emailInvitationsEnabled||(e=Object(j.lb)("invitation_modal.guests.search-and-add.placeholder-email-disabled","Add guests"),t=Object(ve.b)("invitation_modal.guests.users_emails_input.no_user_found_matching-email-disabled"),a="No one found matching **{text}**"),O.a.createElement("div",{className:"InvitationModalGuestsStep"},O.a.createElement("div",{className:"modal-icon"},O.a.createElement(dd,null)),O.a.createElement("h1",{id:"invitation_modal_title"},O.a.createElement(Ki.b,{id:"invitation_modal.guests.title",defaultMessage:"Invite **Guests** to {teamName}",values:{teamName:this.props.teamName}})),O.a.createElement("div",{className:"add-people","data-testid":"addPeople"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.guests.add_people.title",defaultMessage:"Invite People"})),O.a.createElement("div",{"data-testid":"emailPlaceholder"},O.a.createElement(wd,{usersLoader:this.usersLoader,placeholder:e,ariaLabel:Object(j.lb)("invitation_modal.guests.add_people.title","Invite People"),onChange:this.onUsersEmailsChange,value:this.state.usersAndEmails,onInputChange:this.onUsersInputChange,inputValue:this.state.usersInputValue,validAddressMessageId:Object(ve.b)("invitation_modal.guests.users_emails_input.valid_email"),validAddressMessageDefault:"Invite **{email}** as a guest",noMatchMessageId:t,noMatchMessageDefault:a,emailInvitationsEnabled:this.props.emailInvitationsEnabled})),O.a.createElement("div",{className:"help-text"},this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.guests.add_people.description",defaultMessage:"Add existing guests or send email invites to new guests."}),!this.props.emailInvitationsEnabled&&O.a.createElement(ee.a,{id:"invitation_modal.guests.add_people.description-email-disabled",defaultMessage:"Add existing guests."}))),O.a.createElement("div",{className:"add-channels","data-testid":"channelPlaceholder"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.guests.add_channels.title",defaultMessage:"Search and Add Channels"})),O.a.createElement("div",null,O.a.createElement(ee.a,{id:"invitation_modal.guests.add_channels.placeholder",defaultMessage:"Search and add channels"},e=>O.a.createElement(kd,{placeholder:e,ariaLabel:Object(j.lb)("invitation_modal.guests.add_channels.title","Search and Add Channels"),channelsLoader:this.channelsLoader,onChange:this.onChannelsChange,onInputChange:this.onChannelsInputChange,inputValue:this.state.channelsInputValue,value:this.state.channels}))),O.a.createElement("div",{className:"help-text"},O.a.createElement(ee.a,{id:"invitation_modal.guests.add-channels.description",defaultMessage:"Specify the channels the guests have access to."}))),O.a.createElement("div",{className:"custom-message","data-testid":"customMessage"},!this.state.customMessageOpen&&O.a.createElement("a",{onClick:this.openCustomMessage,href:"#"},O.a.createElement(ee.a,{id:"invitation_modal.guests.custom-message.link",defaultMessage:"Set a custom message"})),this.state.customMessageOpen&&O.a.createElement(O.a.Fragment,null,O.a.createElement("div",null,O.a.createElement(ee.a,{id:"invitation_modal.guests.custom-message.title",defaultMessage:"Custom message"}),O.a.createElement(Md,{onClick:this.closeCustomMessage})),O.a.createElement("textarea",{ref:this.textareaRef,onChange:this.onMessageChange,value:this.state.customMessage})),O.a.createElement("div",{className:"help-text"},O.a.createElement(ee.a,{id:"invitation_modal.guests.custom-message.description",defaultMessage:"Create a custom message to make your invite more personal."}))),O.a.createElement("div",{className:"invite-guests"},O.a.createElement("button",{className:"btn "+(0===this.state.channels.length||0===this.state.usersAndEmails.length?"btn-inactive":"btn-primary"),disabled:0===this.state.channels.length||0===this.state.usersAndEmails.length,onClick:this.sendInvites,id:"inviteGuestButton"},O.a.createElement(ee.a,{id:"invitation_modal.guests.invite_button",defaultMessage:"Invite Guests"}))))}}Ld(Dd,"propTypes",{teamName:C.a.string.isRequired,myInvitableChannels:C.a.array.isRequired,currentTeamId:C.a.string.isRequired,searchProfiles:C.a.func.isRequired,searchChannels:C.a.func.isRequired,defaultChannels:C.a.array,defaultMessage:C.a.string,onEdit:C.a.func.isRequired,onSubmit:C.a.func.isRequired,emailInvitationsEnabled:C.a.bool.isRequired});class xd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.alert",defaultMessage:"Alert Icon"},e=>O.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":e},O.a.createElement("path",{d:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"}))))}}a(1734);class Ud extends O.a.PureComponent{render(){const{invitation:e}=this.props;let t,a,n,s;if(e.user){n="name";const i=Object(j.O)(e.user.id,e.user.last_picture_update);t=O.a.createElement(on.a,{username:e.user.username,url:i,size:"lg"}),a=Object(j.C)(e.user),Object(j.Y)(e.user)&&(s=O.a.createElement(rn.a,null))}else e.email?(n="email",t=O.a.createElement(Ed,{className:"mail-icon"}),a=e.email):(n="name",t=O.a.createElement(xd,{className:"alert-icon"}),a=e.text);let i=e.reason;return e.reason&&e.reason.id&&(i=O.a.createElement(ee.a,{id:e.reason.id,defaultMessage:e.reason.message,values:e.reason.values})),O.a.createElement("div",{className:"InvitationModalConfirmStepRow"},O.a.createElement("div",{className:"username-or-icon"},t,O.a.createElement("span",{className:n},a,s)),O.a.createElement("div",{className:"reason"},i))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ud,"propTypes",{invitation:C.a.object.isRequired});a(1735);class qd extends O.a.PureComponent{render(){return O.a.createElement("div",{className:"InvitationModalConfirmStepTable"},O.a.createElement("div",{className:"table-header"},O.a.createElement("div",{className:"people-header"},O.a.createElement(ee.a,{id:"invitation-modal.confirm.people-header",defaultMessage:"People"})),O.a.createElement("div",{className:"details-header"},O.a.createElement(ee.a,{id:"invitation-modal.confirm.details-header",defaultMessage:"Details"}))),O.a.createElement("div",{className:"rows"},this.props.invites.map(e=>O.a.createElement(Ud,{key:e.text||e.email||e.user.id,invitation:e}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(qd,"propTypes",{invites:C.a.arrayOf(C.a.object).isRequired});a(1736);function Hd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fd extends O.a.PureComponent{constructor(...e){super(...e),Hd(this,"getInvitesCountsMessage",(e,t)=>e>0&&t>0?O.a.createElement(Ki.b,{id:"invitation_modal.confirm.members_subtitle",defaultMessage:"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited, and **{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent",values:{sentCount:e,notSentCount:t}}):e>0&&0===t?O.a.createElement(Ki.b,{id:"invitation_modal.confirm.members_subtitle_without_not_sent",defaultMessage:"**{sentCount, number} {sentCount, plural, one {person} other {people}}** {sentCount, plural, one {has} other {have}} been invited",values:{sentCount:e}}):0===e&&t>0?O.a.createElement(Ki.b,{id:"invitation_modal.confirm.members_subtitle_without_sent",defaultMessage:"**{notSentCount, number} {notSentCount, plural, one {invitation} other {invitations}}** {notSentCount, plural, one {was} other {were}} not sent",values:{notSentCount:t}}):O.a.createElement(Ki.b,{id:"invitation_modal.confirm.members_subtitle_without_sent_and_not_sent",defaultMessage:"No invitation sent"}))}render(){const{teamName:e,invitesType:t,invitesSent:a,invitesNotSent:n,onDone:s,onInviteMore:i}=this.props;return O.a.createElement("div",{className:"InvitationModalConfirmStep"},O.a.createElement("div",{className:"modal-icon"},O.a.createElement(dd,null)),t===N.p.INVITE_MEMBER&&O.a.createElement("h1",{id:"invitation_modal_title"},O.a.createElement(Ki.b,{id:"invitation_modal.confirm.members_title",defaultMessage:"**Members** Invited to **{teamName}**",values:{teamName:e}})),t===N.p.INVITE_GUEST&&O.a.createElement("h1",{id:"invitation_modal_title"},O.a.createElement(Ki.b,{id:"invitation_modal.confirm.guests_title",defaultMessage:"**Guests** Invited to **{teamName}**",values:{teamName:e}})),O.a.createElement("h2",{className:"subtitle"},this.getInvitesCountsMessage(a.length,n.length)),a.length>0&&O.a.createElement("div",{className:"invitation-modal-confirm-sent"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.confirm.sent-header",defaultMessage:"Successful Invites"})),O.a.createElement(qd,{invites:a})),n.length>0&&O.a.createElement("div",{className:"invitation-modal-confirm-not-sent"},O.a.createElement("h2",null,O.a.createElement(ee.a,{id:"invitation_modal.confirm.not-sent-header",defaultMessage:"Invitations Not Sent"})),O.a.createElement(qd,{invites:n})),O.a.createElement("div",{className:"button-input-block"},O.a.createElement("button",{className:"btn invite-more",onClick:i},O.a.createElement(ee.a,{id:"invitation_modal.invite.more",defaultMessage:"Invite More People"})),O.a.createElement("button",{className:"btn btn-primary confirm-done",onClick:s},O.a.createElement(ee.a,{id:"invitation_modal.confirm.done",defaultMessage:"Done"}))))}}Hd(Fd,"propTypes",{teamName:C.a.string.isRequired,onDone:C.a.func.isRequired,onInviteMore:C.a.func.isRequired,invitesType:C.a.oneOf([N.p.INVITE_MEMBER,N.p.INVITE_GUEST]).isRequired,invitesSent:C.a.array.isRequired,invitesNotSent:C.a.array.isRequired});a(1737);function Bd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Gd extends O.a.PureComponent{constructor(e){super(e),Bd(this,"modal",O.a.createRef()),Bd(this,"goToFirstStep",()=>{this.props.canAddUsers&&this.props.canInviteGuests?this.goToInitialStep():this.props.canAddUsers?this.goToMembers():this.props.canInviteGuests?this.goToGuests():this.close()}),Bd(this,"goToInitialStep",()=>{this.state.hasChanges?this.setState({confirmBack:!0}):this.setState({step:"initial",hasChanges:!1,lastInviteChannels:[],lastInviteMesssage:"",prevStep:this.state.step}),this.modal&&this.modal.current&&this.modal.current.enforceFocus()}),Bd(this,"goToMembers",()=>{this.setState({step:"members",prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:N.p.INVITE_MEMBER}),this.modal&&this.modal.current&&this.modal.current.enforceFocus()}),Bd(this,"goToGuests",()=>{this.setState({step:"guests",prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:N.p.INVITE_GUEST}),this.modal&&this.modal.current&&this.modal.current.enforceFocus()}),Bd(this,"goToPrevStep",()=>{"guests"===this.state.prevStep?this.setState({step:"guests",prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:N.p.INVITE_GUEST}):"members"===this.state.prevStep&&this.setState({step:"members",prevStep:this.state.step,hasChanges:!1,invitesSent:[],invitesNotSent:[],invitesType:N.p.INVITE_MEMBER}),this.modal&&this.modal.current&&this.modal.current.enforceFocus()}),Bd(this,"getBackFunction",()=>"confirm"===this.state.step&&this.state.invitesNotSent.length>0?this.goToPrevStep:("members"===this.state.step||"guests"===this.state.step)&&this.props.canInviteGuests&&this.props.canAddUsers?this.goToInitialStep:null),Bd(this,"onEdit",e=>{this.setState({hasChanges:e})}),Bd(this,"close",()=>{this.state.hasChanges?this.setState({confirmModal:!0}):this.props.actions.closeModal()}),Bd(this,"confirmBack",()=>{this.setState({step:"initial",hasChanges:!1,confirmBack:!1})}),Bd(this,"cancelBack",()=>{this.setState({confirmBack:!1})}),Bd(this,"confirmClose",()=>{this.props.actions.closeModal(),this.setState({confirmModal:!1})}),Bd(this,"cancelClose",()=>{this.setState({confirmModal:!1})}),Bd(this,"onMembersSubmit",async(e,t,a)=>{const n=await this.props.actions.sendMembersInvites(this.props.currentTeam.id,e,t);""!==a&&n.notSent.push({text:a,reason:O.a.createElement(ee.a,{id:"invitation-modal.confirm.not-valid-user-or-email",defaultMessage:"Does not match a valid user or email."})}),this.setState({step:"confirm",prevStep:this.state.step,invitesSent:n.sent,invitesNotSent:n.notSent,invitesType:N.p.INVITE_MEMBER,hasChanges:!1})}),Bd(this,"onGuestsSubmit",async(e,t,a,n,s,i)=>{const r=await this.props.actions.sendGuestsInvites(this.props.currentTeam.id,a.map(e=>e.id),e,t,n);""!==s&&r.notSent.push({text:s,reason:O.a.createElement(ee.a,{id:"invitation-modal.confirm.not-valid-user-or-email",defaultMessage:"Does not match a valid user or email."})}),""!==i&&r.notSent.push({text:i,reason:O.a.createElement(ee.a,{id:"invitation-modal.confirm.not-valid-channel",defaultMessage:"Does not match a valid channel name."})}),this.setState({step:"confirm",prevStep:this.state.step,lastInviteChannels:a,lastInviteMessage:n,invitesSent:r.sent,invitesNotSent:r.notSent,invitesType:N.p.INVITE_GUEST,hasChanges:!1})});let t="initial";e.canInviteGuests||(t="members"),e.canAddUsers||(t="guests"),this.state={step:t,prevStep:null,lastInviteChannels:[],lastInviteMessage:"",confirmModal:!1,confirmBack:!1,hasChanges:!1,invitesType:N.p.INVITE_MEMBER,invitesSent:[],invitesNotSent:[]}}componentDidUpdate(e,t){"members"!==this.state.step||"members"===t.step||this.props.currentTeam.invite_id||this.props.actions.getTeam(this.props.currentTeam.id)}render(){return O.a.createElement(cd,null,O.a.createElement(ld,{show:Boolean(this.props.show),onClose:this.close,onGoBack:this.getBackFunction(),ref:this.modal,ariaLabelledBy:"invitation_modal_title"},O.a.createElement("div",{"data-testid":"invitationModal",className:"InvitationModal"},O.a.createElement(ns.a,{show:this.state.confirmModal||this.state.confirmBack,title:O.a.createElement(ee.a,{id:"invitation-modal.discard-changes.title",defaultMessage:"Discard Changes"}),message:O.a.createElement(ee.a,{id:"invitation-modal.discard-changes.message",defaultMessage:"You have unsent invitations, are you sure you want to discard them?"}),confirmButtonText:O.a.createElement(ee.a,{id:"invitation-modal.discard-changes.button",defaultMessage:"Yes, Discard"}),modalClass:"invitation-modal-confirm",onConfirm:this.state.confirmModal?this.confirmClose:this.confirmBack,onCancel:this.state.confirmModal?this.cancelClose:this.cancelBack}),"initial"===this.state.step&&O.a.createElement(hd,{teamName:this.props.currentTeam.display_name,goToMembers:this.goToMembers,goToGuests:this.goToGuests,emailInvitationsEnabled:this.props.emailInvitationsEnabled}),"members"===this.state.step&&O.a.createElement(Pd,{teamName:this.props.currentTeam.display_name,currentTeamId:this.props.currentTeam.id,inviteId:this.props.currentTeam.invite_id,searchProfiles:this.props.actions.searchProfiles,emailInvitationsEnabled:this.props.emailInvitationsEnabled,onSubmit:this.onMembersSubmit,onEdit:this.onEdit}),"guests"===this.state.step&&O.a.createElement(Dd,{teamName:this.props.currentTeam.display_name,currentTeamId:this.props.currentTeam.id,myInvitableChannels:this.props.invitableChannels,searchProfiles:this.props.actions.searchProfiles,searchChannels:this.props.actions.searchChannels,defaultChannels:this.state.lastInviteChannels,defaultMessage:this.state.lastInviteMessage,emailInvitationsEnabled:this.props.emailInvitationsEnabled,onSubmit:this.onGuestsSubmit,onEdit:this.onEdit}),"confirm"===this.state.step&&O.a.createElement(Fd,{teamName:this.props.currentTeam.display_name,currentTeamId:this.props.currentTeam.id,onDone:this.close,onInviteMore:this.goToFirstStep,invitesType:this.state.invitesType,invitesSent:this.state.invitesSent,invitesNotSent:this.state.invitesNotSent}))))}}Bd(Gd,"propTypes",{show:C.a.bool,currentTeam:C.a.object.isRequired,invitableChannels:C.a.array.isRequired,canInviteGuests:C.a.bool.isRequired,canAddUsers:C.a.bool.isRequired,emailInvitationsEnabled:C.a.bool.isRequired,actions:C.a.shape({closeModal:C.a.func.isRequired,sendGuestsInvites:C.a.func.isRequired,sendMembersInvites:C.a.func.isRequired,searchProfiles:C.a.func.isRequired,searchChannels:C.a.func.isRequired,getTeam:C.a.func.isRequired}).isRequired});const Vd=(e,t={})=>e?Object(r.searchProfiles)(e,t):Object(r.getProfiles)(0,20,t),Wd=(e,t)=>Object(o.searchChannels)(e,t);var zd=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(m.getLicense)(e),n=Object(p.getChannelsInCurrentTeam)(e),s=Object(h.getCurrentTeam)(e),i=n.filter(t=>t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&(t.type===N.j.PRIVATE_CHANNEL?Object(U.haveIChannelPermission)(e,{channel:t.id,team:s.id,permission:x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS}):Object(U.haveIChannelPermission)(e,{channel:t.id,team:s.id,permission:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS}))),r="true"===t.EnableGuestAccounts,o="true"===t.EnableEmailInvitations,l=a&&"true"===a.IsLicensed,c=!Boolean(s.group_constrained)&&l&&r&&Object(U.haveITeamPermission)(e,{team:s.id,permission:x.Permissions.INVITE_GUEST}),d=Object(U.haveITeamPermission)(e,{team:s.id,permission:x.Permissions.ADD_USER_TO_TEAM});return{invitableChannels:i,currentTeam:s,canInviteGuests:c,canAddUsers:d,emailInvitationsEnabled:o,show:Object(ed.a)(e,N.u.INVITATION)}}),(function(e){return{actions:Object(s.bindActionCreators)({closeModal:()=>Object(q.a)(N.u.INVITATION),sendGuestsInvites:ad,sendMembersInvites:td,searchProfiles:Vd,searchChannels:Wd,getTeam:l.getTeam},e)}}))(Gd),Kd=a(1193),Yd=a(1192);class Qd extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"navbar_dropdown.leave.icon",defaultMessage:"Leave Team Icon"},e=>O.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 164 164",style:Zd,role:"img","aria-label":e},O.a.createElement("path",{d:"M26.023,164L26.023,7.035L26.022,0.32L137.658,0.32L137.658,164L124.228,164L124.228, 13.749L39.452,13.749L39.452,164L26.023, 164ZM118.876,164L118.876,18.619L58.137,32.918L58.137,149.701L118.876,164Z"}))))}}const Zd={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function Jd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xd extends O.a.PureComponent{constructor(...e){super(...e),Jd(this,"handleKeyPress",e=>{Object(j.Z)(e,N.Q.KeyCodes.ENTER)&&this.handleSubmit()}),Jd(this,"handleSubmit",()=>{this.props.onHide(),this.props.actions.leaveTeam(this.props.currentTeamId,this.props.currentUserId),this.props.actions.toggleSideBarRightMenu()})}componentDidMount(){this.props.show&&document.addEventListener("keypress",this.handleKeyPress)}componentWillUnmount(){document.removeEventListener("keypress",this.handleKeyPress)}render(){return O.a.createElement($.a,{dialogClassName:"a11y__modal",className:"modal-confirm",show:this.props.show,onHide:this.props.onHide,id:"leaveTeamModal",role:"dialog","aria-labelledby":"leaveTeamModalLabel"},O.a.createElement($.a.Header,{closeButton:!1},O.a.createElement($.a.Title,{componentClass:"h1",id:"leaveTeamModalLabel"},O.a.createElement(ee.a,{id:"leave_team_modal.title",defaultMessage:"Leave the team?"}))),O.a.createElement($.a.Body,null,O.a.createElement(ee.a,{id:"leave_team_modal.desc",defaultMessage:"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?"})),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.props.onHide,id:"leaveTeamNo"},O.a.createElement(ee.a,{id:"leave_team_modal.no",defaultMessage:"No"})),O.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleSubmit,id:"leaveTeamYes"},O.a.createElement(ee.a,{id:"leave_team_modal.yes",defaultMessage:"Yes"}))))}}Jd(Xd,"propTypes",{currentUserId:C.a.string.isRequired,currentTeamId:C.a.string.isRequired,onHide:C.a.func.isRequired,show:C.a.bool.isRequired,actions:C.a.shape({leaveTeam:C.a.func.isRequired,toggleSideBarRightMenu:C.a.func.isRequired}).isRequired});var $d=Object(n.connect)((function(e){const t=N.u.LEAVE_TEAM;return{currentUserId:Object(u.getCurrentUserId)(e),currentTeamId:Object(h.getCurrentTeamId)(e),show:Object(ed.a)(e,t)}}),(function(e){return{actions:Object(s.bindActionCreators)({leaveTeam:l.removeUserFromTeam,toggleSideBarRightMenu:M.n},e)}}))(Xd),em=a(1178),tm=a(1511);function am(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nm extends O.a.PureComponent{constructor(e){super(e),am(this,"handleTermChange",e=>{this.setState({term:e})}),am(this,"nextPage",()=>{this.setState({page:this.state.page+1}),this.props.nextPage(this.state.page+1)}),am(this,"previousPage",()=>{this.setState({page:this.state.page-1})}),am(this,"search",e=>{this.props.search(e),""!==e&&this.setState({page:0})}),this.state={term:"",page:0}}render(){return O.a.createElement(tm.a,Object.assign({},this.props,{nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.state.term,onTermChange:this.handleTermChange}))}}am(nm,"propTypes",{users:C.a.arrayOf(C.a.object),usersPerPage:C.a.number,total:C.a.number,extraInfo:C.a.object,nextPage:C.a.func.isRequired,search:C.a.func.isRequired,actions:C.a.arrayOf(C.a.func),actionProps:C.a.object,actionUserProps:C.a.object,focusOnMount:C.a.bool});var sm=a(1236);function im(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rm extends O.a.PureComponent{constructor(e){super(e),im(this,"handleMakeMember",async()=>{const e=this.props.currentUser;if(this.props.user.id===e.id&&e.roles.includes("system_admin"))this.handleDemote(this.props.user,"team_user");else{const{error:t}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!1);t?this.setState({serverError:t.message}):(this.props.actions.getUser(this.props.user.id),this.props.actions.getTeamMember(this.props.teamMember.team_id,this.props.user.id),this.props.user.id===e.id&&(await this.props.actions.getMyTeamMembers(),this.props.actions.getMyTeamUnreads()))}}),im(this,"handleRemoveFromTeam",async()=>{const{error:e}=await this.props.actions.removeUserFromTeamAndGetStats(this.props.teamMember.team_id,this.props.user.id);e&&this.setState({serverError:e.message})}),im(this,"handleMakeAdmin",async()=>{const e=this.props.currentUser;if(this.props.user.id===e.id&&e.roles.includes("system_admin"))this.handleDemote(this.props.user,"team_user team_admin");else{const{error:e}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!0);e?this.setState({serverError:e.message}):(this.props.actions.getUser(this.props.user.id),this.props.actions.getTeamMember(this.props.teamMember.team_id,this.props.user.id))}}),im(this,"handleDemote",(e,t,a)=>{this.setState({serverError:this.state.serverError,showDemoteModal:!0,user:e,role:t,newRole:a})}),im(this,"handleDemoteCancel",()=>{this.setState({serverError:null,showDemoteModal:!1,user:null,role:null,newRole:null})}),im(this,"handleDemoteSubmit",async()=>{const{error:e}=await this.props.actions.updateTeamMemberSchemeRoles(this.props.teamMember.team_id,this.props.user.id,!0,!1);e?this.setState({serverError:e.message}):(this.props.actions.getUser(this.props.user.id),se.a.push(this.props.teamUrl))}),this.state={serverError:null,showDemoteModal:!1,user:null,role:null}}render(){let e=null;this.state.serverError&&(e=O.a.createElement("div",{className:"has-error"},O.a.createElement("label",{className:"has-error control-label"},this.state.serverError)));const{currentTeam:t,teamMember:a,user:n}=this.props;let s=null;s=j.Y(n)?O.a.createElement(ee.a,{id:"team_members_dropdown.guest",defaultMessage:"Guest"}):n.roles.length>0&&j.eb(n.roles)?O.a.createElement(ee.a,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"}):a.roles.length>0&&j.R(a.roles)||a.scheme_admin?O.a.createElement(ee.a,{id:"team_members_dropdown.teamAdmin",defaultMessage:"Team Admin"}):O.a.createElement(ee.a,{id:"team_members_dropdown.member",defaultMessage:"Member"});const i=this.props.currentUser;let r=!j.Y(n)&&(j.R(a.roles)||a.scheme_admin)&&!j.eb(n.roles),o=!(j.Y(n)||j.R(a.roles)||j.eb(n.roles)||a.scheme_admin);n.delete_at>0&&(s=O.a.createElement(ee.a,{id:"team_members_dropdown.inactive",defaultMessage:"Inactive"}),r=!1,o=!1);const l=n.id!==i.id&&(!t.group_constrained||n.is_bot);let c=null;if(n.id===i.id){const t=O.a.createElement(ee.a,{id:"team_members_dropdown.confirmDemoteRoleTitle",defaultMessage:"Confirm Demotion from System Admin Role"}),a=O.a.createElement("div",null,O.a.createElement(ee.a,{id:"team_members_dropdown.confirmDemoteDescription",defaultMessage:"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you'll need to re-assign a System Admin by accessing the Mattermost server through a terminal and running the following command."}),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement(ee.a,{id:"team_members_dropdown.confirmDemotionCmd",defaultMessage:"platform roles system_admin {username}",vallues:{username:i.username}}),e),n=O.a.createElement(ee.a,{id:"team_members_dropdown.confirmDemotion",defaultMessage:"Confirm Demotion"});c=O.a.createElement(ns.a,{show:this.state.showDemoteModal,title:t,message:a,confirmButtonText:n,onConfirm:this.handleDemoteSubmit,onCancel:this.handleDemoteCancel})}if(!l&&!o&&!r)return O.a.createElement("div",null,s);const{index:d,totalUsers:m}=this.props;let u=!1;return m>3&&m-d<=3&&(u=!0),O.a.createElement(ji.a,null,O.a.createElement("button",{id:"teamMembersDropdown_".concat(n.username),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},O.a.createElement("span",null,s," "),O.a.createElement(sm.a,null)),O.a.createElement("div",null,O.a.createElement(Ai.a,{openLeft:!0,openUp:u,ariaLabel:j.lb("team_members_dropdown.menuAriaLabel","Change the role of a team member")},O.a.createElement(Ai.a.ItemAction,{id:"removeFromTeam",show:l,onClick:this.handleRemoveFromTeam,text:j.lb("team_members_dropdown.leave_team","Remove From Team")}),O.a.createElement(Ai.a.ItemAction,{show:o,onClick:this.handleMakeAdmin,text:j.lb("team_members_dropdown.makeAdmin","Make Team Admin")}),O.a.createElement(Ai.a.ItemAction,{show:r,onClick:this.handleMakeMember,text:j.lb("team_members_dropdown.makeMember","Make Member")})),c,e))}}im(rm,"propTypes",{user:C.a.object.isRequired,currentUser:C.a.object.isRequired,teamMember:C.a.object.isRequired,teamUrl:C.a.string.isRequired,currentTeam:C.a.object.isRequired,index:C.a.number.isRequired,totalUsers:C.a.number.isRequired,actions:C.a.shape({getMyTeamMembers:C.a.func.isRequired,getMyTeamUnreads:C.a.func.isRequired,getUser:C.a.func.isRequired,getTeamMember:C.a.func.isRequired,getTeamStats:C.a.func.isRequired,getChannelStats:C.a.func.isRequired,updateTeamMemberSchemeRoles:C.a.func.isRequired,removeUserFromTeamAndGetStats:C.a.func.isRequired,updateUserActive:C.a.func.isRequired}).isRequired});var om=Object(n.connect)((function(e){return{currentUser:Object(u.getCurrentUser)(e),currentChannelId:Object(p.getCurrentChannelId)(e),teamUrl:Object(h.getCurrentRelativeTeamUrl)(e),currentTeam:Object(h.getCurrentTeam)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({getMyTeamMembers:l.getMyTeamMembers,getMyTeamUnreads:l.getMyTeamUnreads,getUser:r.getUser,getTeamMember:l.getTeamMember,getTeamStats:l.getTeamStats,getChannelStats:o.getChannelStats,updateUserActive:r.updateUserActive,updateTeamMemberSchemeRoles:l.updateTeamMemberSchemeRoles,removeUserFromTeamAndGetStats:_.d},e)}}))(rm);function lm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class cm extends O.a.PureComponent{constructor(e){super(e),lm(this,"searchTimeoutId",void 0),lm(this,"loadComplete",()=>{this.setState({loading:!1})}),lm(this,"nextPage",async e=>{this.setState({loading:!0}),this.props.actions.loadProfilesAndTeamMembers(e,50),await this.props.actions.getTeamMembers(this.props.currentTeamId,e,N.Q.DEFAULT_MAX_USERS_PER_TEAM,{sort:x.Teams.SORT_USERNAME_OPTION,exclude_deleted_users:!0}),this.loadComplete()}),lm(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={loading:!0}}async componentDidMount(){await Promise.all([this.props.actions.loadProfilesAndTeamMembers(0,N.Q.PROFILE_CHUNK_SIZE,this.props.currentTeamId),this.props.actions.getTeamMembers(this.props.currentTeamId,0,N.Q.DEFAULT_MAX_USERS_PER_TEAM,{sort:x.Teams.SORT_USERNAME_OPTION,exclude_deleted_users:!0}),this.props.actions.getTeamStats(this.props.currentTeamId)]),this.loadComplete()}componentWillUnmount(){this.props.actions.setModalSearchTerm("")}componentDidUpdate(e){if(e.searchTerm!==this.props.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return this.loadComplete(),void(this.searchTimeoutId=0);const t=window.setTimeout(async()=>{const{loadStatusesForProfilesList:a,loadTeamMembersForProfilesList:n,searchProfiles:s}=this.props.actions,{data:i}=await s(e,{team_id:this.props.currentTeamId});t===this.searchTimeoutId&&(this.setState({loading:!0}),a(i),n(i,this.props.currentTeamId,!0).then(({data:e})=>{e&&this.loadComplete()}))},N.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=t}}render(){let e=null;this.props.canManageTeamMembers&&(e=[om]);const t=this.props.teamMembers,a=this.props.users,n={};let s;if(this.state.loading)s=null;else{s=[];for(let e=0;e<a.length;e++){const i=a[e];t[i.id]&&0===i.delete_at&&(s.push(i),n[i.id]={teamMember:t[i.id]})}}return O.a.createElement(nm,{users:s,usersPerPage:50,total:this.props.totalTeamMembers,nextPage:this.nextPage,search:this.search,actions:e,actionUserProps:n,focusOnMount:!I.n()})}}lm(cm,"propTypes",{searchTerm:C.a.string.isRequired,users:C.a.any.isRequired,teamMembers:C.a.objectOf(C.a.any).isRequired,currentTeamId:C.a.string.isRequired,totalTeamMembers:C.a.number.isRequired,canManageTeamMembers:C.a.bool,actions:C.a.shape({getTeamMembers:C.a.func.isRequired,searchProfiles:C.a.func.isRequired,getTeamStats:C.a.func.isRequired,loadProfilesAndTeamMembers:C.a.func.isRequired,loadStatusesForProfilesList:C.a.func.isRequired,loadTeamMembersForProfilesList:C.a.func.isRequired,setModalSearchTerm:C.a.func.isRequired}).isRequired});var dm=Object(n.connect)((function(e,t){const a=Object(U.haveITeamPermission)(e,{team:t.teamId,permission:x.Permissions.MANAGE_TEAM_ROLES}),n=e.views.search.modalSearch;let s;s=n?Object(u.searchProfilesInCurrentTeam)(e,n):Object(u.getProfilesInCurrentTeam)(e);const i=Object(h.getCurrentTeamStats)(e)||{active_member_count:0};return{searchTerm:n,users:s,teamMembers:Object(h.getMembersInCurrentTeam)(e)||{},currentTeamId:e.entities.teams.currentTeamId,totalTeamMembers:i.active_member_count,canManageTeamMembers:a}}),(function(e){return{actions:Object(s.bindActionCreators)({searchProfiles:r.searchProfiles,getTeamStats:l.getTeamStats,getTeamMembers:l.getTeamMembers,loadProfilesAndTeamMembers:ls.i,loadStatusesForProfilesList:f.b,loadTeamMembersForProfilesList:ls.o,setModalSearchTerm:em.a},e)}}))(cm);function mm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class um extends O.a.PureComponent{constructor(e){super(e),mm(this,"handleHide",()=>{this.setState({show:!1})}),mm(this,"handleExit",()=>{this.props.onHide()}),mm(this,"handleInvitePeople",()=>{const{actions:e}=this.props;e.openModal({modalId:N.u.INVITATION,dialogType:zd}),this.handleExit()}),this.state={show:!0}}componentDidMount(){this.props.onLoad&&this.props.onLoad()}render(){let e="";return this.props.currentTeam&&(e=this.props.currentTeam.display_name),O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"teamMemberModalLabel",id:"teamMembersModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"teamMemberModalLabel"},O.a.createElement(ee.a,{id:"team_member_modal.members",defaultMessage:"{team} Members",values:{team:e}})),O.a.createElement(Kd.a,{teamId:this.props.currentTeam.id,permissions:[Ea.a.ADD_USER_TO_TEAM,Ea.a.INVITE_GUEST]},O.a.createElement("button",{id:"invitePeople",type:"button",className:"btn btn-primary invite-people-btn",onClick:this.handleInvitePeople},O.a.createElement(ee.a,{id:"team_member_modal.invitePeople",defaultMessage:"Invite People"})))),O.a.createElement($.a.Body,null,O.a.createElement(dm,{teamId:this.props.currentTeam.id})))}}mm(um,"propTypes",{currentTeam:C.a.shape({id:C.a.string.isRequired,display_name:C.a.string.isRequired}).isRequired,onHide:C.a.func.isRequired,onLoad:C.a.func,actions:C.a.shape({openModal:C.a.func.isRequired}).isRequired});var hm=Object(n.connect)((function(e){const t=N.u.TEAM_MEMBERS;return{currentTeam:Object(h.getCurrentTeam)(e),show:Object(ed.a)(e,t)}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b},e)}}))(um),pm=a(603),gm=a(1143),bm=a(1154),fm=a(1441),_m=a(1237);function Em(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(a),!0).forEach((function(t){ym(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Em(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ym(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Cm=["image/jpeg","image/png","image/bmp"];class wm extends O.a.PureComponent{constructor(e){super(e),ym(this,"updateSection",e=>{this.setState(this.setupInitialState(this.props)),this.props.updateSection(e)}),ym(this,"handleOpenInviteRadio",e=>{this.setState({allow_open_invite:e})}),ym(this,"handleAllowedDomainsSubmit",async()=>{var e={serverError:"",clientError:""},t=vm({},this.props.team);t.allowed_domains=this.state.allowed_domains;const{error:a}=await this.props.actions.patchTeam(t);a?(e.serverError=a.message,this.setState(e)):this.updateSection("")}),ym(this,"handleOpenInviteSubmit",async()=>{var e={serverError:"",clientError:""},t=vm({},this.props.team);t.allow_open_invite=this.state.allow_open_invite;const{error:a}=await this.props.actions.patchTeam(t);a?(e.serverError=a.message,this.setState(e)):this.updateSection("")}),ym(this,"handleNameSubmit",async()=>{var e={serverError:"",clientError:""};let t=!0;const a=this.state.name.trim();if(a?a.length<N.Q.MIN_TEAMNAME_LENGTH?(e.clientError=O.a.createElement(ee.a,{id:"general_tab.teamNameRestrictions",defaultMessage:"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.",values:{min:N.Q.MIN_TEAMNAME_LENGTH,max:N.Q.MAX_TEAMNAME_LENGTH}}),t=!1):e.clientError="":(e.clientError=j.lb("general_tab.required","This field is required"),t=!1),this.setState(e),!t)return;var n=vm({},this.props.team);n.display_name=this.state.name;const{error:s}=await this.props.actions.patchTeam(n);s?(e.serverError=s.message,this.setState(e)):this.updateSection("")}),ym(this,"handleInviteIdSubmit",async()=>{const e={serverError:"",clientError:""};this.setState(e);const{error:t}=await this.props.actions.regenerateTeamInviteId(this.props.team.id);t?(e.serverError=t.message,this.setState(e)):this.updateSection("")}),ym(this,"handleClose",()=>{this.updateSection("")}),ym(this,"handleDescriptionSubmit",async()=>{var e={serverError:"",clientError:""};let t=!0;if(this.state.description.trim()===this.props.team.description?(e.clientError=j.lb("general_tab.chooseDescription","Please choose a new description for your team"),t=!1):e.clientError="",this.setState(e),!t)return;var a=vm({},this.props.team);a.description=this.state.description;const{error:n}=await this.props.actions.patchTeam(a);n?(e.serverError=n.message,this.setState(e)):this.updateSection("")}),ym(this,"handleTeamIconSubmit",async()=>{if(!this.state.teamIconFile)return;if(!this.state.submitActive)return;this.setState({loadingIcon:!0,clientError:"",serverError:""});const{error:e}=await this.props.actions.setTeamIcon(this.props.team.id,this.state.teamIconFile);e?this.setState({loadingIcon:!1,serverError:e.message}):(this.setState({loadingIcon:!1,submitActive:!1}),this.updateSection(""))}),ym(this,"handleTeamIconRemove",async()=>{this.setState({loadingIcon:!0,clientError:"",serverError:""});const{error:e}=await this.props.actions.removeTeamIcon(this.props.team.id);e?this.setState({loadingIcon:!1,serverError:e.message}):(this.setState({loadingIcon:!1,submitActive:!1}),this.updateSection(""))}),ym(this,"handleUpdateSection",e=>{"invite_id"!==e||this.props.activeSection===e||this.props.team.invite_id?this.updateSection(e):this.setState({shouldFetchTeam:!0},()=>{this.updateSection(e)})}),ym(this,"updateName",e=>{this.setState({name:e.target.value})}),ym(this,"updateDescription",e=>{this.setState({description:e.target.value})}),ym(this,"updateTeamIcon",e=>{if(e&&e.target&&e.target.files&&e.target.files[0]){const t=e.target.files[0];Cm.includes(t.type)?t.size>this.props.maxFileSize?this.setState({clientError:j.lb("general_tab.teamIconTooLarge","Unable to upload team icon. File is too large.")}):this.setState({teamIconFile:e.target.files[0],clientError:"",submitActive:!0}):this.setState({clientError:j.lb("general_tab.teamIconInvalidFileType","Only BMP, JPG or PNG images may be used for team icons")})}else this.setState({teamIconFile:null,clientError:j.lb("general_tab.teamIconError","An error occurred while selecting the image.")})}),ym(this,"updateAllowedDomains",e=>{this.setState({allowed_domains:e.target.value})}),this.state=this.setupInitialState(e)}setupInitialState(e){const t=e.team;return{name:t.display_name,invite_id:t.invite_id,allow_open_invite:t.allow_open_invite,description:t.description,allowed_domains:t.allowed_domains,serverError:"",clientError:"",teamIconFile:null,loadingIcon:!1,submitActive:!1,isInitialState:!0}}static getDerivedStateFromProps(e,t){const{team:a}=e;return t.isInitialState?null:{name:a.display_name,description:a.description,allowed_domains:a.allowed_domains,invite_id:a.invite_id,allow_open_invite:a.allow_open_invite,isInitialState:!1}}componentDidUpdate(e,t){!t.shouldFetchTeam&&this.state.shouldFetchTeam&&this.fetchTeam()}fetchTeam(){this.state.serverError||this.props.actions.getTeam(this.props.team.id).then(({error:e})=>{const t={shouldFetchTeam:!1};e&&(t.serverError=e.message),this.setState(t)})}componentDidMount(){As()("#team_settings").on("hidden.bs.modal",this.handleClose)}componentWillUnmount(){As()("#team_settings").off("hidden.bs.modal",this.handleClose)}render(){const e=this.props.team;let t,a,n,s,i,r,o=null,l=null;if(this.state.clientError&&(o=this.state.clientError),this.state.serverError&&(l=this.state.serverError),"open_invite"===this.props.activeSection){let a;a=e.group_constrained?[O.a.createElement("div",{key:"userOpenInviteOptions"},O.a.createElement("div",null,O.a.createElement(Ki.b,{id:"team_settings.openInviteDescription.groupConstrained",defaultMessage:"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)"})))]:[O.a.createElement("fieldset",{key:"userOpenInviteOptions"},O.a.createElement("legend",{className:"form-legend hidden-label"},O.a.createElement(ee.a,{id:"team_settings.openInviteDescription.ariaLabel",defaultMessage:"Invite Code"})),O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"teamOpenInvite",name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),O.a.createElement(ee.a,{id:"general_tab.yes",defaultMessage:"Yes"})),O.a.createElement("br",null)),O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"teamOpenInviteNo",name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),O.a.createElement(ee.a,{id:"general_tab.no",defaultMessage:"No"})),O.a.createElement("br",null)),O.a.createElement("div",{className:"mt-5"},O.a.createElement(ee.a,{id:"general_tab.openInviteDesc",defaultMessage:'When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team. Changing from "Yes" to "No" will regenerate the  invitation code, create a new invitation link and invalidate the previous link.'})))],t=O.a.createElement(gm.a,{title:j.lb("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),inputs:a,submit:this.handleOpenInviteSubmit,serverError:l,updateSection:this.handleUpdateSection})}else{let a="";a=!0===this.state.allow_open_invite?j.lb("general_tab.yes","Yes"):e.group_constrained?j.lb("team_settings.openInviteSetting.groupConstrained","No, members of this team are added and removed by linked groups."):j.lb("general_tab.no","No"),t=O.a.createElement(bm.a,{title:j.lb("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),describe:a,updateSection:this.handleUpdateSection,section:"open_invite"})}if("invite_id"===this.props.activeSection&&this.props.canInviteTeamMembers){const e=[];e.push(O.a.createElement("div",{key:"teamInviteSetting"},O.a.createElement("div",{className:"row"},O.a.createElement("label",{className:"col-sm-5 control-label visible-xs-block"}),O.a.createElement("div",{className:"col-sm-12"},O.a.createElement("input",{id:"teamInviteId",autoFocus:!0,className:"form-control",type:"text",value:this.state.invite_id,maxLength:"32",onFocus:j.nb,readOnly:!0}))),O.a.createElement("div",{className:"setting-list__hint"},O.a.createElement(ee.a,{id:"general_tab.codeLongDesc",defaultMessage:"The Invite Code is part of the unique team invitation link which is sent to members you’re inviting to this team. Regenerating the code creates a new invitation link and invalidates the previous link.",values:{getTeamInviteLink:O.a.createElement("strong",null,O.a.createElement(ee.a,{id:"general_tab.getTeamInviteLink",defaultMessage:"Get Team Invite Link"}))}})))),a=O.a.createElement(gm.a,{title:j.lb("general_tab.codeTitle","Invite Code"),inputs:e,submit:this.handleInviteIdSubmit,serverError:l,clientError:o,updateSection:this.handleUpdateSection,saveButtonText:j.lb("general_tab.regenerate","Regenerate")})}else this.props.canInviteTeamMembers&&(a=O.a.createElement(bm.a,{title:j.lb("general_tab.codeTitle","Invite Code"),describe:j.lb("general_tab.codeDesc","Click 'Edit' to regenerate Invite Code."),updateSection:this.handleUpdateSection,section:"invite_id"}));if("name"===this.props.activeSection){const e=[];let t=O.a.createElement(ee.a,{id:"general_tab.teamName",defaultMessage:"Team Name"});j.cb()&&(t=""),e.push(O.a.createElement("div",{key:"teamNameSetting",className:"form-group"},O.a.createElement("label",{className:"col-sm-5 control-label"},t),O.a.createElement("div",{className:"col-sm-7"},O.a.createElement("input",{id:"teamName",autoFocus:!0,className:"form-control",type:"text",maxLength:N.Q.MAX_TEAMNAME_LENGTH.toString(),onChange:this.updateName,value:this.state.name,onFocus:j.nb}))));const a=O.a.createElement("span",null,j.lb("general_tab.teamNameInfo","Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar."));n=O.a.createElement(gm.a,{title:j.lb("general_tab.teamName","Team Name"),inputs:e,submit:this.handleNameSubmit,serverError:l,clientError:o,updateSection:this.handleUpdateSection,extraInfo:a})}else{var c=this.state.name;n=O.a.createElement(bm.a,{title:j.lb("general_tab.teamName","Team Name"),describe:c,updateSection:this.handleUpdateSection,section:"name"})}if("description"===this.props.activeSection){const e=[];let t=O.a.createElement(ee.a,{id:"general_tab.teamDescription",defaultMessage:"Team Description"});j.cb()&&(t=""),e.push(O.a.createElement("div",{key:"teamDescriptionSetting",className:"form-group"},O.a.createElement("label",{className:"col-sm-5 control-label"},t),O.a.createElement("div",{className:"col-sm-7"},O.a.createElement("input",{id:"teamDescription",autoFocus:!0,className:"form-control",type:"text",maxLength:N.Q.MAX_TEAMDESCRIPTION_LENGTH.toString(),onChange:this.updateDescription,value:this.state.description,onFocus:j.nb}))));const a=O.a.createElement("span",null,j.lb("general_tab.teamDescriptionInfo","Team description provides additional information to help users select the right team. Maximum of 50 characters."));s=O.a.createElement(gm.a,{title:j.lb("general_tab.teamDescription","Team Description"),inputs:e,submit:this.handleDescriptionSubmit,serverError:l,clientError:o,updateSection:this.handleUpdateSection,extraInfo:a})}else{let e="";e=this.state.description?this.state.description:O.a.createElement(ee.a,{id:"general_tab.emptyDescription",defaultMessage:"Click 'Edit' to add a team description."}),s=O.a.createElement(bm.a,{title:j.lb("general_tab.teamDescription","Team Description"),describe:e,updateSection:this.handleUpdateSection,section:"description"})}if("team_icon"===this.props.activeSection){const t=O.a.createElement(Ki.b,{id:"setting_picture.help.team",defaultMessage:"Upload a team icon in BMP, JPG or PNG format.\\nSquare images with a solid background color are recommended."});i=O.a.createElement(fm.a,{imageContext:"team",title:j.lb("general_tab.teamIcon","Team Icon"),src:j.N(e),file:this.state.teamIconFile,serverError:this.state.serverError,clientError:this.state.clientError,loadingPicture:this.state.loadingIcon,submitActive:this.state.submitActive,updateSection:e=>{this.updateSection(""),e.preventDefault()},onFileChange:this.updateTeamIcon,onSubmit:this.handleTeamIconSubmit,onRemove:this.handleTeamIconRemove,helpText:t})}else{let t;t=e.last_team_icon_update?O.a.createElement(ee.a,{id:"general_tab.teamIconLastUpdated",defaultMessage:"Image last updated {date}",values:{date:O.a.createElement(pm.a,{value:new Date(e.last_team_icon_update),day:"2-digit",month:"short",year:"numeric"})}}):j.cb()?j.lb("general_tab.teamIconEditHintMobile","Click to upload an image"):j.lb("general_tab.teamIconEditHint","Click 'Edit' to upload an image."),i=O.a.createElement(bm.a,{title:j.lb("general_tab.teamIcon","Team Icon"),describe:t,section:"team_icon",updateSection:this.handleUpdateSection})}if("allowed_domains"===this.props.activeSection){const e=[];e.push(O.a.createElement("div",{key:"allowedDomainsSetting",className:"form-group"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement(Ee.a,{id:"allowedDomains",autoFocus:!0,className:"form-control",type:"text",onChange:this.updateAllowedDomains,value:this.state.allowed_domains,onFocus:j.nb,placeholder:{id:Object(ve.b)("general_tab.AllowedDomainsExample"),defaultMessage:"corp.mattermost.com, mattermost.org"},"aria-label":j.lb("general_tab.allowedDomains.ariaLabel","Allowed Domains")}))));const t=O.a.createElement("span",null,j.lb("general_tab.AllowedDomainsInfo",'Users can only join the team if their email matches a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").'));r=O.a.createElement(gm.a,{title:j.lb("general_tab.allowedDomains","Allow only users with a specific email domain to join this team"),inputs:e,submit:this.handleAllowedDomainsSubmit,serverError:l,clientError:o,updateSection:this.handleUpdateSection,extraInfo:t})}else{let e="";e=this.state.allowed_domains?this.state.allowed_domains:O.a.createElement(ee.a,{id:"general_tab.allowedDomainsEdit",defaultMessage:"Click 'Edit' to add an email domain whitelist."}),r=O.a.createElement(bm.a,{title:j.lb("general_tab.allowedDomains","allowedDomains"),describe:e,updateSection:this.handleUpdateSection,section:"allowed_domains"})}return O.a.createElement("div",null,O.a.createElement("div",{className:"modal-header"},O.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},O.a.createElement("span",{"aria-hidden":"true"},"×")),O.a.createElement("h4",{className:"modal-title",ref:"title"},O.a.createElement("div",{className:"modal-back"},O.a.createElement("span",{onClick:this.props.collapseModal},O.a.createElement(_m.a,null))),O.a.createElement(ee.a,{id:"general_tab.title",defaultMessage:"General Settings"}))),O.a.createElement("div",{ref:"wrapper",className:"user-settings"},O.a.createElement("h3",{className:"tab-header"},O.a.createElement(ee.a,{id:"general_tab.title",defaultMessage:"General Settings"})),O.a.createElement("div",{className:"divider-dark first"}),n,O.a.createElement("div",{className:"divider-light"}),s,O.a.createElement("div",{className:"divider-light"}),i,!e.group_constrained&&O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"divider-light"}),r),O.a.createElement("div",{className:"divider-light"}),t,!e.group_constrained&&O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"divider-light"}),a),O.a.createElement("div",{className:"divider-dark"})))}}ym(wm,"propTypes",{updateSection:C.a.func.isRequired,team:C.a.object.isRequired,activeSection:C.a.string.isRequired,closeModal:C.a.func.isRequired,collapseModal:C.a.func.isRequired,maxFileSize:C.a.number.isRequired,actions:C.a.shape({getTeam:C.a.func.isRequired,patchTeam:C.a.func.isRequired,regenerateTeamInviteId:C.a.func.isRequired,removeTeamIcon:C.a.func.isRequired,setTeamIcon:C.a.func.isRequired}).isRequired,canInviteTeamMembers:C.a.bool.isRequired});var Om=Object(n.connect)((function(e,t){const a=Object(m.getConfig)(e);return{maxFileSize:parseInt(a.MaxFileSize,10),canInviteTeamMembers:Object(U.haveITeamPermission)(e,{team:t.team.id,permission:x.Permissions.INVITE_USER})}}),(function(e){return{actions:Object(s.bindActionCreators)({getTeam:l.getTeam,patchTeam:l.patchTeam,regenerateTeamInviteId:l.regenerateTeamInviteId,removeTeamIcon:l.removeTeamIcon,setTeamIcon:l.setTeamIcon},e)}}))(wm);function Tm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Sm extends O.a.PureComponent{constructor(e){super(e),Tm(this,"doFileSelect",e=>{e.preventDefault();var t=As()(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}),Tm(this,"openFileSelect",()=>{this.uploadinput.current.value="",this.uploadinput.current.click()}),Tm(this,"doSubmit",e=>{e.preventDefault();var t=Ii.a.findDOMNode(this.uploadinput.current);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:!0})}),this.uploadinput=O.a.createRef(),this.state={clientError:"",serverError:"",filename:""}}render(){let e=null;this.state.clientError&&(e=O.a.createElement("div",{className:"file-status"},O.a.createElement(ee.a,{id:"setting_upload.noFile",defaultMessage:"No file selected."})));let t=null;this.state.serverError&&(t=O.a.createElement("div",{className:"file-status"},this.state.serverError));let a=null,n="btn btn-sm btn-primary disabled";return this.state.filename&&(a=O.a.createElement("div",{className:"file-status file-name"},this.state.filename),n="btn btn-sm btn-primary"),O.a.createElement("ul",{className:"section-max"},O.a.createElement("li",{className:"col-sm-12 section-title"},this.props.title),O.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),O.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},O.a.createElement("ul",{className:"setting-list"},O.a.createElement("li",{className:"setting-list-item"},O.a.createElement("input",{ref:this.uploadinput,accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect,tabIndex:"-1","aria-hidden":!0}),O.a.createElement("button",{onClick:this.openFileSelect,className:"btn btn-sm btn-primary btn-file sel-btn"},O.a.createElement(ee.a,{id:"setting_upload.select",defaultMessage:"Select file"})),O.a.createElement("a",{className:n,onClick:this.doSubmit},O.a.createElement(ee.a,{id:"setting_upload.import",defaultMessage:"Import"})),a,t,e))))}}Sm.propTypes={title:C.a.node.isRequired,submit:C.a.func.isRequired,fileTypesAccepted:C.a.string.isRequired,helpText:C.a.object};var Pm=a(1172);function Mm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Nm=Object(ps.defineMessages)({importSlack:{id:Object(ve.b)("team_import_tab.importSlack"),defaultMessage:"Import from Slack (Beta)"}});class Im extends O.a.PureComponent{constructor(e){super(e),Mm(this,"onImportFailure",()=>{this.setState({status:"fail"})}),Mm(this,"onImportSuccess",e=>{this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(atob(e.results))})}),Mm(this,"doImportSlack",e=>{this.setState({status:"in-progress",link:""}),j.P(this.props.team.id,e,this.onImportSuccess,this.onImportFailure)}),this.state={status:"ready",link:""}}render(){const e=O.a.createElement("a",{href:"https://docs.mattermost.com/administration/migrating.html#migrating-from-slack",target:"_blank",rel:"noopener noreferrer"},O.a.createElement(ee.a,{id:"team_import_tab.importHelpDocsLink",defaultMessage:"documentation"})),t=O.a.createElement("strong",null,O.a.createElement(ee.a,{id:"team_import_tab.importHelpExportInstructions",defaultMessage:"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export"})),a=O.a.createElement("a",{href:"https://github.com/grundleborg/slack-advanced-exporter",target:"_blank",rel:"noopener noreferrer"},O.a.createElement(ee.a,{id:"team_import_tab.importHelpExporterLink",defaultMessage:"Slack Advanced Exporter"})),n=O.a.createElement("a",{href:"https://docs.mattermost.com/administration/migrating.html#migrating-from-slack-using-the-mattermost-cli",target:"_blank",rel:"noopener noreferrer"},O.a.createElement(ee.a,{id:"team_import_tab.importHelpCliDocsLink",defaultMessage:"CLI tool for Slack import"})),s=O.a.createElement("div",null,O.a.createElement("p",null,O.a.createElement(ee.a,{id:"team_import_tab.importHelpLine1",defaultMessage:"Slack import to Mattermost supports importing of messages in your Slack team's public channels."})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"team_import_tab.importHelpLine2",defaultMessage:"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.",values:{exportInstructions:t,uploadDocsLink:e}})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"team_import_tab.importHelpLine3",defaultMessage:"To import posts with attached files, see {slackAdvancedExporterLink} for details.",values:{slackAdvancedExporterLink:a}})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"team_import_tab.importHelpLine4",defaultMessage:"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.",values:{cliLink:n}}))),i=O.a.createElement(Sm,{title:O.a.createElement(ee.a,Nm.importSlack),submit:this.doImportSlack,helpText:s,fileTypesAccepted:".zip"});let r;switch(this.state.status){case"ready":r="";break;case"in-progress":r=O.a.createElement("p",{className:"confirm-import alert alert-warning"},O.a.createElement(oc.a,{text:j.lb("team_import_tab.importing","Importing...")}));break;case"done":r=O.a.createElement("p",{className:"confirm-import alert alert-success"},O.a.createElement(Jn.a,null),O.a.createElement(ee.a,{id:"team_import_tab.successful",defaultMessage:" Import successful: "}),O.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},O.a.createElement(ee.a,{id:"team_import_tab.summary",defaultMessage:"View Summary"})));break;case"fail":r=O.a.createElement("p",{className:"confirm-import alert alert-warning"},O.a.createElement(Pm.a,null),O.a.createElement(ee.a,{id:"team_import_tab.failure",defaultMessage:" Import failure: "}),O.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},O.a.createElement(ee.a,{id:"team_import_tab.summary",defaultMessage:"View Summary"})))}return O.a.createElement("div",null,O.a.createElement("div",{className:"modal-header"},O.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},O.a.createElement("span",{"aria-hidden":"true"},"×")),O.a.createElement("h4",{className:"modal-title",ref:"title"},O.a.createElement("div",{className:"modal-back"},O.a.createElement("span",{onClick:this.props.collapseModal},O.a.createElement(_m.a,null))),O.a.createElement(ee.a,{id:"team_import_tab.import",defaultMessage:"Import"}))),O.a.createElement("div",{ref:"wrapper",className:"user-settings"},O.a.createElement("h3",{className:"tab-header"},O.a.createElement(ee.a,{id:"team_import_tab.import",defaultMessage:"Import"})),O.a.createElement("div",{className:"divider-dark first"}),i,O.a.createElement("div",{className:"divider-dark"}),r))}}Mm(Im,"propTypes",{closeModal:C.a.func.isRequired,collapseModal:C.a.func.isRequired}),Im.propTypes={closeModal:C.a.func.isRequired,collapseModal:C.a.func.isRequired,team:C.a.object.isRequired};var jm=Object(te.c)(Im);const Am=({activeTab:e,activeSection:t,updateSection:a,closeModal:n,collapseModal:s,team:i})=>{if(!i)return null;let r;switch(e){case"general":r=O.a.createElement("div",null,O.a.createElement(Om,{team:i,activeSection:t,updateSection:a,closeModal:n,collapseModal:s}));break;case"import":r=O.a.createElement("div",null,O.a.createElement(jm,{team:i,activeSection:t,updateSection:a,closeModal:n,collapseModal:s}));break;default:r=O.a.createElement("div",null)}return r};Am.defaultProps={activeTab:"",activeSection:""},Am.propTypes={activeTab:C.a.string.isRequired,activeSection:C.a.string.isRequired,updateSection:C.a.func.isRequired,closeModal:C.a.func.isRequired,collapseModal:C.a.func.isRequired,team:C.a.object.isRequired};var Rm=Am;var km=Object(n.connect)((function(e){return{team:Object(h.getCurrentTeam)(e)}}))(Rm);function Lm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Dm=O.a.lazy(()=>a.e(3).then(a.bind(null,2017)));class xm extends O.a.PureComponent{constructor(e){super(e),Lm(this,"updateTab",e=>{this.setState({activeTab:e,activeSection:""})}),Lm(this,"updateSection",e=>{this.setState({activeSection:e})}),Lm(this,"collapseModal",()=>{As()(Ii.a.findDOMNode(this.modalBodyRef.current)).closest(".modal-dialog").removeClass("display--content"),this.setState({active_tab:"",active_section:""})}),Lm(this,"handleHide",()=>{this.setState({show:!1})}),Lm(this,"handleHidden",()=>{this.setState({activeTab:"general",activeSection:""}),this.props.onHide()}),this.state={activeTab:"general",activeSection:"",show:!0},this.modalBodyRef=O.a.createRef()}render(){const e=[];return e.push({name:"general",uiName:j.lb("team_settings_modal.generalTab","General"),icon:"icon fa fa-cog",iconTitle:j.lb("generic_icons.settings","Settings Icon")}),e.push({name:"import",uiName:j.lb("team_settings_modal.importTab","Import"),icon:"icon fa fa-upload",iconTitle:j.lb("generic_icons.upload","Upload Icon")}),O.a.createElement($.a,{dialogClassName:"a11y__modal settings-modal settings-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleHidden,role:"dialog","aria-labelledby":"teamSettingsModalLabel",id:"teamSettingsModal"},O.a.createElement($.a.Header,{id:"teamSettingsModalLabel",closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1"},O.a.createElement(ee.a,{id:"team_settings_modal.title",defaultMessage:"Team Settings"}))),O.a.createElement($.a.Body,{ref:this.modalBodyRef},O.a.createElement("div",{className:"settings-table"},O.a.createElement("div",{className:"settings-links"},O.a.createElement(O.a.Suspense,{fallback:null},O.a.createElement(Dm,{tabs:e,activeTab:this.state.activeTab,updateTab:this.updateTab}))),O.a.createElement("div",{className:"settings-content minimize-settings"},O.a.createElement(km,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection,closeModal:this.handleHide,collapseModal:this.collapseModal})))))}}Lm(xm,"propTypes",{onHide:C.a.func});var Um=Object(n.connect)((function(e){const t=N.u.TEAM_SETTINGS;return{show:Object(ed.a)(e,t)}}))(xm),qm=a(1516),Hm=a(1283);const Fm=e=>e.views.marketplace.plugins,Bm=e=>Object.values(Fm(e)).filter(e=>""!==e.installed_version);function Gm(e=!1){return async(t,a)=>{const n=(e=>e.views.marketplace.filter)(a());try{const a=await En.Client4.getMarketplacePlugins(n,e);return t({type:N.f.RECEIVED_MARKETPLACE_PLUGINS,plugins:a}),{plugins:a}}catch(a){return"app.plugin.marketplace_client.failed_to_fetch"!==a.server_error_id||e||await t(Gm(!0)),{error:a}}}}function Vm(e,t){return async(a,n)=>{if(a({type:N.f.INSTALLING_MARKETPLACE_PLUGIN,id:e}),((e,t)=>Fm(e).find(e=>e.manifest&&e.manifest.id===t))(n(),e)){try{await En.Client4.installMarketplacePlugin(e,t)}catch(t){return void a({type:N.f.INSTALLING_MARKETPLACE_PLUGIN_FAILED,id:e,error:t.message})}await a(Gm()),a({type:N.f.INSTALLING_MARKETPLACE_PLUGIN_SUCCEEDED,id:e})}else a({type:N.f.INSTALLING_MARKETPLACE_PLUGIN_FAILED,id:e,error:"Unknown plugin: "+e})}}function Wm(e){return async t=>(t({type:N.f.FILTER_MARKETPLACE_PLUGINS,filter:e}),t(Gm()))}var zm=a(1227);class Km extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.plugin",defaultMessage:"Plugin Icon"},e=>O.a.createElement("svg",{width:"61px",height:"61px",viewBox:"0 0 61 61","aria-label":e},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-347.000000, -211.000000)",fill:"inherit"},O.a.createElement("g",{transform:"translate(377.585786, 241.500000) rotate(-315.000000) translate(-377.585786, -241.500000) translate(358.585786, 200.000000)"},O.a.createElement("g",{transform:"translate(0.000000, -0.000000)"},O.a.createElement("path",{d:"M3.28846154,6.10822511 L3.05411255,6.10822511 C1.36737277,6.10822511 2.06566048e-16,4.74085234 0,3.05411255 C-2.06566048e-16,1.36737277 1.36737277,-7.78498519e-14 3.05411255,-7.81597009e-14 L34.9458874,-7.81597009e-14 C36.6326272,-8.16905472e-14 38,1.36737277 38,3.05411255 C38,4.74085234 36.6326272,6.10822511 34.9458874,6.10822511 L34.7115385,6.10822511 L34.7115385,14.7316017 C34.7115385,20.9798931 29.0184395,26.1638765 21.5576923,27.1415606 L21.5576923,33.1964286 C21.5576923,34.5081049 20.4943686,35.5714286 19.1826923,35.5714286 C17.871016,35.5714286 16.8076923,34.5081049 16.8076923,33.1964286 L16.8076923,27.1859094 C9.16823824,26.3322077 3.28846154,21.0815081 3.28846154,14.7316017 L3.28846154,6.10822511 Z M19.1431901,14.7316017 C17.8533303,14.7316017 16.8076923,15.7772397 16.8076923,17.0670996 C16.8076923,18.3569594 17.8533303,19.4025974 19.1431901,19.4025974 L19.2221945,19.4025974 C20.5120543,19.4025974 21.5576923,18.3569594 21.5576923,17.0670996 C21.5576923,15.7772397 20.5120543,14.7316017 19.2221945,14.7316017 L19.1431901,14.7316017 Z",transform:"translate(19.000000, 17.785714) rotate(-180.000000) translate(-19.000000, -17.785714) "}),O.a.createElement("path",{d:"M32.1538462,53.5367965 L34.7115385,53.5367965 L34.7115385,62.1601732 C34.7115385,68.4084646 29.0184395,73.592448 21.5576923,74.5701321 L21.5576923,80.625 C21.5576923,81.9366763 20.4943686,83 19.1826923,83 C17.871016,83 16.8076923,81.9366763 16.8076923,80.625 L16.8076923,74.6144809 C9.16823824,73.7607791 3.28846154,68.5100796 3.28846154,62.1601732 L3.28846154,53.5367965 L3.05411255,53.5367965 C1.36737277,53.5367965 2.06566048e-16,52.1694238 0,50.482684 C-2.06566048e-16,48.7959442 1.36737277,47.4285714 3.05411255,47.4285714 L8.40384615,47.4285714 L8.40384615,42.2581169 C8.40384615,40.9464406 9.46716987,39.8831169 10.7788462,39.8831169 C12.0905224,39.8831169 13.1538462,40.9464406 13.1538462,42.2581169 L13.1538462,47.4285714 L24.8461538,47.4285714 L24.8461538,42.2581169 C24.8461538,40.9464406 25.9094776,39.8831169 27.2211538,39.8831169 C28.5328301,39.8831169 29.5961538,40.9464406 29.5961538,42.2581169 L29.5961538,47.4285714 L34.9458874,47.4285714 C36.6326272,47.4285714 38,48.7959442 38,50.482684 C38,52.1694238 36.6326272,53.5367965 34.9458874,53.5367965 L32.1538462,53.5367965 Z M19.1431901,62.1601732 C17.8533303,62.1601732 16.8076923,63.2058112 16.8076923,64.495671 C16.8076923,65.7855308 17.8533303,66.8311688 19.1431901,66.8311688 L19.2221945,66.8311688 C20.5120543,66.8311688 21.5576923,65.7855308 21.5576923,64.495671 C21.5576923,63.2058112 20.5120543,62.1601732 19.2221945,62.1601732 L19.1431901,62.1601732 Z",transform:"translate(19.000000, 61.441558) rotate(-360.000000) translate(-19.000000, -61.441558) "}))))))))}}var Ym=a(1125),Qm=(a(1738),a(345)),Zm=a.n(Qm),Jm=a(1442);function Xm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $m=({version:e,releaseNotesUrl:t})=>t?O.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},e):e;$m.propTypes={version:C.a.string.isRequired,releaseNotesUrl:C.a.string};const eu=({name:e,description:t,url:a,color:n})=>{const s=O.a.createElement("span",{className:"tag",style:{backgroundColor:n||""}},e.toUpperCase());let i;return i=t?O.a.createElement(mi.a,{delayShow:N.j.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,{id:"plugin-marketplace_label_"+e.toLowerCase()+"-tooltip"},t)},s):s,a?O.a.createElement("a",{"aria-label":e.toLowerCase(),className:"style--none more-modal__row--link",target:"_blank",rel:"noopener noreferrer",href:a},i):i};eu.propTypes={name:C.a.string.isRequired,description:C.a.string,url:C.a.string,color:C.a.string};const tu=({version:e,releaseNotesUrl:t,installedVersion:a,isInstalling:n,onUpdate:s})=>{if(!a||n)return null;var i=!1;try{i=Zm.a.gt(e,a)}catch(e){}return i?O.a.createElement("div",{className:ws()("update")},O.a.createElement(ee.a,{id:"marketplace_modal.list.update_available",defaultMessage:"Update available:"})," ",O.a.createElement($m,{version:e,releaseNotesUrl:t})," - ",O.a.createElement("b",null,O.a.createElement("a",{onClick:s},O.a.createElement(ee.a,{id:"marketplace_modal.list.update",defaultMessage:"Update"})))):null};tu.propTypes={version:C.a.string.isRequired,releaseNotesUrl:C.a.string,installedVersion:C.a.string,isInstalling:C.a.bool.isRequired,onUpdate:C.a.func.isRequired};const au=({show:e,name:t,version:a,installedVersion:n,releaseNotesUrl:s,onUpdate:i,onCancel:r})=>{if(!n)return null;var o=!1;try{o=Zm.a.gt(a,n)}catch(e){}if(!o)return null;const l=[O.a.createElement("p",{key:"intro"},O.a.createElement(ee.a,{id:"marketplace_modal.list.update_confirmation.message.intro",defaultMessage:"Are you sure you want to update the ".concat(t," plugin to ").concat(a,"?"),values:{name:t,version:a}}))];s?l.push(O.a.createElement("p",{key:"current"},O.a.createElement(Jm.a,{id:"marketplace_modal.list.update_confirmation.message.current_with_release_notes",defaultMessage:"You currently have ".concat(n,' installed. View the <a href="').concat(s,"\" target='_blank' rel='noopener noreferrer'>release notes</a> to learn about the changes included in this update."),values:{installedVersion:n,releaseNotesUrl:s}}))):l.push(O.a.createElement("p",{key:"current"},O.a.createElement(ee.a,{id:"marketplace_modal.list.update_confirmation.message.current",defaultMessage:"You currently have ".concat(n," installed."),values:{installedVersion:n}})));let c=!1;try{c=Zm.a.major(a)===Zm.a.major(n)}catch(e){}return c||(s?l.push(O.a.createElement("p",{className:"alert alert-warning",key:"warning"},O.a.createElement(Jm.a,{id:"marketplace_modal.list.update_confirmation.message.warning_major_version_with_release_notes",defaultMessage:'This update may contain breaking changes. Consult the <a href="'.concat(s,"\" target='_blank' rel='noopener noreferrer'>release notes</a> before upgrading."),values:{releaseNotesUrl:s}}))):l.push(O.a.createElement("p",{className:"alert alert-warning",key:"warning"},O.a.createElement(ee.a,{id:"marketplace_modal.list.update_confirmation.message.warning_major_version",defaultMessage:"This update may contain breaking changes."})))),O.a.createElement(ns.a,{show:e,title:O.a.createElement(ee.a,{id:"marketplace_modal.list.update_confirmation.title",defaultMessage:"Confirm Plugin Update"}),message:l,confirmButtonText:O.a.createElement(ee.a,{id:"marketplace_modal.list.update_confirmation.confirm_button",defaultMessage:"Update"}),onConfirm:i,onCancel:r})};au.propTypes={show:C.a.bool.isRequired,name:C.a.string.isRequired,version:C.a.string.isRequired,releaseNotesUrl:C.a.string,installedVersion:C.a.string,onUpdate:C.a.func.isRequired,onCancel:C.a.func.isRequired};class nu extends O.a.PureComponent{constructor(){super(),Xm(this,"trackEvent",(e,t=!0)=>{this.props.isDefaultMarketplace&&t?this.props.trackEvent("plugins",e,{plugin_id:this.props.id,version:this.props.version,installed_version:this.props.installedVersion}):this.props.trackEvent("plugins",e)}),Xm(this,"onInstall",()=>{this.trackEvent("ui_marketplace_download"),this.props.actions.installPlugin(this.props.id,this.props.version)}),Xm(this,"showUpdateConfirmationModal",()=>{this.setState({showUpdateConfirmationModal:!0})}),Xm(this,"hideUpdateConfirmationModal",()=>{this.setState({showUpdateConfirmationModal:!1})}),Xm(this,"onUpdate",()=>{this.trackEvent("ui_marketplace_download_update"),this.hideUpdateConfirmationModal(),this.props.actions.installPlugin(this.props.id,this.props.version)}),Xm(this,"onConfigure",()=>{this.trackEvent("ui_marketplace_configure",!1),this.props.actions.closeMarketplaceModal()}),this.state={showUpdateConfirmationModal:!1}}getItemButton(){let e=O.a.createElement(ee.a,{id:"marketplace_modal.list.Install",defaultMessage:"Install"});this.props.error&&(e=O.a.createElement(ee.a,{id:"marketplace_modal.list.try_again",defaultMessage:"Try Again"}));let t=O.a.createElement("button",{onClick:this.onInstall,className:"btn btn-primary",disabled:this.props.installing},O.a.createElement(Nc.a,{loading:this.props.installing,text:Object(j.lb)("marketplace_modal.installing","Installing...")},e));return""===this.props.installedVersion||this.props.installing||this.props.error||(t=O.a.createElement(jn.a,{to:"/admin_console/plugins/plugin_"+this.props.id},O.a.createElement("button",{onClick:this.onConfigure,className:"btn btn-outline"},O.a.createElement(ee.a,{id:"marketplace_modal.list.configure",defaultMessage:"Configure"})))),t}render(){const e="".concat(this.props.name,", ").concat(this.props.description).toLowerCase();let t,a,n="(".concat(this.props.version,")");""!==this.props.installedVersion&&(n="(".concat(this.props.installedVersion,")")),t=this.props.iconData?O.a.createElement("div",{className:"icon__plugin icon__plugin--background"},O.a.createElement("img",{src:this.props.iconData})):O.a.createElement(Km,{className:"icon__plugin icon__plugin--background"}),this.props.labels&&0!==this.props.labels.length&&(a=this.props.labels.map(e=>O.a.createElement(eu,{key:e.name,name:e.name,description:e.description,url:e.url,color:e.color})));const s=O.a.createElement(O.a.Fragment,null,this.props.name,O.a.createElement("span",{className:"light subtitle"},n),a,O.a.createElement("p",{className:ws()("more-modal__description",{error_text:this.props.error})},this.props.error?this.props.error:this.props.description));let i;return i=this.props.homepageUrl?O.a.createElement("a",{"aria-label":e,className:"style--none more-modal__row--link",target:"_blank",rel:"noopener noreferrer",href:this.props.homepageUrl},s):O.a.createElement("span",{"aria-label":e,className:"style--none"},s),O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:ws()("more-modal__row","more-modal__row--link",{item_error:this.props.error}),key:this.props.id,id:"marketplace-plugin-"+this.props.id},t,O.a.createElement("div",{className:"more-modal__details"},i,O.a.createElement(tu,{version:this.props.version,installedVersion:this.props.installedVersion,releaseNotesUrl:this.props.releaseNotesUrl,isInstalling:this.props.installing,onUpdate:this.showUpdateConfirmationModal})),O.a.createElement("div",{className:"more-modal__actions"},this.getItemButton()),O.a.createElement(au,{show:this.state.showUpdateConfirmationModal,name:this.props.name,version:this.props.version,installedVersion:this.props.installedVersion,releaseNotesUrl:this.props.releaseNotesUrl,onUpdate:this.onUpdate,onCancel:this.hideUpdateConfirmationModal})))}}Xm(nu,"propTypes",{id:C.a.string.isRequired,name:C.a.string.isRequired,description:C.a.string.isRequired,version:C.a.string.isRequired,downloadUrl:C.a.string,homepageUrl:C.a.string,releaseNotesUrl:C.a.string,labels:C.a.array,iconData:C.a.string,installedVersion:C.a.string.isRequired,installing:C.a.bool.isRequired,error:C.a.string,isDefaultMarketplace:C.a.bool.isRequired,trackEvent:C.a.func.isRequired,actions:C.a.shape({installPlugin:C.a.func.isRequired,closeMarketplaceModal:C.a.func.isRequired}).isRequired});var su=Object(n.connect)((function(e,t){return{installing:((e,t)=>Boolean(e.views.marketplace.installing[t]))(e,t.id),error:((e,t)=>e.views.marketplace.errors[t])(e,t.id),isDefaultMarketplace:"true"===Object(m.getConfig)(e).IsDefaultMarketplace,trackEvent:qe.d}}),(function(e){return{actions:Object(s.bindActionCreators)({installPlugin:Vm,closeMarketplaceModal:()=>Object(q.a)(N.u.PLUGIN_MARKETPLACE)},e)}}))(nu);function iu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ru extends O.a.PureComponent{constructor(...e){super(...e),iu(this,"onClick",e=>{e.preventDefault(),this.props.onClick()})}render(){const{onClick:e,messageId:t,defaultMessage:a}=this.props;return O.a.createElement("button",{className:"btn btn-link",onClick:e},O.a.createElement(ee.a,{id:t,defaultMessage:a}))}}function ou(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}iu(ru,"propTypes",{onClick:C.a.func.isRequired,messageId:C.a.string.isRequired,defaultMessage:C.a.string.isRequired});class lu extends O.a.PureComponent{constructor(...e){super(...e),ou(this,"canShowNextButton",()=>{const{page:e,maximumPerPage:t,total:a}=this.props;return Math.trunc((a-1)/t)>e}),ou(this,"renderCount",()=>{const{page:e,total:t,maximumPerPage:a}=this.props,n=e*a,s=Math.min(n+a,t);return O.a.createElement(ee.a,{id:"marketplace_list.count_total_page",defaultMessage:"{startCount, number} - {endCount, number} {total, plural, one {plugin} other {plugins}} of {total, number} total",values:{startCount:n+1,endCount:s,total:t}})})}render(){const e=cu(this.props.theme);return O.a.createElement("div",{className:"navigation-row"},O.a.createElement("div",{className:"col-xs-2"},this.props.page>0&&O.a.createElement(ru,{onClick:this.props.onPreviousPageButtonClick,messageId:"more_channels.prev",defaultMessage:"Previous"})),O.a.createElement("div",{className:"col-xs-8 count",style:e.count},this.renderCount()),O.a.createElement("div",{className:"col-xs-2"},this.canShowNextButton()&&O.a.createElement(ru,{onClick:this.props.onNextPageButtonClick,messageId:"more_channels.next",defaultMessage:"Next"})))}}ou(lu,"propTypes",{page:C.a.number.isRequired,total:C.a.number.isRequired,maximumPerPage:C.a.number.isRequired,onNextPageButtonClick:C.a.func.isRequired,onPreviousPageButtonClick:C.a.func.isRequired,theme:C.a.object.isRequired});const cu=Object(he.makeStyleFromTheme)(e=>({count:{color:Object(he.changeOpacity)(e.centerChannelColor,.6)}}));var du=Object(n.connect)((function(e){return{theme:Object(d.getTheme)(e)}}))(lu);function mu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class uu extends O.a.PureComponent{static getDerivedStateFromProps(e,t){return t.page>0&&e.plugins.length<15?{page:0}:null}constructor(e){super(e),mu(this,"nextPage",()=>{this.setState(e=>({page:e.page+1}))}),mu(this,"previousPage",()=>{this.setState(e=>({page:e.page-1}))}),this.state={page:0}}render(){const e=15*this.state.page,t=e+15,a=this.props.plugins.slice(e,t);return O.a.createElement("div",{className:"more-modal__list"},a.map(e=>O.a.createElement(su,{key:e.manifest.id,id:e.manifest.id,name:e.manifest.name,description:e.manifest.description,version:e.manifest.version,isPrepackaged:!1,downloadUrl:e.download_url,homepageUrl:e.homepage_url,releaseNotesUrl:e.release_notes_url,labels:e.labels,iconData:e.icon_data,installedVersion:e.installed_version})),O.a.createElement(du,{page:this.state.page,total:this.props.plugins.length,maximumPerPage:15,onNextPageButtonClick:this.nextPage,onPreviousPageButtonClick:this.previousPage}))}}function hu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}mu(uu,"propTypes",{plugins:C.a.array.isRequired});const pu="allPlugins",gu="installed",bu=({plugins:e})=>0===e.length?O.a.createElement("div",{className:"no_plugins_div"},O.a.createElement("br",null),O.a.createElement(Km,{className:"icon__plugin"}),O.a.createElement("div",{className:"mt-3 light"},O.a.createElement(ee.a,{id:"marketplace_modal.no_plugins",defaultMessage:"There are no plugins available at this time."}))):O.a.createElement(uu,{plugins:e});bu.propTypes={plugins:C.a.array.isRequired};const fu=({installedPlugins:e,changeTab:t})=>0===e.length?O.a.createElement("div",{className:"no_plugins_div"},O.a.createElement("br",null),O.a.createElement(Km,{className:"icon__plugin"}),O.a.createElement("div",{className:"mt-3 light"},O.a.createElement(ee.a,{id:"marketplace_modal.no_plugins_installed",defaultMessage:"You do not have any plugins installed."})),O.a.createElement("button",{className:"mt-5 style--none color--link",onClick:()=>t(pu),"data-testid":"Install-Plugins-button"},O.a.createElement(ee.a,{id:"marketplace_modal.install_plugins",defaultMessage:"Install Plugins"}))):O.a.createElement(uu,{plugins:e});fu.propTypes={installedPlugins:C.a.array.isRequired,changeTab:C.a.func};class _u extends O.a.PureComponent{constructor(e){super(e),hu(this,"fetchPlugins",async()=>{const{error:e}=await this.props.actions.fetchPlugins();this.setState({loading:!1,serverError:e})}),hu(this,"close",()=>{Object(qe.d)("plugins","ui_marketplace_closed"),this.props.actions.closeModal()}),hu(this,"changeTab",e=>{this.setState({tabKey:e})}),hu(this,"onInput",()=>{this.setState({filter:this.refs.filter.value}),this.debouncedSearch()}),hu(this,"handleClearSearch",()=>{this.refs.filter.value="",this.setState({filter:this.refs.filter.value},this.doSearch)}),hu(this,"doSearch",async()=>{Object(qe.d)("plugins","ui_marketplace_search");const{error:e}=await this.props.actions.filterPlugins(this.state.filter);this.setState({serverError:e})}),hu(this,"debouncedSearch",Vt()(this.doSearch,200)),this.state={tabKey:pu,loading:!0,serverError:null,filter:""}}componentDidMount(){Object(qe.d)("plugins","ui_marketplace_opened"),this.fetchPlugins(),this.refs.filter&&this.refs.filter.focus()}componentDidUpdate(e){this.props.pluginStatuses!==e.pluginStatuses&&this.fetchPlugins()}render(){const e=O.a.createElement("div",{className:"filter-row filter-row--full"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement(zm.a,{id:"searchMarketplaceTextbox",ref:"filter",className:"form-control filter-textbox search_input",placeholder:{id:Object(ve.b)("marketplace_modal.search"),defaultMessage:"Search Plugins"},inputComponent:Ee.a,onInput:this.onInput,value:this.state.filter,clearable:!0,onClear:this.handleClearSearch})));let t=null;return this.state.serverError&&(t=O.a.createElement("div",{className:"error-bar",id:"error_bar"},O.a.createElement("div",{className:"error-bar__content"},O.a.createElement(Ki.b,{id:"app.plugin.marketplace_plugins.app_error",defaultMessage:"Error connecting to the marketplace server. Please check your settings in the [System Console]({siteURL}/admin_console/plugins/plugin_management).",values:{siteURL:this.props.siteURL}})))),O.a.createElement(cd,null,O.a.createElement(ld,{show:this.props.show,onClose:this.close,ariaLabel:Object(j.lb)("marketplace_modal.title","Plugin Marketplace")},t,O.a.createElement("div",{className:"modal-marketplace",id:"modal_marketplace"},O.a.createElement("h1",null,O.a.createElement("strong",null,O.a.createElement(ee.a,{id:"marketplace_modal.title",defaultMessage:"Plugin Marketplace"}))),e,O.a.createElement(de.a,{id:"marketplaceTabs",className:"tabs",defaultActiveKey:"allPlugins",activeKey:this.state.tabKey,onSelect:this.changeTab,unmountOnExit:!0},O.a.createElement(me.a,{eventKey:pu,title:Object(j.lb)("marketplace_modal.tabs.all_plugins","All Plugins")},this.state.loading?O.a.createElement(Ym.a,null):O.a.createElement(bu,{plugins:this.props.plugins})),O.a.createElement(me.a,{eventKey:gu,title:Object(j.lb)("marketplace_modal.tabs.installed_plugins","Installed")+" (".concat(this.props.installedPlugins.length,")")},O.a.createElement(fu,{installedPlugins:this.props.installedPlugins,changeTab:this.changeTab}))))))}}hu(_u,"propTypes",{show:C.a.bool,plugins:C.a.array.isRequired,installedPlugins:C.a.array.isRequired,siteURL:C.a.string.isRequired,pluginStatuses:C.a.object.isRequired,actions:C.a.shape({closeModal:C.a.func.isRequired,fetchPlugins:C.a.func.isRequired,filterPlugins:C.a.func.isRequired}).isRequired});var Eu=Object(n.connect)((function(e){return{show:Object(ed.a)(e,N.u.PLUGIN_MARKETPLACE),plugins:Fm(e),installedPlugins:Bm(e),siteURL:Object(Bs.e)(e),pluginStatuses:e.entities.admin.pluginStatuses}}),(function(e){return{actions:Object(s.bindActionCreators)({closeModal:()=>Object(q.a)(N.u.PLUGIN_MARKETPLACE),fetchPlugins:Gm,filterPlugins:Wm},e)}}))(_u);function vu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yu extends O.a.PureComponent{constructor(e){super(e),vu(this,"handleHide",()=>{this.setState({show:!1})}),vu(this,"handleExit",()=>{this.props.onHide&&this.props.onHide()}),vu(this,"onNext",()=>{const e=this.state.page+1;this.onPageChange(e)}),vu(this,"onPrev",()=>{const e=this.state.page-1;this.onPageChange(e)}),vu(this,"onPageChange",async e=>{this.setState({loading:!0});const t=await this.props.loadItems(e,this.state.searchTerm);this.setState({page:e,items:t.items,loading:!1})}),vu(this,"onSearchInput",async e=>{const{target:t}=e,a=t.value;this.setState({loading:!0,searchTerm:a});const n=await this.props.loadItems(0,a),{items:s,totalCount:i}=n;this.setState({loading:!1,items:s,totalCount:i})}),this.numPerPage=e.numPerPage||50,this.state={show:!0,page:0,items:[],totalCount:0,loading:!0,searchTerm:""}}async componentDidMount(){const{totalCount:e,items:t}=await this.props.loadItems(0,"");this.setState({totalCount:e,items:t,loading:!1})}renderRows(){return this.state.loading?O.a.createElement("div",null,O.a.createElement(Ym.a,{position:"absolute",key:"loading"})):this.state.items.map(e=>this.props.renderRow(e,this))}paginationRange(){let e=this.state.page*this.numPerPage+1;const t=e+this.state.items.length-1;return 0===t&&(e=0),{startCount:e,endCount:t}}render(){if(!this.props.show)return null;const{endCount:e,startCount:t}=this.paginationRange();return O.a.createElement("div",null,O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1"},O.a.createElement("span",{className:"name"},this.props.titleText)),this.props.titleBarButtonText&&this.props.titleBarButtonOnClick&&O.a.createElement("a",{className:"btn btn-md btn-primary",href:"#",onClick:this.props.titleBarButtonOnClick},this.props.titleBarButtonText)),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"filtered-user-list"},O.a.createElement("div",{className:"filter-row"},O.a.createElement("div",{className:"col-xs-12"},O.a.createElement("label",{className:"hidden-label",htmlFor:"searchUsersInput"},this.props.searchPlaceholderText),O.a.createElement("input",{id:"searchUsersInput",className:"form-control filter-textbox",placeholder:this.props.searchPlaceholderText,onChange:this.onSearchInput})),O.a.createElement("div",{className:"col-sm-12"},O.a.createElement("span",{className:"member-count pull-left"},O.a.createElement(ee.a,{id:"list_modal.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number} total",values:{startCount:t,endCount:e,total:this.state.totalCount}})))),O.a.createElement("div",{className:"more-modal__list"},O.a.createElement("div",null,this.renderRows())),O.a.createElement("div",{className:"filter-controls"},this.state.page>0&&O.a.createElement("button",{onClick:this.onPrev,className:"btn btn-link filter-control filter-control__prev"},O.a.createElement(ee.a,{id:"filtered_user_list.prev",defaultMessage:"Previous"})),this.state.items.length>=this.props.numPerPage&&e!==this.state.totalCount&&O.a.createElement("button",{onClick:this.onNext,className:"btn btn-link filter-control filter-control__next"},O.a.createElement(ee.a,{id:"filtered_user_list.next",defaultMessage:"Next"})))))))}}vu(yu,"propTypes",{loadItems:C.a.func.isRequired,renderRow:C.a.func.isRequired,onHide:C.a.func,titleText:C.a.string,searchPlaceholderText:C.a.string,titleBarButtonText:C.a.string,titleBarButtonOnClick:C.a.func,numPerPage:C.a.number,show:C.a.bool}),vu(yu,"defaultProps",{show:!0});var Cu=a(1268),wu=a.n(Cu);function Ou(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tu extends O.a.PureComponent{constructor(...e){super(...e),Ou(this,"state",{showConfirmModal:!1,item:{member_count:0},listModal:null}),Ou(this,"loadItems",async(e,t)=>{const{data:a}=await this.props.actions.getGroupsAssociatedToTeam(this.props.team.id,t,e,50,!0);return{items:a.groups,totalCount:a.totalGroupCount}}),Ou(this,"handleDeleteCanceled",()=>{this.setState({showConfirmModal:!1})}),Ou(this,"handleDeleteConfirmed",()=>{this.setState({showConfirmModal:!1});const{item:e,listModal:t}=this.state;this.props.actions.unlinkGroupSyncable(e.id,this.props.team.id,x.Groups.SYNCABLE_TYPE_TEAM).then(async()=>{t.setState({loading:!0});const{items:e,totalCount:a}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e,totalCount:a})})}),Ou(this,"onClickRemoveGroup",(e,t)=>{this.setState({showConfirmModal:!0,item:e,listModal:t})}),Ou(this,"onClickConfirmRemoveGroup",(e,t)=>this.props.actions.unlinkGroupSyncable(e.id,this.props.team.id,x.Groups.SYNCABLE_TYPE_TEAM).then(async()=>{t.setState({loading:!0});const{items:e,totalCount:a}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e,totalCount:a})})),Ou(this,"onHide",()=>{this.props.actions.closeModal(N.u.MANAGE_TEAM_GROUPS)}),Ou(this,"titleButtonOnClick",()=>{this.onHide(),this.props.actions.openModal({modalId:N.u.ADD_GROUPS_TO_TEAM,dialogType:Hm.a})}),Ou(this,"setTeamMemberStatus",async(e,t,a)=>{this.props.actions.patchGroupSyncable(e.id,this.props.team.id,x.Groups.SYNCABLE_TYPE_TEAM,{scheme_admin:a}).then(async()=>{t.setState({loading:!0});const{items:e,totalCount:a}=await t.props.loadItems(t.setState.page,t.state.searchTerm);this.props.actions.getMyTeamMembers(),t.setState({loading:!1,items:e,totalCount:a})})}),Ou(this,"renderRow",(e,t)=>{let a;return a=e.scheme_admin?j.lb("team_members_dropdown.teamAdmins","Team Admins"):j.lb("team_members_dropdown.teamMembers","Team Members"),O.a.createElement("div",{key:e.id,className:"more-modal__row"},O.a.createElement("img",{className:"more-modal__image",src:wu.a,alt:"group picture",width:"32",height:"32"}),O.a.createElement("div",{className:"more-modal__details"},O.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ","&nbsp;",O.a.createElement("span",{className:"more-modal__name_count"},O.a.createElement(ee.a,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),O.a.createElement("div",{className:"more-modal__actions"},O.a.createElement(ji.a,null,O.a.createElement("button",{id:"teamGroupsDropdown_".concat(e.display_name),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},O.a.createElement("span",null,a," "),O.a.createElement(sm.a,null)),O.a.createElement(Ai.a,{openLeft:!0,ariaLabel:j.lb("team_members_dropdown.menuAriaLabel","Change the role of a team member")},O.a.createElement(Ai.a.ItemAction,{show:!e.scheme_admin,onClick:()=>this.setTeamMemberStatus(e,t,!0),text:j.lb("team_members_dropdown.makeTeamAdmins","Make Team Admins")}),O.a.createElement(Ai.a.ItemAction,{show:Boolean(e.scheme_admin),onClick:()=>this.setTeamMemberStatus(e,t,!1),text:j.lb("team_members_dropdown.makeTeamMembers","Make Team Members")}),O.a.createElement(Ai.a.ItemAction,{onClick:()=>this.onClickRemoveGroup(e,t),text:j.lb("group_list_modal.removeGroupButton","Remove Group")})))))})}render(){const{formatMessage:e}=this.props.intl,t=this.state.item.member_count;return O.a.createElement(O.a.Fragment,null,O.a.createElement(yu,{show:!this.state.showConfirmModal,titleText:e({id:"groups",defaultMessage:"{team} Groups"},{team:this.props.team.display_name}),searchPlaceholderText:e({id:"manage_team_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick}),O.a.createElement(ns.a,{show:this.state.showConfirmModal,title:e({id:"remove_group_confirm_title",defaultMessage:"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),message:e({id:"remove_group_confirm_message",defaultMessage:"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?"},{memberCount:t}),confirmButtonText:e({id:"remove_group_confirm_button",defaultMessage:"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),onConfirm:this.handleDeleteConfirmed,onCancel:this.handleDeleteCanceled}))}}Ou(Tu,"propTypes",{intl:ne.a.isRequired,team:C.a.object.isRequired,actions:C.a.shape({getGroupsAssociatedToTeam:C.a.func.isRequired,unlinkGroupSyncable:C.a.func.isRequired,patchGroupSyncable:C.a.func.isRequired,getMyTeamMembers:C.a.func.isRequired,closeModal:C.a.func.isRequired,openModal:C.a.func.isRequired}).isRequired});var Su=Object(te.c)(Tu);var Pu=Object(n.connect)((e,t)=>({team:e.entities.teams.teams[t.teamID]}),e=>({actions:Object(s.bindActionCreators)({getGroupsAssociatedToTeam:c.getGroupsAssociatedToTeam,closeModal:q.a,openModal:q.b,unlinkGroupSyncable:c.unlinkGroupSyncable,patchGroupSyncable:c.patchGroupSyncable,getMyTeamMembers:l.getMyTeamMembers},e)}))(Su);function Mu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nu extends O.a.PureComponent{constructor(...e){super(...e),Mu(this,"toggleShortcutsModal",e=>{e.preventDefault(),M.m()}),Mu(this,"handleKeyDown",e=>{Object(j.e)(e)&&e.shiftKey&&Object(j.Z)(e,N.j.KeyCodes.A)&&this.props.actions.openModal({ModalId:N.u.USER_SETTINGS,dialogType:Gs.a})}),Mu(this,"handleEmitUserLoggedOutEvent",()=>{M.e()}),Mu(this,"getFlagged",e=>{e.preventDefault(),this.props.actions.showFlaggedPosts(),this.props.actions.closeRhsMenu()}),Mu(this,"searchMentions",e=>{e.preventDefault(),this.props.isMentionSearch?this.props.actions.closeRightHandSide():(this.props.actions.closeRhsMenu(),this.props.actions.showMentions())})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){const{currentUser:e,teamIsGroupConstrained:t,isLicensedForLDAPGroups:a}=this.props;if(!e)return null;const n=this.props.pluginMenuItems.map(e=>O.a.createElement(Ai.a.ItemAction,{id:e.id+"_pluginmenuitem",key:e.id+"_pluginmenuitem",onClick:()=>{e.action&&e.action()},text:e.text,icon:this.props.mobile&&e.mobileIcon})),s=this.props.enableIncomingWebhooks||this.props.enableOutgoingWebhooks||this.props.enableCommands||this.props.enableOAuthServiceProvider||this.props.canManageSystemBots,i=!this.props.mobile&&s&&this.props.canManageIntegrations,{formatMessage:r}=this.props.intl;return O.a.createElement(Ai.a,{mobile:this.props.mobile,id:this.props.id,ariaLabel:r({id:"navbar_dropdown.menuAriaLabel",defaultMessage:"main menu"})},O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemAction,{id:"recentMentions",show:this.props.mobile,onClick:this.searchMentions,icon:this.props.mobile&&O.a.createElement("i",{className:"mentions"},"@"),text:r({id:"sidebar_right_menu.recentMentions",defaultMessage:"Recent Mentions"})}),O.a.createElement(Ai.a.ItemAction,{id:"flaggedPosts",show:this.props.mobile,onClick:this.getFlagged,icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-flag"}),text:r({id:"sidebar_right_menu.flagged",defaultMessage:"Flagged Posts"})})),O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"accountSettings",modalId:N.u.USER_SETTINGS,dialogType:Gs.a,text:r({id:"navbar_dropdown.accountSettings",defaultMessage:"Account Settings"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-cog"})})),O.a.createElement(Ai.a.Group,null,O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"addGroupsToTeam",show:t&&a,modalId:N.u.ADD_GROUPS_TO_TEAM,dialogType:Hm.a,text:r({id:"navbar_dropdown.addGroupsToTeam",defaultMessage:"Add Groups to Team"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-user-plus"})})),O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.ADD_USER_TO_TEAM,x.Permissions.INVITE_GUEST]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"invitePeople",modalId:N.u.INVITATION,dialogType:zd,text:r({id:"navbar_dropdown.invitePeople",defaultMessage:"Invite People"}),extraText:r({id:"navbar_dropdown.invitePeopleExtraText",defaultMessage:"Add or invite people to the team"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-user-plus"})}))),O.a.createElement(Ai.a.Group,null,O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"teamSettings",modalId:N.u.TEAM_SETTINGS,dialogType:Um,text:r({id:"navbar_dropdown.teamSettings",defaultMessage:"Team Settings"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-globe"})})),O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_TEAM]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"manageGroups",show:t&&a,modalId:N.u.MANAGE_TEAM_GROUPS,dialogProps:{teamID:this.props.teamId},dialogType:Pu,text:r({id:"navbar_dropdown.manageGroups",defaultMessage:"Manage Groups"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-user-plus"})})),O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.REMOVE_USER_FROM_TEAM,x.Permissions.MANAGE_TEAM_ROLES]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"manageMembers",modalId:N.u.TEAM_MEMBERS,dialogType:hm,text:r({id:"navbar_dropdown.manageMembers",defaultMessage:"Manage Members"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-users"})})),O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.REMOVE_USER_FROM_TEAM,x.Permissions.MANAGE_TEAM_ROLES],invert:!0},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"viewMembers",modalId:N.u.TEAM_MEMBERS,dialogType:hm,text:r({id:"navbar_dropdown.viewMembers",defaultMessage:"View Members"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-users"})}))),O.a.createElement(Ai.a.Group,null,O.a.createElement(Yd.a,{permissions:[x.Permissions.CREATE_TEAM]},O.a.createElement(Ai.a.ItemLink,{id:"createTeam",to:"/create_team",text:r({id:"navbar_dropdown.create",defaultMessage:"Create a Team"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-plus-square"})})),O.a.createElement(Ai.a.ItemLink,{id:"joinTeam",show:!this.props.experimentalPrimaryTeam&&this.props.moreTeamsToJoin,to:"/select_team",text:r({id:"navbar_dropdown.join",defaultMessage:"Join Another Team"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-plus-square"})}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"leaveTeam",show:!t&&this.props.experimentalPrimaryTeam!==this.props.teamName,modalId:N.u.LEAVE_TEAM,dialogType:$d,text:r({id:"navbar_dropdown.leave",defaultMessage:"Leave Team"}),icon:this.props.mobile&&O.a.createElement(Qd,null)})),O.a.createElement(Ai.a.Group,null,n),O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemLink,{id:"integrations",show:i,to:"/"+this.props.teamName+"/integrations",text:r({id:"navbar_dropdown.integrations",defaultMessage:"Integrations"})}),O.a.createElement(Kd.a,{teamId:this.props.teamId,permissions:[x.Permissions.MANAGE_SYSTEM]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"marketplaceModal",modalId:N.u.PLUGIN_MARKETPLACE,show:!this.props.mobile&&this.props.enablePluginMarketplace,dialogType:Eu,text:r({id:"navbar_dropdown.marketplace",defaultMessage:"Plugin Marketplace"})})),O.a.createElement(Ai.a.ItemLink,{id:"customEmojis",show:!this.props.mobile&&this.props.enableCustomEmoji&&this.props.canCreateOrDeleteCustomEmoji,to:"/"+this.props.teamName+"/emoji",text:r({id:"navbar_dropdown.emoji",defaultMessage:"Custom Emoji"})})),O.a.createElement(Ai.a.Group,null,O.a.createElement(Yd.a,{permissions:[x.Permissions.MANAGE_SYSTEM]},O.a.createElement(Ai.a.ItemLink,{id:"systemConsole",show:!this.props.mobile,to:"/admin_console",text:r({id:"navbar_dropdown.console",defaultMessage:"System Console"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-wrench"})}))),O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemExternalLink,{id:"helpLink",show:Boolean(this.props.helpLink),url:this.props.helpLink,text:r({id:"navbar_dropdown.help",defaultMessage:"Help"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-question"})}),O.a.createElement(Ai.a.ItemAction,{id:"keyboardShortcuts",show:!this.props.mobile,onClick:this.toggleShortcutsModal,text:r({id:"navbar_dropdown.keyboardShortcuts",defaultMessage:"Keyboard Shortcuts"})}),O.a.createElement(Ai.a.ItemExternalLink,{id:"reportLink",show:Boolean(this.props.reportAProblemLink),url:this.props.reportAProblemLink,text:r({id:"navbar_dropdown.report",defaultMessage:"Report a Problem"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-phone"})}),O.a.createElement(Ai.a.ItemExternalLink,{id:"nativeAppLink",show:this.props.appDownloadLink&&!I.o(),url:Object(Bs.g)(this.props.appDownloadLink),text:r({id:"navbar_dropdown.nativeApps",defaultMessage:"Download Apps"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-mobile"})}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"about",modalId:N.u.ABOUT,dialogType:qm.a,text:r({id:"navbar_dropdown.about",defaultMessage:"About {appTitle}"},{appTitle:this.props.siteName||"Mattermost"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-info"})})),O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemAction,{id:"logout",onClick:this.handleEmitUserLoggedOutEvent,text:r({id:"navbar_dropdown.logout",defaultMessage:"Log Out"}),icon:this.props.mobile&&O.a.createElement("i",{className:"fa fa-sign-out"})})))}}Mu(Nu,"propTypes",{mobile:C.a.bool.isRequired,id:C.a.string,teamId:C.a.string,teamType:C.a.string,teamName:C.a.string,siteName:C.a.string,currentUser:C.a.object,appDownloadLink:C.a.string,enableCommands:C.a.bool.isRequired,enableCustomEmoji:C.a.bool.isRequired,enableIncomingWebhooks:C.a.bool.isRequired,enableOAuthServiceProvider:C.a.bool.isRequired,enableOutgoingWebhooks:C.a.bool.isRequired,canManageSystemBots:C.a.bool.isRequired,canCreateOrDeleteCustomEmoji:C.a.bool.isRequired,canManageIntegrations:C.a.bool.isRequired,enableUserCreation:C.a.bool.isRequired,enableEmailInvitations:C.a.bool.isRequired,enablePluginMarketplace:C.a.bool.isRequired,experimentalPrimaryTeam:C.a.string,helpLink:C.a.string,reportAProblemLink:C.a.string,moreTeamsToJoin:C.a.bool.isRequired,pluginMenuItems:C.a.arrayOf(C.a.object),isMentionSearch:C.a.bool,teamIsGroupConstrained:C.a.bool.isRequired,isLicensedForLDAPGroups:C.a.bool,intl:ne.a.isRequired,actions:C.a.shape({openModal:C.a.func.isRequred,showMentions:C.a.func,showFlaggedPosts:C.a.func,closeRightHandSide:C.a.func.isRequired,closeRhsMenu:C.a.func.isRequired}).isRequired}),Mu(Nu,"defaultProps",{teamType:"",mobile:!1,pluginMenuItems:[]});var Iu=Object(te.c)(Nu);var ju=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(h.getCurrentTeam)(e),n=Object(u.getCurrentUser)(e),s=t.AppDownloadLink,i="true"===t.EnableCommands,r="true"===t.EnableCustomEmoji,o=t.SiteName,l="true"===t.EnableIncomingWebhooks,c="true"===t.EnableOAuthServiceProvider,d="true"===t.EnableOutgoingWebhooks,p="true"===t.EnableUserCreation,g="true"===t.EnableEmailInvitations,b="true"===t.PluginsEnabled&&"true"===t.EnableMarketplace,f=t.ExperimentalPrimaryTeam,_=t.HelpLink,E=t.ReportAProblemLink;let v=Object(U.haveISystemPermission)(e,{permission:x.Permissions.CREATE_EMOJIS})||Object(U.haveISystemPermission)(e,{permission:x.Permissions.DELETE_EMOJIS});if(!v)for(const t of Object(h.getMyTeams)(e))if(Object(U.haveITeamPermission)(e,{team:t.id,permission:x.Permissions.CREATE_EMOJIS})||Object(U.haveITeamPermission)(e,{team:t.id,permission:x.Permissions.DELETE_EMOJIS})){v=!0;break}const y=Object(U.haveICurrentTeamPermission)(e,{permission:x.Permissions.MANAGE_SLASH_COMMANDS})||Object(U.haveICurrentTeamPermission)(e,{permission:x.Permissions.MANAGE_OAUTH})||Object(U.haveICurrentTeamPermission)(e,{permission:x.Permissions.MANAGE_INCOMING_WEBHOOKS})||Object(U.haveICurrentTeamPermission)(e,{permission:x.Permissions.MANAGE_OUTGOING_WEBHOOKS}),C=Object(U.haveISystemPermission)(e,{permission:x.Permissions.MANAGE_BOTS})||Object(U.haveISystemPermission)(e,{permission:x.Permissions.MANAGE_OTHERS_BOTS}),w=y||C,O=Object(h.getJoinableTeamIds)(e),T=O&&O.length>0,S=Object(ys.k)(e);return{appDownloadLink:s,enableCommands:i,enableCustomEmoji:r,canManageIntegrations:w,enableIncomingWebhooks:l,enableOAuthServiceProvider:c,enableOutgoingWebhooks:d,canManageSystemBots:C,enableUserCreation:p,enableEmailInvitations:g,enablePluginMarketplace:b,experimentalPrimaryTeam:f,helpLink:_,reportAProblemLink:E,pluginMenuItems:e.plugins.components.MainMenu,canCreateOrDeleteCustomEmoji:v,moreTeamsToJoin:T,siteName:o,teamId:a.id,teamName:a.name,teamType:a.type,currentUser:n,isMentionSearch:S===N.C.MENTION,teamIsGroupConstrained:Boolean(a.group_constrained),isLicensedForLDAPGroups:"true"===e.entities.general.license.LDAPGroups}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b,showMentions:vs.n,showFlaggedPosts:vs.m,closeRightHandSide:vs.b,closeRhsMenu:vs.a},e)}}))(Iu);function Au(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ru extends O.a.PureComponent{constructor(...e){super(...e),Au(this,"handleEmitUserLoggedOutEvent",()=>{M.e()})}render(){var e="";null!=this.props.siteName&&(e=this.props.siteName);var t=e;this.props.teamDisplayName&&(t=this.props.teamDisplayName);let a=null;return this.props.showTutorialTip&&(a=O.a.createElement($c,{onBottom:!0}),this.props.actions.openRhsMenu()),O.a.createElement("div",{className:ws()("sidebar--menu",{"move--left":this.props.isOpen&&j.cb()}),id:"sidebar-menu"},O.a.createElement("div",{className:"team__header theme"},O.a.createElement(jn.a,{className:"team__name",to:"/channels/".concat(N.j.DEFAULT_CHANNEL)},t)),O.a.createElement("div",{className:"nav-pills__container mobile-main-menu"},a,O.a.createElement(Bc.a,{in:this.props.isOpen&&j.cb(),classNames:"MobileRightSidebarMenu",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:500,exit:500}},O.a.createElement(ju,{mobile:!0}))))}}Au(Ru,"propTypes",{isOpen:C.a.bool.isRequired,teamDisplayName:C.a.string,showTutorialTip:C.a.bool.isRequired,siteName:C.a.string,actions:C.a.shape({openRhsMenu:C.a.func.isRequired})});var ku=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(h.getCurrentTeam)(e),n="true"===t.EnableTutorial,s=Object(d.getInt)(e,N.B.TUTORIAL_STEP,Object(u.getCurrentUserId)(e),N.K.FINISHED),i=t.SiteName;return{teamDisplayName:a&&a.display_name,isOpen:Object(ys.b)(e),showTutorialTip:n&&Object(j.cb)()&&s===N.K.MENU_POPOVER,siteName:i}}),(function(e){return{actions:Object(s.bindActionCreators)({openRhsMenu:vs.e},e)}}))(Ru);function Lu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Du=N.Q.ActionTypes;class xu extends O.a.PureComponent{constructor(e){super(e),Lu(this,"updateShow",(e,t)=>{this.setState({show:e,callback:t.callback})}),Lu(this,"handleSubmit",e=>{e.preventDefault();const t=this.state.value;if(!this.isInputValid(t))return void this.setState({inputError:O.a.createElement(ee.a,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})});const a=t.split(","),n={type:"custom"};n.sidebarBg=a[0],n.sidebarText=a[5],n.sidebarUnreadText=a[5],n.sidebarTextHoverBg=a[4],n.sidebarTextActiveBorder=a[2],n.sidebarTextActiveColor=a[3],n.sidebarHeaderBg=a[1],n.sidebarHeaderTextColor=a[5],n.onlineIndicator=a[6],n.mentionBg=a[7],Object(he.setThemeDefaults)(n),this.state.callback(n),this.setState({show:!1,callback:null})}),Lu(this,"handleChange",e=>{const t=e.target.value;this.setState({value:t}),this.isInputValid(t)?this.setState({inputError:null}):this.setState({inputError:O.a.createElement(ee.a,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})})}),Lu(this,"handleOnHide",()=>{this.setState({show:!1})}),this.state={value:"",inputError:"",show:!1,callback:null}}componentDidMount(){Zn.addModalListener(Du.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}componentWillUnmount(){Zn.removeModalListener(Du.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}isInputValid(e){if(0===e.length)return!1;if(-1!==e.indexOf(" "))return!1;if(e.length>0&&-1===e.indexOf(","))return!1;if(e.length>0){const t=e.split(",");if(8!==t.length)return!1;for(let e=0;e<t.length;e++){if(7!==t[e].length&&4!==t[e].length)return!1;if("#"!==t[e].charAt(0))return!1}}return!0}render(){return O.a.createElement("span",null,O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleOnHide,role:"dialog","aria-labelledby":"importThemeModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"importThemeModalLabel"},O.a.createElement(ee.a,{id:"user.settings.import_theme.importHeader",defaultMessage:"Import Slack Theme"}))),O.a.createElement("form",{role:"form",className:"form-horizontal"},O.a.createElement($.a.Body,null,O.a.createElement("p",null,O.a.createElement(ee.a,{id:"user.settings.import_theme.importBody",defaultMessage:'To import a theme, go to a Slack team and look for "Preferences -> Sidebar Theme". Open the custom theme option, copy the theme color values and paste them here:'})),O.a.createElement("div",{className:"form-group less"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement("input",{id:"themeVector",type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange}),O.a.createElement("div",{className:"input__help"},this.state.inputError)))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{id:"cancelButton",type:"button",className:"btn btn-link",onClick:this.handleOnHide},O.a.createElement(ee.a,{id:"user.settings.import_theme.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{id:"submitButton",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},O.a.createElement(ee.a,{id:"user.settings.import_theme.submit",defaultMessage:"Submit"}))))))}}var Uu=a(1515);function qu(e){return e.views.lhs.isOpen}var Hu=a(1509),Fu=a(1230),Bu=(a(187),a(1992));function Gu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vu extends O.a.PureComponent{constructor(...e){super(...e),Gu(this,"copy",()=>{let e=this.props.link;-1===e.indexOf("http://")&&-1===e.indexOf("https://")&&(e=this.props.siteURL+e),this.props.actions.copyToClipboard(e)})}render(){const e=O.a.createElement(Bu.a,{id:"copy-url-context-menu"+this.props.menuId},O.a.createElement(Bu.c,{onClick:this.copy},O.a.createElement(ee.a,{id:"copy_url_context_menu.getChannelLink",defaultMessage:"Copy Link"}))),t=O.a.createElement(Bu.b,{id:"copy-url-context-menu"+this.props.menuId,holdToDisplay:-1},this.props.children);return O.a.createElement("span",null,e,t)}}Gu(Vu,"propTypes",{children:C.a.element,link:C.a.string.isRequired,menuId:C.a.string.isRequired,siteURL:C.a.string.isRequired,actions:C.a.shape({copyToClipboard:C.a.func.isRequired})});var Wu=Object(n.connect)((function(e){return{siteURL:Object(m.getConfig)(e).SiteURL}}),(function(){return{actions:{copyToClipboard:j.g}}}))(Vu),zu=a(1217);function Ku(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Yu extends O.a.PureComponent{constructor(...e){super(...e),Ku(this,"handleSwitch",e=>{e.preventDefault(),Object(qe.b)("TeamLink#click"),Object(qe.d)("ui","ui_team_sidebar_switch_team"),this.props.switchTeam(this.props.url)}),Ku(this,"handleDisabled",e=>{e.preventDefault()})}render(){const{teamIconUrl:e,displayName:t,btnClass:a,mentions:n,unread:s,isDraggable:i=!1,teamIndex:r,teamId:o}=this.props,{formatMessage:l}=this.props.intl;let c=this.props.active?"active":"";const d=this.props.disabled?"team-disabled":"",m=!this.props.url.endsWith("create_team")&&!this.props.url.endsWith("select_team"),u=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch;let h,p=l({id:"team.button.ariaLabel",defaultMessage:"{teamName} team"},{teamName:t});c||(c=s?"unread":m?"":"special",p=l({id:"team.button.unread.ariaLabel",defaultMessage:"{teamName} team unread"},{teamName:t}),n&&(p=l({id:"team.button.mentions.ariaLabel",defaultMessage:"{teamName} team, {mentionCount} mentions"},{teamName:t,mentionCount:n}),h=O.a.createElement("span",{className:"badge pull-right small"},n))),p=p.toLowerCase();const g=O.a.createElement(zu.a,{withHover:!0,name:this.props.content||t,url:e});let b,f=this.props.tip||Object(j.lb)("team.button.name_undefined","This team does not have a name");if(void 0!==this.props.order&&this.props.order<10){let e;e=Object(j.bb)()?l({id:"team.button.tooltip.mac",defaultMessage:"⌘ ⌥ {order}"},{order:this.props.order}):l({id:"team.button.tooltip",defaultMessage:"Ctrl+Alt+{order}"},{order:this.props.order}),f=O.a.createElement(O.a.Fragment,null,f,O.a.createElement("div",{className:"tooltip-help"},e)),this.props.showOrder&&(b=O.a.createElement("div",{className:"order-indicator"},this.props.order))}const _=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:O.a.createElement(di.a,{id:"tooltip-".concat(this.props.url)},f)},O.a.createElement("div",{className:"team-btn "+a},h,g));let E=O.a.createElement(jn.a,{id:"".concat(this.props.url.slice(1),"TeamButton"),"aria-label":p,className:d,to:this.props.url,onClick:u},_);return Object(I.d)()&&m&&(E=O.a.createElement(Wu,{link:this.props.url,menuId:this.props.url},E)),i?O.a.createElement(Hu.b,{draggableId:o,index:r},(e,t)=>O.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:ws()(["team-container ".concat(c),{isDragging:t.isDragging}])}),E,b)):O.a.createElement("div",{className:"team-container ".concat(c)},E,b)}}Ku(Yu,"propTypes",{btnClass:C.a.string,url:C.a.string.isRequired,displayName:C.a.string,content:C.a.node,tip:C.a.node.isRequired,order:C.a.number,showOrder:C.a.bool.isRequired,active:C.a.bool,disabled:C.a.bool,unread:C.a.bool,mentions:C.a.number,placement:C.a.oneOf(["left","right","top","bottom"]),teamIconUrl:C.a.string,switchTeam:C.a.func.isRequired,intl:ne.a.isRequired,isDraggable:C.a.bool,teamIndex:C.a.number,teamId:C.a.string}),Ku(Yu,"defaultProps",{btnClass:"",tip:"",showOrder:!1,placement:"right",active:!1,disabled:!1,unread:!1,mentions:0});var Qu=Object(te.c)(Yu);function Zu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ju(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Xu(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function $u(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class eh extends O.a.PureComponent{constructor(e){super(e),Zu(this,"switchToPrevOrNextTeam",(e,t,a)=>{if(j.Z(e,N.j.KeyCodes.UP)||j.Z(e,N.j.KeyCodes.DOWN)){e.preventDefault();const n=j.Z(e,N.j.KeyCodes.DOWN)?1:-1,s=a.findIndex(e=>e.id===t)+n;let i;return i=-1===s?a[a.length-1]:s===a.length?a[0]:a[s],this.props.actions.switchTeam("/".concat(i.name)),!0}return!1}),Zu(this,"switchToTeamByNumber",(e,t,a)=>{const n=[N.j.KeyCodes.ONE,N.j.KeyCodes.TWO,N.j.KeyCodes.THREE,N.j.KeyCodes.FOUR,N.j.KeyCodes.FIVE,N.j.KeyCodes.SIX,N.j.KeyCodes.SEVEN,N.j.KeyCodes.EIGHT,N.j.KeyCodes.NINE,N.j.KeyCodes.ZERO];for(const s in n)if(j.Z(e,n[s])&&s<a.length){if(e.preventDefault(),a[s].id===t)return!1;const n=a[s];return this.props.actions.switchTeam("/".concat(n.name)),!0}return!1}),Zu(this,"handleKeyDown",e=>{if((e.ctrlKey||e.metaKey)&&e.altKey){const{currentTeamId:t}=this.props,a=Object(Fu.a)(this.props.myTeams,this.props.locale,this.props.userTeamsOrderPreference);if(this.switchToPrevOrNextTeam(e,t,a))return;if(this.switchToTeamByNumber(e,t,a))return;this.setState({showOrder:!0})}}),Zu(this,"handleKeyUp",e=>{(e.ctrlKey||e.metaKey)&&e.altKey||this.setState({showOrder:!1})}),Zu(this,"onDragEnd",e=>{const{updateTeamsOrderForUser:t}=this.props.actions;if(!e.destination)return;const a=Object(Fu.a)(this.props.myTeams,this.props.locale,this.props.userTeamsOrderPreference),n=e.source.index,s=e.destination.index,i=((e,t,n)=>[...e.slice(0,t),a.find(e=>e.id===n),...e.slice(t,e.length)])((o=n,[...(r=a).slice(0,o),...r.slice(o+1,r.length)]),s,e.draggableId);var r,o;t(i.map(e=>e.id)),this.setState({teamsOrder:i})}),this.state={showOrder:!1}}componentDidMount(){this.props.actions.getTeams(0,200),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}render(){const e=document.querySelector("#root");if(this.props.myTeams.length<=1)return e.classList.remove("multi-teams"),null;e.classList.add("multi-teams");const t=[],a=Object(Fu.a)(this.props.myTeams,this.props.locale,this.props.userTeamsOrderPreference).map((e,t)=>{const a=this.props.myTeamMembers[e.id];return O.a.createElement(Qu,{key:"switch_team_"+e.name,url:"/".concat(e.name),tip:e.display_name,active:e.id===this.props.currentTeamId,displayName:e.display_name,unread:a.msg_count>0,order:t+1,showOrder:this.state.showOrder,mentions:a.mention_count,teamIconUrl:j.N(e),switchTeam:this.props.actions.switchTeam,isDraggable:!0,teamId:e.id,teamIndex:t})}),n=[];return this.props.moreTeamsToJoin&&!this.props.experimentalPrimaryTeam?n.push(O.a.createElement(Qu,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",tip:O.a.createElement(ee.a,{id:"team_sidebar.join",defaultMessage:"Other teams you can join"}),content:"+",switchTeam:this.props.actions.switchTeam})):n.push(O.a.createElement(Yd.a,{permissions:[Ea.a.CREATE_TEAM],key:"more_teams"},O.a.createElement(Qu,{btnClass:"team-btn__add",url:"/create_team",tip:O.a.createElement(ee.a,{id:"navbar_dropdown.create",defaultMessage:"Create a Team"}),content:"+",switchTeam:this.props.actions.switchTeam}))),t.push(O.a.createElement("div",{key:"team-sidebar-bottom-plugin",className:"team-sidebar-bottom-plugin is-empty"},O.a.createElement(k.a,{pluggableName:"BottomTeamSidebar"}))),O.a.createElement("div",{className:ws()("team-sidebar",{"move--right":this.props.isOpen}),role:"navigation","aria-labelledby":"teamSidebarWrapper"},O.a.createElement("div",{className:"team-wrapper",id:"teamSidebarWrapper"},O.a.createElement(ks.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Xu,renderThumbVertical:$u,renderView:Ju,onScroll:this.handleScroll},O.a.createElement(Hu.a,{onDragEnd:this.onDragEnd},O.a.createElement(Hu.c,{droppableId:"my_teams",type:"TEAM_BUTTON"},e=>O.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),a,e.placeholder))),n)),t)}}Zu(eh,"propTypes",{myTeams:C.a.array.isRequired,currentTeamId:C.a.string.isRequired,moreTeamsToJoin:C.a.bool.isRequired,myTeamMembers:C.a.object.isRequired,isOpen:C.a.bool.isRequired,experimentalPrimaryTeam:C.a.string,locale:C.a.string.isRequired,actions:C.a.shape({getTeams:C.a.func.isRequired,switchTeam:C.a.func.isRequired,updateTeamsOrderForUser:C.a.func.isRequired}).isRequired,userTeamsOrderPreference:C.a.string});var th=Object(i.g)(Object(n.connect)((function(e){const t=Object(m.getConfig)(e).ExperimentalPrimaryTeam,a=Object(h.getJoinableTeamIds)(e),n=a&&a.length>0;return{currentTeamId:Object(h.getCurrentTeamId)(e),myTeams:Object(h.getMyTeams)(e),myTeamMembers:Object(h.getTeamMemberships)(e),isOpen:qu(e),experimentalPrimaryTeam:t,locale:Object(Us.a)(e),moreTeamsToJoin:n,userTeamsOrderPreference:Object(d.get)(e,N.B.TEAMS_ORDER,"","")}}),(function(e){return{actions:Object(s.bindActionCreators)({getTeams:l.getTeams,switchTeam:_.e,updateTeamsOrderForUser:_.f},e)}}))(eh)),ah=a(1207),nh=a(1443);function sh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ih extends O.a.PureComponent{static getDerivedStateFromProps(e,t){return{isSearch:e.isSearch,page:e.isSearch&&!t.isSearch?0:t.page}}constructor(e){super(e),sh(this,"createChannelRow",e=>{const t="".concat(e.display_name,", ").concat(e.purpose).toLowerCase();let a;const{shouldShowArchivedChannels:n}=this.props;return n&&(a=O.a.createElement("div",{className:"more-modal__icon-container"},O.a.createElement(vc,{className:"icon icon__archive"}))),O.a.createElement("div",{className:"more-modal__row",key:e.id,id:"ChannelRow-".concat(e.name)},O.a.createElement("div",{className:"more-modal__details"},O.a.createElement("button",{onClick:this.handleJoin.bind(this,e),"aria-label":t,className:"style--none more-modal__name"},a,e.display_name),O.a.createElement("p",{className:"more-modal__description"},e.purpose)),O.a.createElement("div",{className:"more-modal__actions"},O.a.createElement("button",{onClick:this.handleJoin.bind(this,e),className:"btn btn-primary",disabled:this.state.joiningChannel},O.a.createElement(Nc.a,{loading:this.state.joiningChannel===e.id,text:Object(j.lb)("more_channels.joining","Joining...")},O.a.createElement(ee.a,{id:n?"more_channels.view":"more_channels.join",defaultMessage:n?"View":"Join"})))))}),sh(this,"nextPage",e=>{e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout(()=>this.setState({nextDisabled:!1}),500),this.props.nextPage(this.state.page+1),As()(Ii.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),sh(this,"previousPage",e=>{e.preventDefault(),this.setState({page:this.state.page-1}),As()(Ii.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}),sh(this,"doSearch",()=>{const e=this.refs.filter.value;this.props.search(e),""===e&&this.setState({page:0})}),sh(this,"toggleArchivedChannelsOn",()=>{this.props.toggleArchivedChannels(!0)}),sh(this,"toggleArchivedChannelsOff",()=>{this.props.toggleArchivedChannels(!1)}),this.nextTimeoutId=0,this.state={joiningChannel:"",page:0,nextDisabled:!1}}componentDidMount(){!I.n()&&this.refs.filter&&this.refs.filter.focus()}handleJoin(e){this.setState({joiningChannel:e.id}),this.props.handleJoin(e,()=>{this.setState({joiningChannel:""})})}render(){const e=this.props.channels;let t,a,n;if(this.props.loading&&0===e.length)t=O.a.createElement(Ym.a,{style:{marginTop:"50%"}});else if(0===e.length)t=O.a.createElement("div",{className:"no-channel-message"},O.a.createElement("p",{className:"primary-message"},O.a.createElement(ee.a,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})),this.props.noResultsText);else{const e=this.state.page*this.props.channelsPerPage,s=e+this.props.channelsPerPage,i=this.props.channels.slice(e,s);t=i.map(this.createChannelRow),i.length>=this.props.channelsPerPage&&s<this.props.channels.length&&(a=O.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},O.a.createElement(ee.a,{id:"more_channels.next",defaultMessage:"Next"}))),this.state.page>0&&(n=O.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},O.a.createElement(ee.a,{id:"more_channels.prev",defaultMessage:"Previous"})))}let s,i=O.a.createElement("div",{className:"filter-row filter-row--full"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement(zm.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(ve.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:Ee.a,onInput:this.doSearch})));return this.props.createChannelButton&&(i=O.a.createElement("div",{className:"channel_search"},O.a.createElement("div",{className:"search_input"},O.a.createElement(zm.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(ve.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:Ee.a,onInput:this.doSearch})),O.a.createElement("div",{className:"create_button"},this.props.createChannelButton))),this.props.canShowArchivedChannels&&(s=O.a.createElement("div",{className:"more-modal__dropdown"},O.a.createElement(ji.a,{id:"channelsMoreDropdown"},O.a.createElement("a",null,O.a.createElement("span",null,this.props.shouldShowArchivedChannels?Object(j.lb)("more_channels.show_archived_channels","Show: Archived Channels"):Object(j.lb)("more_channels.show_public_channels","Show: Public Channels")),O.a.createElement("span",{className:"caret"})),O.a.createElement(Ai.a,{openLeft:!1,ariaLabel:Object(j.lb)("team_members_dropdown.menuAriaLabel","Change the role of a team member")},O.a.createElement(Ai.a.ItemAction,{id:"channelsMoreDropdownPublic",onClick:this.toggleArchivedChannelsOff,text:Object(j.lb)("suggestion.search.public","Public Channels")}),O.a.createElement(Ai.a.ItemAction,{id:"channelsMoreDropdownArchived",onClick:this.toggleArchivedChannelsOn,text:Object(j.lb)("suggestion.archive","Archived Channels")}))))),O.a.createElement("div",{className:"filtered-user-list"},i,s,O.a.createElement("div",{role:"application",ref:"channelList",className:"more-modal__list"},O.a.createElement("div",{id:"moreChannelsList",ref:"channelListScroll"},t)),O.a.createElement("div",{className:"filter-controls"},n,a))}}function rh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ih.defaultProps={channels:[],isSearch:!1},ih.propTypes={channels:C.a.arrayOf(C.a.object),channelsPerPage:C.a.number,nextPage:C.a.func.isRequired,isSearch:C.a.bool,search:C.a.func.isRequired,handleJoin:C.a.func.isRequired,noResultsText:C.a.object,loading:C.a.bool,createChannelButton:C.a.element,toggleArchivedChannels:C.a.func.isRequired,shouldShowArchivedChannels:C.a.bool.isRequired,canShowArchivedChannels:C.a.bool.isRequired};class oh extends O.a.PureComponent{constructor(e){super(e),rh(this,"handleHide",()=>{this.setState({show:!1}),this.props.bodyOnly&&this.handleExit()}),rh(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),rh(this,"onChange",e=>{this.state.search&&!e||this.setState({searchedChannels:[],serverError:null})}),rh(this,"nextPage",e=>{this.props.actions.getChannels(this.props.teamId,e+1,50)}),rh(this,"handleJoin",(e,t)=>{const{actions:a,currentUserId:n,teamId:s,teamName:i}=this.props;a.joinChannel(n,s,e.id).then(a=>{a.error?this.setState({serverError:a.error.message}):(se.a.push(Object(Bs.b)(i,e.name)),this.handleHide()),t&&t()})}),rh(this,"search",e=>{if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1,searchedChannels:[],searching:!1,searchTerm:e}),void(this.searchTimeoutId="");this.setState({search:!0,searching:!0,searchTerm:e});const t=setTimeout(()=>{this.props.actions.searchMoreChannels(e,this.state.shouldShowArchivedChannels).then(e=>{t===this.searchTimeoutId&&(e.data?this.setSearchResults(e.data):this.setState({searchedChannels:[],searching:!1}))}).catch(()=>{this.setState({searchedChannels:[],searching:!1})})},100);this.searchTimeoutId=t}),rh(this,"setSearchResults",e=>{this.setState({searchedChannels:this.state.shouldShowArchivedChannels?e.filter(e=>0!==e.delete_at):e.filter(e=>0===e.delete_at),searching:!1})}),rh(this,"toggleArchivedChannels",e=>{this.search(this.state.searchTerm),this.setState({shouldShowArchivedChannels:e})}),this.searchTimeoutId=0,this.state={show:!0,shouldShowArchivedChannels:"private"===this.props.morePublicChannelsModalType,search:!1,searchedChannels:[],serverError:null,searching:!1,searchTerm:""}}componentDidMount(){this.props.actions.getChannels(this.props.teamId,0,100),this.props.canShowArchivedChannels&&this.props.actions.getArchivedChannels(this.props.teamId,0,100)}render(){const{channels:e,archivedChannels:t,teamId:a,channelsRequestStarted:n,bodyOnly:s}=this.props,{search:i,searchedChannels:r,serverError:o,show:l,searching:c,shouldShowArchivedChannels:d}=this.state;let m,u;m=d?i?r:t:i?r:e,o&&(u=O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("label",{className:"control-label"},o)));const h=O.a.createElement(Kd.a,{teamId:a,permissions:[Ea.a.CREATE_PUBLIC_CHANNEL]},O.a.createElement("button",{id:"createNewChannel",type:"button",className:"btn btn-primary channel-create-btn",onClick:this.props.handleNewChannel},O.a.createElement(ee.a,{id:"more_channels.create",defaultMessage:"Create Channel"}))),p=O.a.createElement(Kd.a,{teamId:a,permissions:[Ea.a.CREATE_PUBLIC_CHANNEL,Ea.a.CREATE_PRIVATE_CHANNEL]},O.a.createElement("p",{className:"secondary-message"},O.a.createElement(ee.a,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"}))),g=O.a.createElement(O.a.Fragment,null,O.a.createElement(ih,{channels:m,channelsPerPage:50,nextPage:this.nextPage,isSearch:i,search:this.search,handleJoin:this.handleJoin,noResultsText:p,loading:i?c:n,createChannelButton:s&&h,toggleArchivedChannels:this.toggleArchivedChannels,shouldShowArchivedChannels:this.state.shouldShowArchivedChannels,canShowArchivedChannels:this.props.canShowArchivedChannels}),u);return s?g:O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:l,onHide:this.handleHide,onExited:this.handleExit,role:"dialog",id:"moreChannelsModal","aria-labelledby":"moreChannelsModalLabel"},O.a.createElement($.a.Header,{id:"moreChannelsModalHeader",closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"moreChannelsModalLabel"},O.a.createElement(ee.a,{id:"more_channels.title",defaultMessage:"More Channels"})),h),O.a.createElement($.a.Body,null,g))}}rh(oh,"propTypes",{channels:C.a.array.isRequired,archivedChannels:C.a.array.isRequired,currentUserId:C.a.string.isRequired,teamId:C.a.string.isRequired,teamName:C.a.string.isRequired,onModalDismissed:C.a.func,handleNewChannel:C.a.func,channelsRequestStarted:C.a.bool,bodyOnly:C.a.bool,canShowArchivedChannels:C.a.bool,morePublicChannelsModalType:C.a.string,actions:C.a.shape({getChannels:C.a.func.isRequired,getArchivedChannels:C.a.func.isRequired,joinChannel:C.a.func.isRequired,searchMoreChannels:C.a.func.isRequired}).isRequired});const lh=Object(ba.createSelector)(p.getOtherChannels,e=>e&&e.filter(e=>0===e.delete_at)),ch=Object(ba.createSelector)(p.getChannelsInCurrentTeam,e=>e&&e.filter(e=>0!==e.delete_at));var dh=Object(n.connect)((function(e){const t=Object(h.getCurrentTeam)(e)||{};return{channels:lh(e)||[],archivedChannels:ch(e)||[],currentUserId:Object(u.getCurrentUserId)(e),teamId:t.id,teamName:t.name,channelsRequestStarted:e.requests.channels.getChannels.status===x.RequestStatus.STARTED,canShowArchivedChannels:"true"===Object(m.getConfig)(e).ExperimentalViewArchivedChannels}}),(function(e){return{actions:Object(s.bindActionCreators)({getChannels:o.getChannels,getArchivedChannels:o.getArchivedChannels,joinChannel:o.joinChannel,searchMoreChannels:pa.g},e)}}))(oh),mh=a(1206),uh=a(1216);function hh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ph extends O.a.PureComponent{constructor(...e){super(...e),hh(this,"addValue",()=>{this.props.onAdd(this.props.channel.profiles)})}getStyle(){let e="mentions__name";return this.props.isSelected&&(e+=" suggestion--selected"),e}displayName(){return this.props.channel.profiles.map(e=>"@"+e.username).join(", ")}render(){return O.a.createElement("div",{key:this.props.channel.id,className:"more-modal__row clickable "+this.getStyle(),onClick:this.addValue},O.a.createElement("div",{className:"more-modal__gm-icon bg-text-200"},this.props.channel.profiles.length),O.a.createElement("div",{className:"more-modal__details"},O.a.createElement("div",{className:"more-modal__name"},this.displayName())),O.a.createElement("div",{className:"more-modal__actions"},O.a.createElement("div",{className:"more-modal__actions--round"},O.a.createElement(uh.a,null))))}}function gh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bh(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(a),!0).forEach((function(t){fh(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gh(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function fh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}hh(ph,"propTypes",{onAdd:C.a.func.isRequired,isSelected:C.a.bool.isRequired,channel:C.a.oneOfType([C.a.any,C.a.any,C.a.shape({profiles:C.a.arrayOf(C.a.any).isRequired})]).isRequired});const _h=N.Q.MAX_USERS_IN_GM-1;class Eh extends O.a.PureComponent{constructor(e){super(e),fh(this,"searchTimeoutId",void 0),fh(this,"exitToChannel",void 0),fh(this,"multiselect",void 0),fh(this,"loadProfilesMissingStatus",(e=[],t={})=>{const a=e.filter(e=>!t[e.id]).map(e=>e.id);a.length>0&&this.props.actions.getStatusesByIds(a)}),fh(this,"handleHide",()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1}),this.props.bodyOnly&&this.handleExit()}),fh(this,"setUsersLoadingState",e=>{this.setState({loadingUsers:e})}),fh(this,"handleExit",()=>{this.exitToChannel&&se.a.push(this.exitToChannel),this.props.onModalDismissed&&this.props.onModalDismissed(),this.props.onHide&&this.props.onHide()}),fh(this,"handleSubmit",(e=this.state.values)=>{const{actions:t}=this.props;if(this.state.saving)return;const a=e.map(e=>e.id);if(0===a.length)return;this.setState({saving:!0});const n=e=>{const{data:t,error:a}=e;this.setState({saving:!1}),a||(this.exitToChannel="/"+this.props.currentTeamName+"/channels/"+t.name,this.handleHide())};1===a.length?t.openDirectChannelToUserId(a[0]).then(n):t.openGroupChannelToUserIds(a).then(n)}),fh(this,"addValue",e=>{if(Array.isArray(e))this.addUsers(e);else if("profiles"in e)this.addUsers(e.profiles);else{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})}}),fh(this,"addUsers",e=>{const t=Object.assign([],this.state.values),a=t.map(e=>e.id);for(const n of e)-1===a.indexOf(n.id)&&t.push(n);this.setState({values:t})}),fh(this,"getUserProfiles",e=>{const t=e?e+1:0;"any"===this.props.restrictDirectMessage?this.props.actions.getProfiles(t,100).then(()=>{this.setUsersLoadingState(!1)}):this.props.actions.getProfilesInTeam(this.props.currentTeamId,t,100).then(()=>{this.setUsersLoadingState(!1)})}),fh(this,"handlePageChange",(e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.getUserProfiles(e))}),fh(this,"resetPaging",()=>{this.multiselect.current&&this.multiselect.current.resetPaging()}),fh(this,"search",e=>{this.props.actions.setModalSearchTerm(e)}),fh(this,"handleDelete",e=>{this.setState({values:e})}),fh(this,"renderAriaLabel",e=>e?e.username:""),fh(this,"renderOption",(e,t,a,n)=>{if(e.type&&"G"===e.type)return O.a.createElement(ph,{key:e.id,channel:e,isSelected:t,onAdd:e=>a(e)});const s=Object(j.k)(e);let i=s;e.id===this.props.currentUserId?i=O.a.createElement(ee.a,{id:"more_direct_channels.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:s}}):e.delete_at&&(i=O.a.createElement(ee.a,{id:"more_direct_channels.directchannel.deactivated",defaultMessage:"{displayname} - Deactivated",values:{displayname:s}}));let r="";t&&(r="more-modal__row--selected");const o=e.delete_at||e.is_bot?null:this.props.statuses[e.id],l=e.is_bot?null:e.email;return O.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+r,onClick:()=>a(e),onMouseMove:()=>n(e)},O.a.createElement(Hr.a,{src:En.Client4.getProfilePictureUrl(e.id,e.last_picture_update),status:o,size:"md"}),O.a.createElement("div",{className:"more-modal__details"},O.a.createElement("div",{className:"more-modal__name"},i,O.a.createElement(sn.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"}),O.a.createElement(rn.a,{show:Object(j.Y)(e),className:"badge-popoverlist"})),O.a.createElement("div",{className:"more-modal__description"},l)),O.a.createElement("div",{className:"more-modal__actions"},O.a.createElement("div",{className:"more-modal__actions--round"},O.a.createElement(uh.a,null))))}),fh(this,"handleSubmitImmediatelyOn",e=>e.id===this.props.currentUserId||Boolean(e.delete_at)),this.searchTimeoutId=0,this.multiselect=O.a.createRef();const t=[];if(e.currentChannelMembers)for(let a=0;a<e.currentChannelMembers.length;a++){const n=Object.assign({},e.currentChannelMembers[a]);n.id!==e.currentUserId&&t.push(n)}this.state={values:t,show:!0,search:!1,saving:!1,loadingUsers:!0}}componentDidMount(){this.getUserProfiles(),this.props.actions.getTotalUsersStats(),this.loadProfilesMissingStatus(this.props.users,this.props.statuses)}updateFromProps(e){if(e.searchTerm!==this.props.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)this.resetPaging();else{const t="any"===this.props.restrictDirectMessage?"":this.props.currentTeamId;this.searchTimeoutId=setTimeout(async()=>{this.setUsersLoadingState(!0);const[{data:a},{data:n}]=await Promise.all([this.props.actions.searchProfiles(e,{team_id:t}),this.props.actions.searchGroupChannels(e)]);a&&this.props.actions.loadStatusesForProfilesList(a),n&&this.props.actions.loadProfilesForGroupChannels(n),this.resetPaging(),this.setUsersLoadingState(!1)},N.Q.SEARCH_TIMEOUT_MILLISECONDS)}}e.users.length===this.props.users.length&&Object.keys(e.statuses).length===Object.keys(this.props.statuses).length||this.loadProfilesMissingStatus(this.props.users,this.props.statuses)}componentDidUpdate(e){this.updateFromProps(e)}renderValue(e){return e.data.username}render(){let e;this.props.currentChannelMembers&&(this.state.values&&this.state.values.length>=_h?e=O.a.createElement(ee.a,{id:"more_direct_channels.new_convo_note.full",defaultMessage:"You've reached the maximum number of people for this conversation. Consider creating a private channel instead."}):this.props.isExistingChannel&&(e=O.a.createElement(ee.a,{id:"more_direct_channels.new_convo_note",defaultMessage:"This will start a new conversation. If you're adding a lot of people, consider creating a private channel instead."})));const t=Object(j.lb)("multiselect.go","Go"),a=Object(j.lb)("multiselect.loading","Loading.."),n=O.a.createElement(ee.a,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:_h-this.state.values.length}});let s=this.props.users||[];if(this.state.values.length)s=s.filter(e=>0===e.delete_at&&e.id!==this.props.currentUserId);else{const e=[],t=[];for(const a of s)(a.delete_at?t:e).push(a);s=e.concat(t)}s=s.filter(e=>{if(0===e.delete_at)return!0;for(const t of this.props.myDirectChannels)if(t.name.indexOf(e.id)>=0)return!0;return!1});const i=[...s.map(e=>bh({label:e.username,value:e.id},e)),...(this.props.groupChannels||[]).map(e=>bh({label:e.display_name,value:e.id},e))],r=O.a.createElement(mh.a,{key:"moreDirectChannelsList",ref:this.multiselect,options:i,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,noteText:e,maxValues:_h,numRemainingText:n,buttonSubmitText:t,buttonSubmitLoadingText:a,submitImmediatelyOn:this.handleSubmitImmediatelyOn,saving:this.state.saving,loading:this.state.loadingUsers,users:this.props.users,totalCount:this.props.totalCount,placeholderText:Object(j.lb)("multiselect.placeholder","Search and add members")});return this.props.bodyOnly?r:O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"moreDmModalLabel",id:"moreDmModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"moreDmModalLabel"},O.a.createElement(ee.a,{id:"more_direct_channels.title",defaultMessage:"Direct Messages"}))),O.a.createElement($.a.Body,{role:"application"},r),O.a.createElement($.a.Footer,{className:"modal-footer--invisible"},O.a.createElement("button",{id:"closeModalButton",type:"button",className:"btn btn-link"},O.a.createElement(ee.a,{id:"general_button.close",defaultMessage:"Close"}))))}}fh(Eh,"propTypes",{currentUserId:C.a.string.isRequired,currentTeamId:C.a.string.isRequired,currentTeamName:C.a.string.isRequired,searchTerm:C.a.string.isRequired,users:C.a.arrayOf(C.a.any).isRequired,groupChannels:C.a.any.isRequired,myDirectChannels:C.a.arrayOf(C.a.any).isRequired,statuses:C.a.any.isRequired,totalCount:C.a.number,currentChannelMembers:C.a.arrayOf(C.a.any).isRequired,isExistingChannel:C.a.bool.isRequired,restrictDirectMessage:C.a.string,onModalDismissed:C.a.func.isRequired,onHide:C.a.func,bodyOnly:C.a.bool,actions:C.a.shape({getProfiles:C.a.func.isRequired,getProfilesInTeam:C.a.func.isRequired,getStatusesByIds:C.a.func.isRequired,getTotalUsersStats:C.a.func.isRequired,loadStatusesForProfilesList:C.a.func.isRequired,loadProfilesForGroupChannels:C.a.func.isRequired,openDirectChannelToUserId:C.a.func.isRequired,openGroupChannelToUserIds:C.a.func.isRequired,searchProfiles:C.a.func.isRequired,searchGroupChannels:C.a.func.isRequired,setModalSearchTerm:C.a.func.isRequired}).isRequired});const vh=Object(pd.memoizeResult)((e,t)=>e.filter(e=>Object(an.filterProfilesMatchingTerm)(e.profiles,t).length>0)),yh=Object(pd.memoizeResult)((e,t)=>Object.values(e).filter(e=>"D"===e.type&&!(e.name&&e.name.indexOf(t)<0)));var Ch=Object(n.connect)((function(e,t){const a=Object(u.getCurrentUserId)(e);let n=[];t.isExistingChannel&&(n=Object(u.getProfilesInCurrentChannel)(e));const s=Object(m.getConfig)(e).RestrictDirectMessage,i=e.views.search.modalSearch;let r;r=i?"any"===s?Object(u.searchProfiles)(e,i,!1):Object(u.searchProfilesInCurrentTeam)(e,i,!1):"any"===s?Object(u.getProfiles)(e,{}):Object(u.getProfilesInCurrentTeam)(e);const o=vh(Object(p.getChannelsWithUserProfiles)(e),i),l=yh(Object(p.getAllChannels)(e),a),c=Object(h.getCurrentTeam)(e),d=Object(u.getTotalUsersStats)(e)||{total_users_count:0};return{currentTeamId:c.id,currentTeamName:c.name,searchTerm:i,users:r.sort(an.sortByUsername),myDirectChannels:l,groupChannels:o,statuses:e.entities.users.statuses,currentChannelMembers:n,currentUserId:a,restrictDirectMessage:s,totalCount:d.total_users_count}}),(function(e){return{actions:Object(s.bindActionCreators)({getProfiles:r.getProfiles,getProfilesInTeam:r.getProfilesInTeam,getStatusesByIds:r.getStatusesByIds,getTotalUsersStats:r.getTotalUsersStats,loadStatusesForProfilesList:f.b,loadProfilesForGroupChannels:ls.k,openDirectChannelToUserId:pa.e,openGroupChannelToUserIds:pa.f,searchProfiles:r.searchProfiles,searchGroupChannels:o.searchGroupChannels,setModalSearchTerm:em.a},e)}}))(Eh);function wh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Th=bn.a.getState;class Sh extends ln.a{static get propTypes(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wh(Object(a),!0).forEach((function(t){Oh(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wh(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},super.propTypes,{channelMember:C.a.object,hasDraft:C.a.bool,userImageUrl:C.a.string,dmChannelTeammate:C.a.object})}render(){const{item:e,isSelection:t,userImageUrl:a}=this.props,n=e.channel,s=n.delete_at&&0!==n.delete_at,i=this.props.channelMember;let r=null;i&&i.notify_props&&i.mention_count>0&&(r=O.a.createElement("span",{className:"badge"},i.mention_count));let o="mentions__name";t&&(o+=" suggestion--selected");const l=n.display_name;let c=null;c=s?O.a.createElement("div",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-archive-outline"})):this.props.hasDraft?O.a.createElement("div",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-pencil-outline"})):n.type===N.j.OPEN_CHANNEL?O.a.createElement("div",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-globe"})):n.type===N.j.PRIVATE_CHANNEL?O.a.createElement("div",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("i",{className:"icon icon-lock-outline"})):n.type===N.j.GM_CHANNEL?O.a.createElement("div",{className:"suggestion-list__icon suggestion-list__icon--large"},O.a.createElement("div",{className:"status status--group"},"G")):O.a.createElement("div",{className:"pull-left"},O.a.createElement(on.a,{size:"sm",url:a}));let d=null;if(n.type===N.j.DM_CHANNEL){const e=this.props.dmChannelTeammate;d=O.a.createElement(O.a.Fragment,null,O.a.createElement(sn.a,{show:Boolean(e&&e.is_bot),className:"badge-autocomplete"}),O.a.createElement(rn.a,{show:Boolean(e&&j.Y(e)),className:"badge-autocomplete"}))}return O.a.createElement("div",Object.assign({onClick:this.handleClick,onMouseMove:this.handleMouseMove,className:o,ref:e=>{this.node=e},id:"switchChannel_".concat(n.name),"data-testid":n.name},ln.a.baseProps),c,O.a.createElement("span",null,l),d,r)}}const Ph=Object(n.connect)((function(e,t){const a=t.item&&t.item.channel,n=a?a.id:"",s=!!n&&Object(ys.i)(e,N.I.DRAFT,n),i=a&&Object(u.getUser)(e,a.userId),r=i&&j.O(i.id,i.last_picture_update);let o=a&&a.type===N.j.DM_CHANNEL&&j.v(e,a.id);return a&&j.U(o)&&(o=Object(u.getUser)(e,a.userId)),{channelMember:Object(p.getMyChannelMemberships)(e)[n],hasDraft:s&&Boolean(s.message.trim()||s.fileInfos.length||s.uploadsInProgress.length),userImageUrl:r,dmChannelTeammate:o}}))(Sh);let Mh="";function Nh(e,t){const a=!!e.channel.delete_at&&0!==e.channel.delete_at,n=!!t.channel.delete_at&&0!==t.channel.delete_at;if(a&&!n)return 1;if(!a&&n)return-1;if(e.type===N.j.MENTION_CHANNELS&&t.type===N.j.MENTION_MORE_CHANNELS)return-1;if(t.type===N.j.MENTION_CHANNELS&&e.type===N.j.MENTION_MORE_CHANNELS)return 1;if(e.deactivated&&!t.deactivated)return 1;if(t.deactivated&&!e.deactivated)return-1;const s=e.channel,i=t.channel;let r=s.display_name.toLowerCase(),o=i.display_name.toLowerCase();s.type===N.j.DM_CHANNEL&&(r=r.substring(1)),i.type===N.j.DM_CHANNEL&&(o=o.substring(1));const l=r.startsWith(Mh),c=o.startsWith(Mh);return l&&c||!l&&!c?Object(gn.sortChannelsByTypeAndDisplayName)("en",s,i):l?-1:1}class Ih extends nn.a{handlePretextChanged(e,t){if(e){Mh=e,this.startNewRequest(e);const a=Object(p.getChannelsInCurrentTeam)(Th()).concat(Object(p.getDirectAndGroupChannels)(Th())),n=Object.assign([],Object(u.searchProfiles)(Th(),e,!1));this.formatChannelsAndDispatch(e,t,a,n,!0),this.fetchUsersAndChannels(e,t)}else this.formatUnreadChannelsAndDispatch(t);return!0}async fetchUsersAndChannels(e,t){const a=Th(),n=Object(h.getCurrentTeamId)(a);if(!n)return;let s;s="team"===Object(m.getConfig)(a).RestrictDirectMessage?En.Client4.autocompleteUsers(e,n,""):En.Client4.autocompleteUsers(e,"","");const i=o.searchChannels(n,e)(bn.a.dispatch,bn.a.getState);let r=[],l=[];try{r=await s;const{data:e}=await i;l=e}catch(e){bn.a.dispatch(Object(Q.logError)(e))}if(this.shouldCancelDispatch(e))return;const c=Object.assign([],Object(u.searchProfiles)(a,e,!1)).concat(r.users),d=Object(u.getCurrentUserId)(a);bn.a.dispatch({type:Fs.UserTypes.RECEIVED_PROFILES_LIST,data:c.filter(e=>e.id!==d)});const g=Object(p.getChannelsInCurrentTeam)(a).concat(Object(p.getDirectAndGroupChannels)(a)).concat(l);this.formatChannelsAndDispatch(e,t,g,c)}userWrappedChannel(e,t){let a="@".concat(e.username);return(e.first_name||e.last_name)&&e.nickname?a+=" - ".concat(j.A(e)," (").concat(e.nickname,")"):e.nickname?a+=" - (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(a+=" - ".concat(j.A(e))),e.delete_at&&(a+=" - "+j.lb("channel_switch_modal.deactivated","Deactivated")),{channel:{display_name:a,name:e.username,id:t?t.id:e.id,userId:e.id,update_at:e.update_at,type:N.j.DM_CHANNEL,last_picture_update:e.last_picture_update||0},name:e.username,deactivated:e.delete_at}}formatChannelsAndDispatch(e,t,a,n,s=!1){const i=[],r=Object(p.getMyChannelMemberships)(Th());if(this.shouldCancelDispatch(e))return;const o={},l=function(e){const t=e.toLowerCase(),a=Th(),n=Object(u.getUserIdsInChannels)(a),s={};return e=>{let i=e.display_name;if(e.type===N.j.GM_CHANNEL||e.type===N.j.DM_CHANNEL){const t=n[e.id]||new Set([]);if(!t.size&&e.type===N.j.DM_CHANNEL){const n=j.J(e.name);Object(u.getUser)(a,n)&&t.add(n)}for(const e of t){let t=s[e];if(!t){const n=Object(u.getUser)(a,e);if(!n)continue;const{nickname:i,username:r}=n;t="".concat(i).concat(r).concat(j.A(n)),s[e]=t}i+=t}}return i.toLowerCase().includes(t)}}(e),c=Th(),h=Object(m.getConfig)(c),g="true"===h.ExperimentalViewArchivedChannels;for(const t of Object.keys(a)){const m=a[t];if(!o[m.id]&&l(m)){const t=Object.assign({},m),a=0!==m.delete_at;let l={channel:t,name:t.name,deactivated:!1};if(!g&&a)continue;if(a&&r[m.id])l.type=N.j.ARCHIVED_CHANNEL;else{if(a&&!r[m.id])continue;if(t.type===N.j.GM_CHANNEL){if(t.name=t.display_name,l.name=t.name,Object(gn.isGroupChannelVisible)(h,Object(d.getMyPreferences)(c),m,Object(Fa.getLastPostPerChannel)(c)[m.id],Object(gn.isUnreadChannel)(Object(p.getMyChannelMemberships)(c),m)))l.type=N.j.MENTION_CHANNELS;else if(l.type=N.j.MENTION_MORE_CHANNELS,s)continue}else if(t.type===N.j.DM_CHANNEL){const e=j.J(t.name),a=n.find(t=>t.id===e);if(!a)continue;if(o[a.id]=!0,l=this.userWrappedChannel(a,t),Object(gn.isDirectChannelVisible)(a.id,h,Object(d.getMyPreferences)(c),m,Object(Fa.getLastPostPerChannel)(c)[m.id],Object(gn.isUnreadChannel)(Object(p.getMyChannelMemberships)(c),m)))l.type=N.j.MENTION_CHANNELS;else if(l.type=N.j.MENTION_MORE_CHANNELS,s)continue}else if(r[m.id])l.type=N.j.MENTION_CHANNELS;else if(l.type=N.j.MENTION_MORE_CHANNELS,s||!t.display_name.toLowerCase().startsWith(e))continue}o[m.id]=!0,i.push(l)}}for(let e=0;e<n.length;e++){const t=n[e];if(o[t.id])continue;const a=Object(d.getBool)(Th(),x.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,t.id,!1),r=this.userWrappedChannel(t);if(a)r.type=N.j.MENTION_CHANNELS;else if(r.type=N.j.MENTION_MORE_CHANNELS,s)continue;o[t.id]=!0,i.push(r)}const b=i.sort(Nh).map(e=>e.channel.id);s&&i.push({type:N.j.MENTION_MORE_CHANNELS,loading:!0}),t({matchedPretext:e,terms:b,items:i,component:Ph})}formatUnreadChannelsAndDispatch(e){const t=Object(p.makeGetChannel)(),a=Object(p.getSortedUnreadChannelIds)(Th(),!1),n=[];for(let e=0;e<a.length;e++){const s=t(Th(),{id:a[e]})||{};let i={channel:s,name:s.name,deactivated:!1};if(s.type===N.j.GM_CHANNEL)i.name=s.display_name;else if(s.type===N.j.DM_CHANNEL){const e=Object(u.getUser)(Th(),j.J(s.name));if(!e)continue;i=this.userWrappedChannel(e,s)}i.type=N.j.MENTION_UNREAD_CHANNELS,n.push(i)}e({matchedPretext:"",terms:n.map(e=>e.channel.id),items:n,component:Ph})}}const jh=bn.a.getState;class Ah extends ln.a{render(){const{item:e,isSelection:t}=this.props;let a="mentions__name";return t&&(a+=" suggestion--selected"),O.a.createElement("div",Object.assign({onClick:this.handleClick,className:a,onMouseMove:this.handleMouseMove,ref:e=>{this.node=e}},ln.a.baseProps),O.a.createElement("div",{className:"status"},O.a.createElement(ee.a,{id:"general_tab.teamIcon",defaultMessage:"Team Icon"},e=>O.a.createElement("i",{className:"fa fa-group",title:e}))),e.display_name)}}let Rh="";function kh(e,t){const a=e.display_name.toLowerCase(),n=t.display_name.toLowerCase(),s=a.startsWith(Rh),i=n.startsWith(Rh);if(s&&i){const s=Object(Us.a)(jh());return a!==n?a.localeCompare(n,s,{numeric:!0}):e.name.localeCompare(t.name,s,{numeric:!0})}return s?-1:1}class Lh extends nn.a{handlePretextChanged(e,t){if(e){Rh=e,this.startNewRequest(e);const a=h.getMyTeams(jh()).filter(t=>-1!==t.display_name.toLowerCase().indexOf(e)||-1!==t.name.indexOf(e)),n=a.sort(kh).map(e=>e.name);return t({matchedPretext:e,terms:n,items:a,component:Ah}),!0}return!1}}var Dh=a(1747),xh=a.n(Dh);let Uh;function qh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Hh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.ChannelSearch="ChannelSearch",e.Mentions="Mentions",e.FlaggedPosts="FlaggedPosts",e.PinnedPosts="PinnedPosts"}(Uh||(Uh={}));const Fh={[Uh.ChannelSearch]:xh.a,[Uh.Mentions]:"",[Uh.FlaggedPosts]:"",[Uh.PinnedPosts]:""},Bh={[Uh.ChannelSearch]:{id:Object(ve.b)("no_results.channel_search.title")},[Uh.Mentions]:{},[Uh.FlaggedPosts]:{},[Uh.PinnedPosts]:{}},Gh={[Uh.ChannelSearch]:{id:Object(ve.b)("no_results.channel_search.subtitle")},[Uh.Mentions]:{},[Uh.FlaggedPosts]:{},[Uh.PinnedPosts]:{}},Vh=e=>O.a.createElement("div",{className:"no-results__wrapper"},O.a.createElement("div",{className:"no-results__variant-wrapper"},O.a.createElement("img",{className:"no-results__search-image",src:Fh[e.variant]})),O.a.createElement("div",{className:"no-results__title"},O.a.createElement(ee.a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qh(Object(a),!0).forEach((function(t){Hh(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qh(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Bh[e.variant],{values:e.formattedMessageValues}))),O.a.createElement(ee.a,Gh[e.variant]));Vh.propTypes={variant:C.a.any.isRequired,formattedMessageValues:C.a.objectOf(C.a.string)};var Wh=Vh;function zh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kh extends O.a.PureComponent{constructor(e){super(e),zh(this,"focusTextbox",()=>{if(null==this.switchBox)return;const e=this.switchBox.getTextbox();document.activeElement!==e&&(e.focus(),j.ob(e))}),zh(this,"setSwitchBoxRef",e=>{this.switchBox=e,this.focusTextbox()}),zh(this,"onShow",()=>{this.setState({text:""})}),zh(this,"onHide",()=>{this.focusPostTextbox(),this.setState({text:""}),this.props.onHide()}),zh(this,"focusPostTextbox",()=>{I.n()||setTimeout(()=>{const e=document.querySelector("#post_textbox");e&&e.focus()})}),zh(this,"onChange",e=>{this.setState({text:e.target.value})}),zh(this,"handleKeyDown",e=>{j.Z(e,N.Q.KeyCodes.TAB)&&(e.preventDefault(),this.switchMode())}),zh(this,"handleSubmit",async e=>{if(e)if("channel"===this.state.mode){const{joinChannelById:t,switchToChannel:a}=this.props.actions,n=e.channel;e.type===N.Q.MENTION_MORE_CHANNELS&&n.type===N.Q.OPEN_CHANNEL&&await t(n.id),a(n).then(e=>{e.data&&this.onHide()})}else se.a.push("/"+e.name),this.onHide()}),zh(this,"enableChannelProvider",()=>{this.channelProviders[0].disableDispatches=!1,this.teamProviders[0].disableDispatches=!0}),zh(this,"enableTeamProvider",()=>{this.teamProviders[0].disableDispatches=!1,this.channelProviders[0].disableDispatches=!0}),zh(this,"switchMode",()=>{"channel"===this.state.mode&&this.props.showTeamSwitcher?(this.enableTeamProvider(),this.setState({mode:"team"})):"team"===this.state.mode&&(this.enableChannelProvider(),this.setState({mode:"channel"}))}),zh(this,"handleOnClick",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-mode");this.enableChannelProvider(),this.setState({mode:t}),this.focusTextbox()}),zh(this,"handleSuggestionsReceived",e=>{const t=e.items.some(e=>!e.loading);this.setState({hasSuggestions:!e.matchedPretext||e.items.length>0&&t,pretext:e.matchedPretext})}),this.channelProviders=[new Ih],this.teamProviders=[new Lh],this.switchBox=null,this.state={text:"",mode:"channel",hasSuggestions:!0,pretext:""}}render(){let e=this.channelProviders,t=!0,a=O.a.createElement("h1",null,O.a.createElement(ee.a,{id:"quick_switch_modal.switchChannels",defaultMessage:"Switch Channels"})),n=Object(ve.b)("quick_switch_modal.channelsShortcut.windows"),s="CTRL+K";j.bb()&&(n=Object(ve.b)("quick_switch_modal.channelsShortcut.mac"),s="CMD+K");let i,r=Object(ve.b)("quick_switch_modal.teamsShortcut.windows"),o="CTRL+ALT+K";if(j.bb()&&(r=Object(ve.b)("quick_switch_modal.teamsShortcut.mac"),o="CMD+ALT+K"),this.props.showTeamSwitcher){let i="",l="";"team"===this.state.mode?(e=this.teamProviders,t=!1,l="active"):i="active",a=O.a.createElement("div",{className:"nav nav-tabs"},O.a.createElement("li",{className:i},O.a.createElement("a",{"data-mode":"channel",href:"#",onClick:this.handleOnClick},O.a.createElement(ee.a,{id:"quick_switch_modal.channels",defaultMessage:"Channels"}),O.a.createElement("span",{className:"small"},O.a.createElement(ee.a,{id:n,defaultMessage:s})))),O.a.createElement("li",{className:l},O.a.createElement("a",{"data-mode":"team",href:"#",onClick:this.handleOnClick},O.a.createElement(ee.a,{id:"quick_switch_modal.teams",defaultMessage:"Teams"}),O.a.createElement("span",{className:"small"},O.a.createElement(ee.a,{id:r,defaultMessage:o})))))}return i=j.cb()?O.a.createElement(Ki.b,{id:"quick_switch_modal.help_mobile",defaultMessage:"Type to find a channel."}):this.props.showTeamSwitcher?O.a.createElement(Ki.b,{id:"quick_switch_modal.help",defaultMessage:"Start typing then use TAB to toggle channels/teams, **UP/DOWN** to browse, **ENTER** to select, and **ESC** to dismiss."}):O.a.createElement(Ki.b,{id:"quick_switch_modal.help_no_team",defaultMessage:"Type to find a channel. Use **▲/▼** to browse, **ENTER** to select, **ESC** to dismiss."}),O.a.createElement($.a,{dialogClassName:"a11y__modal channel-switcher",ref:"modal",show:!0,onHide:this.onHide,enforceFocus:!1,restoreFocus:!1,role:"dialog","aria-labelledby":"quickSwitchModalLabel",animation:!1},O.a.createElement($.a.Header,{id:"quickSwitchModalLabel",closeButton:!0}),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"channel-switcher__header"},a,O.a.createElement("div",{className:"channel-switcher__hint",id:"quickSwitchHint"},i)),O.a.createElement("div",{className:"channel-switcher__suggestion-box"},O.a.createElement("i",{className:"icon icon-magnify"}),O.a.createElement(Sn.a,{id:"quickSwitchInput",ref:this.setSwitchBoxRef,className:"form-control focused",onChange:this.onChange,value:this.state.text,onKeyDown:this.handleKeyDown,onItemSelected:this.handleSubmit,listComponent:Pn.a,maxLength:"64",providers:e,listStyle:"bottom",completeOnTab:!1,spellCheck:"false",renderDividers:t,delayInputUpdate:!0,openWhenEmpty:!0,onSuggestionsReceived:this.handleSuggestionsReceived,suppressLoadingSpinner:!this.state.hasSuggestions}),!this.state.hasSuggestions&&O.a.createElement(Wh,{variant:Uh.ChannelSearch,formattedMessageValues:{channelName:'"'.concat(this.state.pretext,'"')}}))))}}zh(Kh,"propTypes",{onHide:C.a.func.isRequired,showTeamSwitcher:C.a.bool,actions:C.a.shape({joinChannelById:C.a.func.isRequired,switchToChannel:C.a.func.isRequired}).isRequired});var Yh=Object(n.connect)((function(){return{showTeamSwitcher:!1}}),(function(e){return{actions:Object(s.bindActionCreators)({joinChannelById:E.d,switchToChannel:E.m},e)}}))(Kh);function Qh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zh extends O.a.PureComponent{static getDerivedStateFromProps(e){return!1===e.show?{displayNameError:""}:null}constructor(e){super(e),Qh(this,"onEnterKeyDown",e=>{const t=j.Z(e,N.Q.KeyCodes.ENTER),{ctrlSend:a}=this.props;a&&t&&!e.ctrlKey?e.preventDefault():(a&&t&&e.ctrlKey||!a&&t&&!e.shiftKey&&!e.altKey)&&this.handleSubmit(e)}),Qh(this,"handleSubmit",e=>{e.preventDefault(),this.displayNameInput.current.value.trim().length<N.Q.MIN_CHANNELNAME_LENGTH?this.setState({displayNameError:!0}):this.props.onSubmitChannel()}),Qh(this,"handleChange",()=>{const e={displayName:this.displayNameInput.current.value,header:this.channelHeaderInput.current.value,purpose:this.channelPurposeInput.current.value};this.props.onDataChanged(e)}),Qh(this,"handleOnURLChange",e=>{e.preventDefault(),this.props.onChangeURLPressed&&this.props.onChangeURLPressed()}),Qh(this,"handlePublicTypeSelect",()=>{this.props.onTypeSwitched("O")}),Qh(this,"handlePrivateTypeSelect",()=>{this.props.onTypeSwitched("P")}),this.state={displayNameError:""},this.channelHeaderInput=O.a.createRef(),this.channelPurposeInput=O.a.createRef(),this.displayNameInput=O.a.createRef()}componentDidMount(){(I.g()||I.e())&&As()("body").addClass("browser--ie")}render(){const{canCreatePublicChannel:e,canCreatePrivateChannel:t}=this.props,a=e&&t;var n=null,s=null,i="form-group";this.state.displayNameError&&(n=O.a.createElement("p",{className:"input__help error"},O.a.createElement(ee.a,{id:"channel_modal.displayNameError",defaultMessage:"Display name must have at least 2 characters."}),this.state.displayNameError),i+=" has-error"),this.props.serverError&&(s=O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("div",{className:"col-sm-12"},O.a.createElement("p",{id:"createChannelError",className:"input__help error"},this.props.serverError))));const r=O.a.createElement("div",{className:"flex-parent"},O.a.createElement(jd.a,{className:"icon icon__globe icon--body type-icon"}),O.a.createElement(ee.a,{id:"channel_modal.publicName",defaultMessage:"Public"}),O.a.createElement(ee.a,{id:"channel_modal.publicHint",defaultMessage:" - Anyone can join this channel"})),o=O.a.createElement("div",{className:"flex-parent"},O.a.createElement(Ad.a,{className:"icon icon__lock icon--body type-icon"}),O.a.createElement(ee.a,{id:"channel_modal.privateName",defaultMessage:"Private"}),O.a.createElement(ee.a,{id:"channel_modal.privateHint",defaultMessage:" - Only invited members can join this channel"}));let l=null;l=a?O.a.createElement("fieldset",{key:"channelType",className:"multi-select__radio"},O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"public",type:"radio",name:"channelType",checked:"O"===this.props.channelType,onChange:this.handlePublicTypeSelect,"aria-labelledby":"channelModalTypeLabel"}),r)),O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"private",type:"radio",name:"channelType",checked:"P"===this.props.channelType,onChange:this.handlePrivateTypeSelect,"aria-labelledby":"channelModalTypeLabel"}),o))):O.a.createElement("div",{className:"type-container multi-select__radio"},O.a.createElement("div",{className:"radio"},e?r:null,t?o:null));const c=Object(Bs.d)();return O.a.createElement("span",null,O.a.createElement($.a,{dialogClassName:"a11y__modal new-channel__modal new-channel",show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed,onExited:this.props.onModalExited,autoFocus:!0,restoreFocus:!0,role:"dialog","aria-labelledby":"newChannelModalLabel"},O.a.createElement($.a.Header,null,O.a.createElement("button",{type:"button",className:"close",onClick:this.props.onModalDismissed,"aria-label":"Close",title:"Close"},O.a.createElement("span",{"aria-hidden":"true"},"×")),O.a.createElement($.a.Title,{componentClass:"h1",id:"newChannelModalLabel"},O.a.createElement(ee.a,{id:"channel_modal.modalTitle",defaultMessage:"New Channel"}))),O.a.createElement("form",{role:"form",className:"form-horizontal"},O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:"col-sm-3 form__label control-label",id:"channelModalTypeLabel"},O.a.createElement(ee.a,{id:"channel_modal.type",defaultMessage:"Type"})),O.a.createElement("div",{className:"col-sm-9"},l)),O.a.createElement("div",{className:i},O.a.createElement("label",{className:"col-sm-3 form__label control-label",htmlFor:"newChannelName"},O.a.createElement(ee.a,{id:"channel_modal.name",defaultMessage:"Name"})),O.a.createElement("div",{className:"col-sm-9"},O.a.createElement(Ee.a,{id:"newChannelName",onChange:this.handleChange,type:"text",ref:this.displayNameInput,className:"form-control",placeholder:{id:Object(ve.b)("channel_modal.nameEx"),defaultMessage:'E.g.: "Bugs", "Marketing", "客户支持"'},maxLength:N.Q.MAX_CHANNELNAME_LENGTH,value:this.props.channelData.displayName,autoFocus:!0,onKeyDown:this.onEnterKeyDown}),n,O.a.createElement("p",{className:"input__help dark"},"URL: "+c+this.props.channelData.name+" (",O.a.createElement("button",{className:"color--link style--none",onClick:this.handleOnURLChange},O.a.createElement(ee.a,{id:"channel_modal.edit",defaultMessage:"Edit"})),")"))),O.a.createElement("div",{className:"form-group"},O.a.createElement("div",{className:"col-sm-3"},O.a.createElement("label",{className:"form__label control-label",htmlFor:"newChannelPurpose"},O.a.createElement(ee.a,{id:"channel_modal.purpose",defaultMessage:"Purpose"})),O.a.createElement("label",{className:"form__label light"},O.a.createElement(ee.a,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),O.a.createElement("div",{className:"col-sm-9"},O.a.createElement("textarea",{id:"newChannelPurpose",className:"form-control no-resize",ref:this.channelPurposeInput,rows:"4",placeholder:j.lb("channel_modal.purposeEx",'E.g.: "A channel to file bugs and improvements"'),maxLength:"250",value:this.props.channelData.purpose,onChange:this.handleChange}),O.a.createElement("p",{className:"input__help"},O.a.createElement(ee.a,{id:"channel_modal.descriptionHelp",defaultMessage:"Describe how this channel should be used."})))),O.a.createElement("div",{className:"form-group less"},O.a.createElement("div",{className:"col-sm-3"},O.a.createElement("label",{className:"form__label control-label",htmlFor:"newChannelHeader"},O.a.createElement(ee.a,{id:"channel_modal.header",defaultMessage:"Header"})),O.a.createElement("label",{className:"form__label light"},O.a.createElement(ee.a,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),O.a.createElement("div",{className:"col-sm-9"},O.a.createElement("textarea",{id:"newChannelHeader",className:"form-control no-resize",ref:this.channelHeaderInput,rows:"4",placeholder:j.lb("channel_modal.headerEx",'E.g.: "[Link Title](http://example.com)"'),maxLength:"1024",value:this.props.channelData.header,onChange:this.handleChange}),O.a.createElement("p",{className:"input__help"},O.a.createElement(ee.a,{id:"channel_modal.headerHelp",defaultMessage:"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com)."})),s))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{id:"cancelNewChannel",type:"button",className:"btn btn-link",onClick:this.props.onModalDismissed,onBlur:()=>document.getElementById("newChannelName").focus()},O.a.createElement(ee.a,{id:"channel_modal.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{id:"submitNewChannel",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},O.a.createElement(ee.a,{id:"channel_modal.createNew",defaultMessage:"Create Channel"}))))))}}Qh(Zh,"propTypes",{show:C.a.bool.isRequired,currentTeamId:C.a.string.isRequired,channelType:C.a.string.isRequired,channelData:C.a.object.isRequired,ctrlSend:C.a.bool,serverError:C.a.node,onSubmitChannel:C.a.func.isRequired,onModalDismissed:C.a.func.isRequired,onModalExited:C.a.func,onTypeSwitched:C.a.func.isRequired,onChangeURLPressed:C.a.func.isRequired,onDataChanged:C.a.func.isRequired,canCreatePublicChannel:C.a.bool.isRequired,canCreatePrivateChannel:C.a.bool.isRequired});var Jh=Object(n.connect)((function(e){return{ctrlSend:Object(d.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),currentTeamId:Object(h.getCurrentTeamId)(e)}}))(Zh);function Xh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $h extends O.a.PureComponent{constructor(e){super(e),Xh(this,"urlInput",void 0),Xh(this,"onURLChanged",e=>{const t=e.target.value.trim();this.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}),Xh(this,"onSubmit",e=>{var t,a;e.preventDefault(),e.preventDefault();const n=(null===(t=this.urlInput)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.value)||"",s=Object(Bs.h)(n);s.length>0?this.setState({urlErrors:s}):(this.setState({urlErrors:"",userEdit:!1}),this.props.onModalSubmit(n))}),Xh(this,"onCancel",()=>{this.setState({urlErrors:"",userEdit:!1}),this.props.onModalDismissed()}),this.urlInput=O.a.createRef(),this.state={currentURL:e.currentURL,urlErrors:"",userEdit:!1}}static getDerivedStateFromProps(e,t){return t.userEdit?null:{currentURL:e.currentURL}}render(){let e="input-group input-group--limit",t=null,a=null;this.state.urlErrors&&(e+=" has-error"),this.props.serverError||this.state.urlErrors?t=O.a.createElement("div",{className:"has-error"},O.a.createElement("p",{className:"input__help error"},this.state.urlErrors||this.props.serverError)):a=O.a.createElement("p",{className:"input__help"},O.a.createElement(ee.a,{id:"change_url.helpText",defaultMessage:"You can use lowercase letters, numbers, dashes, and underscores."}));const n=this.props.currentTeamURL+"/channels",s=Object(Bs.d)(n),i=O.a.createElement(di.a,{id:"urlTooltip"},n);return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onCancel,onExited:this.props.onModalExited,role:"dialog","aria-labelledby":"changeUrlModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"changeUrlModalLabel"},this.props.title)),O.a.createElement("form",{role:"form",className:"form-horizontal"},O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:"col-sm-3 form__label control-label"},O.a.createElement(ee.a,{id:"change_url.urlLabel",defaultMessage:"Channel URL"})),O.a.createElement("div",{className:"col-sm-9"},O.a.createElement("div",{className:e},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:i},O.a.createElement("span",{className:"input-group-addon"},s)),O.a.createElement("input",{type:"text",ref:this.urlInput,className:"form-control",maxLength:N.Q.MAX_CHANNELNAME_LENGTH,onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0})),t,a))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onCancel},O.a.createElement(ee.a,{id:"change_url.close",defaultMessage:"Close"})),O.a.createElement("button",{onClick:this.onSubmit,type:"submit",className:"btn btn-primary"},this.props.submitButtonText))))}}Xh($h,"propTypes",{show:C.a.bool,title:C.a.node,submitButtonText:C.a.node,currentURL:C.a.string,currentTeamURL:C.a.string.isRequired,serverError:C.a.node,onModalSubmit:C.a.func.isRequired,onModalExited:C.a.func,onModalDismissed:C.a.func.isRequired}),Xh($h,"defaultProps",{show:!1,title:"Change URL",submitButtonText:"Save",currentURL:"",serverError:null});var ep=Object(n.connect)((function(e){const t=Object(h.getCurrentTeam)(e);return{currentTeamURL:"".concat(Object(Bs.e)(),"/").concat(t.name)}}))($h);function tp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ap(e){let t=e.channelType||N.Q.OPEN_CHANNEL;return e.canCreatePublicChannel||t!==N.Q.OPEN_CHANNEL||(t=N.Q.PRIVATE_CHANNEL),e.canCreatePrivateChannel||t!==N.Q.PRIVATE_CHANNEL||(t=N.Q.OPEN_CHANNEL),t}class np extends O.a.PureComponent{static getDerivedStateFromProps(e,t){return e.show&&!t.show?{serverError:"",channelType:ap(e),flowState:1,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1,show:e.show}:{show:e.show}}constructor(e){super(e),tp(this,"onSubmit",()=>{if(!this.state.channelDisplayName)return void this.setState({serverError:j.lb("channel_flow.invalidName","Invalid Channel Name")});if(this.state.channelName.length<2)return void this.setState({flowState:3});const{actions:e,currentTeamId:t}=this.props,a={team_id:t,name:this.state.channelName,display_name:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader,type:this.state.channelType,create_at:0,creator_id:"",delete_at:0,extra_update_at:0,group_constrained:!1,id:"",last_post_at:0,scheme_id:"",total_msg_count:0,update_at:0};e.createChannel(a).then(t=>{t.error?this.onCreateChannelError(t.error):(this.props.onModalDismissed(),e.switchToChannel(t.data))})}),tp(this,"onCreateChannelError",e=>{"model.channel.is_valid.2_or_more.app_error"===e.server_error_id?this.setState({flowState:3,serverError:O.a.createElement(ee.a,{id:"channel_flow.handleTooShort",defaultMessage:"Channel URL must be 2 or more lowercase alphanumeric characters"})}):"store.sql_channel.update.exists.app_error"===e.server_error_id?this.setState({serverError:j.lb("channel_flow.alreadyExist","A channel with that URL already exists")}):this.setState({serverError:e.message})}),tp(this,"typeSwitched",e=>{this.setState({channelType:e,serverError:""})}),tp(this,"urlChangeRequested",e=>{e&&e.preventDefault(),this.setState({flowState:2})}),tp(this,"urlChangeSubmitted",e=>{3===this.state.flowState?this.setState({channelName:e,nameModified:!0},this.onSubmit):this.setState({flowState:1,serverError:null,channelName:e,nameModified:!0})}),tp(this,"urlChangeDismissed",()=>{this.setState({flowState:1})}),tp(this,"channelDataChanged",e=>{this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose,channelHeader:e.header}),this.state.nameModified||this.setState({channelName:Object(Bs.a)(e.displayName.trim())})}),this.state={serverError:"",channelType:ap(e),flowState:1,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1,show:e.show}}render(){const e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader};let t=!1,a=!1,n="",s="";if(this.props.show)switch(this.state.flowState){case 1:t=!0;break;case 2:a=!0,n=O.a.createElement(ee.a,{id:"channel_flow.changeUrlTitle",defaultMessage:"Change Channel URL"}),s=n;break;case 3:a=!0,n=O.a.createElement(ee.a,{id:"channel_flow.set_url_title",defaultMessage:"Set Channel URL"}),s=O.a.createElement(ee.a,{id:"channel_flow.create",defaultMessage:"Create Channel"})}return O.a.createElement("span",null,O.a.createElement(Jh,{show:t,channelType:this.state.channelType,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelData:e,serverError:this.state.serverError,onSubmitChannel:this.onSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),O.a.createElement(ep,{show:a,title:n,submitButtonText:s,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed}))}}tp(np,"propTypes",{show:C.a.bool,channelType:C.a.any,onModalDismissed:C.a.func.isRequired,currentTeamId:C.a.string.isRequired,canCreatePublicChannel:C.a.bool.isRequired,canCreatePrivateChannel:C.a.bool.isRequired,actions:C.a.shape({createChannel:C.a.func.isRequired,switchToChannel:C.a.func.isRequired}).isRequired}),tp(np,"defaultProps",{show:!1,channelType:N.Q.OPEN_CHANNEL});var sp=Object(n.connect)((function(e){return{currentTeamId:Object(h.getCurrentTeamId)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({createChannel:o.createChannel,switchToChannel:E.m},e)}}))(np);class ip extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},e=>O.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",role:"img","aria-label":e},O.a.createElement("path",{d:"M6 12l1.058-1.057 4.192 4.184V6h1.5v9.127l4.185-4.192L18 12l-6 6z"}))))}}function rp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class op extends O.a.PureComponent{render(){let e="nav-pills__unread-indicator ";return this.props.show&&(e+="nav-pills__unread-indicator--visible "),O.a.createElement("div",{id:"unreadIndicator"+this.props.name,className:e+this.props.extraClass,onClick:this.props.onClick},this.props.content,O.a.createElement(ip,{className:"icon icon__unread"}))}}rp(op,"propTypes",{onClick:C.a.func.isRequired,show:C.a.bool,extraClass:C.a.string,content:C.a.node,name:C.a.string}),rp(op,"defaultProps",{show:!1,extraClass:"",content:""});var lp=a(1247);function cp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class dp extends O.a.PureComponent{constructor(...e){super(...e),cp(this,"isUserOutOfOffice",()=>this.props.status===N.O.OUT_OF_OFFICE),cp(this,"setStatus",e=>{this.props.actions.setStatus({user_id:this.props.userId,status:e})}),cp(this,"setOnline",e=>{e.preventDefault(),this.setStatus(N.O.ONLINE)}),cp(this,"setOffline",e=>{e.preventDefault(),this.setStatus(N.O.OFFLINE)}),cp(this,"setAway",e=>{e.preventDefault(),this.setStatus(N.O.AWAY)}),cp(this,"setDnd",e=>{e.preventDefault(),this.setStatus(N.O.DND)}),cp(this,"showStatusChangeConfirmation",e=>{const t={ModalId:N.u.RESET_STATUS,dialogType:hs,dialogProps:{newStatus:e}};this.props.actions.openModal(t)}),cp(this,"renderProfilePicture",()=>this.props.profilePicture?O.a.createElement(on.a,{size:"lg",url:this.props.profilePicture}):null),cp(this,"renderDropdownIcon",()=>O.a.createElement(ee.a,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>O.a.createElement("i",{className:"fa fa-caret-down",title:e})))}render(){const e=this.isUserOutOfOffice()&&""===this.props.autoResetPref,t=this.renderProfilePicture(),a=this.renderDropdownIcon(),n=e?()=>this.showStatusChangeConfirmation("online"):this.setOnline,s=e?()=>this.showStatusChangeConfirmation("dnd"):this.setDnd,i=e?()=>this.showStatusChangeConfirmation("away"):this.setAway,r=e?()=>this.showStatusChangeConfirmation("offline"):this.setOffline;return O.a.createElement(ji.a,{onToggle:this.onToggle,style:this.props.style},O.a.createElement("div",{className:"status-wrapper status-selector"},t,O.a.createElement("button",{className:"status style--none","aria-label":Object(j.lb)("status_dropdown.menuAriaLabel","Set a status")},O.a.createElement(lp.a,{status:this.props.status,button:!0})),O.a.createElement("span",{className:"status status-edit edit"},a)),O.a.createElement(Ai.a,{ariaLabel:Object(j.lb)("status_dropdown.menuAriaLabel","Set a status"),id:"statusDropdownMenu"},O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemAction,{show:this.isUserOutOfOffice(),onClick:()=>null,ariaLabel:Object(j.lb)("status_dropdown.set_ooo","Out of office").toLowerCase(),text:Object(j.lb)("status_dropdown.set_ooo","Out of office"),extraText:Object(j.lb)("status_dropdown.set_ooo.extra","Automatic Replies are enabled")})),O.a.createElement(Ai.a.Group,null,O.a.createElement(Ai.a.ItemAction,{onClick:n,ariaLabel:Object(j.lb)("status_dropdown.set_online","Online").toLowerCase(),text:Object(j.lb)("status_dropdown.set_online","Online")}),O.a.createElement(Ai.a.ItemAction,{onClick:i,ariaLabel:Object(j.lb)("status_dropdown.set_away","Away").toLowerCase(),text:Object(j.lb)("status_dropdown.set_away","Away")}),O.a.createElement(Ai.a.ItemAction,{onClick:s,ariaLabel:"".concat(Object(j.lb)("status_dropdown.set_dnd","Do not disturb").toLowerCase(),". ").concat(Object(j.lb)("status_dropdown.set_dnd.extra","Disables desktop, email and push notifications").toLowerCase()),text:Object(j.lb)("status_dropdown.set_dnd","Do not disturb"),extraText:Object(j.lb)("status_dropdown.set_dnd.extra","Disables desktop, email and push notifications")}),O.a.createElement(Ai.a.ItemAction,{onClick:r,ariaLabel:Object(j.lb)("status_dropdown.set_offline","Offline").toLowerCase(),text:Object(j.lb)("status_dropdown.set_offline","Offline")}))))}}cp(dp,"propTypes",{style:C.a.object,status:C.a.string,userId:C.a.string.isRequired,profilePicture:C.a.string,autoResetPref:C.a.string,actions:C.a.shape({openModal:C.a.func.isRequired,setStatus:C.a.func.isRequired}).isRequired}),cp(dp,"defaultProps",{userId:"",profilePicture:"",status:N.O.OFFLINE});var mp=Object(n.connect)((function(e){const t=Object(u.getCurrentUser)(e);if(!t)return{};const a=t.id;return{userId:a,profilePicture:En.Client4.getProfilePictureUrl(a,t.last_picture_update),autoResetPref:Object(d.get)(e,x.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,a,""),status:Object(u.getStatusForUserId)(e,a)}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b,setStatus:r.setStatus},e)}}))(dp),up=a(1269);class hp extends O.a.PureComponent{render(){const e=O.a.createElement(di.a,{id:"main-menu__tooltip"},O.a.createElement(ee.a,{id:"sidebar.mainMenu",defaultMessage:"Main menu"}));let t=null;this.props.showTutorialTip&&(t=O.a.createElement($c,{onBottom:!1}));let a=O.a.createElement("h1",{id:"headerTeamName",className:"team__name","data-teamid":this.props.teamId},this.props.teamDisplayName);return this.props.teamDescription&&(a=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:O.a.createElement(di.a,{id:"team-name__tooltip"},this.props.teamDescription)},a)),O.a.createElement("div",{className:"SidebarHeaderDropdownButton",id:"sidebarHeaderDropdownButton"},t,O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"right",overlay:e},O.a.createElement("div",{id:"headerInfo",className:"header__info"},a,O.a.createElement("div",{id:"headerUsername",className:"user__name"},"@"+this.props.currentUser.username),O.a.createElement("button",{className:"style--none sidebar-header-dropdown__icon","aria-label":Object(j.lb)("navbar_dropdown.menuAriaLabel","main menu")},O.a.createElement(up.a,null)))))}}function pp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(hp,"propTypes",{showTutorialTip:C.a.bool.isRequired,teamDescription:C.a.string.isRequired,teamId:C.a.string.isRequired,currentUser:C.a.object.isRequired,teamDisplayName:C.a.string.isRequired});class gp extends O.a.PureComponent{constructor(...e){super(...e),pp(this,"toggleShortcutsModal",e=>{e.preventDefault(),M.m()}),pp(this,"handleKeyDown",e=>{Object(j.e)(e)&&e.shiftKey&&Object(j.Z)(e,N.j.KeyCodes.A)&&this.props.actions.openModal({ModalId:N.u.USER_SETTINGS,dialogType:Gs.a})}),pp(this,"handleEmitUserLoggedOutEvent",()=>{M.e()})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return this.props.currentUser?O.a.createElement(ji.a,null,O.a.createElement(hp,{showTutorialTip:this.props.showTutorialTip,teamDescription:this.props.teamDescription,currentUser:this.props.currentUser,teamDisplayName:this.props.teamDisplayName,teamId:this.props.teamId}),O.a.createElement(ju,{id:"sidebarDropdownMenu"})):null}}pp(gp,"propTypes",{teamDescription:C.a.string.isRequired,teamDisplayName:C.a.string.isRequired,teamId:C.a.string.isRequired,currentUser:C.a.object,showTutorialTip:C.a.bool.isRequired,actions:C.a.shape({openModal:C.a.func.isRequred}).isRequired}),pp(gp,"defaultProps",{teamType:"",pluginMenuItems:[]});var bp=Object(n.connect)((function(e){const t=Object(h.getCurrentTeam)(e),a=Object(u.getCurrentUser)(e),n=Object(d.getInt)(e,N.B.TUTORIAL_STEP,a.id)===N.K.MENU_POPOVER&&!j.cb();return{currentUser:a,teamDescription:t.description,teamDisplayName:t.display_name,teamId:t.id,showTutorialTip:n}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b},e)}}))(gp);class fp extends O.a.PureComponent{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleResize",()=>{const e=j.cb();this.setState({isMobile:e})}),this.state={isMobile:j.cb()}}componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const e=j.lb("accessibility.sections.lhsHeader","team menu region");return O.a.createElement("div",{id:"lhsHeader","aria-label":e,tabIndex:"-1",role:"application",className:"SidebarHeader team__header theme a11y__region","data-a11y-sort-order":"5"},O.a.createElement("div",{className:"d-flex"},!this.state.isMobile&&O.a.createElement(mp,null),O.a.createElement(bp,null)))}}var _p=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(u.getCurrentUser)(e);return{enableTutorial:"true"===t.EnableTutorial,showTutorialTip:Object(d.getInt)(e,N.B.TUTORIAL_STEP,a.id)===N.K.MENU_POPOVER&&!j.cb()}}))(fp),Ep=a(105),vp=a(1444),yp=a.n(vp);class Cp extends O.a.PureComponent{render(){return O.a.createElement("span",Object.assign({},this.props,{id:"draftIcon"}),O.a.createElement(ee.a,{id:"generic_icons.channel.draft",defaultMessage:"Channel Draft Icon"},e=>O.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 50 51",role:"img","aria-label":e},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},O.a.createElement("path",{d:"M11.980198,46.7136356 L14.9834983,43.7103353 L7.22772277,35.9545597 L4.22442244,38.95786 L4.22442244,42.4892132 L8.44884488,42.4892132 L8.44884488,46.7136356 L11.980198,46.7136356 Z M29.2409241,16.0865729 C29.2409241,15.6025221 28.9989023,15.3605003 28.5148515,15.3605003 C28.2948284,15.3605003 28.1078116,15.4375072 27.9537954,15.5915234 L10.0660066,33.4793122 C9.91199043,33.6333283 9.8349835,33.8203452 9.8349835,34.0403683 C9.8349835,34.5244191 10.0770053,34.7664409 10.5610561,34.7664409 C10.7810792,34.7664409 10.968096,34.6894339 11.1221122,34.5354178 L29.009901,16.647629 C29.1639172,16.4936128 29.2409241,16.306596 29.2409241,16.0865729 Z M27.4587459,9.74993922 L41.1881188,23.4793122 L13.7293729,50.938058 L0,50.938058 L0,37.2086851 L27.4587459,9.74993922 Z M50,12.9182561 C50,14.0843785 49.5929634,15.0744676 48.7788779,15.8885531 L43.30033,21.3671009 L29.5709571,7.637728 L35.049505,2.19218345 C35.8415881,1.35609566 36.8316772,0.938058036 38.019802,0.938058036 C39.1859244,0.938058036 40.1870145,1.35609566 41.0231023,2.19218345 L48.7788779,9.91495573 C49.5929634,10.7730458 50,11.7741359 50,12.9182561 Z"})))))}}class wp extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.bot",defaultMessage:"Bot Icon"},e=>O.a.createElement("svg",{width:"16",height:"13",viewBox:"0 0 36 30",role:"img","aria-label":e},O.a.createElement("path",{d:"M0,15.7391304 L0,23.0434783 C0,24.0535326 0.786888587,24.8695652 1.76086957,24.8695652 L3.52173913,24.8695652 L3.52173913,13.9130435 L1.76086957,13.9130435 C0.786888587,13.9130435 0,14.7290761 0,15.7391304 Z M26.0496894,6.50271739 L19.7888199,6.50271739 L19.7888199,2.83423913 C19.7888199,1.81967561 18.989441,1 18,1 C17.010559,1 16.2111801,1.81967561 16.2111801,2.83423913 L16.2111801,6.50271739 L9.95031056,6.50271739 C7.47950311,6.50271739 5.47826087,8.55477242 5.47826087,11.0883152 L5.47826087,26.6793478 C5.47826087,28.7027429 7.0826087,30.3478261 9.05590062,30.3478261 L26.9440994,30.3478261 C28.9173913,30.3478261 30.5217391,28.7027429 30.5217391,26.6793478 L30.5217391,11.0883152 C30.5217391,8.55477242 28.5204969,6.50271739 26.0496894,6.50271739 Z M14.4782609,24.8695652 L10.9565217,24.8695652 L10.9565217,22.9130435 L14.4782609,22.9130435 L14.4782609,24.8695652 Z M12.5217391,17.826087 C11.2245652,17.826087 10.173913,16.7754348 10.173913,15.4782609 C10.173913,14.181087 11.2245652,13.1304348 12.5217391,13.1304348 C13.818913,13.1304348 14.8695652,14.181087 14.8695652,15.4782609 C14.8695652,16.7754348 13.818913,17.826087 12.5217391,17.826087 Z M19.9565217,24.8695652 L16.4347826,24.8695652 L16.4347826,22.9130435 L19.9565217,22.9130435 L19.9565217,24.8695652 Z M25.0434783,24.8695652 L21.5217391,24.8695652 L21.5217391,22.9130435 L25.0434783,22.9130435 L25.0434783,24.8695652 Z M23.2826087,17.826087 C22.0935326,17.826087 21.1304348,16.7754348 21.1304348,15.4782609 C21.1304348,14.181087 22.0935326,13.1304348 23.2826087,13.1304348 C24.4716848,13.1304348 25.4347826,14.181087 25.4347826,15.4782609 C25.4347826,16.7754348 24.4716848,17.826087 23.2826087,17.826087 Z M34.2391304,13.9130435 L32.4782609,13.9130435 L32.4782609,24.8695652 L34.2391304,24.8695652 C35.2131114,24.8695652 36,24.0535326 36,23.0434783 L36,15.7391304 C36,14.7290761 35.2131114,13.9130435 34.2391304,13.9130435 Z"}))))}}function Op(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tp extends O.a.PureComponent{constructor(e){super(e),Op(this,"onSvgLoadError",()=>{this.setState({svgErrorUrl:this.props.botIconUrl})}),Op(this,"onSvgLoad",()=>{this.setState({svgErrorUrl:null})}),this.state={svgErrorUrl:null}}render(){let e=null;return this.props.channelIsArchived?e=O.a.createElement(vc,{className:"icon icon__archive"}):this.props.hasDraft?e=O.a.createElement(Cp,{className:"icon icon__draft"}):this.props.channelType===N.j.OPEN_CHANNEL?e=O.a.createElement(jd.a,{className:"icon icon__globe"}):this.props.channelType===N.j.PRIVATE_CHANNEL?e=O.a.createElement(Ad.a,{className:"icon icon__lock"}):this.props.channelType===N.j.GM_CHANNEL?e=O.a.createElement("div",{className:"status status--group"},this.props.membersCount):this.props.channelType===N.j.DM_CHANNEL&&(this.props.teammateId&&this.props.teammateDeletedAt?e=O.a.createElement(vc,{className:"icon icon__archive"}):this.props.teammateId&&this.props.teammateIsBot?(e=O.a.createElement(wp,{className:"icon icon__bot"}),this.props.botIconUrl&&this.props.botIconUrl!==this.state.svgErrorUrl&&(e=O.a.createElement(yp.a,{className:"icon icon__bot",src:this.props.botIconUrl,onLoad:this.onSvgLoad,onError:this.onSvgLoadError}))):e=O.a.createElement(lp.a,{type:"avatar",status:this.props.channelStatus})),e}}function Sp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Op(Tp,"propTypes",{botIconUrl:C.a.string,channelIsArchived:C.a.bool.isRequired,channelType:C.a.string.isRequired,channelStatus:C.a.string,hasDraft:C.a.bool.isRequired,membersCount:C.a.number,teammateId:C.a.string,teammateDeletedAt:C.a.number,teammateIsBot:C.a.bool});class Pp extends O.a.PureComponent{constructor(...e){super(...e),Sp(this,"handleClose",e=>{e.stopPropagation(),e.preventDefault(),this.props.handleClose()})}render(){let e=null;if(this.props.handleClose&&!this.props.badge){let t=O.a.createElement(di.a,{id:"remove-dm-tooltip"},O.a.createElement(ee.a,{id:"sidebar.removeList",defaultMessage:"Remove from this list"}));this.props.channelType!==N.j.OPEN_CHANNEL&&this.props.channelType!==N.j.PRIVATE_CHANNEL||(t=O.a.createElement(di.a,{id:"remove-dm-tooltip"},O.a.createElement(ee.a,{id:"sidebar.leave",defaultMessage:"Leave the channel"}))),e=O.a.createElement(mi.a,{delayShow:1e3,placement:"top",overlay:t},O.a.createElement("span",{onClick:this.handleClose,className:"btn-close"},"×"))}return e}}function Mp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Sp(Pp,"propTypes",{handleClose:C.a.func,channelId:C.a.string.isRequired,channelType:C.a.string.isRequired,teammateId:C.a.string,badge:C.a.bool});class Np extends O.a.PureComponent{constructor(e){super(e),Mp(this,"state",{showTooltip:!1}),Mp(this,"enableToolTipIfNeeded",()=>{const e=this.displayNameRef.current;e&&e.offsetWidth<e.scrollWidth?this.setState({showTooltip:!0}):this.setState({showTooltip:!1})}),Mp(this,"trackChannelSelectedEvent",()=>{Object(qe.b)("SidebarChannelLink#click"),Object(qe.d)("ui","ui_channel_selected")}),Mp(this,"handleClick",()=>{this.trackChannelSelectedEvent(),se.a.push(this.props.link)}),Mp(this,"removeTooltipLink",()=>{this.gmItemRef.current.removeAttribute("aria-describedby")}),Mp(this,"render",()=>{let e=null;this.props.badge&&(e=O.a.createElement("span",{id:"unreadMentions",className:"badge"},this.props.unreadMentions));const t=O.a.createElement(O.a.Fragment,null,O.a.createElement(Tp,{channelStatus:this.props.channelStatus,channelType:this.props.channelType,botIconUrl:this.props.botIconUrl,channelIsArchived:this.props.channelIsArchived,hasDraft:this.props.hasDraft,membersCount:this.props.membersCount,teammateId:this.props.teammateId,teammateDeletedAt:this.props.teammateDeletedAt,teammateIsBot:this.props.teammateIsBot}),O.a.createElement("span",{className:"sidebar-item__name"},O.a.createElement("span",{ref:this.displayNameRef},this.props.displayName)),e,O.a.createElement(Pp,{handleClose:this.props.handleClose,channelId:this.props.channelId,channelType:this.props.channelType,teammateId:this.props.teammateId,badge:this.props.badge}));let a,n=this.props.displayName;if(this.props.channelType===N.Q.OPEN_CHANNEL?n+=" ".concat(Object(j.lb)("accessibility.sidebar.types.public","public channel")):this.props.channelType===N.Q.PRIVATE_CHANNEL&&(n+=" ".concat(Object(j.lb)("accessibility.sidebar.types.private","private channel"))),1===this.props.unreadMentions?n+=" ".concat(this.props.unreadMentions," ").concat(Object(j.lb)("accessibility.sidebar.types.mention","mention")):this.props.unreadMentions>1&&(n+=" ".concat(this.props.unreadMentions," ").concat(Object(j.lb)("accessibility.sidebar.types.mentions","mentions"))),this.props.unreadMsgs>0&&this.props.showUnreadForMsgs&&0===this.props.unreadMentions&&(n+=" ".concat(Object(j.lb)("accessibility.sidebar.types.unread","unread"))),n=n.toLowerCase(),a=Object(I.d)()?O.a.createElement("div",null,O.a.createElement(Wu,{link:this.props.link,menuId:this.props.channelId},O.a.createElement("button",{className:"btn btn-link "+this.props.rowClass,"aria-label":n,onClick:this.handleClick},t))):O.a.createElement(jn.a,{id:"sidebarItem_".concat(this.props.channelName),"aria-label":n,to:this.props.link,className:this.props.rowClass,onClick:this.trackChannelSelectedEvent},t),this.state.showTooltip){const e=O.a.createElement(di.a,{id:"channel-displayname__tooltip",style:Ip.channelTooltip},this.props.displayName);a=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e,onEntering:this.removeTooltipLink},O.a.createElement("div",{ref:this.gmItemRef},a))}return a}),this.gmItemRef=O.a.createRef(),this.displayNameRef=O.a.createRef()}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.displayName!==this.props.displayName&&this.enableToolTipIfNeeded()}}Mp(Np,"propTypes",{link:C.a.string.isRequired,rowClass:C.a.string.isRequired,channelType:C.a.string.isRequired,channelId:C.a.string.isRequired,channelName:C.a.string.isRequired,displayName:C.a.string.isRequired,botIconUrl:C.a.string,channelStatus:C.a.string,handleClose:C.a.func,hasDraft:C.a.bool.isRequired,badge:C.a.bool,membersCount:C.a.number.isRequired,showUnreadForMsgs:C.a.bool.isRequired,unreadMsgs:C.a.number.isRequired,unreadMentions:C.a.number.isRequired,teammateId:C.a.string,teammateDeletedAt:C.a.number,teammateIsBot:C.a.bool,channelIsArchived:C.a.bool.isRequired});const Ip={channelTooltip:{paddingLeft:"8px",maxWidth:"228px"}};function jp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ap extends O.a.PureComponent{constructor(...e){super(...e),jp(this,"render",()=>{const e=[];let t=N.j.DEFAULT_CHANNEL_UI_NAME;this.props.townSquareDisplayName&&(t=this.props.townSquareDisplayName);let a=N.j.OFFTOPIC_CHANNEL_UI_NAME;return this.props.offTopicDisplayName&&(a=this.props.offTopicDisplayName),e.push(O.a.createElement("div",null,O.a.createElement("h4",null,O.a.createElement(ee.a,{id:"sidebar.tutorialScreen1.title",defaultMessage:"Channels"})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar.tutorialScreen1.body",defaultMessage:"**Channels** organize conversations across different topics. They're open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people."})))),e.push(O.a.createElement("div",null,O.a.createElement("h4",null,O.a.createElement(ee.a,{id:"sidebar.tutorialScreen2.title",defaultMessage:'"{townsquare}" and "{offtopic}" channels',values:{townsquare:t,offtopic:a}})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"sidebar.tutorialScreen2.body1",defaultMessage:"Here are two public channels to start:"})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar.tutorialScreen2.body2",defaultMessage:"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.",values:{townsquare:t}})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar.tutorialScreen2.body3",defaultMessage:"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.",values:{offtopic:a}})))),e.push(O.a.createElement("div",null,O.a.createElement("h4",null,O.a.createElement(ee.a,{id:"sidebar.tutorialScreen3.title",defaultMessage:"Creating and Joining Channels"})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar.tutorialScreen3.body1",defaultMessage:'Click **"More..."** to create a new channel or join an existing one.'})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"sidebar.tutorialScreen3.body2",defaultMessage:'You can also create a new channel by clicking the **"+" symbol** next to the public or private channel header.'})))),O.a.createElement(Jc,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar",diagnosticsTag:"tutorial_tip_2_channels"})})}componentDidMount(){(this.props.townSquareDisplayName||this.props.offTopicDisplayName)&&this.props.openLhs()}}function Rp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}jp(Ap,"propTypes",{townSquareDisplayName:C.a.string,offTopicDisplayName:C.a.string,openLhs:C.a.func});class kp extends O.a.PureComponent{constructor(...e){super(...e),Rp(this,"isLeaving",!1),Rp(this,"handleLeavePublicChannel",()=>{this.props.actions.leaveChannel(this.props.channelId),Object(qe.d)("ui","ui_public_channel_x_button_clicked")}),Rp(this,"handleLeavePrivateChannel",()=>{M.k({id:this.props.channelId,display_name:this.props.channelDisplayName}),Object(qe.d)("ui","ui_private_channel_x_button_clicked")}),Rp(this,"handleLeaveDirectChannel",()=>{if(!this.isLeaving){let e,t;this.isLeaving=!0,this.props.channelType===N.j.DM_CHANNEL?(e=this.props.channelTeammateId,t=N.j.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(e=this.props.channelId,t=N.j.Preferences.CATEGORY_GROUP_CHANNEL_SHOW);const a=this.props.currentUserId;this.props.actions.leaveDirectChannel(this.props.channelName),this.props.actions.savePreferences(a,[{user_id:a,category:t,name:e,value:"false"}]).then(()=>{this.isLeaving=!1}),Object(qe.d)("ui","ui_direct_channel_x_button_clicked")}this.props.active&&se.a.push("/".concat(this.props.currentTeamName,"/channels/").concat(this.props.redirectChannel))}),Rp(this,"showChannelAsUnread",()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs),Rp(this,"render",()=>{if(this.props.channelIsArchived&&!this.props.active)return null;if(!this.props.channelDisplayName||!this.props.channelType)return O.a.createElement("div",null);let e=null;if(!this.showChannelAsUnread()){if(this.props.shouldHideChannel)return"";this.props.channelType===N.j.DM_CHANNEL||this.props.channelType===N.j.GM_CHANNEL?e=this.handleLeaveDirectChannel:"true"===this.props.config.EnableXToLeaveChannelsFromLHS&&(this.props.channelType===N.j.OPEN_CHANNEL&&this.props.channelName!==N.j.DEFAULT_CHANNEL?e=this.handleLeavePublicChannel:this.props.channelType===N.j.PRIVATE_CHANNEL&&(e=this.handleLeavePrivateChannel))}let t="";this.props.active&&(t="active");let a="sidebar-item",n=!1;this.showChannelAsUnread()&&(a+=" unread-title"),this.props.unreadMentions>0&&(a+=" has-badge",n=!0),this.props.channelMuted&&(a+=" muted"),e&&!n&&(a+=" has-close");let s=null;this.props.showTutorialTip&&this.props.channelName===N.j.DEFAULT_CHANNEL&&(s=O.a.createElement(Ap,{townSquareDisplayName:this.props.townSquareDisplayName,offTopicDisplayName:this.props.offTopicDisplayName,openLhs:this.props.actions.openLhs}));let i="";i=this.props.channelFake?"/".concat(this.props.currentTeamName,"/channels/").concat(this.props.channelName,"?fakechannel=").concat(encodeURIComponent(this.props.channelStringified)):this.props.channelType===N.j.DM_CHANNEL?"/".concat(this.props.currentTeamName,"/messages/@").concat(this.props.channelTeammateUsername):this.props.channelType===N.j.GM_CHANNEL?"/".concat(this.props.currentTeamName,"/messages/").concat(this.props.channelName):"/".concat(this.props.currentTeamName,"/channels/").concat(this.props.channelName);let r="";return r=this.props.currentUserId===this.props.channelTeammateId?this.props.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:this.props.channelDisplayName}):this.props.channelDisplayName,O.a.createElement("li",{key:this.props.channelName,ref:"channel",className:t},O.a.createElement(Np,{link:i,rowClass:a,channelId:this.props.channelId,channelName:this.props.channelName,botIconUrl:this.props.botIconUrl,channelStatus:this.props.channelStatus,channelType:this.props.channelType,displayName:r,handleClose:e,hasDraft:this.props.hasDraft,badge:n,showUnreadForMsgs:this.props.showUnreadForMsgs,unreadMentions:this.props.unreadMentions,unreadMsgs:this.props.unreadMsgs,membersCount:this.props.membersCount,teammateId:this.props.channelTeammateId,teammateDeletedAt:this.props.channelTeammateDeletedAt,teammateIsBot:this.props.channelTeammateIsBot,channelIsArchived:this.props.channelIsArchived}),s)})}}Rp(kp,"propTypes",{config:C.a.object.isRequired,channelId:C.a.string.isRequired,channelName:C.a.string.isRequired,channelDisplayName:C.a.string.isRequired,botIconUrl:C.a.string,channelMuted:C.a.bool,channelType:C.a.string.isRequired,channelStatus:C.a.string,channelFake:C.a.bool,channelStringified:C.a.string,channelTeammateId:C.a.string,channelTeammateUsername:C.a.string,channelTeammateDeletedAt:C.a.number,channelTeammateIsBot:C.a.bool,hasDraft:C.a.bool.isRequired,intl:ne.a.isRequired,showUnreadForMsgs:C.a.bool.isRequired,unreadMsgs:C.a.number.isRequired,unreadMentions:C.a.number.isRequired,active:C.a.bool.isRequired,currentTeamName:C.a.string.isRequired,currentUserId:C.a.string.isRequired,showTutorialTip:C.a.bool.isRequired,townSquareDisplayName:C.a.string,offTopicDisplayName:C.a.string,membersCount:C.a.number.isRequired,shouldHideChannel:C.a.bool.isRequired,channelIsArchived:C.a.bool.isRequired,redirectChannel:C.a.string.isRequired,actions:C.a.shape({savePreferences:C.a.func.isRequired,leaveChannel:C.a.func.isRequired,leaveDirectChannel:C.a.func.isRequired,openLhs:C.a.func.isRequired}).isRequired});const Lp=Object(te.c)(kp,{forwardRef:!0});Lp.displayName="injectIntl(SidebarChannel)";var Dp=Lp;var xp=Object(n.connect)((function(){const e=Object(p.makeGetChannel)();return(t,a)=>{const n=a.channelId,s=Object(m.getConfig)(t),i=Object(p.getCurrentChannelId)(t),r=e(t,{id:n})||{},o=!!r.id&&Object(ys.i)(t,N.I.DRAFT,r.id),l="true"===s.EnableTutorial,c=Object(d.getInt)(t,N.j.Preferences.TUTORIAL_STEP,a.currentUserId,N.j.TutorialSteps.FINISHED),g=Object(p.getChannelsNameMapInCurrentTeam)(t),b=Object(u.getUserIdsInChannels)(t);let f=0;b&&b[r.id]&&(f=b[r.id].size,b[r.id].has(a.currentUserId)&&f--);const _=Object(Ep.getMyChannelMemberships)(t)[n];let E=0,v=0,y=!0;_&&(E=_.mention_count,r&&(v=Math.max(r.total_msg_count-_.msg_count,0)),_.notify_props&&(y=_.notify_props.mark_unread!==N.v.MENTION));const C=Object(d.getTeammateNameDisplaySetting)(t);let w=null,O="",T=0,S="",P=!1,M=0,I=r.display_name,j=null;var A;r.type===N.j.DM_CHANNEL&&(w=Object(u.getUser)(t,r.teammate_id),w&&(O=w.id,T=w.delete_at,S=w.username,P=w.is_bot,M=w.bot_last_icon_update,M=void 0===M?0:M),P&&0!==M&&(A=w,j="".concat(En.Client4.getBotRoute(A.id),"/icon?_=").concat(A.bot_last_icon_update||0)),I=Object(an.displayUsername)(w,C,!1));let R=!1;return r.name!==N.j.DEFAULT_CHANNEL||a.active||!Object(p.shouldHideDefaultChannel)(t,r)||Object(gn.isFavoriteChannel)(t.entities.preferences.myPreferences,r.id)||(R=!0),{config:s,channelId:n,channelName:r.name,channelDisplayName:I,botIconUrl:j,channelType:r.type,channelStatus:r.status,channelFake:r.fake,channelMuted:Object(gn.isChannelMuted)(_),channelStringified:r.fake&&JSON.stringify(r),channelTeammateId:O,channelTeammateUsername:S,channelTeammateDeletedAt:T,channelTeammateIsBot:P,hasDraft:o&&Boolean(o.message.trim()||o.fileInfos.length||o.uploadsInProgress.length)&&i!==r.id,showTutorialTip:l&&c===N.j.TutorialSteps.CHANNEL_POPOVER,townSquareDisplayName:g[N.j.DEFAULT_CHANNEL]&&g[N.j.DEFAULT_CHANNEL].display_name,offTopicDisplayName:g[N.j.OFFTOPIC_CHANNEL]&&g[N.j.OFFTOPIC_CHANNEL].display_name,showUnreadForMsgs:y,unreadMsgs:v,unreadMentions:E,membersCount:f,shouldHideChannel:R,channelIsArchived:0!==r.delete_at,redirectChannel:Object(p.getRedirectChannelNameForTeam)(t,Object(h.getCurrentTeamId)(t))}}}),(function(e){return{actions:Object(s.bindActionCreators)({savePreferences:os.savePreferences,leaveChannel:E.e,leaveDirectChannel:E.f,openLhs:ah.b},e)}}),null,{withRef:!0})(Dp);function Up(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class qp extends O.a.PureComponent{constructor(...e){super(...e),Up(this,"renderPublic",()=>{if(!this.props.canCreatePublicChannel)return null;const e="".concat(j.lb("sidebar.createChannel","Create a public channel").toLowerCase()),t=O.a.createElement(di.a,{id:"new-channel-tooltip"},O.a.createElement(ee.a,{id:"sidebar.createChannel",defaultMessage:"Create a public channel"}));return O.a.createElement("button",{id:"createPublicChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPublicChannel},O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:t},O.a.createElement("span",null,"+")))}),Up(this,"renderPrivate",()=>{if(!this.props.canCreatePrivateChannel)return null;const e="".concat(j.lb("sidebar.createGroup","Create a private channel").toLowerCase()),t=O.a.createElement(di.a,{id:"new-group-tooltip"},O.a.createElement(ee.a,{id:"sidebar.createGroup",defaultMessage:"Create a private channel"}));return O.a.createElement("button",{id:"createPrivateChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPrivateChannel},O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:t},O.a.createElement("span",null,"+")))}),Up(this,"renderDirect",()=>{const e=j.lb("sidebar.createDirectMessage","Write a direct message").toLowerCase(),t=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"sidebar.createDirectMessage",defaultMessage:"Write a direct message"}));return O.a.createElement("button",{id:"addDirectChannel","aria-label":e,className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createDirectMessage},O.a.createElement(mi.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:t},O.a.createElement("span",null,"+")))}),Up(this,"renderCombined",()=>{const{canCreatePublicChannel:e,canCreatePrivateChannel:t}=this.props;if(e&&!t)return this.renderPublic();if(t&&!e)return this.renderPrivate();if(!e&&!t)return null;const a=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"sidebar.createPublicPrivateChannel",defaultMessage:"Create a public or private channel"}));return O.a.createElement("button",{type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:this.props.createPublicDirectChannel},O.a.createElement(mi.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:a},O.a.createElement("span",null,"+")))})}render(){const{sectionType:e}=this.props;switch(e){case"public":return this.renderPublic();case"private":return this.renderPrivate();case"direct":return this.renderDirect();case"recent":case"alpha":return this.renderCombined()}return null}}function Hp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Up(qp,"propTypes",{sectionType:y.PropTypes.string.isRequired,createPublicChannel:y.PropTypes.func.isRequired,createPrivateChannel:y.PropTypes.func.isRequired,createDirectMessage:y.PropTypes.func.isRequired,createPublicDirectChannel:y.PropTypes.func.isRequired,canCreatePublicChannel:y.PropTypes.bool.isRequired,canCreatePrivateChannel:y.PropTypes.bool.isRequired});class Fp extends O.a.PureComponent{constructor(...e){super(...e),Hp(this,"moreChannelsPublic",()=>{this.props.moreChannels("public")}),Hp(this,"moreChannelsPrivate",()=>{this.props.moreChannels("private")})}render(){const{sectionType:e,moreDirectMessages:t,browsePublicDirectChannels:a,viewArchivedChannels:n}=this.props,{formatMessage:s}=this.props.intl;switch(e){case"public":return O.a.createElement(Kd.a,{teamId:this.props.currentTeamId,permissions:[x.Permissions.JOIN_PUBLIC_CHANNELS]},O.a.createElement("li",{key:"public-channel-more","data-testid":"morePublicButton"},O.a.createElement("button",{id:"sidebarPublicChannelsMore","aria-label":s({id:"sidebar.morePublicAria",defaultMessage:"See more public channels"}),className:"nav-more cursor--pointer style--none btn--block",onClick:this.moreChannelsPublic},O.a.createElement(ee.a,{id:"sidebar.moreElips",defaultMessage:"More..."}))));case"private":return n?O.a.createElement(Kd.a,{teamId:this.props.currentTeamId,permissions:[x.Permissions.JOIN_PUBLIC_CHANNELS]},O.a.createElement("li",{key:"public-channel-more","data-testid":"morePublicButton"},O.a.createElement("button",{id:"sidebarPrivateChannelsMore","aria-label":s({id:"sidebar.morePublicAria",defaultMessage:"See more public channels"}),className:"nav-more cursor--pointer style--none btn--block",onClick:this.moreChannelsPrivate},O.a.createElement(ee.a,{id:"sidebar.moreElips",defaultMessage:"More..."})))):null;case"direct":return O.a.createElement("li",{key:"dm-more",id:"moreDMButton"},O.a.createElement("button",{id:"moreDirectMessage","aria-label":s({id:"sidebar.moreDmAria",defaultMessage:"See more direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:t},O.a.createElement(ee.a,{id:"sidebar.moreElips",defaultMessage:"More..."})));case"recent":case"alpha":return O.a.createElement("li",{key:"public-dm-more",id:"moreRecentAlphaButton"},O.a.createElement("button",{id:"morePublicDirectChannels","aria-label":s({id:"sidebar.morePublicDmAria",defaultMessage:"See more public channels direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:a},O.a.createElement(ee.a,{id:"sidebar.moreElips",defaultMessage:"More..."})))}return null}}Hp(Fp,"propTypes",{currentTeamId:y.PropTypes.string.isRequired,intl:ne.a.isRequired,sectionType:y.PropTypes.string.isRequired,moreChannels:y.PropTypes.func.isRequired,moreDirectMessages:y.PropTypes.func.isRequired,browsePublicDirectChannels:y.PropTypes.func.isRequired,viewArchivedChannels:y.PropTypes.bool});var Bp=Object(te.c)(Fp);function Gp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Vp=["recent","alpha"];class Wp extends O.a.PureComponent{constructor(...e){super(...e),Gp(this,"sectionTypeFormatMessageId",e=>{switch(e){case"public":return Object(ve.b)("sidebar.types.public");case"private":return Object(ve.b)("sidebar.types.private");case"direct":return Object(ve.b)("sidebar.types.direct");case"favorite":return Object(ve.b)("sidebar.types.favorite");case"unreads":return Object(ve.b)("sidebar.types.unreads");case"recent":return Object(ve.b)("sidebar.types.recent");default:return Object(ve.b)("sidebar.types.alpha")}})}render(){const{sectionType:e,channelName:t,browsePublicDirectChannels:a}=this.props;let n=["hover","focus"];j.cb()&&(n=[]);const s=this.sectionTypeFormatMessageId(e);let i=O.a.createElement(ee.a,{id:s,defaultMessage:t});if(-1!==Vp.indexOf(e)){const e=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"sidebar.browseChannelDirectChannel",defaultMessage:"Browse channels and direct messages"}));i=O.a.createElement(mi.a,{trigger:n,delayShow:500,placement:"top",overlay:e},O.a.createElement("div",{role:"presentation",className:"public_direct_name",onClick:a},i))}return i}}function zp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Gp(Wp,"propTypes",{sectionType:y.PropTypes.string.isRequired,channelName:y.PropTypes.string.isRequired,browsePublicDirectChannels:y.PropTypes.func.isRequired});class Kp extends O.a.PureComponent{constructor(...e){super(...e),zp(this,"state",{show:!0,key:"channels"}),zp(this,"handleHide",()=>{this.setState({show:!1})}),zp(this,"handleExit",()=>{this.props.onModalDismissed&&this.props.onModalDismissed()}),zp(this,"handleSelect",e=>{this.setState({key:e})})}render(){return O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal more-direct-channels more-public-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"morePublicModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"morePublicModalLabel"},O.a.createElement(ee.a,{id:"more_public_direct_channels.title",defaultMessage:"Channels and Direct Messages"}))),O.a.createElement($.a.Body,null,O.a.createElement(de.a,{id:"morePublicDirectChannelTabs",className:"modal-tabs",defaultActiveKey:"channels",activeKey:this.state.key,onSelect:this.handleSelect,unmountOnExit:!0},O.a.createElement(me.a,{eventKey:"channels",title:Object(j.lb)("more_public_direct_channels.channels","Channels")},O.a.createElement(dh,{handleNewChannel:this.props.handleNewChannel,onModalDismissed:this.handleHide,bodyOnly:!0})),O.a.createElement(me.a,{eventKey:"dm",title:Object(j.lb)("more_public_direct_channels.direct_messages","Direct Messages")},O.a.createElement(Ch,{onModalDismissed:this.handleHide,isExistingChannel:!1,bodyOnly:!0})))))}}function Yp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qp(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Zp(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Jp(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}zp(Kp,"propTypes",{handleNewChannel:C.a.func,onModalDismissed:C.a.func});class Xp extends O.a.PureComponent{constructor(e){super(e),Yp(this,"handleOpenMoreDirectChannelsModal",e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():this.showMoreDirectChannelsModal()}),Yp(this,"onScroll",()=>{this.updateUnreadIndicators()}),Yp(this,"handleScrollAnimationUpdate",e=>{const{scrollbar:t}=this.refs,a=e.getCurrentValue();t.scrollTop(a)}),Yp(this,"scrollToFirstUnreadChannel",()=>{this.scrollToChannel(this.firstUnreadChannel,!0)}),Yp(this,"scrollToLastUnreadChannel",()=>{this.scrollToChannel(this.lastUnreadChannel,!0)}),Yp(this,"scrollToChannel",(e,t=!1)=>{const a=As()(Ii.a.findDOMNode(this.refs[e]));if(!a)return;const n=a.position();if(!n)return;const s=n.top,i=s+a.height(),r=this.refs.scrollbar.getScrollTop(),o=this.refs.scrollbar.getClientHeight();if(s<r){const a=t||!this.state.showTopUnread?15:60;let n;const i=this.getDisplayedChannels(this.state.orderedChannelIds);n=i.length>0&&i[0]===e?nh.MathUtil.mapValueInRange(0,0,1,0,1):nh.MathUtil.mapValueInRange(s-a,0,1,0,1),this.scrollToPosition(n)}else if(i>r+o){const e=i-o+(t||!this.state.showBottomUnread?15:60);this.scrollToPosition(e)}}),Yp(this,"scrollToPosition",e=>{this.scrollAnimation.setCurrentValue(this.refs.scrollbar.getScrollTop()).setAtRest(),this.scrollAnimation.setEndValue(e)}),Yp(this,"updateUnreadIndicators",()=>{let e=!1,t=!1;if(this.firstUnreadChannel){const t=As()(Ii.a.findDOMNode(this.refs[this.firstUnreadChannel])),a=t?t.position():null;a&&a.top+t.height()-15<this.refs.scrollbar.getScrollTop()&&(e=!0)}if(this.lastUnreadChannel){const e=As()(Ii.a.findDOMNode(this.refs[this.lastUnreadChannel])),a=e?e.position():null;a&&a.top+15>this.refs.scrollbar.getScrollTop()+this.refs.scrollbar.getClientHeight()&&(t=!0)}e===this.state.showTopUnread&&t===this.state.showBottomUnread||this.setState({showTopUnread:e,showBottomUnread:t})}),Yp(this,"navigateChannelShortcut",e=>{if(!e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||!j.Z(e,N.j.KeyCodes.UP)&&!j.Z(e,N.j.KeyCodes.DOWN))j.e(e)&&e.shiftKey&&j.Z(e,N.j.KeyCodes.K)&&this.handleOpenMoreDirectChannelsModal(e);else{if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;const t=this.getDisplayedChannels(this.state.orderedChannelIds),a=this.props.currentChannel.id;let n=-1;for(let e=0;e<t.length;e++)t[e]===a&&(n=e);let s=n;s=j.Z(e,N.j.KeyCodes.DOWN)?n+1:n-1;const i=t[j.mb(s,t.length)];this.props.actions.switchToChannelById(i),this.scrollToChannel(i),this.isSwitchingChannel=!1}}),Yp(this,"navigateUnreadChannelShortcut",e=>{if(e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey&&(j.Z(e,N.j.KeyCodes.UP)||j.Z(e,N.j.KeyCodes.DOWN))){if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;const t=this.getDisplayedChannels(this.state.orderedChannelIds);let a=0;a=j.Z(e,N.j.KeyCodes.UP)?-1:1;const n=ya(this.props.currentChannel.id,t,this.props.unreadChannelIds,a);if(-1!==n){const e=t[n];this.props.actions.switchToChannelById(e),this.scrollToChannel(e)}this.isSwitchingChannel=!1}}),Yp(this,"getDisplayedChannels",(e=[])=>e.reduce((e,t)=>(e.push(...t.items),e),[])),Yp(this,"channelIdIsDisplayedForProps",(e=[],t)=>{const a=this.getDisplayedChannels(e);for(let e=0;e<a.length;e++)if(a[e]===t)return!0;return!1}),Yp(this,"showMorePublicDirectChannelsModal",()=>{this.setState({showMorePublicChannelsModal:!0}),Object(qe.d)("ui","ui_channels_more_public_direct")}),Yp(this,"hideMorePublicDirectChannelsModal",()=>{this.setState({showMorePublicChannelsModal:!1})}),Yp(this,"onHandleNewChannel",()=>{this.hideMorePublicDirectChannelsModal(),this.showNewChannelModal(N.j.OPEN_CHANNEL)}),Yp(this,"showMoreChannelsModal",e=>{this.setState({showMoreChannelsModal:!0,morePublicChannelsModalType:e}),Object(qe.d)("ui","ui_channels_more_public")}),Yp(this,"hideMoreChannelsModal",()=>{this.setState({showMoreChannelsModal:!1})}),Yp(this,"showNewPublicChannelModal",()=>{Object(qe.d)("ui","ui_channels_create_channel_public_v1"),this.showNewChannelModal(N.j.OPEN_CHANNEL)}),Yp(this,"showNewPrivateChannelModal",()=>{Object(qe.d)("ui","ui_channels_create_channel_private_v1"),this.showNewChannelModal(N.j.PRIVATE_CHANNEL)}),Yp(this,"showNewChannelModal",e=>{this.setState({newChannelModalType:e})}),Yp(this,"hideNewChannelModal",()=>{this.setState({newChannelModalType:""})}),Yp(this,"showMoreDirectChannelsModal",()=>{Object(qe.d)("ui","ui_channels_more_direct"),this.setState({showDirectChannelsModal:!0})}),Yp(this,"hideMoreDirectChannelsModal",()=>{this.setState({showDirectChannelsModal:!1})}),Yp(this,"openQuickSwitcher",e=>{e.preventDefault(),Object(qe.d)("ui","ui_sidebar_open_channel_switcher_v1"),this.props.actions.openModal({modalId:N.u.QUICK_SWITCH,dialogType:Yh})}),Yp(this,"createSidebarChannel",e=>O.a.createElement(xp,{key:e,ref:e,channelId:e,active:e===this.props.currentChannel.id,currentTeamName:this.props.currentTeam.name,currentUserId:this.props.currentUser.id})),Yp(this,"renderOrderedChannels",()=>{const{orderedChannelIds:e}=this.state,t=[N.F.UNREADS,N.F.FAVORITE];return O.a.createElement(ks.a,{ref:"scrollbar",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Zp,renderThumbVertical:Jp,renderView:Qp,onScroll:this.onScroll,style:{position:"absolute"}},O.a.createElement("div",{id:"sidebarChannelContainer",className:"nav-pills__container"},e.map(e=>{const a={type:e.type,name:e.name,items:e.items.map(this.createSidebarChannel)};if(-1!==t.indexOf(a.type)&&0===a.items.length)return null;const n="".concat(a.type,"Channel"),s=a.name.toLowerCase();return O.a.createElement("ul",{key:a.type,"aria-label":s,className:"nav nav-pills nav-stacked a11y__section",id:n+"List",tabIndex:"-1"},O.a.createElement("li",{className:"sidebar-section__header"},O.a.createElement("h4",{role:"presentation",id:n},O.a.createElement(Wp,{sectionType:a.type,channelName:a.name,browsePublicDirectChannels:this.showMorePublicDirectChannelsModal})),O.a.createElement(qp,{sectionType:a.type,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,createPublicChannel:this.showNewPublicChannelModal,createPrivateChannel:this.showNewPrivateChannelModal,createDirectMessage:this.handleOpenMoreDirectChannelsModal,createPublicDirectChannel:this.showNewPublicChannelModal})),a.items,O.a.createElement(Bp,{currentTeamId:this.props.currentTeam.id,sectionType:a.type,moreChannels:this.showMoreChannelsModal,moreDirectMessages:this.handleOpenMoreDirectChannelsModal,browsePublicDirectChannels:this.showMorePublicDirectChannelsModal,viewArchivedChannels:this.props.viewArchivedChannels}))})))}),this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null,this.isLeaving=new Map,this.isSwitchingChannel=!1,this.closedDirectChannel=!1,this.state={newChannelModalType:"",orderedChannelIds:e.orderedChannelIds,showDirectChannelsModal:!1,showMoreChannelsModal:!1,showMorePublicChannelsModal:!1,morePublicChannelsModalType:"public"},this.animate=new nh.SpringSystem,this.scrollAnimation=this.animate.createSpring(),this.scrollAnimation.setOvershootClampingEnabled(!0),this.scrollAnimation.addListener({onSpringUpdate:this.handleScrollAnimationUpdate})}static getDerivedStateFromProps(e,t){return e.orderedChannelIds[0].type===N.F.UNREADS&&t.orderedChannelIds[0].type===N.F.UNREADS&&t.orderedChannelIds[0].items.length===e.orderedChannelIds[0].items.length&&t.orderedChannelIds[0].items.includes(e.currentChannel.id)?null:e.orderedChannelIds!==t.orderedChannelIds?{orderedChannelIds:e.orderedChannelIds}:null}componentDidMount(){this.updateUnreadIndicators(),document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}componentDidUpdate(e){if(this.props.currentTeam===e.currentTeam&&this.props.currentChannel.id===e.currentChannel.id&&!this.channelIdIsDisplayedForProps(this.props.orderedChannelIds,this.props.currentChannel.id)&&this.channelIdIsDisplayedForProps(e.orderedChannelIds,this.props.currentChannel.id))return this.closedDirectChannel=!0,void Object(M.f)();this.props.currentTeam!==e.currentTeam&&this.refs.scrollbar.scrollToTop(),this.props.currentChannel.id,e.currentChannel.id,this.props.currentChannel.id!==e.currentChannel.id&&(this.closedDirectChannel?this.closedDirectChannel=!1:this.props.actions.close()),this.setFirstAndLastUnreadChannels(),this.updateUnreadIndicators()}componentWillUnmount(){document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut),this.animate.deregisterSpring(this.scrollAnimation),this.animate.removeAllListeners(),this.scrollAnimation.destroy()}setFirstAndLastUnreadChannels(){const{currentChannel:e,unreadChannelIds:t}=this.props,{orderedChannelIds:a}=this.state;this.getDisplayedChannels(a).map(a=>(a!==e.id&&t.includes(a)&&(this.firstUnreadChannel||(this.firstUnreadChannel=a),this.lastUnreadChannel=a),null))}render(){const{channelSwitcherOption:e}=this.props,t=j.lb("accessibility.sections.lhsList","channel sidebar region");if(null==this.props.currentTeam||null==this.props.currentUser)return O.a.createElement("div",null);this.firstUnreadChannel=null,this.lastUnreadChannel=null;let a=!1;""!==this.state.newChannelModalType&&(a=!0);const n=O.a.createElement(ee.a,{id:"sidebar.unreads",defaultMessage:"More Unreads"}),s=O.a.createElement(ee.a,{id:"sidebar.unreads",defaultMessage:"More Unreads"});let i,r;this.state.showDirectChannelsModal&&(i=O.a.createElement(Ch,{onModalDismissed:this.hideMoreDirectChannelsModal,isExistingChannel:!1})),this.state.showMoreChannelsModal&&(r=O.a.createElement(dh,{onModalDismissed:this.hideMoreChannelsModal,handleNewChannel:()=>{this.hideMoreChannelsModal(),this.showNewChannelModal(N.j.OPEN_CHANNEL)},morePublicChannelsModalType:this.state.morePublicChannelsModalType}));let o,l=null;if(e){let e=Object(ve.b)("quick_switch_modal.channelsShortcut.windows"),t="- CTRL+K";j.bb()&&(e=Object(ve.b)("quick_switch_modal.channelsShortcut.mac"),t="- ⌘K");const a=O.a.createElement("span",{className:"switch__shortcut hidden-xs"},O.a.createElement(ee.a,{id:e,defaultMessage:t}));l=O.a.createElement("div",{className:"sidebar__switcher"},O.a.createElement("button",{id:"sidebarSwitcherButton",className:"btn btn-link",onClick:this.openQuickSwitcher},O.a.createElement(ee.a,{id:"channel_switch_modal.title",defaultMessage:"Switch Channels"}),a))}return this.state.showMorePublicChannelsModal&&(o=O.a.createElement(Kp,{onModalDismissed:this.hideMorePublicDirectChannelsModal,handleNewChannel:this.onHandleNewChannel,isExistingChannel:!1})),O.a.createElement("div",{className:ws()("sidebar--left",{"move--right":this.props.isOpen&&j.cb()}),id:"sidebar-left",key:"sidebar-left",role:"navigation","aria-labelledby":"sidebar-left"},O.a.createElement(sp,{show:a,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),o,i,r,O.a.createElement(_p,null),O.a.createElement("div",{className:"sidebar--left__icons"},O.a.createElement(k.a,{pluggableName:"LeftSidebarHeader"})),O.a.createElement("div",{id:"lhsList",role:"application","aria-label":t,tabIndex:"-1",className:"sidebar--left__list a11y__region","data-a11y-sort-order":"6"},O.a.createElement(op,{name:"Top",show:this.state.showTopUnread,onClick:this.scrollToFirstUnreadChannel,extraClass:"nav-pills__unread-indicator-top",content:n}),O.a.createElement(op,{name:"Bottom",show:this.state.showBottomUnread,onClick:this.scrollToLastUnreadChannel,extraClass:"nav-pills__unread-indicator-bottom",content:s}),this.renderOrderedChannels()),l)}}Yp(Xp,"propTypes",{config:y.PropTypes.object.isRequired,isOpen:y.PropTypes.bool.isRequired,unreadChannelIds:y.PropTypes.array,orderedChannelIds:y.PropTypes.arrayOf(y.PropTypes.shape({type:y.PropTypes.string.isRequired,name:y.PropTypes.string.isRequired,items:y.PropTypes.array.isRequired})),currentChannel:y.PropTypes.object,currentTeammate:y.PropTypes.object,currentTeam:y.PropTypes.object,currentUser:y.PropTypes.object,intl:ne.a.isRequired,unreads:y.PropTypes.object.isRequired,canCreatePublicChannel:y.PropTypes.bool.isRequired,canCreatePrivateChannel:y.PropTypes.bool.isRequired,channelSwitcherOption:y.PropTypes.bool.isRequired,viewArchivedChannels:y.PropTypes.bool,actions:y.PropTypes.shape({close:y.PropTypes.func.isRequired,switchToChannelById:y.PropTypes.func.isRequired,openModal:y.PropTypes.func.isRequired}).isRequired}),Yp(Xp,"defaultProps",{currentChannel:{}});var $p=Object(te.c)(Xp);var eg=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(p.getCurrentChannel)(e),n=a&&a.teammate_id&&Object(p.getCurrentChannel)(e,a.teammate_id),s=Object(h.getCurrentTeam)(e);let i=!1,r=!1;s&&(i=Object(U.haveITeamPermission)(e,{team:s.id,permission:Ea.a.CREATE_PUBLIC_CHANNEL}),r=Object(U.haveITeamPermission)(e,{team:s.id,permission:Ea.a.CREATE_PRIVATE_CHANNEL}));const o=Object(d.getSidebarPreferences)(e),l=e.views.channel.keepChannelIdAsUnread;return{config:t,unreadChannelIds:Object(p.getSortedUnreadChannelIds)(e,l),orderedChannelIds:Object(p.getOrderedChannelIds)(e,l,o.grouping,o.sorting,"true"===o.unreads_at_top,"true"===o.favorite_at_top),channelSwitcherOption:Object(d.getBool)(e,x.Preferences.CATEGORY_SIDEBAR_SETTINGS,"channel_switcher_section","true"),currentChannel:a,currentTeammate:n,currentTeam:s,currentUser:Object(u.getCurrentUser)(e),canCreatePublicChannel:i,canCreatePrivateChannel:r,isOpen:qu(e),unreads:Object(p.getUnreads)(e),viewArchivedChannels:"true"===Object(m.getConfig)(e).ExperimentalViewArchivedChannels}}),(function(e){return{actions:Object(s.bindActionCreators)({close:ah.a,switchToChannelById:E.n,openModal:q.b},e)}}))($p);function tg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ag extends O.a.PureComponent{constructor(...e){super(...e),tg(this,"renderDropdownItems",()=>{const{intl:e,canCreateChannel:t,canJoinPublicChannel:a}=this.props;let n,s;return a&&(n=O.a.createElement(Ai.a.ItemAction,{id:"showMoreChannels",onClick:this.props.showMoreChannelsModal,icon:O.a.createElement("i",{className:"icon-globe"}),text:e.formatMessage({id:"sidebar_left.add_channel_dropdown.browseChannels",defaultMessage:"Browse Channels"})})),t&&(s=O.a.createElement(Ai.a.ItemAction,{id:"showNewChannel",onClick:this.props.showNewChannelModal,icon:O.a.createElement("i",{className:"icon-plus"}),text:e.formatMessage({id:"sidebar_left.add_channel_dropdown.createNewChannel",defaultMessage:"Create New Channel"})})),O.a.createElement(Ai.a.Group,null,n,s)})}render(){const{intl:e,canCreateChannel:t,canJoinPublicChannel:a}=this.props;if(!t&&!a)return null;const n=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},O.a.createElement(ee.a,{id:"sidebar_left.add_channel_dropdown.browseOrCreateChannels",defaultMessage:"Browse or create channels"}));return O.a.createElement(ji.a,{className:"AddChannelDropdown"},O.a.createElement("button",{className:"AddChannelDropdown_dropdownButton","aria-label":e.formatMessage({id:"sidebar_left.add_channel_dropdown.dropdownAriaLabel",defaultMessage:"Add Channel Dropdown"})},O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:n},O.a.createElement("i",{className:"icon-plus"}))),O.a.createElement(Ai.a,{id:"AddChannelDropdown",ariaLabel:e.formatMessage({id:"sidebar_left.add_channel_dropdown.dropdownAriaLabel",defaultMessage:"Add Channel Dropdown"})},this.renderDropdownItems()))}}tg(ag,"propTypes",{intl:C.a.any.isRequired,canCreateChannel:C.a.bool.isRequired,canJoinPublicChannel:C.a.bool.isRequired,showMoreChannelsModal:C.a.func.isRequired,showNewChannelModal:C.a.func.isRequired});var ng=Object(te.c)(ag);class sg extends O.a.PureComponent{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleResize",()=>{const e=j.cb();this.setState({isMobile:e})}),this.state={isMobile:j.cb()}}componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const e=j.lb("accessibility.sections.lhsHeader","team menu region");return O.a.createElement("div",{id:"lhsHeader","aria-label":e,tabIndex:-1,role:"application",className:"SidebarHeader team__header theme a11y__region","data-a11y-sort-order":"5"},O.a.createElement("div",{className:"d-flex"},!this.state.isMobile&&O.a.createElement(mp,null),O.a.createElement(bp,null)))}}var ig=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(u.getCurrentUser)(e);return{enableTutorial:"true"===t.EnableTutorial,showTutorialTip:Object(d.getInt)(e,N.B.TUTORIAL_STEP,a.id)===N.K.MENU_POPOVER&&!j.cb()}}))(sg);function rg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class og extends O.a.PureComponent{constructor(...e){super(...e),rg(this,"openQuickSwitcher",e=>{e.preventDefault(),Object(qe.d)("ui","ui_sidebar_open_channel_switcher_v2"),this.props.actions.openModal({modalId:N.u.QUICK_SWITCH,dialogType:Yh})}),rg(this,"goBack",()=>{Object(qe.d)("ui","ui_history_back"),this.props.actions.goBack()}),rg(this,"goForward",()=>{Object(qe.d)("ui","ui_history_forward"),this.props.actions.goForward()})}render(){let e,t="Ctrl+K";return j.bb()&&(t="⌘K"),Object(I.d)()&&(e=O.a.createElement(O.a.Fragment,null,O.a.createElement("button",{className:ws()("SidebarChannelNavigator_backButton",{disabled:!this.props.canGoBack}),disabled:!this.props.canGoBack,onClick:this.goBack,"aria-label":j.lb("sidebar_left.channel_navigator.goBackLabel","Back")},O.a.createElement("i",{className:"icon icon-arrow-left"})),O.a.createElement("button",{className:ws()("SidebarChannelNavigator_forwardButton",{disabled:!this.props.canGoForward}),disabled:!this.props.canGoForward,onClick:this.goForward,"aria-label":j.lb("sidebar_left.channel_navigator.goForwardLabel","Forward")},O.a.createElement("i",{className:"icon icon-arrow-right"})))),O.a.createElement("div",{className:"SidebarChannelNavigator"},O.a.createElement("button",{className:"SidebarChannelNavigator_jumpToButton",onClick:this.openQuickSwitcher,"aria-label":j.lb("sidebar_left.channel_navigator.channelSwitcherLabel","Channel Switcher")},O.a.createElement(ee.a,{id:"sidebar_left.channel_navigator.jumpTo",defaultMessage:"Jump to..."}),O.a.createElement("div",{className:"SidebarChannelNavigator_shortcutText"},t)),e)}}function lg(){return()=>(se.a.goBack(),{data:null})}function cg(){return()=>(se.a.goForward(),{data:null})}rg(og,"propTypes",{canGoForward:C.a.bool.isRequired,canGoBack:C.a.bool.isRequired,actions:C.a.shape({openModal:C.a.func.isRequired,goBack:C.a.func.isRequired,goForward:C.a.func.isRequired}).isRequired});var dg=Object(n.connect)((function(){return{canGoBack:!0,canGoForward:!0}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b,goBack:lg,goForward:cg},e)}}))(og);function mg(e,t){return t?function(e){return Object(Ks.f)(N.I.CHANNEL_CATEGORY_COLLAPSED+e,!0)}(e):function(e){return Object(Ks.f)(N.I.CHANNEL_CATEGORY_COLLAPSED+e,!1)}(e)}function ug(e){return{type:N.f.SET_UNREAD_FILTER_ENABLED,enabled:e}}a(1755),a(1758);var hg=a(197),pg=a(115),gg=a(116);function bg(e,t,a){return Object(pg.b)(t,e+N.I.CHANNEL_CATEGORY_COLLAPSED+a,!1)}function fg(e,t){return _g(e)||bg(Object(gg.a)(e),e.storage.storage,t)}function _g(e){return e.views.channelSidebar.unreadFilterEnabled}function Eg(){const e=Object(hg.makeGetCategoriesForTeam)(),t=Object(hg.makeGetChannelsByCategory)(),a=function(){const e=Object(hg.makeGetCategoriesForTeam)();return Object(ba.createSelector)(gg.a,e,e=>_g(e),e=>e.storage.storage,(e,t,a,n)=>t.reduce((t,s)=>(t[s.id]=bg(e,n,s.id)||a,t),{}))}();return Object(ba.createSelector)(a,e,t,e=>Object(p.getCurrentChannel)(e),e=>Object(p.getUnreadChannelIds)(e),(e,t,a,n,s)=>t.map(t=>{const i=a[t.id];if(e[t.id]){const e=e=>{const t=s.some(t=>e.id===t);return n?t||n.id===e.id:t};return i.filter(e)}return i}).flat())}function vg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yg extends O.a.PureComponent{constructor(...e){super(...e),vg(this,"toggleUnreadFilter",()=>{const{unreadFilterEnabled:e}=this.props;e?Object(qe.d)("ui","ui_sidebar_unread_filter_disabled"):Object(qe.d)("ui","ui_sidebar_unread_filter_enabled"),this.props.actions.setUnreadFilterEnabled(!e)})}render(){const{unreadFilterEnabled:e}=this.props;let t=O.a.createElement(ee.a,{id:"sidebar_left.channel_filter.viewing",defaultMessage:"VIEWING:"}),a=O.a.createElement(ee.a,{id:"sidebar_left.channel_filter.allChannels",defaultMessage:"All channels"}),n=Object(j.lb)("sidebar_left.channel_filter.filterByUnread","Filter by unread");e&&(t=O.a.createElement(ee.a,{id:"sidebar_left.channel_filter.filteredBy",defaultMessage:"FILTERED BY:"}),a=O.a.createElement(ee.a,{id:"sidebar_left.channel_filter.unread",defaultMessage:"Unread"}),n=Object(j.lb)("sidebar_left.channel_filter.showAllChannels","Show all channels"));const s=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},n);return O.a.createElement("div",{className:"SidebarFilters"},O.a.createElement("a",{href:"#",className:ws()("SidebarFilters_filterButton",{active:e}),onClick:this.toggleUnreadFilter,"aria-label":n},O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:s},O.a.createElement("i",{className:"icon icon-filter-variant"}))),O.a.createElement("div",null,O.a.createElement("div",{className:"SidebarFilters_filterTitle"},t),O.a.createElement("div",{className:"SidebarFilters_filterDescription"},a)))}}vg(yg,"propTypes",{unreadFilterEnabled:C.a.bool.isRequired,actions:C.a.shape({setUnreadFilterEnabled:C.a.func.isRequired}).isRequired});var Cg=Object(n.connect)((function(e){return{unreadFilterEnabled:_g(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({setUnreadFilterEnabled:ug},e)}}))(yg),wg=a(166),Og=a(617);class Tg extends O.a.PureComponent{render(){return this.props.unreadMentions>0?O.a.createElement("span",{id:"unreadMentions",className:"badge"},this.props.unreadMentions):null}}function Sg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Tg,"propTypes",{channelId:C.a.string.isRequired,unreadMentions:C.a.number.isRequired});class Pg extends O.a.PureComponent{constructor(e){super(e),Sg(this,"isLeaving",void 0),Sg(this,"handleLeaveChannel",e=>{e.preventDefault(),e.stopPropagation(),!this.isLeaving&&this.props.closeHandler&&(this.isLeaving=!0,this.props.closeHandler(()=>{this.isLeaving=!1}))}),this.isLeaving=!1}render(){const{channel:e,closeHandler:t}=this.props;if(!this.props.show||!t)return null;let a=O.a.createElement(ee.a,{id:"sidebar.removeList",defaultMessage:"Remove from list"});return e.type!==N.Q.OPEN_CHANNEL&&e.type!==N.Q.PRIVATE_CHANNEL||(a=O.a.createElement(ee.a,{id:"sidebar.leave",defaultMessage:"Leave channel"})),O.a.createElement(mi.a,{delayShow:1e3,placement:"top",overlay:O.a.createElement(di.a,{id:"remove-dm-tooltip"},a)},O.a.createElement("span",{onClick:this.handleLeaveChannel,className:"btn-close"},"×"))}}Sg(Pg,"propTypes",{channel:C.a.any.isRequired,show:C.a.bool.isRequired,closeHandler:C.a.func});class Mg extends O.a.PureComponent{render(){return 0!==this.props.channel.delete_at?O.a.createElement("i",{className:"icon icon-archive-outline"}):this.props.hasDraft?O.a.createElement("i",{className:"icon icon-pencil-outline"}):this.props.icon}}function Ng(e,t,a){return e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&t!==a}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Mg,"propTypes",{icon:C.a.oneOfType([C.a.element,C.a.oneOf([null])]),channel:C.a.any.isRequired,hasDraft:C.a.bool.isRequired});var Ig=Object(n.connect)((function(e,t){const a=Object(p.getCurrentChannelId)(e);return{hasDraft:Ng(!!t.channel.id&&Object(ys.i)(e,N.I.DRAFT,t.channel.id),a,t.channel.id)}}),(function(e){return{actions:Object(s.bindActionCreators)({},e)}}))(Mg);function jg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ag extends O.a.PureComponent{constructor(e){super(e),jg(this,"labelRef",void 0),jg(this,"gmItemRef",void 0),jg(this,"enableToolTipIfNeeded",()=>{const e=this.labelRef.current;e&&e.offsetWidth<e.scrollWidth?this.setState({showTooltip:!0}):this.setState({showTooltip:!1})}),jg(this,"getAriaLabel",()=>{const{label:e,ariaLabelPrefix:t,unreadMentions:a}=this.props;let n=e;return t&&(n+=" ".concat(t)),1===a?n+=" ".concat(a," ").concat(Object(j.lb)("accessibility.sidebar.types.mention","mention")):a>1&&(n+=" ".concat(a," ").concat(Object(j.lb)("accessibility.sidebar.types.mentions","mentions"))),this.showChannelAsUnread()&&0===a&&(n+=" ".concat(Object(j.lb)("accessibility.sidebar.types.unread","unread"))),n.toLowerCase()}),jg(this,"removeTooltipLink",()=>{this.gmItemRef.current&&this.gmItemRef.current.removeAttribute("aria-describedby")}),jg(this,"trackChannelSelectedEvent",()=>{Object(qe.b)("SidebarLink#click"),Object(qe.d)("ui","ui_channel_selected_v2")}),jg(this,"handleClick",()=>{this.trackChannelSelectedEvent(),se.a.push(this.props.link)}),jg(this,"showChannelAsUnread",()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs),this.labelRef=O.a.createRef(),this.gmItemRef=O.a.createRef(),this.state={showTooltip:!1}}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{link:e,label:t,channel:a,unreadMentions:n,icon:s,isMuted:i}=this.props,r=O.a.createElement(O.a.Fragment,null,O.a.createElement(Ig,{channel:a,icon:s}),O.a.createElement("span",{className:"SidebarChannelLinkLabel",ref:this.labelRef},t),O.a.createElement(Tg,{channelId:a.id,unreadMentions:n}),O.a.createElement(Pg,{channel:a,show:!this.showChannelAsUnread(),closeHandler:this.props.closeHandler}));let o;const l=this.showChannelAsUnread()?"unread-title":"";if(o=Object(I.d)()?O.a.createElement(Wu,{link:this.props.link,menuId:a.id},O.a.createElement("button",{className:ws()(["btn btn-link SidebarLink",{muted:i},l]),"aria-label":this.getAriaLabel(),onClick:this.handleClick},r)):O.a.createElement(jn.a,{className:ws()(["SidebarLink",{muted:i},l]),id:"sidebarItem_".concat(a.name),"aria-label":this.getAriaLabel(),to:e,onClick:this.trackChannelSelectedEvent},r),this.state.showTooltip){const e=O.a.createElement(di.a,{id:"channel-displayname__tooltip"},t);o=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e,onEntering:this.removeTooltipLink},O.a.createElement("div",{ref:this.gmItemRef},o))}return o}}jg(Ag,"propTypes",{channel:C.a.any.isRequired,link:C.a.string.isRequired,label:C.a.string.isRequired,ariaLabelPrefix:C.a.string,closeHandler:C.a.func,icon:C.a.oneOfType([C.a.element,C.a.oneOf([null])]),unreadMentions:C.a.number.isRequired,unreadMsgs:C.a.number.isRequired,showUnreadForMsgs:C.a.bool.isRequired,isMuted:C.a.bool.isRequired});var Rg=Object(n.connect)((function(e,t){const a=Object(Ep.getMyChannelMemberships)(e)[t.channel.id];let n=0,s=0,i=!0;return a&&(n=a.mention_count,t.channel&&(s=Math.max(t.channel.total_msg_count-a.msg_count,0)),a.notify_props&&(i=a.notify_props.mark_unread!==N.v.MENTION)),{unreadMentions:n,unreadMsgs:s,showUnreadForMsgs:i,isMuted:Object(gn.isChannelMuted)(a)}}),(function(e){return{actions:Object(s.bindActionCreators)({},e)}}))(Ag);function kg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Lg extends O.a.PureComponent{constructor(...e){super(...e),kg(this,"handleLeavePublicChannel",()=>{this.props.actions.leaveChannel(this.props.channel.id),Object(qe.d)("ui","ui_public_channel_x_button_clicked")}),kg(this,"handleLeavePrivateChannel",()=>{M.k({id:this.props.channel.id,display_name:this.props.channel.display_name}),Object(qe.d)("ui","ui_private_channel_x_button_clicked")}),kg(this,"getCloseHandler",()=>{const{channel:e,enableXToLeaveChannelsFromLHS:t}=this.props;if("true"===t){if(e.type===N.Q.OPEN_CHANNEL&&e.name!==N.Q.DEFAULT_CHANNEL)return this.handleLeavePublicChannel;if(e.type===N.Q.PRIVATE_CHANNEL)return this.handleLeavePrivateChannel}return null}),kg(this,"getIcon",()=>{const{channel:e}=this.props;return e.type===N.Q.OPEN_CHANNEL?O.a.createElement("i",{className:"icon icon-globe"}):e.type===N.Q.PRIVATE_CHANNEL?O.a.createElement("i",{className:"icon icon-lock-outline"}):null})}render(){const{channel:e,currentTeamName:t}=this.props;let a;return e.type===N.Q.OPEN_CHANNEL?a=Object(j.lb)("accessibility.sidebar.types.public","public channel"):e.type===N.Q.PRIVATE_CHANNEL&&(a=Object(j.lb)("accessibility.sidebar.types.private","private channel")),O.a.createElement(Rg,{channel:e,link:"/".concat(t,"/channels/").concat(e.name),label:e.display_name,ariaLabelPrefix:a,closeHandler:this.getCloseHandler(),icon:this.getIcon()})}}kg(Lg,"propTypes",{channel:C.a.any.isRequired,currentTeamName:C.a.string.isRequired,enableXToLeaveChannelsFromLHS:C.a.string,actions:C.a.shape({leaveChannel:C.a.func.isRequired}).isRequired});var Dg=Object(n.connect)((function(e){return{enableXToLeaveChannelsFromLHS:Object(m.getConfig)(e).EnableXToLeaveChannelsFromLHS}}),(function(e){return{actions:Object(s.bindActionCreators)({leaveChannel:E.e},e)}}))(Lg);function xg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ug extends O.a.PureComponent{render(){const{status:e,className:t}=this.props;if(!e)return null;let a="icon-circle-outline";return"online"===e?a="icon-check-circle":"away"===e?a="icon-clock":"dnd"===e&&(a="icon-minus-circle"),O.a.createElement("i",{className:"".concat(a," ").concat(t)})}}function qg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}xg(Ug,"propTypes",{className:C.a.string,status:C.a.string}),xg(Ug,"defaultProps",{className:"",status:""});class Hg extends O.a.PureComponent{constructor(e){super(e),qg(this,"handleLeaveChannel",e=>{const t=this.props.channel.teammate_id,a=N.j.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,n=this.props.currentUserId;this.props.actions.savePreferences(n,[{user_id:n,category:a,name:t,value:"false"}]).then(e),Object(qe.d)("ui","ui_direct_channel_x_button_clicked"),this.props.active&&se.a.push("/".concat(this.props.currentTeamName,"/channels/").concat(this.props.redirectChannel))}),qg(this,"onSvgLoadError",()=>{this.setState({svgErrorUrl:this.props.botIconUrl})}),qg(this,"onSvgLoad",()=>{this.setState({svgErrorUrl:null})}),qg(this,"getIcon",()=>{const{channel:e,teammate:t}=this.props;if(!t)return null;if(t.id&&t.delete_at)return O.a.createElement("i",{className:"icon icon-archive-outline"});if(t.id&&t.is_bot){let e=O.a.createElement("i",{className:"icon icon-robot-happy"});return this.props.botIconUrl&&this.props.botIconUrl!==this.state.svgErrorUrl&&(e=O.a.createElement(yp.a,{className:"icon icon-robot-happy",src:this.props.botIconUrl,onLoad:this.onSvgLoad,onError:this.onSvgLoadError})),e}let a="";return"online"===e.status?a="status-online":"away"===e.status?a="status-away":"dnd"===e.status&&(a="status-dnd"),O.a.createElement(Ug,{status:e.status,className:a})}),this.state={svgErrorUrl:null}}render(){const{channel:e,teammate:t,currentTeamName:a}=this.props;if(!t)return null;let n=e.display_name;return this.props.currentUserId===t.id&&(n=this.props.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:e.display_name})),O.a.createElement(Rg,{channel:e,link:"/".concat(a,"/messages/@").concat(t.username),label:n,closeHandler:this.handleLeaveChannel,icon:this.getIcon()})}}qg(Hg,"propTypes",{intl:C.a.any.isRequired,channel:C.a.any.isRequired,teammate:C.a.any,currentTeamName:C.a.string.isRequired,currentUserId:C.a.string.isRequired,redirectChannel:C.a.string.isRequired,active:C.a.bool.isRequired,botIconUrl:C.a.oneOfType([C.a.string,C.a.oneOf([null])]),actions:C.a.shape({savePreferences:C.a.func.isRequired}).isRequired});var Fg=Object(te.c)(Hg);var Bg=Object(n.connect)((function(e,t){const a=Object(u.getUser)(e,t.channel.teammate_id),n=Object(u.getCurrentUser)(e),s=Object(h.getCurrentTeam)(e),i=Object(p.getRedirectChannelNameForTeam)(e,s.id),r=Object(p.getCurrentChannelId)(e),o=t.channel.id===r;return{teammate:a,currentUserId:n.id,redirectChannel:i,active:o,botIconUrl:(l=a,l&&l.is_bot&&l.bot_last_icon_update?"".concat(En.Client4.getBotRoute(l.id),"/icon?_=").concat(l.bot_last_icon_update||0):null)};var l}),(function(e){return{actions:Object(s.bindActionCreators)({savePreferences:os.savePreferences},e)}}))(Fg);function Gg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vg extends O.a.PureComponent{constructor(...e){super(...e),Gg(this,"handleLeaveChannel",e=>{const t=this.props.channel.id,a=N.Q.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,n=this.props.currentUserId;this.props.actions.savePreferences(n,[{user_id:n,category:a,name:t,value:"false"}]).then(e),Object(qe.d)("ui","ui_direct_channel_x_button_clicked"),this.props.active&&se.a.push("/".concat(this.props.currentTeamName,"/channels/").concat(this.props.redirectChannel))}),Gg(this,"getIcon",()=>O.a.createElement("div",{className:"status status--group"},this.props.membersCount))}render(){const{channel:e,currentTeamName:t}=this.props;return O.a.createElement(Rg,{channel:e,link:"/".concat(t,"/messages/").concat(e.name),label:e.display_name,closeHandler:this.handleLeaveChannel,icon:this.getIcon()})}}Gg(Vg,"propTypes",{channel:C.a.any.isRequired,currentTeamName:C.a.string.isRequired,currentUserId:C.a.string.isRequired,redirectChannel:C.a.string.isRequired,active:C.a.bool.isRequired,membersCount:C.a.number.isRequired,actions:C.a.shape({savePreferences:C.a.func.isRequired}).isRequired});var Wg=Object(n.connect)((function(e,t){const a=Object(u.getCurrentUser)(e),n=Object(h.getCurrentTeam)(e),s=Object(p.getRedirectChannelNameForTeam)(e,n.id),i=Object(p.getCurrentChannelId)(e),r=t.channel.id===i,o=Object(u.getUserIdsInChannels)(e);let l=0;if(o&&o[t.channel.id]){const e=o[t.channel.id];l=e.size,e.has(a.id)&&l--}return{currentUserId:a.id,redirectChannel:s,active:r,membersCount:l}}),(function(e){return{actions:Object(s.bindActionCreators)({savePreferences:os.savePreferences},e)}}))(Vg);function zg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kg extends O.a.PureComponent{constructor(...e){super(...e),zg(this,"isUnread",()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs),zg(this,"isCollapsed",e=>e.isCategoryCollapsed&&!this.isUnread()&&!e.isCurrentChannel),zg(this,"removeAnimation",()=>{const e=this.getRef();e&&e.classList.remove("animating")}),zg(this,"getRef",()=>this.props.getChannelRef(this.props.channel.id)),zg(this,"setRef",e=>{this.props.setChannelRef(this.props.channel.id,e)})}componentDidUpdate(e){if(this.isCollapsed(this.props)!==this.isCollapsed(e)){const e=this.getRef();e&&e.classList.add("animating")}}render(){const{channel:e,currentTeamName:t}=this.props;let a=Dg;return e.type===N.Q.DM_CHANNEL?a=Bg:e.type===N.Q.GM_CHANNEL&&(a=Wg),O.a.createElement("li",{role:"listitem",draggable:"false",ref:this.setRef,className:ws()("SidebarChannel",{collapsed:this.isCollapsed(this.props),unread:this.isUnread(),active:this.props.isCurrentChannel}),onTransitionEnd:this.removeAnimation},O.a.createElement(a,{channel:e,currentTeamName:t}))}}zg(Kg,"propTypes",{channel:C.a.any.isRequired,teammateUsername:C.a.string,currentTeamName:C.a.string.isRequired,unreadMentions:C.a.number.isRequired,unreadMsgs:C.a.number.isRequired,showUnreadForMsgs:C.a.bool.isRequired,getChannelRef:C.a.func.isRequired,setChannelRef:C.a.func.isRequired,isCategoryCollapsed:C.a.bool.isRequired,isCurrentChannel:C.a.bool.isRequired});var Yg=Object(n.connect)((function(){const e=Object(p.makeGetChannel)();return(t,a)=>{const n=e(t,{id:a.channelId}),s=Object(h.getCurrentTeam)(t),i=Object(Ep.getMyChannelMemberships)(t)[a.channelId],r=Object(p.getCurrentChannelId)(t);let o=0,l=0,c=!0;return i&&(o=i.mention_count,n&&(l=Math.max(n.total_msg_count-i.msg_count,0)),i.notify_props&&(c=i.notify_props.mark_unread!==N.v.MENTION)),{channel:n,isCurrentChannel:n.id===r,currentTeamName:s.name,unreadMentions:o,unreadMsgs:l,showUnreadForMsgs:c}}}))(Kg);function Qg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zg extends O.a.PureComponent{constructor(e){super(e),Qg(this,"categoryTitleRef",void 0),Qg(this,"handleA11yActivateEvent",()=>{this.categoryTitleRef.current&&this.categoryTitleRef.current.addEventListener("keydown",this.handleA11yKeyDown)}),Qg(this,"handleA11yDeactivateEvent",()=>{this.categoryTitleRef.current&&this.categoryTitleRef.current.removeEventListener("keydown",this.handleA11yKeyDown)}),Qg(this,"handleA11yKeyDown",e=>{Object(j.Z)(e,N.Q.KeyCodes.ENTER)&&this.handleCollapse()}),Qg(this,"renderChannel",e=>{const{isCollapsed:t,setChannelRef:a,getChannelRef:n}=this.props;return O.a.createElement(Yg,{key:e.id,channelId:e.id,setChannelRef:a,getChannelRef:n,isCategoryCollapsed:t})}),Qg(this,"handleCollapse",()=>{const{category:e,isCollapsed:t}=this.props;t?Object(qe.d)("ui","ui_sidebar_expand_category"):Object(qe.d)("ui","ui_sidebar_collapse_category"),this.props.actions.setCategoryCollapsed(e.id,!t)}),Qg(this,"handleOpenDirectMessagesModal",e=>{e.stopPropagation(),this.props.handleOpenMoreDirectChannelsModal(e.nativeEvent)}),this.categoryTitleRef=O.a.createRef()}componentDidMount(){this.categoryTitleRef.current&&(this.categoryTitleRef.current.addEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.categoryTitleRef.current.addEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}componentWillUnmount(){this.categoryTitleRef.current&&(this.categoryTitleRef.current.removeEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.categoryTitleRef.current.removeEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent))}render(){const{category:e,isCollapsed:t,channels:a}=this.props;if(!e)return null;if(!(e.type===wg.CategoryTypes.DIRECT_MESSAGES||a&&a.length))return null;const n=a.map(this.renderChannel);let s,i=!1;if(e.type===wg.CategoryTypes.DIRECT_MESSAGES){const e=Object(Og.localizeMessage)("sidebar.createDirectMessage","Create new direct message"),t=O.a.createElement(di.a,{id:"new-group-tooltip",className:"hidden-xs"},e);s=O.a.createElement("button",{className:"SidebarChannelGroupHeader_addButton",onClick:this.handleOpenDirectMessagesModal,"aria-label":e},O.a.createElement(mi.a,{delayShow:500,placement:"top",overlay:t},O.a.createElement("i",{className:"icon-plus"}))),a&&a.length||(i=!0)}let r=e.display_name;return e.type!==wg.CategoryTypes.CUSTOM&&(r=Object(Og.localizeMessage)("sidebar.types.".concat(e.type),e.display_name)),O.a.createElement("div",{className:"SidebarChannelGroup a11y__section"},O.a.createElement("div",{className:"SidebarChannelGroupHeader"},O.a.createElement("button",{ref:this.categoryTitleRef,className:ws()("SidebarChannelGroupHeader_groupButton",{favorites:e.type===wg.CategoryTypes.FAVORITES}),onClick:this.handleCollapse,"aria-label":r},O.a.createElement("i",{className:ws()("icon icon-chevron-down",{"icon-rotate-minus-90":t,"hide-arrow":i})}),O.a.createElement("div",null,r),s)),O.a.createElement("div",{className:"SidebarChannelGroup_content"},O.a.createElement("ul",{role:"list",className:"NavGroupContent"},n)))}}Qg(Zg,"propTypes",{category:C.a.any.isRequired,channels:C.a.arrayOf(C.a.any).isRequired,setChannelRef:C.a.func.isRequired,handleOpenMoreDirectChannelsModal:C.a.func.isRequired,getChannelRef:C.a.func.isRequired,isCollapsed:C.a.bool.isRequired,actions:C.a.shape({setCategoryCollapsed:C.a.func.isRequired}).isRequired});var Jg=Object(n.connect)((function(){const e=Object(hg.makeGetChannelsForCategory)();return(t,a)=>({isCollapsed:fg(t,a.category.id),channels:e(t,a.category)})}),(function(e){return{actions:Object(s.bindActionCreators)({setCategoryCollapsed:mg},e)}}))(Zg);function Xg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $g(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function eb(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function tb(e){return O.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}class ab extends O.a.PureComponent{constructor(e){super(e),Xg(this,"channelRefs",void 0),Xg(this,"scrollbar",void 0),Xg(this,"animate",void 0),Xg(this,"scrollAnimation",void 0),Xg(this,"getDisplayedChannelIds",()=>this.props.displayedChannels.map(e=>e.id)),Xg(this,"getChannelRef",e=>this.channelRefs.get(e)),Xg(this,"setChannelRef",(e,t)=>{t?this.channelRefs.set(e,t):this.channelRefs.delete(e)}),Xg(this,"getFirstUnreadChannelFromChannelIdArray",e=>this.props.currentChannel?e.find(e=>e!==this.props.currentChannel.id&&this.props.unreadChannelIds.includes(e)):null),Xg(this,"handleScrollAnimationUpdate",e=>{const t=e.getCurrentValue();this.scrollbar.current.scrollTop(t)}),Xg(this,"scrollToFirstUnreadChannel",()=>{this.scrollToChannel(this.getFirstUnreadChannel(),!0)}),Xg(this,"scrollToLastUnreadChannel",()=>{this.scrollToChannel(this.getLastUnreadChannel(),!0)}),Xg(this,"scrollToChannel",(e,t=!1)=>{if(!e)return;const a=this.channelRefs.get(e);if(!a)return;const n=a.offsetTop,s=n+a.offsetHeight,i=this.scrollbar.current.getScrollTop(),r=this.scrollbar.current.getClientHeight();if(n<i+32){const a=t||!this.state.showTopUnread?10:55;let s;const i=this.getDisplayedChannelIds();s=i.length>0&&i[0]===e?0:n-a-32,this.scrollToPosition(s)}else if(s>i+r){const e=s-r+(t||!this.state.showBottomUnread?10:55);this.scrollToPosition(e)}}),Xg(this,"scrollToPosition",e=>{this.scrollAnimation.setCurrentValue(this.scrollbar.current.getScrollTop()).setAtRest(),this.scrollAnimation.setEndValue(e)}),Xg(this,"updateUnreadIndicators",()=>{let e=!1,t=!1;const a=this.getFirstUnreadChannel(),n=this.getLastUnreadChannel();if(a){const t=this.channelRefs.get(a),n=t?t.offsetTop:null;n&&n+t.offsetHeight-10-32<this.scrollbar.current.getScrollTop()&&(e=!0)}if(n){const e=this.channelRefs.get(n),a=e?e.offsetTop:null;a&&a+10>this.scrollbar.current.getScrollTop()+this.scrollbar.current.getClientHeight()&&(t=!0)}e===this.state.showTopUnread&&t===this.state.showBottomUnread||this.setState({showTopUnread:e,showBottomUnread:t})}),Xg(this,"getFirstUnreadChannel",()=>this.getFirstUnreadChannelFromChannelIdArray(this.getDisplayedChannelIds())),Xg(this,"getLastUnreadChannel",()=>this.getFirstUnreadChannelFromChannelIdArray(this.getDisplayedChannelIds().reverse())),Xg(this,"navigateChannelShortcut",e=>{if(!e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||!j.Z(e,N.j.KeyCodes.UP)&&!j.Z(e,N.j.KeyCodes.DOWN))j.e(e)&&e.shiftKey&&j.Z(e,N.j.KeyCodes.K)&&this.props.handleOpenMoreDirectChannelsModal(e);else{e.preventDefault();const t=this.getDisplayedChannelIds(),a=this.props.currentChannel.id;let n=-1;for(let e=0;e<t.length;e++)t[e]===a&&(n=e);let s=n;s=j.Z(e,N.j.KeyCodes.DOWN)?n+1:n-1;const i=t[j.mb(s,t.length)];this.props.actions.switchToChannelById(i),this.scrollToChannel(i)}}),Xg(this,"navigateUnreadChannelShortcut",e=>{if(e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey&&(j.Z(e,N.j.KeyCodes.UP)||j.Z(e,N.j.KeyCodes.DOWN))){e.preventDefault();const t=this.getDisplayedChannelIds();let a=0;a=j.Z(e,N.j.KeyCodes.UP)?-1:1;const n=ya(this.props.currentChannel.id,t,this.props.unreadChannelIds,a);if(-1!==n){const e=t[n];this.props.actions.switchToChannelById(e),this.scrollToChannel(e)}}}),Xg(this,"renderCategory",e=>O.a.createElement(Jg,{key:e.id,category:e,setChannelRef:this.setChannelRef,handleOpenMoreDirectChannelsModal:this.props.handleOpenMoreDirectChannelsModal,getChannelRef:this.getChannelRef})),Xg(this,"onScroll",()=>{this.updateUnreadIndicators()}),Xg(this,"onTransitionEnd",Vt()(()=>{this.updateUnreadIndicators()},100)),this.channelRefs=new Map,this.state={showTopUnread:!1,showBottomUnread:!1},this.scrollbar=O.a.createRef(),this.animate=new nh.SpringSystem,this.scrollAnimation=this.animate.createSpring(),this.scrollAnimation.setOvershootClampingEnabled(!0),this.scrollAnimation.addListener({onSpringUpdate:this.handleScrollAnimationUpdate})}componentDidMount(){document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}componentWillUnmount(){document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut)}componentDidUpdate(e){this.props.currentChannel&&e.currentChannel&&(this.props.currentTeam!==e.currentTeam&&this.scrollbar.current.scrollToTop(),this.props.currentChannel.id,e.currentChannel.id,this.props.currentChannel.id!==e.currentChannel.id&&this.props.actions.close(),this.updateUnreadIndicators())}render(){const{categories:e}=this.props,t=e.map(this.renderCategory),a=O.a.createElement(ee.a,{id:"sidebar.unreads",defaultMessage:"More Unreads"}),n=O.a.createElement(ee.a,{id:"sidebar.unreads",defaultMessage:"More Unreads"});return O.a.createElement("div",{id:"sidebar-left",className:ws()("SidebarNavContainer a11y__region",{disabled:this.props.isUnreadFilterEnabled}),"data-a11y-sort-order":"7",onTransitionEnd:this.onTransitionEnd},O.a.createElement(op,{name:"Top",show:this.state.showTopUnread,onClick:this.scrollToFirstUnreadChannel,extraClass:"nav-pills__unread-indicator-top",content:a}),O.a.createElement(op,{name:"Bottom",show:this.state.showBottomUnread,onClick:this.scrollToLastUnreadChannel,extraClass:"nav-pills__unread-indicator-bottom",content:n}),O.a.createElement(ks.a,{ref:this.scrollbar,autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:eb,renderThumbVertical:tb,renderView:$g,onScroll:this.onScroll,style:{position:"absolute"}},t))}}Xg(ab,"propTypes",{currentTeam:C.a.any.isRequired,currentChannel:C.a.any.isRequired,categories:C.a.arrayOf(C.a.any).isRequired,unreadChannelIds:C.a.arrayOf(C.a.string).isRequired,isUnreadFilterEnabled:C.a.bool.isRequired,handleOpenMoreDirectChannelsModal:C.a.func.isRequired,displayedChannels:C.a.arrayOf(C.a.any).isRequired,actions:C.a.shape({switchToChannelById:C.a.func.isRequired,close:C.a.func.isRequired}).isRequired});var nb=Object(n.connect)((function(){const e=Object(hg.makeGetCategoriesForTeam)(),t=Eg();return a=>{const n=a.views.channel.keepChannelIdAsUnread,s=Object(h.getCurrentTeam)(a);return{currentTeam:s,currentChannel:Object(p.getCurrentChannel)(a),categories:e(a,s.id),isUnreadFilterEnabled:_g(a),unreadChannelIds:Object(p.getSortedUnreadChannelIds)(a,n,!1,!1,"alpha"),displayedChannels:t(a,s.id)}}}),(function(e){return{actions:Object(s.bindActionCreators)({close:ah.a,switchToChannelById:E.n},e)}}))(ab);function sb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ib extends O.a.PureComponent{constructor(e){super(e),sb(this,"showMoreDirectChannelsModal",()=>{this.setState({showDirectChannelsModal:!0}),Object(qe.d)("ui","ui_channels_more_direct_v2")}),sb(this,"hideMoreDirectChannelsModal",()=>{this.setState({showDirectChannelsModal:!1})}),sb(this,"showMoreChannelsModal",()=>{this.setState({showMoreChannelsModal:!0}),Object(qe.d)("ui","ui_channels_more_public_v2")}),sb(this,"hideMoreChannelsModal",()=>{this.setState({showMoreChannelsModal:!1})}),sb(this,"showNewChannelModal",()=>{this.setState({showNewChannelModal:!0}),Object(qe.d)("ui","ui_channels_create_channel_v2")}),sb(this,"hideNewChannelModal",()=>{this.setState({showNewChannelModal:!1})}),sb(this,"handleOpenMoreDirectChannelsModal",e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():this.showMoreDirectChannelsModal()}),sb(this,"handleNewChannelForMoreChannelsModal",()=>{this.hideMoreChannelsModal(),this.showNewChannelModal()}),sb(this,"renderModals",()=>{let e,t;return this.state.showDirectChannelsModal&&(e=O.a.createElement(Ch,{onModalDismissed:this.hideMoreDirectChannelsModal,isExistingChannel:!1})),this.state.showMoreChannelsModal&&(t=O.a.createElement(dh,{onModalDismissed:this.hideMoreChannelsModal,handleNewChannel:this.handleNewChannelForMoreChannelsModal,morePublicChannelsModalType:"public"})),O.a.createElement(O.a.Fragment,null,O.a.createElement(sp,{show:this.state.showNewChannelModal,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelType:N.j.OPEN_CHANNEL,onModalDismissed:this.hideNewChannelModal}),e,t)}),this.state={showDirectChannelsModal:!1,showMoreChannelsModal:!1,showNewChannelModal:!1}}render(){return O.a.createElement("div",{id:"SidebarContainer",className:ws()({"move--right":this.props.isOpen&&j.cb()})},O.a.createElement(ig,null),O.a.createElement("div",{className:"a11y__region","data-a11y-sort-order":"6"},O.a.createElement(dg,null),O.a.createElement("div",{className:"SidebarContainer_filterAddChannel"},O.a.createElement(Cg,null),O.a.createElement(ng,{showNewChannelModal:this.showNewChannelModal,showMoreChannelsModal:this.showMoreChannelsModal,canCreateChannel:this.props.canCreatePrivateChannel||this.props.canCreatePublicChannel,canJoinPublicChannel:this.props.canJoinPublicChannel}))),O.a.createElement(k.a,{pluggableName:"LeftSidebarHeader"}),O.a.createElement(nb,{handleOpenMoreDirectChannelsModal:this.handleOpenMoreDirectChannelsModal}),this.renderModals())}}sb(ib,"propTypes",{canCreatePublicChannel:C.a.bool.isRequired,canCreatePrivateChannel:C.a.bool.isRequired,canJoinPublicChannel:C.a.bool.isRequired,isOpen:C.a.bool.isRequired});var rb=Object(n.connect)((function(e){const t=Object(h.getCurrentTeam)(e);let a=!1,n=!1,s=!1;return t&&(a=Object(U.haveITeamPermission)(e,{team:t.id,permission:Ea.a.CREATE_PUBLIC_CHANNEL}),n=Object(U.haveITeamPermission)(e,{team:t.id,permission:Ea.a.CREATE_PRIVATE_CHANNEL}),s=Object(U.haveITeamPermission)(e,{team:t.id,permission:Ea.a.JOIN_PUBLIC_CHANNELS})),{canCreatePrivateChannel:n,canCreatePublicChannel:a,canJoinPublicChannel:s,isOpen:qu(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({},e)}}))(ib);function ob(e,t="",a){return async(n,s)=>{const{data:i}=await n(Object(D.getPostThread)(e));if(!i)return void se.a.replace("/error?type=".concat(N.l.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));const r=s(),l=i.posts[i.order[0]].channel_id;let c=r.entities.channels.channels[l];const d=Object(h.getCurrentTeamId)(r);if(!c){const{data:e}=await n(Object(o.getChannel)(l));if(!e)return void se.a.replace("/error?type=".concat(N.l.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));c=e}if(!r.entities.channels.myMembers[l]){if(c.type===N.j.DM_CHANNEL||c.type===N.j.GM_CHANNEL)return void se.a.replace("/error?type=".concat(N.l.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));await n(Object(o.joinChannel)(a,null,l))}if(c.team_id&&c.team_id!==d)return void se.a.replace("/error?type=".concat(N.l.PERMALINK_NOT_FOUND,"&returnTo=").concat(t));c&&c.type===N.j.DM_CHANNEL?n(Object(ls.d)(c.id)):c&&c.type===N.j.GM_CHANNEL&&n(Object(ls.e)(c.id)),n(Object(o.selectChannel)(l)),n({type:N.f.RECEIVED_FOCUSED_POST,data:e,channelId:l});const m=Object(h.getTeam)(r,c.team_id||d);if(c.type===N.j.DM_CHANNEL){const t=Object(j.J)(c.name),a=Object(u.getUser)(r,t);se.a.replace("/".concat(m.name,"/messages/@").concat(a.username,"/").concat(e))}else c.type===N.j.GM_CHANNEL?se.a.replace("/".concat(m.name,"/messages/").concat(c.name,"/").concat(e)):se.a.replace("/".concat(m.name,"/channels/").concat(c.name,"/").concat(e));n(Object(pa.d)()),n(Object(o.getChannelStats)(l))}}function lb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function cb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class db extends O.a.PureComponent{static getDerivedStateFromProps(e,t){let a={postid:e.match.params.postid};return t.postid!==e.match.params.postid&&(a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lb(Object(a),!0).forEach((function(t){cb(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lb(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{valid:!1})),a}constructor(e){super(e),cb(this,"doPermalinkEvent",async e=>{const t=e.match.params.postid;await this.props.actions.focusPost(t,this.props.returnTo,this.props.currentUserId),this.mounted&&this.setState({valid:!0})}),cb(this,"isStateValid",()=>this.state.valid&&this.props.channelId&&this.props.teamName),cb(this,"onShortcutKeyDown",e=>{e.shiftKey&&j.e(e)&&j.Z(e,N.Q.KeyCodes.L)&&this.permalink.current&&this.permalink.current.focus()}),this.state={valid:!1}}componentDidMount(){this.mounted=!0,this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}componentDidUpdate(){this.state.valid||this.doPermalinkEvent(this.props)}componentWillUnmount(){this.mounted=!1}render(){return this.isStateValid()?null:O.a.createElement("div",{id:"app-content",className:"app__content"})}}cb(db,"propTypes",{channelId:C.a.string,match:C.a.shape({params:C.a.shape({postid:C.a.string.isRequired}).isRequired}).isRequired,returnTo:C.a.string.isRequired,teamName:C.a.string,actions:C.a.shape({focusPost:C.a.func.isRequired}).isRequired,currentUserId:C.a.string.isRequired});var mb=Object(n.connect)((function(e){const t=Object(h.getCurrentTeam)(e),a=Object(p.getCurrentChannel)(e),n=Object(u.getCurrentUserId)(e);let s="";a&&(s=a.id);let i="";return t&&(i=t.name),{channelId:s,teamName:i,currentUserId:n}}),(function(e){return{actions:Object(s.bindActionCreators)({focusPost:ob},e)}}))(db);class ub extends O.a.PureComponent{render(){return O.a.createElement(Ai.a,{id:"channelHeaderDropdownMenu",ariaLabel:Object(j.lb)("channel_header.menuAriaLabel","Channel Menu").toLowerCase()},O.a.createElement(Jf,{isMobile:!1}))}}function hb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pb extends O.a.PureComponent{constructor(...e){super(...e),hb(this,"createButton",e=>{const t=()=>this.fireAction(e);return this.props.isDropdown?O.a.createElement("li",{key:"mobileChannelHeaderItem"+e.id,role:"presentation",className:"MenuItem"},O.a.createElement("a",{role:"menuitem",href:"#",onClick:t},e.dropdownText)):O.a.createElement("li",{className:"flex-parent--center"},O.a.createElement("button",{className:"navbar-toggle navbar-right__icon",onClick:t},O.a.createElement("span",{className:"icon navbar-plugin-button"},e.icon)))})}createList(e){return e.map(this.createButton)}fireAction(e){return e.action(this.props.channel,this.props.channelMember)}render(){const e=this.props.components||[];return 0===e.length?null:1===e.length?this.createButton(e[0]):this.props.isDropdown?this.createList(e):null}}hb(pb,"propTypes",{components:C.a.array,isDropdown:C.a.bool.isRequired,channel:C.a.object.isRequired,channelMember:C.a.object.isRequired,theme:C.a.object.isRequired});var gb=Object(n.connect)((function(e){return{channelMember:Object(p.getMyCurrentChannelMembership)(e),components:e.plugins.components.MobileChannelHeaderButton,theme:Object(d.getTheme)(e)}}))(pb);function bb({section:e,isCollapsed:t,memberNotifyLevel:a,globalNotifyLevel:n,ignoreChannelMentions:s}){if(a===N.v.DEFAULT&&n){Object(ve.b)("channel_notifications.levels.default"),Object(ve.b)("channel_notifications.levels.all"),Object(ve.b)("channel_notifications.levels.mention"),Object(ve.b)("channel_notifications.levels.none");const e="channel_notifications.levels."+n,t=O.a.createElement(ee.a,{id:e,defaultMessage:n});return O.a.createElement(ee.a,{id:"channel_notifications.globalDefault",defaultMessage:"Global default ({notifyLevel})",values:{notifyLevel:t}})}return a===N.v.MENTION&&e===N.w.MARK_UNREAD?t?O.a.createElement(ee.a,{id:"channel_notifications.muteChannel.on.title.collapse",defaultMessage:"Mute is enabled. Desktop, email and push notifications will not be sent for this channel."}):O.a.createElement(ee.a,{id:"channel_notifications.muteChannel.on.title",defaultMessage:"On"}):e===N.w.IGNORE_CHANNEL_MENTIONS&&s===N.o.ON?O.a.createElement(ee.a,{id:"channel_notifications.ignoreChannelMentions.on.title",defaultMessage:"On"}):e===N.w.IGNORE_CHANNEL_MENTIONS&&s===N.o.OFF?O.a.createElement(ee.a,{id:"channel_notifications.ignoreChannelMentions.off.title",defaultMessage:"Off"}):a===N.v.MENTION?O.a.createElement(ee.a,{id:"channel_notifications.onlyMentions",defaultMessage:"Only for mentions"}):e!==N.w.DESKTOP&&e!==N.w.PUSH||a!==N.v.ALL?e===N.w.MARK_UNREAD&&a===N.v.ALL?O.a.createElement(ee.a,{id:"channel_notifications.muteChannel.off.title",defaultMessage:"Off"}):O.a.createElement(ee.a,{id:"channel_notifications.never",defaultMessage:"Never"}):O.a.createElement(ee.a,{id:"channel_notifications.allActivity",defaultMessage:"For all activity"})}function fb({section:e}){return e===N.w.DESKTOP?O.a.createElement(ee.a,{id:"channel_notifications.sendDesktop",defaultMessage:"Send desktop notifications"}):e===N.w.PUSH?O.a.createElement(ee.a,{id:"channel_notifications.push",defaultMessage:"Send mobile push notifications"}):e===N.w.MARK_UNREAD?O.a.createElement(ee.a,{id:"channel_notifications.muteChannel.settings",defaultMessage:"Mute Channel"}):e===N.w.IGNORE_CHANNEL_MENTIONS?O.a.createElement(ee.a,{id:"channel_notifications.ignoreChannelMentions",defaultMessage:"Ignore mentions for @channel, @here and @all"}):null}function _b({onExpandSection:e,globalNotifyLevel:t,memberNotifyLevel:a,section:n,ignoreChannelMentions:s}){return O.a.createElement(bm.a,{title:O.a.createElement(fb,{section:n}),describe:O.a.createElement(bb,{section:n,ignoreChannelMentions:s,memberNotifyLevel:a,globalNotifyLevel:t,isCollapsed:!0}),updateSection:e,section:n})}function Eb({section:e}){switch(e){case N.w.DESKTOP:return O.a.createElement("span",null,O.a.createElement(ee.a,{id:"channel_notifications.override",defaultMessage:'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.'}));case N.w.PUSH:return O.a.createElement("span",null,O.a.createElement(ee.a,{id:"channel_notifications.overridePush",defaultMessage:'Selecting an option other than "Global default" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.'}));case N.w.MARK_UNREAD:return O.a.createElement("span",null,O.a.createElement(ee.a,{id:"channel_notifications.muteChannel.help",defaultMessage:"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you are mentioned."}));case N.w.IGNORE_CHANNEL_MENTIONS:return O.a.createElement("span",null,O.a.createElement(ee.a,{id:"channel_notifications.ignoreChannelMentions.help",defaultMessage:"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel."}));default:return null}}function vb({section:e,memberNotifyLevel:t,globalNotifyLevel:a,onChange:n,onSubmit:s,serverError:i,onCollapseSection:r,ignoreChannelMentions:o}){const l=[O.a.createElement("div",{key:"channel-notification-level-radio"},(e===N.w.DESKTOP||e===N.w.PUSH)&&O.a.createElement("fieldset",null,O.a.createElement("div",{className:"radio"},O.a.createElement("label",{className:""},O.a.createElement("input",{id:"channelNotificationGlobalDefault",name:"channelDesktopNotifications",type:"radio",value:N.v.DEFAULT,checked:t===N.v.DEFAULT,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.DEFAULT,globalNotifyLevel:a}))),O.a.createElement("div",{className:"radio"},O.a.createElement("label",{className:""},O.a.createElement("input",{id:"channelNotificationAllActivity",name:"channelDesktopNotifications",type:"radio",value:N.v.ALL,checked:t===N.v.ALL,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.ALL}))),O.a.createElement("div",{className:"radio"},O.a.createElement("label",{className:""},O.a.createElement("input",{id:"channelNotificationMentions",name:"channelDesktopNotifications",type:"radio",value:N.v.MENTION,checked:t===N.v.MENTION,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.MENTION}))),O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"channelNotificationNever",name:"channelDesktopNotifications",type:"radio",value:N.v.NONE,checked:t===N.v.NONE,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.NONE})))),e===N.w.IGNORE_CHANNEL_MENTIONS&&O.a.createElement("fieldset",null,O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"ignoreChannelMentionsOn",name:"ignoreChannelMentions",type:"radio",value:N.o.ON,checked:o===N.o.ON,onChange:n}),O.a.createElement(bb,{section:e,ignoreChannelMentions:N.o.ON,memberNotifyLevel:t,globalNotifyLevel:a}))),O.a.createElement("div",{className:"radio"},O.a.createElement("label",null,O.a.createElement("input",{id:"ignoreChannelMentionsOff",name:"ignoreChannelMentions",type:"radio",value:N.o.OFF,checked:o===N.o.OFF,onChange:n}),O.a.createElement(bb,{section:e,ignoreChannelMentions:N.o.OFF,memberNotifyLevel:t,globalNotifyLevel:a})))),e===N.w.MARK_UNREAD&&O.a.createElement("fieldset",null,O.a.createElement("div",{className:"radio"},O.a.createElement("label",{className:""},O.a.createElement("input",{id:"channelNotificationUnmute",name:"channelNotificationMute",type:"radio",value:N.v.MENTION,checked:t===N.v.MENTION,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.MENTION}))),O.a.createElement("div",{className:"radio"},O.a.createElement("label",{className:""},O.a.createElement("input",{id:"channelNotificationMute",name:"channelNotificationMute",type:"radio",value:N.v.ALL,checked:t===N.v.ALL,onChange:n}),O.a.createElement(bb,{section:e,memberNotifyLevel:N.v.ALL})))))];return O.a.createElement(gm.a,{title:O.a.createElement(fb,{section:e}),inputs:l,submit:s,server_error:i,updateSection:r,extraInfo:O.a.createElement(Eb,{section:e})})}function yb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}bb.propTypes={globalNotifyLevel:C.a.string,ignoreChannelMentions:C.a.string,memberNotifyLevel:C.a.string.isRequired,section:C.a.string.isRequired,isCollapsed:C.a.bool},fb.propTypes={section:C.a.string.isRequired},_b.propTypes={ignoreChannelMentions:C.a.string,onExpandSection:C.a.func.isRequired,globalNotifyLevel:C.a.string,memberNotifyLevel:C.a.string.isRequired,section:C.a.string.isRequired},Eb.propTypes={section:C.a.string.isRequired},vb.propTypes={ignoreChannelMentions:C.a.string,onChange:C.a.func.isRequired,onCollapseSection:C.a.func.isRequired,onSubmit:C.a.func.isRequired,globalNotifyLevel:C.a.string,memberNotifyLevel:C.a.string.isRequired,section:C.a.string.isRequired,serverError:C.a.string};class Cb extends O.a.PureComponent{constructor(...e){super(...e),yb(this,"handleOnChange",e=>{this.props.onChange(e.target.value)}),yb(this,"handleExpandSection",()=>{this.props.onUpdateSection(this.props.section)}),yb(this,"handleCollapseSection",()=>{this.props.onUpdateSection(N.w.NONE)})}render(){const{expand:e,globalNotificationLevel:t,memberNotificationLevel:a,ignoreChannelMentions:n,onSubmit:s,section:i,serverError:r}=this.props;return e?O.a.createElement(vb,{section:i,memberNotifyLevel:a,globalNotifyLevel:t,ignoreChannelMentions:n,onChange:this.handleOnChange,onSubmit:s,serverError:r,onCollapseSection:this.handleCollapseSection}):O.a.createElement(_b,{section:i,onExpandSection:this.handleExpandSection,memberNotifyLevel:a,globalNotifyLevel:t,ignoreChannelMentions:n})}}function wb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ob(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}yb(Cb,"propTypes",{section:C.a.string.isRequired,expand:C.a.bool.isRequired,memberNotificationLevel:C.a.string.isRequired,ignoreChannelMentions:C.a.string,globalNotificationLevel:C.a.string,onChange:C.a.func.isRequired,onSubmit:C.a.func.isRequired,onUpdateSection:C.a.func.isRequired,serverError:C.a.string});class Tb extends O.a.PureComponent{constructor(e){super(e),Ob(this,"handleHide",()=>{this.setState({show:!1})}),Ob(this,"handleExit",()=>{this.updateSection(N.w.NONE),this.props.onHide()}),Ob(this,"updateSection",(e=N.w.NONE)=>{if(this.setState({activeSection:e}),e===N.w.NONE){const e=this.props.channelMember&&this.props.channelMember.notify_props;this.resetStateFromNotifyProps(e,this.props.currentUser.notify_props)}}),Ob(this,"handleUpdateChannelNotifyProps",async e=>{const{actions:t,channel:a,currentUser:n}=this.props,{error:s}=await t.updateChannelNotifyProps(n.id,a.id,e);s?this.setState({serverError:s.message}):this.updateSection(N.w.NONE)}),Ob(this,"handleSubmitDesktopNotifyLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{desktopNotifyLevel:t}=this.state;if(e.desktop===t)return void this.updateSection(N.w.NONE);const a={desktop:t};this.handleUpdateChannelNotifyProps(a)}),Ob(this,"handleUpdateDesktopNotifyLevel",e=>{this.setState({desktopNotifyLevel:e})}),Ob(this,"handleSubmitMarkUnreadLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{markUnreadNotifyLevel:t}=this.state;if(e.mark_unread===t)return void this.updateSection(N.w.NONE);const a={mark_unread:t};this.handleUpdateChannelNotifyProps(a)}),Ob(this,"handleUpdateMarkUnreadLevel",e=>{this.setState({markUnreadNotifyLevel:e})}),Ob(this,"handleSubmitPushNotificationLevel",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{pushNotifyLevel:t}=this.state;if(e.push===t)return void this.updateSection(N.w.NONE);const a={push:t};this.handleUpdateChannelNotifyProps(a)}),Ob(this,"handleUpdatePushNotificationLevel",e=>{this.setState({pushNotifyLevel:e})}),Ob(this,"handleUpdateIgnoreChannelMentions",e=>{this.setState({ignoreChannelMentions:e})}),Ob(this,"handleSubmitIgnoreChannelMentions",()=>{const e=this.props.channelMember&&this.props.channelMember.notify_props,{ignoreChannelMentions:t}=this.state;if(e.ignore_channel_mentions===t)return void this.updateSection("");const a={ignore_channel_mentions:t};this.handleUpdateChannelNotifyProps(a)});const t=e.channelMember&&e.channelMember.notify_props;this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wb(Object(a),!0).forEach((function(t){Ob(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wb(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({show:!0,activeSection:N.w.NONE,serverError:null},this.getStateFromNotifyProps(t,e.currentUser.notify_props))}componentDidUpdate(e){const t=e.channelMember&&e.channelMember.notify_props,a=this.props.channelMember&&this.props.channelMember.notify_props;j.c(a,t)||this.resetStateFromNotifyProps(a,this.props.currentUser.notify_props)}resetStateFromNotifyProps(e,t){this.setState(this.getStateFromNotifyProps(e,t))}getStateFromNotifyProps(e,t){let a=N.o.OFF;t.channel&&"false"===t.channel&&(a=N.o.ON);let n=e.ignore_channel_mentions;return n&&n!==N.o.DEFAULT||(n=a),{desktopNotifyLevel:e.desktop||N.v.DEFAULT,markUnreadNotifyLevel:e.mark_unread||N.v.ALL,pushNotifyLevel:e.push||N.v.DEFAULT,ignoreChannelMentions:n}}render(){const{activeSection:e,desktopNotifyLevel:t,markUnreadNotifyLevel:a,pushNotifyLevel:n,ignoreChannelMentions:s,serverError:i}=this.state,{channel:r,channelMember:o,currentUser:l,sendPushNotifications:c}=this.props;let d=null;return i&&(d=O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("label",{className:"control-label"},i))),O.a.createElement($.a,{dialogClassName:"a11y__modal settings-modal settings-modal--tabless",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelNotificationModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"channelNotificationModalLabel"},O.a.createElement(ee.a,{id:"channel_notifications.preferences",defaultMessage:"Notification Preferences for "}),O.a.createElement("span",{className:"name"},r.display_name))),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"settings-table"},O.a.createElement("div",{className:"settings-content"},O.a.createElement("div",{ref:"wrapper",className:"user-settings"},O.a.createElement("br",null),O.a.createElement("div",{className:"divider-dark first"}),O.a.createElement(Cb,{section:N.w.MARK_UNREAD,expand:e===N.w.MARK_UNREAD,memberNotificationLevel:a,onChange:this.handleUpdateMarkUnreadLevel,onSubmit:this.handleSubmitMarkUnreadLevel,onUpdateSection:this.updateSection,serverError:i}),O.a.createElement("div",{className:"divider-light"}),O.a.createElement(Cb,{section:N.w.IGNORE_CHANNEL_MENTIONS,expand:e===N.w.IGNORE_CHANNEL_MENTIONS,memberNotificationLevel:a,ignoreChannelMentions:s,onChange:this.handleUpdateIgnoreChannelMentions,onSubmit:this.handleSubmitIgnoreChannelMentions,onUpdateSection:this.updateSection,serverError:i}),!Object(gn.isChannelMuted)(o)&&O.a.createElement("div",null,O.a.createElement("div",{className:"divider-light"}),O.a.createElement(Cb,{section:N.w.DESKTOP,expand:e===N.w.DESKTOP,memberNotificationLevel:t,globalNotificationLevel:l.notify_props?l.notify_props.desktop:N.v.ALL,onChange:this.handleUpdateDesktopNotifyLevel,onSubmit:this.handleSubmitDesktopNotifyLevel,onUpdateSection:this.updateSection,serverError:i}),O.a.createElement("div",{className:"divider-light"}),c&&O.a.createElement(Cb,{section:N.w.PUSH,expand:e===N.w.PUSH,memberNotificationLevel:n,globalNotificationLevel:l.notify_props?l.notify_props.push:N.v.ALL,onChange:this.handleUpdatePushNotificationLevel,onSubmit:this.handleSubmitPushNotificationLevel,onUpdateSection:this.updateSection,serverError:i})),O.a.createElement("div",{className:"divider-dark"})))),d))}}Ob(Tb,"propTypes",{onHide:C.a.func.isRequired,channel:C.a.object.isRequired,channelMember:C.a.object.isRequired,currentUser:C.a.object.isRequired,sendPushNotifications:C.a.bool.isRequired,actions:C.a.shape({updateChannelNotifyProps:C.a.func.isRequired})});var Sb=Object(n.connect)(e=>({channelMember:Object(p.getMyCurrentChannelMembership)(e),sendPushNotifications:"true"===Object(m.getConfig)(e).SendPushNotifications}),e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:o.updateChannelNotifyProps},e)}))(Tb),Pb=a(1285);function Mb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Nb extends O.a.PureComponent{constructor(e){super(e),Mb(this,"handleRemoveFromChannel",()=>{if(this.state.removing)return;const{actions:e,channel:t,user:a}=this.props;this.setState({removing:!0}),e.removeChannelMember(t.id,a.id).then(a=>{a.error?this.setState({serverError:a.error.message,removing:!1}):(this.setState({removing:!1}),e.getChannelStats(t.id))})}),Mb(this,"handleMakeChannelMember",async()=>{const{error:e}=await this.props.actions.updateChannelMemberSchemeRoles(this.props.channel.id,this.props.user.id,!0,!1);e?this.setState({serverError:e.message}):(this.props.actions.getChannelStats(this.props.channel.id),this.props.actions.getChannelMember(this.props.channel.id,this.props.user.id))}),Mb(this,"handleMakeChannelAdmin",async()=>{const{error:e}=await this.props.actions.updateChannelMemberSchemeRoles(this.props.channel.id,this.props.user.id,!0,!0);e?this.setState({serverError:e.message}):(this.props.actions.getChannelStats(this.props.channel.id),this.props.actions.getChannelMember(this.props.channel.id,this.props.user.id))}),this.state={serverError:null,removing:!1}}renderRole(e,t){return e?O.a.createElement(ee.a,{id:"channel_members_dropdown.channel_admin",defaultMessage:"Channel Admin"}):t?O.a.createElement(ee.a,{id:"channel_members_dropdown.channel_guest",defaultMessage:"Channel Guest"}):O.a.createElement(ee.a,{id:"channel_members_dropdown.channel_member",defaultMessage:"Channel Member"})}render(){const{index:e,totalUsers:t,isLicensed:a,channelMember:n,user:s,channel:i,currentUserId:r,canChangeMemberRoles:o,canRemoveMember:l}=this.props,{serverError:c}=this.state,d=j.S(a,n.roles,n.scheme_admin),m=j.Y(s),u=!d&&!m,h=i.name===N.j.DEFAULT_CHANNEL,p=this.renderRole(d,m);if(s.id===r)return null;const g=o&&d,b=o&&a&&u,f=l&&(!i.group_constrained||s.is_bot)&&(!h||m);return g||b||f?O.a.createElement(ji.a,null,O.a.createElement("button",{className:"dropdown-toggle theme color--link style--none",type:"button"},O.a.createElement("span",{className:"sr-only"},s.username),O.a.createElement("span",null,p," "),O.a.createElement(sm.a,null)),O.a.createElement(Ai.a,{openLeft:!0,openUp:t>3&&t-e<=3,ariaLabel:j.lb("channel_members_dropdown.menuAriaLabel","Change the role of channel member")},O.a.createElement(Ai.a.ItemAction,{id:"".concat(s.username,"-make-channel-member"),show:g,onClick:this.handleMakeChannelMember,text:j.lb("channel_members_dropdown.make_channel_member","Make Channel Member")}),O.a.createElement(Ai.a.ItemAction,{id:"".concat(s.username,"-make-channel-admin"),show:b,onClick:this.handleMakeChannelAdmin,text:j.lb("channel_members_dropdown.make_channel_admin","Make Channel Admin")}),O.a.createElement(Ai.a.ItemAction,{show:f,onClick:this.handleRemoveFromChannel,text:j.lb("channel_members_dropdown.remove_from_channel","Remove from Channel")}),c&&O.a.createElement("div",{className:"has-error"},O.a.createElement("label",{className:"has-error control-label"},c)))):h?O.a.createElement("div",null):O.a.createElement("div",null,p)}}Mb(Nb,"propTypes",{channel:C.a.object.isRequired,user:C.a.object.isRequired,currentUserId:C.a.string.isRequired,channelMember:C.a.object.isRequired,isLicensed:C.a.bool.isRequired,canChangeMemberRoles:C.a.bool.isRequired,canRemoveMember:C.a.bool.isRequired,index:C.a.number.isRequired,totalUsers:C.a.number.isRequired,actions:C.a.shape({getChannelStats:C.a.func.isRequired,updateChannelMemberSchemeRoles:C.a.func.isRequired,removeChannelMember:C.a.func.isRequired,getChannelMember:C.a.func.isRequired}).isRequired});var Ib=Object(n.connect)((function(e,t){const{channel:a}=t,n=Object(U.haveIChannelPermission)(e,{channel:a.id,team:a.team_id,permission:x.Permissions.MANAGE_CHANNEL_ROLES}),s="true"===Object(m.getLicense)(e).IsLicensed,i=va(e,a);return{currentUserId:Object(u.getCurrentUserId)(e),isLicensed:s,canChangeMemberRoles:n,canRemoveMember:i}}),(function(e){return{actions:Object(s.bindActionCreators)({getChannelMember:o.getChannelMember,getChannelStats:o.getChannelStats,updateChannelMemberSchemeRoles:o.updateChannelMemberSchemeRoles,removeChannelMember:o.removeChannelMember},e)}}))(Nb);function jb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ab extends O.a.PureComponent{constructor(e){super(e),jb(this,"searchTimeoutId",void 0),jb(this,"loadComplete",()=>{this.setState({loading:!1})}),jb(this,"nextPage",e=>{this.props.actions.loadProfilesAndTeamMembersAndChannelMembers(e+1,50)}),jb(this,"handleSearch",e=>{this.props.actions.setModalSearchTerm(e)}),this.searchTimeoutId=0,this.state={loading:!0}}async componentDidMount(){const{actions:e,currentChannelId:t,currentTeamId:a}=this.props;await Promise.all([e.loadProfilesAndTeamMembersAndChannelMembers(0,N.Q.PROFILE_CHUNK_SIZE,a,t),e.getChannelMembers(t),e.getChannelStats(t)]),this.loadComplete()}componentWillUnmount(){this.props.actions.setModalSearchTerm("")}componentDidUpdate(e){if(e.searchTerm!==this.props.searchTerm){clearTimeout(this.searchTimeoutId);const t=this.props.searchTerm;if(""===t)return this.loadComplete(),void(this.searchTimeoutId=0);const a=window.setTimeout(async()=>{const{data:n}=await e.actions.searchProfiles(t,{team_id:this.props.currentTeamId,in_channel_id:this.props.currentChannelId});a===this.searchTimeoutId&&(this.props.actions.loadStatusesForProfilesList(n),this.props.actions.loadTeamMembersAndChannelMembersForProfilesList(n,this.props.currentTeamId,this.props.currentChannelId).then(({data:e})=>{e&&this.loadComplete()}))},N.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=a}}render(){if(this.state.loading)return O.a.createElement(Ym.a,null);const e=0!==this.props.channel.delete_at;return O.a.createElement(nm,{users:this.props.usersToDisplay,usersPerPage:50,total:this.props.totalChannelMembers,nextPage:this.nextPage,search:this.handleSearch,actions:e?[]:[Ib],actionUserProps:this.props.actionUserProps,focusOnMount:!I.n()})}}function Rb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function kb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}jb(Ab,"propTypes",{currentTeamId:C.a.string.isRequired,currentChannelId:C.a.string.isRequired,searchTerm:C.a.string.isRequired,usersToDisplay:C.a.any.isRequired,actionUserProps:C.a.objectOf(C.a.shape({channel:C.a.any.isRequired,teamMember:C.a.any.isRequired,channelMember:C.a.any.isRequired})).isRequired,totalChannelMembers:C.a.number.isRequired,channel:C.a.any.isRequired,actions:C.a.shape({searchProfiles:C.a.func.isRequired,getChannelMembers:C.a.func.isRequired,getChannelStats:C.a.func.isRequired,setModalSearchTerm:C.a.func.isRequired,loadProfilesAndTeamMembersAndChannelMembers:C.a.func.isRequired,loadStatusesForProfilesList:C.a.func.isRequired,loadTeamMembersAndChannelMembersForProfilesList:C.a.func.isRequired}).isRequired});const Lb=Object(ba.createSelector)((e,t)=>t,h.getMembersInCurrentTeam,p.getMembersInCurrentChannel,p.getCurrentChannel,(e=[],t={},a={},n)=>{const s={},i=[];for(let r=0;r<e.length;r++){const o=e[r];t[o.id]&&a[o.id]&&0===o.delete_at&&(i.push(o),s[o.id]={channel:n,teamMember:t[o.id],channelMember:a[o.id]})}return{usersToDisplay:i.sort(an.sortByUsername),actionUserProps:s}});var Db=Object(n.connect)((function(e){const t=e.views.search.modalSearch;let a;a=t?Object(u.searchProfilesInCurrentChannel)(e,t):Object(u.getProfilesInCurrentChannel)(e);const n=Object(p.getCurrentChannelStats)(e)||{member_count:0};return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(a),!0).forEach((function(t){kb(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rb(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Lb(e,a),{currentTeamId:e.entities.teams.currentTeamId,currentChannelId:e.entities.channels.currentChannelId,searchTerm:t,totalChannelMembers:n.member_count})}),(function(e){return{actions:Object(s.bindActionCreators)({getChannelMembers:o.getChannelMembers,searchProfiles:r.searchProfiles,getChannelStats:o.getChannelStats,setModalSearchTerm:em.a,loadProfilesAndTeamMembersAndChannelMembers:ls.j,loadStatusesForProfilesList:f.b,loadTeamMembersAndChannelMembersForProfilesList:ls.n},e)}}))(Ab);function xb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ub extends O.a.PureComponent{constructor(e){super(e),xb(this,"handleHide",()=>{this.setState({show:!1})}),xb(this,"handleExit",()=>{this.props.onHide()}),xb(this,"onAddNewMembersButton",()=>{const{channel:e,actions:t}=this.props;t.openModal({modalId:N.u.CHANNEL_INVITE,dialogType:Pb.a,dialogProps:{channel:e}}),this.handleExit()}),this.state={show:!0}}render(){const e=0!==this.props.channel.delete_at;return O.a.createElement("div",null,O.a.createElement($.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelMembersModalLabel",id:"channelMembersModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"channelMembersModalLabel"},O.a.createElement("span",{className:"name"},this.props.channel.display_name),O.a.createElement(ee.a,{id:"channel_members_modal.members",defaultMessage:" Members"})),this.props.canManageChannelMembers&&!e&&O.a.createElement("a",{id:"showInviteModal",className:"btn btn-md btn-primary",href:"#",onClick:this.onAddNewMembersButton},O.a.createElement(ee.a,{id:"channel_members_modal.addNew",defaultMessage:" Add Members"}))),O.a.createElement($.a.Body,null,O.a.createElement(Db,{channel:this.props.channel}))))}}xb(Ub,"propTypes",{canManageChannelMembers:C.a.bool.isRequired,channel:C.a.any.isRequired,onHide:C.a.func.isRequired,actions:C.a.shape({openModal:C.a.func.isRequired}).isRequired});var qb=Object(n.connect)(e=>({canManageChannelMembers:Object(p.canManageChannelMembers)(e)}),e=>({actions:Object(s.bindActionCreators)({openModal:q.b},e)}))(Ub);function Hb(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Bb={singleline:!1,mentionHighlight:!1};class Gb extends O.a.PureComponent{constructor(e){super(e),Fb(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0},this.getHeaderMarkdownOptions=Object(pd.memoizeResult)(e=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(a),!0).forEach((function(t){Fb(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hb(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Bb,{channelNamesMap:e}))}render(){let e=this.props.channel;const t=0!==e.delete_at;let a;if(!e){const t=j.lb("channel_info.notFound","No Channel Found");e={display_name:t,name:t,purpose:t,header:t,id:t}}const n=this.props.channel.props&&this.props.channel.props.channel_mentions;t?a=O.a.createElement(vc,{className:"icon icon__archive"}):"O"===e.type?a=O.a.createElement(jd.a,{className:"icon icon__globe icon--body"}):"P"===e.type&&(a=O.a.createElement(Ad.a,{className:"icon icon__globe icon--body"}));const s=Object(Bs.e)()+"/"+this.props.currentTeam.name+"/channels/"+e.name;let i,r;e.purpose?i=e.purpose:e.name===N.Q.DEFAULT_CHANNEL&&(i=O.a.createElement(ee.a,{id:"default_channel.purpose",defaultMessage:"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team."})),i&&(r=O.a.createElement("div",{className:"form-group"},O.a.createElement("div",{className:"info__label"},O.a.createElement(ee.a,{id:"channel_info.purpose",defaultMessage:"Purpose:"})),O.a.createElement("div",{className:"info__value"},i)));let o=null;return e.header&&(o=O.a.createElement("div",{className:"form-group"},O.a.createElement("div",{className:"info__label"},O.a.createElement(ee.a,{id:"channel_info.header",defaultMessage:"Header:"})),O.a.createElement("div",{className:"info__value"},O.a.createElement(wa.a,{message:e.header,options:this.getHeaderMarkdownOptions(n)})))),O.a.createElement($.a,{dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInfoModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"channelInfoModalLabel"},O.a.createElement(ee.a,{id:"channel_info.about",defaultMessage:"About"}),O.a.createElement("strong",null,a,e.display_name))),O.a.createElement($.a.Body,null,r,o,O.a.createElement("div",{className:"form-group"},O.a.createElement("div",{className:"info__label"},O.a.createElement(ee.a,{id:"channel_info.url",defaultMessage:"URL:"})),O.a.createElement("div",{className:"info__value"},s)),O.a.createElement("div",{className:"about-modal__hash form-group pt-3"},O.a.createElement("p",null,O.a.createElement(ee.a,{id:"channel_info.id",defaultMessage:"ID: "}),e.id))))}}Fb(Gb,"propTypes",{onHide:C.a.func.isRequired,channel:C.a.object.isRequired,currentTeam:C.a.object.isRequired});var Vb=Object(n.connect)((function(e){return{currentTeam:Object(h.getCurrentTeam)(e)}}))(Gb);function Wb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zb=N.Q.KeyCodes,Kb=Object(ps.defineMessages)({error:{id:Object(ve.b)("edit_channel_header_modal.error"),defaultMessage:"This channel header is too long, please enter a shorter one"}});class Yb extends O.a.PureComponent{constructor(e){super(e),Wb(this,"handleModalKeyDown",e=>{Object(j.Z)(e,zb.ESCAPE)&&this.hideModal()}),Wb(this,"setShowPreview",e=>{this.props.actions.setShowPreview(e)}),Wb(this,"handleChange",e=>{this.setState({header:e.target.value})}),Wb(this,"handleSave",async()=>{const{header:e}=this.state;if(e===this.props.channel.header)return void this.hideModal();this.setState({saving:!0});const{channel:t,actions:a}=this.props,{error:n}=await a.patchChannel(t.id,{header:e});n?this.setState({serverError:n,saving:!1}):this.hideModal()}),Wb(this,"hideModal",()=>{this.props.actions.closeModal(N.u.EDIT_CHANNEL_HEADER)}),Wb(this,"focusTextbox",()=>{this.refs.editChannelHeaderTextbox&&this.refs.editChannelHeaderTextbox.getWrappedInstance().focus()}),Wb(this,"blurTextbox",()=>{this.refs.editChannelHeaderTextbox&&this.refs.editChannelHeaderTextbox.getWrappedInstance().blur()}),Wb(this,"handleEntering",()=>{this.focusTextbox()}),Wb(this,"handleKeyDown",e=>{const{ctrlSend:t}=this.props;Object(j.fb)(e)?this.setState({header:Object(j.Q)(e)}):t&&Object(j.Z)(e,zb.ENTER)&&!0===e.ctrlKey&&this.handleKeyPress(e)}),Wb(this,"handleKeyPress",e=>{const{ctrlSend:t}=this.props;!Object(I.n)()&&(t&&e.ctrlKey||!t)&&(!Object(j.Z)(e,zb.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),this.blurTextbox(),this.handleSave(e)))}),Wb(this,"renderError",()=>{const{serverError:e}=this.state;if(!e)return null;let t;return t="model.channel.is_valid.header.app_error"===e.server_error_id?this.props.intl.formatMessage(Kb.error):e.message,O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("br",null),O.a.createElement("label",{className:"control-label"},t))}),this.state={header:e.channel.header,saving:!1}}render(){let e=null;return e=this.props.channel.type===N.Q.DM_CHANNEL?O.a.createElement(ee.a,{id:"edit_channel_header_modal.title_dm",defaultMessage:"Edit Header"}):O.a.createElement(ee.a,{id:"edit_channel_header_modal.title",defaultMessage:"Edit Header for {channel}",values:{channel:this.props.channel.display_name}}),O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.props.show,keyboard:!1,onKeyDown:this.handleModalKeyDown,onHide:this.hideModal,onEntering:this.handleEntering,onExited:this.hideModal,role:"dialog","aria-labelledby":"editChannelHeaderModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"editChannelHeaderModalLabel"},e)),O.a.createElement($.a.Body,{bsClass:"modal-body edit-modal-body"},O.a.createElement("div",null,O.a.createElement("p",null,O.a.createElement(ee.a,{id:"edit_channel_header_modal.description",defaultMessage:"Edit the text appearing next to the channel name in the channel header."})),O.a.createElement("div",{className:"textarea-wrapper"},O.a.createElement(In,{value:this.state.header,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,supportsCommands:!1,suggestionListStyle:"bottom",createMessage:Object(j.lb)("edit_channel_header.editHeader","Edit the Channel Header..."),previewMessageLink:Object(j.lb)("edit_channel_header.previewHeader","Edit Header"),handlePostError:this.handlePostError,id:"edit_textbox",ref:"editChannelHeaderTextbox",characterLimit:1024,preview:this.props.shouldShowPreview})),O.a.createElement("div",{className:"post-create-footer"},O.a.createElement(Ln,{characterLimit:1024,showPreview:this.props.shouldShowPreview,ref:this.setTextboxLinksRef,updatePreview:this.setShowPreview,message:this.state.header})),O.a.createElement("br",null),this.renderError())),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.hideModal},O.a.createElement(ee.a,{id:"edit_channel_header_modal.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{disabled:this.state.saving,type:"button",className:"btn btn-primary save-button",onClick:this.handleSave},O.a.createElement(ee.a,{id:"edit_channel_header_modal.save",defaultMessage:"Save"}))))}}Wb(Yb,"propTypes",{intl:ne.a.isRequired,channel:C.a.object.isRequired,show:C.a.bool.isRequired,ctrlSend:C.a.bool.isRequired,shouldShowPreview:C.a.bool.isRequired,actions:C.a.shape({closeModal:C.a.func.isRequired,patchChannel:C.a.func.isRequired,setShowPreview:C.a.func.isRequired}).isRequired});var Qb=Object(te.c)(Yb);var Zb=Object(n.connect)((function(e){return{shouldShowPreview:z(e),show:Object(ed.a)(e,N.u.EDIT_CHANNEL_HEADER),ctrlSend:Object(d.getBool)(e,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")}}),(function(e){return{actions:Object(s.bindActionCreators)({closeModal:q.a,patchChannel:o.patchChannel,setShowPreview:B},e)}}))(Qb);function Jb(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xb extends O.a.PureComponent{constructor(e){super(e),Jb(this,"setError",e=>{"api.context.invalid_param.app_error"===e.id?this.setState({serverError:j.lb("edit_channel_purpose_modal.error","This channel purpose is too long, please enter a shorter one")}):this.setState({serverError:e.message})}),Jb(this,"unsetError",()=>{this.setState({serverError:""})}),Jb(this,"handleEntering",()=>{j.ob(this.purpose)}),Jb(this,"onHide",()=>{this.setState({show:!1})}),Jb(this,"handleKeyDown",e=>{const{ctrlSend:t}=this.props;j.fb(e)?(e.preventDefault(),this.setState({purpose:j.Q(e)})):t&&j.Z(e,N.Q.KeyCodes.ENTER)&&e.ctrlKey?(e.preventDefault(),this.handleSave(e)):t||!j.Z(e,N.Q.KeyCodes.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),this.handleSave(e))}),Jb(this,"handleSave",async()=>{const{channel:e,actions:{patchChannel:t}}=this.props,{purpose:a}=this.state;if(!e)return;this.setState({requestStarted:!0});const{data:n,error:s}=await t(e.id,{purpose:a});this.setState({requestStarted:!1}),n?(this.unsetError(),this.onHide()):s&&this.setError(s)}),Jb(this,"handleChange",e=>{e.preventDefault(),this.setState({purpose:e.target.value})}),Jb(this,"getPurpose",e=>{this.purpose=e}),this.state={purpose:e.channel.purpose||"",serverError:"",show:!0,submitted:!1,requestStarted:!1}}render(){let e=null;const{formatMessage:t}=this.props.intl;this.state.serverError&&(e=O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("br",null),O.a.createElement("label",{className:"control-label"},this.state.serverError)));let a=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"}));this.props.channel.display_name&&(a=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"edit_channel_purpose_modal.title2",defaultMessage:"Edit Purpose for "}),O.a.createElement("span",{className:"name"},this.props.channel.display_name)));let n=O.a.createElement(ee.a,{id:"edit_channel_purpose_modal.body",defaultMessage:'Describe how this channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.'});"P"===this.props.channel.type&&(n=O.a.createElement(ee.a,{id:"edit_channel_private_purpose_modal.body",defaultMessage:'This text appears in the \\"View Info\\" modal of the private channel.'}));const s=t({id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"}).toLowerCase();return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"editChannelPurposeModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"editChannelPurposeModalLabel"},a)),O.a.createElement($.a.Body,null,O.a.createElement("p",null,n),O.a.createElement("textarea",{ref:this.getPurpose,className:"form-control no-resize",rows:"6",maxLength:"250",value:this.state.purpose,onKeyDown:this.handleKeyDown,onChange:this.handleChange,"aria-label":s}),e),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},O.a.createElement(ee.a,{id:"edit_channel_purpose_modal.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{type:"button",className:"btn btn-primary save-button",disabled:this.state.requestStarted,onClick:this.handleSave},O.a.createElement(ee.a,{id:"edit_channel_purpose_modal.save",defaultMessage:"Save"}))))}}Jb(Xb,"propTypes",{onHide:C.a.func.isRequired,channel:C.a.object,ctrlSend:C.a.bool.isRequired,intl:C.a.any,actions:C.a.shape({patchChannel:C.a.func.isRequired}).isRequired});var $b=Object(te.c)(Xb);var ef=Object(n.connect)((function(e){return{ctrlSend:Object(d.getBool)(e,N.Q.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")}}),(function(e){return{actions:{patchChannel:Object(s.bindActionCreators)(o.patchChannel,e)}}}))($b);function tf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const af=Object(ps.defineMessages)({maxLength:{id:Object(ve.b)("rename_channel.maxLength"),defaultMessage:"This field must be less than {maxLength, number} characters"},url:{id:Object(ve.b)("rename_channel.url"),defaultMessage:"URL"},defaultError:{id:Object(ve.b)("rename_channel.defaultError"),defaultMessage:" - Cannot be changed for the default channel"},displayNameHolder:{id:Object(ve.b)("rename_channel.displayNameHolder"),defaultMessage:"Enter display name"}});class nf extends O.a.PureComponent{constructor(e){super(e),tf(this,"setError",e=>{this.setState({serverError:e.message})}),tf(this,"unsetError",()=>{this.setState({serverError:""})}),tf(this,"handleEntering",()=>{j.ob(this.textbox)}),tf(this,"handleHide",e=>{e&&e.preventDefault(),this.setState({serverError:"",urlErrors:"",displayNameError:"",invalid:!1,show:!1})}),tf(this,"handleSubmit",async e=>{e&&e.preventDefault();const t=Object.assign({},this.props.channel),a=t.name,n=t.display_name,s={serverError:""},{formatMessage:i}=this.props.intl,{actions:{patchChannel:r}}=this.props;t.display_name=this.state.displayName.trim(),!t.display_name||t.display_name.length<N.Q.MIN_CHANNELNAME_LENGTH?(s.displayNameError=O.a.createElement(ee.a,{id:"rename_channel.minLength",defaultMessage:"Display name must have at least {minLength, number} characters.",values:{minLength:N.Q.MIN_CHANNELNAME_LENGTH}}),s.invalid=!0):t.display_name.length>N.Q.MAX_CHANNELNAME_LENGTH?(s.displayNameError=i(af.maxLength,{maxLength:N.Q.MAX_CHANNELNAME_LENGTH}),s.invalid=!0):s.displayNameError="",t.name=this.state.channelName.trim();const o=Object(Bs.h)(t.name);if(o.length>0&&(s.invalid=!0),s.urlErrors=o,this.setState(s),s.invalid)return;if(a===t.name&&n===t.display_name)return void this.onSaveSuccess();const{data:l,error:c}=await r(t.id,t);l?this.onSaveSuccess():c&&this.setError(c)}),tf(this,"onSaveSuccess",()=>{this.handleHide(),this.unsetError(),se.a.push("/"+this.props.team.name+"/channels/"+this.state.channelName)}),tf(this,"handleCancel",e=>{this.setState({displayName:this.props.channel.display_name,channelName:this.props.channel.name}),this.handleHide(e)}),tf(this,"onNameChange",e=>{const t=e.target.value.trim().replace(/[^A-Za-z0-9-_]/g,"").toLowerCase();this.setState({channelName:t})}),tf(this,"onDisplayNameChange",e=>{this.setState({displayName:e.target.value})}),tf(this,"getTextbox",e=>{this.textbox=e}),this.state={displayName:e.channel.display_name,channelName:e.channel.name,serverError:"",urlErrors:"",displayNameError:"",invalid:!1,show:!0}}render(){let e=null;this.state.displayNameError&&(e=O.a.createElement("p",{className:"input__help error"},this.state.displayNameError));let t=null,a=null,n="input-group input-group--limit";this.state.urlErrors.length>0?(t=O.a.createElement("p",{className:"input__help error"},this.state.urlErrors),n+=" has-error"):a=O.a.createElement("p",{className:"input__help"},O.a.createElement(ee.a,{id:"change_url.helpText",defaultMessage:"You can use lowercase letters, numbers, dashes, and underscores."}));let s=null;this.state.serverError&&(s=O.a.createElement("div",{className:"form-group has-error"},O.a.createElement("label",{className:"control-label"},this.state.serverError)));const{formatMessage:i}=this.props.intl;let r=i(af.url),o=!1;this.props.channel.name===N.Q.DEFAULT_CHANNEL&&(r+=i(af.defaultError),o=!0);const l=this.props.currentTeamUrl+"/channels",c=Object(Bs.d)(l,35),d=O.a.createElement(di.a,{id:"urlTooltip"},l);return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleCancel,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"renameChannelModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"renameChannelModalLabel"},O.a.createElement(ee.a,{id:"rename_channel.title",defaultMessage:"Rename Channel"}))),O.a.createElement("form",{role:"form"},O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:"control-label"},O.a.createElement(ee.a,{id:"rename_channel.displayName",defaultMessage:"Display Name"})),O.a.createElement(Ee.a,{onChange:this.onDisplayNameChange,type:"text",ref:this.getTextbox,id:"display_name",className:"form-control",placeholder:af.displayNameHolder,value:this.state.displayName,maxLength:N.Q.MAX_CHANNELNAME_LENGTH,"aria-label":i({id:"rename_channel.displayName",defaultMessage:"Display Name"}).toLowerCase()}),e),O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:"control-label"},r),O.a.createElement("div",{className:n},O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:d},O.a.createElement("span",{className:"input-group-addon"},c)),O.a.createElement("input",{onChange:this.onNameChange,type:"text",className:"form-control",id:"channel_name",value:this.state.channelName,maxLength:N.Q.MAX_CHANNELNAME_LENGTH,readOnly:o,"aria-label":i({id:"rename_channel.title",defaultMessage:"Rename Channel"}).toLowerCase()})),a,t),s),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleCancel},O.a.createElement(ee.a,{id:"rename_channel.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{onClick:this.handleSubmit,type:"submit",id:"save-button",className:"btn btn-primary"},O.a.createElement(ee.a,{id:"rename_channel.save",defaultMessage:"Save"})))))}}tf(nf,"propTypes",{intl:ne.a.isRequired,onHide:C.a.func.isRequired,channel:C.a.object.isRequired,team:C.a.object.isRequired,currentTeamUrl:C.a.string.isRequired,actions:C.a.shape({patchChannel:C.a.func.isRequired}).isRequired});var sf=Object(te.c)(nf);function rf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function of(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lf=Object(ba.createSelector)(e=>{const t=e.entities.teams.currentTeamId,a=Object(h.getTeam)(e,t);return{currentTeamUrl:"".concat(Object(Bs.e)(),"/").concat(a.name),team:a}},e=>function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(a),!0).forEach((function(t){of(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rf(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e));var cf=Object(n.connect)(lf,(function(e){return{actions:{patchChannel:Object(s.bindActionCreators)(o.patchChannel,e)}}}))(sf);function df(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class mf extends O.a.PureComponent{constructor(e){super(e),df(this,"handleConvert",()=>{const{actions:e,channelId:t}=this.props;t.length===N.Q.CHANNEL_ID_LENGTH&&(e.convertChannelToPrivate(t),Object(qe.d)("actions","convert_to_private_channel",{channel_id:t}),this.onHide())}),df(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){const{channelDisplayName:e,onHide:t}=this.props;return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:t,role:"dialog","aria-labelledby":"convertChannelModalLabel"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"convertChannelModalLabel"},O.a.createElement(ee.a,{id:"convert_channel.title",defaultMessage:"Convert {display_name} to a Private Channel?",values:{display_name:e}}))),O.a.createElement($.a.Body,null,O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"convert_channel.question1",defaultMessage:"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.",values:{display_name:e}})),O.a.createElement("p",null,O.a.createElement(Jm.a,{id:"convert_channel.question2",defaultMessage:"The change is permanent and cannot be undone."})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"convert_channel.question3",defaultMessage:"Are you sure you want to convert **{display_name}** to a private channel?",values:{display_name:e}}))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},O.a.createElement(ee.a,{id:"convert_channel.cancel",defaultMessage:"No, cancel"})),O.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.handleConvert,autoFocus:!0},O.a.createElement(ee.a,{id:"convert_channel.confirm",defaultMessage:"Yes, convert to private channel"}))))}}df(mf,"propTypes",{onHide:C.a.func.isRequired,channelId:C.a.string.isRequired,channelDisplayName:C.a.string.isRequired,actions:C.a.shape({convertChannelToPrivate:C.a.func.isRequired})});var uf=Object(n.connect)((function(e){return{currentTeamDetails:Object(h.getCurrentTeam)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({convertChannelToPrivate:o.convertChannelToPrivate},e)}}))(mf);function hf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pf extends O.a.PureComponent{constructor(e){super(e),hf(this,"handleDelete",()=>{if(this.props.channel.id.length===N.Q.CHANNEL_ID_LENGTH){if(!this.props.canViewArchivedChannels){const{penultimateViewedChannelName:e}=this.props;se.a.push("/"+this.props.currentTeamDetails.name+"/channels/"+e)}this.props.actions.deleteChannel(this.props.channel.id),this.onHide()}}),hf(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){const{canViewArchivedChannels:e}=this.props;return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"deleteChannelModalLabel",id:"deleteChannelModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"deleteChannelModalLabel"},O.a.createElement(ee.a,{id:"delete_channel.confirm",defaultMessage:"Confirm ARCHIVE Channel"}))),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"alert alert-danger"},!e&&O.a.createElement(Ki.b,{id:"delete_channel.question",defaultMessage:"This will archive the channel from the team and make its contents inaccessible for all users. \\n \\nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}),e&&O.a.createElement(Ki.b,{id:"delete_channel.viewArchived.question",defaultMessage:"This will archive the channel from the team. Channel contents will still be accessible by channel members.\n \nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},O.a.createElement(ee.a,{id:"delete_channel.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete,autoFocus:!0,id:"deleteChannelModalDeleteButton"},O.a.createElement(ee.a,{id:"delete_channel.del",defaultMessage:"Archive"}))))}}hf(pf,"propTypes",{onHide:C.a.func.isRequired,channel:C.a.any.isRequired,currentTeamDetails:C.a.shape({name:C.a.string.isRequired}).isRequired,canViewArchivedChannels:C.a.bool,penultimateViewedChannelName:C.a.string.isRequired,actions:C.a.shape({deleteChannel:C.a.func.isRequired}).isRequired});var gf=Object(n.connect)((function(e){return{canViewArchivedChannels:"true"===Object(m.getConfig)(e).ExperimentalViewArchivedChannels,currentTeamDetails:Object(h.getCurrentTeam)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({deleteChannel:o.deleteChannel},e)}}))(pf);function bf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ff extends O.a.PureComponent{constructor(e){super(e),bf(this,"handleUnarchive",()=>{this.props.channel.id.length===N.Q.CHANNEL_ID_LENGTH&&(this.props.actions.unarchiveChannel(this.props.channel.id),this.onHide())}),bf(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){return O.a.createElement($.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"unarchiveChannelModalLabel",id:"unarchiveChannelModal"},O.a.createElement($.a.Header,{closeButton:!0},O.a.createElement($.a.Title,{componentClass:"h1",id:"unarchiveChannelModalLabel"},O.a.createElement(ee.a,{id:"unarchive_channel.confirm",defaultMessage:"Confirm UNARCHIVE Channel"}))),O.a.createElement($.a.Body,null,O.a.createElement("div",{className:"alert alert-danger"},O.a.createElement(Ki.b,{id:"unarchive_channel.viewArchived.question",defaultMessage:"Are you sure you wish to unarchive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}))),O.a.createElement($.a.Footer,null,O.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},O.a.createElement(ee.a,{id:"unarchive_channel.cancel",defaultMessage:"Cancel"})),O.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleUnarchive,autoFocus:!0,id:"unarchiveChannelModalDeleteButton"},O.a.createElement(ee.a,{id:"unarchive_channel.del",defaultMessage:"Unarchive"}))))}}bf(ff,"propTypes",{onHide:C.a.func.isRequired,channel:C.a.object.isRequired,actions:C.a.shape({unarchiveChannel:C.a.func.isRequired})});var _f=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({unarchiveChannel:o.unarchiveChannel},e)}}))(ff),Ef=a(1284),vf=a(621),yf=a.n(vf);function Cf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wf extends O.a.PureComponent{constructor(...e){super(...e),Cf(this,"loadItems",async(e,t)=>{const{data:a}=await this.props.actions.getGroupsAssociatedToChannel(this.props.channel.id,t,e,50);return{items:a.groups,totalCount:a.totalGroupCount}}),Cf(this,"onClickRemoveGroup",(e,t)=>this.props.actions.unlinkGroupSyncable(e.id,this.props.channel.id,yf.a.SYNCABLE_TYPE_CHANNEL).then(async()=>{t.setState({loading:!0});const{items:e,totalCount:a}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e,totalCount:a})})),Cf(this,"onHide",()=>{this.props.actions.closeModal(N.u.MANAGE_CHANNEL_GROUPS)}),Cf(this,"titleButtonOnClick",()=>{this.onHide(),this.props.actions.openModal({modalId:N.u.ADD_GROUPS_TO_TEAM,dialogType:Ef.a})}),Cf(this,"setChannelMemberStatus",async(e,t,a)=>{this.props.actions.patchGroupSyncable(e.id,this.props.channel.id,yf.a.SYNCABLE_TYPE_CHANNEL,{schemeAdmin:a}).then(async()=>{t.setState({loading:!0});const{items:e,totalCount:a}=await t.props.loadItems(t.setState.page,t.state.searchTerm);await this.props.actions.getMyChannelMember(this.props.channel.id),t.setState({loading:!1,items:e,totalCount:a})})}),Cf(this,"renderRow",(e,t)=>{let a;return a=e.scheme_admin?j.lb("channel_members_dropdown.channel_admins","Channel Admins"):j.lb("channel_members_dropdown.channel_members","Channel Members"),O.a.createElement("div",{key:e.id,className:"more-modal__row"},O.a.createElement("img",{className:"more-modal__image",src:wu.a,alt:"group picture",width:"32",height:"32"}),O.a.createElement("div",{className:"more-modal__details"},O.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",O.a.createElement("span",{className:"more-modal__name_count"},O.a.createElement(ee.a,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),O.a.createElement("div",{className:"more-modal__actions"},O.a.createElement(ji.a,null,O.a.createElement("button",{id:"teamGroupsDropdown_".concat(e.display_name),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},O.a.createElement("span",null,a," "),O.a.createElement(sm.a,null)),O.a.createElement(Ai.a,{openLeft:!0,ariaLabel:j.lb("channel_members_dropdown.menuAriaLabel","Change the role of channel member")},O.a.createElement(Ai.a.ItemAction,{show:!e.scheme_admin,onClick:()=>this.setChannelMemberStatus(e,t,!0),text:j.lb("channel_members_dropdown.make_channel_admins","Make Channel Admins")}),O.a.createElement(Ai.a.ItemAction,{show:Boolean(e.scheme_admin),onClick:()=>this.setChannelMemberStatus(e,t,!1),text:j.lb("channel_members_dropdown.make_channel_members","Make Channel Members")}),O.a.createElement(Ai.a.ItemAction,{onClick:()=>this.onClickRemoveGroup(e,t),text:j.lb("group_list_modal.removeGroupButton","Remove Group")})))))})}render(){const{formatMessage:e}=this.props.intl;return O.a.createElement(yu,{titleText:e({id:"groups",defaultMessage:"{channel} Groups"},{channel:this.props.channel.display_name}),searchPlaceholderText:e({id:"manage_channel_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick})}}Cf(wf,"propTypes",{channel:C.a.any.isRequired,intl:C.a.any.isRequired,actions:C.a.shape({getGroupsAssociatedToChannel:C.a.func.isRequired,unlinkGroupSyncable:C.a.func.isRequired,patchGroupSyncable:C.a.func.isRequired,getMyChannelMember:C.a.func.isRequired,closeModal:C.a.func.isRequired,openModal:C.a.func.isRequired}).isRequired});var Of=Object(te.c)(wf);var Tf=Object(n.connect)((e,t)=>({channel:e.entities.channels.channels[t.channelID]}),e=>({actions:Object(s.bindActionCreators)({getGroupsAssociatedToChannel:c.getGroupsAssociatedToChannel,closeModal:q.a,openModal:q.b,unlinkGroupSyncable:c.unlinkGroupSyncable,patchGroupSyncable:c.patchGroupSyncable,getMyChannelMember:o.getMyChannelMember},e)}))(Of);function Sf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pf extends O.a.PureComponent{constructor(...e){super(...e),Sf(this,"handleLeave",e=>{e.preventDefault();const{channel:t,actions:{leaveChannel:a}}=this.props;t.type===N.j.PRIVATE_CHANNEL?Object(M.k)(t):a(t.id)})}render(){const{channel:e,isDefault:t,isGuestUser:a,id:n}=this.props;return O.a.createElement(Ai.a.ItemAction,{id:n,show:(!t||a)&&e.type!==N.j.DM_CHANNEL&&e.type!==N.j.GM_CHANNEL,onClick:this.handleLeave,text:Object(j.lb)("channel_header.leave","Leave Channel")})}}Sf(Pf,"propTypes",{channel:C.a.object.isRequired,isDefault:C.a.bool.isRequired,isGuestUser:C.a.bool.isRequired,id:C.a.string,actions:C.a.shape({leaveChannel:C.a.func.isRequired}).isRequired}),Sf(Pf,"defaultProps",{isGuestUser:!1});var Mf=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({leaveChannel:E.e},e)}))(Pf);function Nf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class If extends O.a.PureComponent{constructor(...e){super(...e),Nf(this,"handleClose",()=>{this.props.actions.goToLastViewedChannel()})}render(){return O.a.createElement(Ai.a.ItemAction,{show:this.props.isArchived,onClick:this.handleClose,text:Object(j.lb)("center_panel.archived.closeChannel","Close Channel")})}}Nf(If,"propTypes",{isArchived:C.a.bool.isRequired,actions:C.a.shape({goToLastViewedChannel:C.a.func.isRequired}).isRequired});var jf=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({goToLastViewedChannel:E.c},e)}))(If);function Af(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Rf extends O.a.PureComponent{constructor(...e){super(...e),Af(this,"handleClose",e=>{e.preventDefault();const{channel:t,currentUser:a,currentTeam:n,redirectChannel:s,actions:{savePreferences:i,leaveDirectChannel:r}}=this.props;let o,l;t.type===N.j.DM_CHANNEL?(l=N.j.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,o=t.teammate_id):(l=N.j.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,o=t.id),r(t.name),i(a.id,[{user_id:a.id,category:l,name:o,value:"false"}]),se.a.push("/".concat(n.name,"/channels/").concat(s))})}render(){const{id:e,channel:t}=this.props;let a;return t.type===N.j.DM_CHANNEL?a=Object(j.lb)("center_panel.direct.closeDirectMessage","Close Direct Message"):t.type===N.j.GM_CHANNEL&&(a=Object(j.lb)("center_panel.direct.closeGroupMessage","Close Group Message")),O.a.createElement(Ai.a.ItemAction,{id:e,show:t.type===N.j.DM_CHANNEL||t.type===N.j.GM_CHANNEL,onClick:this.handleClose,text:a})}}Af(Rf,"propTypes",{currentUser:C.a.object.isRequired,currentTeam:C.a.object.isRequired,redirectChannel:C.a.string.isRequired,channel:C.a.object.isRequired,id:C.a.string,actions:C.a.shape({savePreferences:C.a.func.isRequired,leaveDirectChannel:C.a.func.isRequired}).isRequired});var kf=Object(n.connect)(e=>({currentTeam:Object(h.getCurrentTeam)(e),redirectChannel:Object(p.getRedirectChannelNameForTeam)(e,Object(h.getCurrentTeamId)(e))}),e=>({actions:Object(s.bindActionCreators)({savePreferences:os.savePreferences,leaveDirectChannel:E.f},e)}))(Rf);function Lf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Df extends O.a.PureComponent{constructor(...e){super(...e),Lf(this,"handleClick",()=>{const{user:e,channel:t,isMuted:a,actions:{updateChannelNotifyProps:n}}=this.props;n(e.id,t.id,{mark_unread:a?N.v.ALL:N.v.MENTION})})}render(){const{id:e,isMuted:t}=this.props;let a;return a=t?Object(j.lb)("channel_header.unmute","Unmute Channel"):Object(j.lb)("channel_header.mute","Mute Channel"),O.a.createElement(Ai.a.ItemAction,{id:e,onClick:this.handleClick,text:a})}}Lf(Df,"propTypes",{user:C.a.object.isRequired,channel:C.a.object.isRequired,isMuted:C.a.bool.isRequired,id:C.a.string,actions:C.a.shape({updateChannelNotifyProps:C.a.func.isRequired}).isRequired});var xf=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:o.updateChannelNotifyProps},e)}))(Df);function Uf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class qf extends O.a.PureComponent{constructor(...e){super(...e),Uf(this,"toggleFavoriteChannel",e=>{const{isFavorite:t,actions:{favoriteChannel:a,unfavoriteChannel:n}}=this.props;return t?n(e):a(e)}),Uf(this,"handleClick",e=>{e.preventDefault(),this.toggleFavoriteChannel(this.props.channel.id)})}render(){let e;return e=this.props.isFavorite?Object(j.lb)("channelHeader.removeFromFavorites","Remove from Favorites"):Object(j.lb)("channelHeader.addToFavorites","Add to Favorites"),O.a.createElement(Ai.a.ItemAction,{show:this.props.show,onClick:this.handleClick,text:e})}}Uf(qf,"propTypes",{show:C.a.bool.isRequired,channel:C.a.object.isRequired,isFavorite:C.a.bool.isRequired,actions:C.a.shape({favoriteChannel:C.a.func.isRequired,unfavoriteChannel:C.a.func.isRequired}).isRequired}),Uf(qf,"defaultProps",{show:!0});var Hf=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({favoriteChannel:o.favoriteChannel,unfavoriteChannel:o.unfavoriteChannel},e)}))(qf);function Ff(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Bf extends O.a.PureComponent{constructor(...e){super(...e),Ff(this,"handleClick",e=>{e.preventDefault();const{channel:t,hasPinnedPosts:a,actions:{closeRightHandSide:n,showPinnedPosts:s}}=this.props;a?n():s(t.id)})}render(){return O.a.createElement(Ai.a.ItemAction,{show:this.props.show,onClick:this.handleClick,text:Object(j.lb)("navbar.viewPinnedPosts","View Pinned Posts")})}}Ff(Bf,"propTypes",{show:C.a.bool,channel:C.a.object.isRequired,hasPinnedPosts:C.a.bool.isRequired,actions:C.a.shape({closeRightHandSide:C.a.func.isRequired,showPinnedPosts:C.a.func.isRequired}).isRequired});var Gf=Object(n.connect)(e=>({hasPinnedPosts:Object(ys.k)(e)===N.C.PIN}),e=>({actions:Object(s.bindActionCreators)({closeRightHandSide:vs.b,showPinnedPosts:vs.o},e)}))(Bf);class Vf extends O.a.PureComponent{render(){const{user:e,channel:t,isDefault:a,isFavorite:n,isMuted:s,isReadonly:i,isArchived:r,isMobile:o,penultimateViewedChannelName:l,isLicensedForLDAPGroups:c}=this.props,d=t.type===N.j.PRIVATE_CHANNEL,m=!0===t.group_constrained,u=d?x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,h=d?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES,p=d?x.Permissions.DELETE_PRIVATE_CHANNEL:x.Permissions.DELETE_PUBLIC_CHANNEL,g=x.Permissions.MANAGE_TEAM;let b;o&&(b=O.a.createElement("li",{className:"MenuGroup mobile-menu-divider"},O.a.createElement("hr",null)));const f=this.props.pluginMenuItems.map(e=>O.a.createElement(Ai.a.ItemAction,{id:e.id+"_pluginmenuitem",key:e.id+"_pluginmenuitem",onClick:()=>{e.action&&e.action(this.props.channel.id)},text:e.text}));return O.a.createElement(O.a.Fragment,null,O.a.createElement(Ai.a.Group,{divider:b},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelViewInfo",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL,modalId:N.u.CHANNEL_INFO,dialogType:Vb,dialogProps:{channel:t},text:Object(j.lb)("navbar.viewInfo","View Info")}),O.a.createElement(Hf,{id:"channelToggleFavorite",show:o,channel:t,isFavorite:n}),O.a.createElement(Gf,{id:"channelViewPinnedPosts",show:o,channel:t}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelNotificationPreferences",show:t.type!==N.j.DM_CHANNEL&&!r,modalId:N.u.CHANNEL_NOTIFICATIONS,dialogType:Sb,dialogProps:{channel:t,currentUser:e},text:Object(j.lb)("navbar.preferences","Notification Preferences")}),O.a.createElement(xf,{id:"channelToggleMuteChannel",user:e,channel:t,isMuted:s,isArchived:r})),O.a.createElement(Ai.a.Group,{divider:b},O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[u]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelAddMembers",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!a&&!m,modalId:N.u.CHANNEL_INVITE,dialogType:Pb.a,dialogProps:{channel:t},text:Object(j.lb)("navbar.addMembers","Add Members")}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelAddMembers",show:t.type===N.j.GM_CHANNEL&&!r&&!m,modalId:N.u.CREATE_DM_CHANNEL,dialogType:Ch,dialogProps:{isExistingChannel:!0},text:Object(j.lb)("navbar.addMembers","Add Members")})),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelViewMembers",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&(r||a),modalId:N.u.CHANNEL_MEMBERS,dialogType:qb,dialogProps:{channel:t},text:Object(j.lb)("channel_header.viewMembers","View Members")}),O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[u]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelAddGroups",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!a&&m&&c,modalId:N.u.ADD_GROUPS_TO_CHANNEL,dialogType:Ef.a,text:Object(j.lb)("navbar.addGroups","Add Groups")}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelManageGroups",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!a&&m&&c,modalId:N.u.MANAGE_CHANNEL_GROUPS,dialogType:Tf,dialogProps:{channelID:t.id},text:Object(j.lb)("navbar_dropdown.manageGroups","Manage Groups")}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelManageMembers",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!a,modalId:N.u.CHANNEL_MEMBERS,dialogType:qb,dialogProps:{channel:t},text:Object(j.lb)("channel_header.manageMembers","Manage Members")})),O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[u],invert:!0},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelViewMembers",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!a,modalId:N.u.CHANNEL_MEMBERS,dialogType:qb,dialogProps:{channel:t},text:Object(j.lb)("channel_header.viewMembers","View Members")}))),O.a.createElement(Ai.a.Group,{divider:b},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelEditHeader",show:!(t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL||r||i),modalId:N.u.EDIT_CHANNEL_HEADER,dialogType:Zb,dialogProps:{channel:t},text:Object(j.lb)("channel_header.setHeader","Edit Channel Header")}),O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[h]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelEditHeader",show:t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL&&!r&&!i,modalId:N.u.EDIT_CHANNEL_HEADER,dialogType:Zb,dialogProps:{channel:t},text:Object(j.lb)("channel_header.setHeader","Edit Channel Header")}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelEditPurpose",show:!r&&!i&&t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL,modalId:N.u.EDIT_CHANNEL_PURPOSE,dialogType:ef,dialogProps:{channel:t},text:Object(j.lb)("channel_header.setPurpose","Edit Channel Purpose")}),O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelRename",show:!r&&t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL,modalId:N.u.RENAME_CHANNEL,dialogType:cf,dialogProps:{channel:t},text:Object(j.lb)("channel_header.rename","Rename Channel")})),O.a.createElement(Kd.a,{teamId:t.team_id,permissions:[x.Permissions.MANAGE_TEAM]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelCovertToPrivate",show:!r&&!a&&t.type===N.j.OPEN_CHANNEL,modalId:N.u.CONVERT_CHANNEL,dialogType:uf,dialogProps:{channelId:t.id,channelDisplayName:t.display_name},text:Object(j.lb)("channel_header.convert","Convert to Private Channel")})),O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[p]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelArchiveChannel",show:!r&&!a&&t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL,modalId:N.u.DELETE_CHANNEL,dialogType:gf,dialogProps:{channel:t,penultimateViewedChannelName:l},text:Object(j.lb)("channel_header.delete","Archive Channel")}))),O.a.createElement(Ai.a.Group,null,f),O.a.createElement(Ai.a.Group,{divider:b},o&&O.a.createElement(gb,{channel:t,isDropdown:!0}),O.a.createElement(Mf,{id:"channelLeaveChannel",channel:t,isDefault:a,isGuestUser:Object(j.Y)(e)}),O.a.createElement(kf,{id:"channelCloseMessage",channel:t,currentUser:e}),O.a.createElement(jf,{id:"channelCloseChannel",isArchived:r})),O.a.createElement(Ai.a.Group,{divider:b},O.a.createElement(yr,{channelId:t.id,teamId:t.team_id,permissions:[g]},O.a.createElement(Ai.a.ItemToggleModalRedux,{id:"channelUnarchiveChannel",show:r&&!a&&t.type!==N.j.DM_CHANNEL&&t.type!==N.j.GM_CHANNEL,modalId:N.u.UNARCHIVE_CHANNEL,dialogType:_f,dialogProps:{channel:t},text:Object(j.lb)("channel_header.unarchive","Unarchive Channel")}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Vf,"propTypes",{user:C.a.object.isRequired,channel:C.a.object.isRequired,isDefault:C.a.bool.isRequired,isFavorite:C.a.bool.isRequired,isReadonly:C.a.bool.isRequired,isMuted:C.a.bool.isRequired,isArchived:C.a.bool.isRequired,isMobile:C.a.bool.isRequired,penultimateViewedChannelName:C.a.string.isRequired,pluginMenuItems:C.a.arrayOf(C.a.object),isLicensedForLDAPGroups:C.a.bool});class Wf extends O.a.PureComponent{render(){return O.a.createElement(Bc.a,{in:this.props.show,classNames:"mobile-channel-header-dropdown",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:350,exit:350}},this.props.children)}}function zf(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Wf,"propTypes",{children:C.a.node,show:C.a.bool.isRequired});class Kf extends O.a.PureComponent{constructor(...e){super(...e),zf(this,"getChannelTitle",()=>{const{user:e,channel:t,teammateId:a,displayName:n}=this.props;return t.type===N.j.DM_CHANNEL?e.id===a?O.a.createElement(ee.a,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:n}}):n:t.display_name})}render(){const{teammateIsBot:e,teammateStatus:t}=this.props;let a;return e||(a=O.a.createElement(lp.a,{status:t})),O.a.createElement(ji.a,{animationComponent:Wf},O.a.createElement("a",null,O.a.createElement("span",{className:"heading"},a,this.getChannelTitle()),O.a.createElement(ee.a,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},e=>O.a.createElement("span",{className:"fa fa-angle-down header-dropdown__icon",title:e}))),O.a.createElement(ee.a,{id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"},e=>O.a.createElement(Ai.a,{ariaLabel:e},O.a.createElement(Jf,{isMobile:!0}),O.a.createElement("div",{className:"Menu__close visible-xs-block"},"×"))))}}zf(Kf,"propTypes",{user:C.a.object.isRequired,channel:C.a.object.isRequired,teammateId:C.a.string,teammateIsBot:C.a.bool,teammateStatus:C.a.string,displayName:C.a.string.isRequired});const Yf=Object(ba.createSelector)(p.getCurrentChannel,u.getCurrentUserId,(e,t)=>e.type!==N.j.DM_CHANNEL?null:j.J(e.name,t)),Qf=Object(ba.createSelector)(u.getUserStatuses,Yf,(e,t)=>t?e[t]:null),Zf=ub,Jf=Object(n.connect)(e=>({user:Object(u.getCurrentUser)(e),channel:Object(p.getCurrentChannel)(e),isDefault:Object(p.isCurrentChannelDefault)(e),isFavorite:Object(p.isCurrentChannelFavorite)(e),isMuted:Object(p.isCurrentChannelMuted)(e),isReadonly:Object(p.isCurrentChannelReadOnly)(e),isArchived:Object(p.isCurrentChannelArchived)(e),penultimateViewedChannelName:Object(b.c)(e)||Object(p.getRedirectChannelNameForTeam)(e,Object(h.getCurrentTeamId)(e)),pluginMenuItems:e.plugins.components.ChannelHeader||[],isLicensedForLDAPGroups:"true"===e.entities.general.license.LDAPGroups}))(Vf),Xf=Object(n.connect)(e=>{const t=Object(u.getCurrentUser)(e),a=Object(p.getCurrentChannel)(e),n=Yf(e);let s=!1,i="";if(n){const t=Object(u.getUser)(e,n);s=t&&t.is_bot,i=j.x(e,t)}return{user:t,channel:a,teammateId:n,teammateIsBot:s,teammateStatus:Qf(e),displayName:i}})(Kf);class $f extends O.a.PureComponent{render(){return this.props.mentionCount?O.a.createElement("span",{className:"badge badge-notify"},this.props.mentionCount):this.props.messageCount?O.a.createElement("span",{className:"badge badge-notify"},"•"):null}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}($f,"propTypes",{mentionCount:C.a.number.isRequired,messageCount:C.a.number.isRequired});var e_=Object(n.connect)((function(e){const{mentionCount:t,messageCount:a}=Object(p.getUnreadsInCurrentTeam)(e);return{mentionCount:t,messageCount:a}}))($f);const t_=({actions:{toggleLhs:e}})=>O.a.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:e},O.a.createElement("span",{className:"sr-only"},O.a.createElement(ee.a,{id:"navbar.toggle2",defaultMessage:"Toggle sidebar"})),O.a.createElement(up.a,{className:"style--none icon icon__menu icon--sidebarHeaderTextColor"}),O.a.createElement(e_,null));t_.propTypes={actions:C.a.shape({toggleLhs:C.a.func.isRequired}).isRequired};var a_=t_;var n_=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({toggleLhs:ah.c},e)}))(a_);const s_=({actions:{toggleRhsMenu:e}})=>O.a.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle navbar-right__icon menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:e},O.a.createElement(up.a,null));s_.propTypes={actions:C.a.shape({toggleRhsMenu:C.a.func.isRequired}).isRequired};var i_=s_;var r_=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({toggleRhsMenu:vs.r},e)}))(i_);class o_ extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>O.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 22 22",role:"img","aria-label":e},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-388.000000, -18.000000)",fill:"inherit"},O.a.createElement("g",null,O.a.createElement("g",{transform:"translate(381.000000, 11.000000)"},O.a.createElement("g",{transform:"translate(7.000000, 7.000000)"},O.a.createElement("path",{d:"M11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 Z M11,20.7924685 C16.408231,20.7924685 20.7924685,16.408231 20.7924685,11 C20.7924685,5.59176898 16.408231,1.20753149 11,1.20753149 C5.59176898,1.20753149 1.20753149,5.59176898 1.20753149,11 C1.20753149,16.408231 5.59176898,20.7924685 11,20.7924685 Z M10.1572266,16.0625 L10.1572266,8.69335938 L11.3466797,8.69335938 L11.3466797,16.0625 L10.1572266,16.0625 Z M10.7519531,7.50390625 C10.3417969,7.50390625 10,7.16210938 10,6.75195312 C10,6.33496094 10.3417969,6 10.7519531,6 C11.1689453,6 11.5039062,6.33496094 11.5039062,6.75195312 C11.5039062,7.16210938 11.1689453,7.50390625 10.7519531,7.50390625 Z"})))))))))}}function l_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c_={mentionHighlight:!1};class d_ extends O.a.PureComponent{constructor(...e){super(...e),l_(this,"showEditChannelHeaderModal",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide();const{actions:e,channel:t}=this.props,a={modalId:N.u.EDIT_CHANNEL_HEADER,dialogType:Zb,dialogProps:{channel:t}};e.openModal(a)}),l_(this,"hide",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide()})}render(){const{channel:e,isReadOnly:t}=this.props;let a=null;if(e.header)a=O.a.createElement(wa.a,{message:e.header,options:c_});else{let e;if(!t){const t=O.a.createElement("a",{href:"#",onClick:this.showEditChannelHeaderModal},O.a.createElement(ee.a,{id:"navbar.click",defaultMessage:"Click here"}));e=O.a.createElement(O.a.Fragment,null,O.a.createElement("br",null),O.a.createElement(ee.a,{id:"navbar.clickToAddHeader",defaultMessage:"{clickHere} to add one.",values:{clickHere:t}}))}a=O.a.createElement("div",null,O.a.createElement(ee.a,{id:"navbar.noHeader",defaultMessage:"No channel header yet."}),e)}const n=O.a.createElement(Gl.a,{popoverStyle:"info",placement:"bottom",className:"navbar__popover",id:"header-popover"},a,O.a.createElement("div",{className:"close visible-xs-block",onClick:this.hide},"×"));return O.a.createElement(mi.a,{ref:"headerOverlay",trigger:"click",placement:"bottom",overlay:n,className:"description",rootClose:!0},O.a.createElement("button",{className:"navbar-toggle navbar-right__icon navbar-info-button pull-right","aria-label":Object(j.lb)("accessibility.button.Info","Info")},O.a.createElement(o_,{className:"icon icon__info","aria-hidden":"true"})))}}l_(d_,"propTypes",{channel:C.a.object.isRequired,isReadOnly:C.a.bool.isRequired,actions:C.a.shape({openModal:C.a.func.isRequired}).isRequired});var m_=Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b},e)}}))(d_);function u_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h_ extends O.a.PureComponent{constructor(...e){super(...e),u_(this,"handleClick",()=>{this.props.actions.openRHSSearch()})}render(){return O.a.createElement("button",{type:"button",className:"navbar-toggle navbar-right__icon navbar-search pull-right",onClick:this.handleClick,"aria-label":Object(j.lb)("accessibility.button.Search","Search")},O.a.createElement(rc.a,{className:"icon icon__search","aria-hidden":"true"}))}}u_(h_,"propTypes",{actions:C.a.shape({openRHSSearch:C.a.func.isRequired}).isRequired});var p_=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({openRHSSearch:vs.f},e)}))(h_);function g_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b_ extends O.a.PureComponent{constructor(...e){super(...e),g_(this,"handleClick",()=>{const{user:e,channel:t,actions:{updateChannelNotifyProps:a}}=this.props;a(e.id,t.id,{mark_unread:N.v.ALL})})}render(){return O.a.createElement("button",{type:"button",className:"navbar-toggle icon icon__mute",onClick:this.handleClick},O.a.createElement("span",{className:"fa fa-bell-slash-o icon"}))}}g_(b_,"propTypes",{user:C.a.shape({id:C.a.string.isRequired}).isRequired,channel:C.a.shape({id:C.a.string.isRequired}).isRequired,actions:C.a.shape({updateChannelNotifyProps:C.a.func.isRequired}).isRequired});var f_=Object(n.connect)(null,e=>({actions:Object(s.bindActionCreators)({updateChannelNotifyProps:o.updateChannelNotifyProps},e)}))(b_);function __(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E_ extends O.a.PureComponent{constructor(...e){super(...e),__(this,"hideSidebars",e=>{j.cb()&&(this.props.actions.closeRhs(),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&(this.props.actions.closeLhs(),this.props.actions.closeRhsMenu()))})}componentDidMount(){document.querySelector(".inner-wrap").addEventListener("click",this.hideSidebars)}componentWillUnmount(){document.querySelector(".inner-wrap").removeEventListener("click",this.hideSidebars)}render(){const{user:e,channel:t,isMuted:a}=this.props;return O.a.createElement("nav",{id:"navbar",className:"navbar navbar-default navbar-fixed-top",role:"navigation"},O.a.createElement("div",{className:"container-fluid theme"},O.a.createElement("div",{className:"navbar-header"},O.a.createElement(n_,null),t&&O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"navbar-brand"},O.a.createElement(Xf,null),a&&O.a.createElement(f_,{user:e,channel:t})),O.a.createElement(m_,{ref:"headerOverlay",channel:t,isReadOnly:this.props.isReadOnly}),O.a.createElement(p_,null),O.a.createElement(gb,{channel:t,isDropdown:!1})),O.a.createElement(r_,null))))}}__(E_,"propTypes",{user:C.a.object.isRequired,channel:C.a.object,isReadOnly:C.a.bool,isMuted:C.a.bool,actions:C.a.shape({closeLhs:C.a.func.isRequired,closeRhs:C.a.func.isRequired,closeRhsMenu:C.a.func.isRequired}).isRequired});const v_=Object(ba.createSelector)(p.getMyCurrentChannelMembership,e=>Object(gn.isChannelMuted)(e));var y_=Object(n.connect)(e=>({user:Object(u.getCurrentUser)(e),channel:Object(p.getCurrentChannel)(e),isMuted:v_(e),isReadOnly:Object(p.isCurrentChannelReadOnly)(e)}),e=>({actions:Object(s.bindActionCreators)({closeLhs:ah.a,closeRhs:vs.b,closeRhsMenu:vs.a},e)}))(E_);const C_=new RegExp("^[a-zA-Z0-9]{".concat(26,"}__[a-zA-Z0-9]{").concat(26,"}$"));function w_({match:e,history:t}){return async(a,n)=>{const s=n(),{path:i,identifier:l,team:c}=e.params;if(!l)return;const d=Object(h.getTeamByName)(s,c);if(d)switch(function(e,t,a){if("channels"===t){const t=Object(p.getChannelByName)(e,a),n=Object(p.getOtherChannels)(e).find(e=>e.name===a);return 26===a.length?t||n?"channel_name":"channel_id":!t&&!n&&40===a.length||t&&t.type===N.j.GM_CHANNEL||n&&n.type===N.j.GM_CHANNEL?"group_channel_group_id":function(e){return 54===e.length&&C_.test(e)}(a)?"direct_channel_user_ids":"channel_name"}if("messages"===t)return 0===a.indexOf("@")?"direct_channel_username":a.indexOf("@")>0?"direct_channel_email":26===a.length?"direct_channel_user_id":40===a.length?"group_channel_group_id":"error";return"error"}(s,i,l)){case"channel_name":a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:r}=e.params,l=r.toLowerCase(),c=Object(h.getTeamByName)(s,i);if(!c)return;let d,m=Object(p.getChannelsNameMapInTeam)(s,c.id)[l];if(m&&(d=s.entities.channels.myMembers[m.id]),!m||!d){const{data:n,error:r}=await a(Object(o.joinChannel)(Object(u.getCurrentUserId)(s),c.id,null,l));if(r){const{data:n,error:r}=await a(Object(o.getChannelByNameAndTeamName)(i,l,!0));if(r||0===n.delete_at)return await a(Object(o.fetchMyChannelsAndMembers)(c.id)),void M_(e,t,Object(p.getRedirectChannelNameForTeam)(s,c.id));m=n}else m=n.channel}m.type===N.j.DM_CHANNEL?a(T_(e,t)):m.type===N.j.GM_CHANNEL?t.replace("/".concat(i,"/messages/").concat(m.name)):S_(m)}}(e,t));break;case"channel_id":a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:r}=e.params,l=r.toLowerCase();let c=Object(p.getChannel)(s,l);const d=s.entities.channels.myMembers[l],m=Object(h.getTeamByName)(s,i);if(!c||!d){const{data:n,error:i}=await a(Object(o.joinChannel)(Object(u.getCurrentUserId)(s),m.id,l,null));if(i)return await a(Object(o.fetchMyChannelsAndMembers)(m.id)),void M_(e,t,Object(p.getRedirectChannelNameForTeam)(s,m.id));c=n.channel}c.type===N.j.DM_CHANNEL?a(O_(e,t,j.J(c.name,Object(u.getCurrentUserId)(s)))):c.type===N.j.GM_CHANNEL?t.replace("/".concat(i,"/messages/").concat(c.name)):t.replace("/".concat(i,"/channels/").concat(c.name))}}(e,t));break;case"group_channel_group_id":a(function(e,t){return async(a,n)=>{const s=n(),{identifier:i,team:r}=e.params,l=i.toLowerCase();t.replace(e.url.replace("/channels/","/messages/"));let c=Object(p.getChannelByName)(s,l);const d=Object(h.getTeamByName)(s,r);if(!c){const{data:n,error:i}=await a(Object(o.joinChannel)(Object(u.getCurrentUserId)(s),d.id,null,l));if(i)return await a(Object(o.fetchMyChannelsAndMembers)(d.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));c=n.channel}a(Object(o.markGroupChannelOpen)(c.id)),S_(c)}}(e,t));break;case"direct_channel_username":a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:l}=e.params,c=l.slice(1,l.length).toLowerCase(),d=Object(h.getTeamByName)(s,i);let m=Object(u.getUserByUsername)(s,c);if(!m){const{data:n,error:i}=await a(Object(r.getUserByUsername)(c));if(i)return await a(Object(o.fetchMyChannelsAndMembers)(d.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));m=n}const{error:g,data:b}=await a(Object(pa.e)(m.id));if(g)return await a(Object(o.fetchMyChannelsAndMembers)(d.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));S_(b)}}(e,t));break;case"direct_channel_email":a(function(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:l}=e.params,c=l.toLowerCase(),d=Object(h.getTeamByName)(s,i);let m=Object(u.getUserByEmail)(s,c);if(!m){const{data:n,error:i}=await a(Object(r.getUserByEmail)(c));if(i)return await a(Object(o.fetchMyChannelsAndMembers)(d.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));m=n}t.replace("/".concat(i,"/messages/@").concat(m.username))}}(e,t));break;case"direct_channel_user_ids":a(T_(e,t));break;case"direct_channel_user_id":a(O_(e,t,l));break;case"error":await a(Object(o.fetchMyChannelsAndMembers)(d.id)),P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id))}}}function O_(e,t,a){return async(n,s)=>{const i=s(),{team:l}=e.params,c=Object(h.getTeamByName)(i,l);let d=Object(u.getUser)(i,a);if(!d){const{data:s,error:l}=await n(Object(r.getUser)(a));if(l)return await n(Object(o.fetchMyChannelsAndMembers)(c.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(i,c.id));d=s}t.replace("/".concat(l,"/messages/@").concat(d.username))}}function T_(e,t){return async(a,n)=>{const s=n(),{team:i,identifier:l}=e.params,c=j.J(l.toLowerCase(),Object(u.getCurrentUserId)(n())),d=Object(h.getTeamByName)(s,i);let m=Object(u.getUser)(s,c);if(!m){const{data:n,error:i}=await a(Object(r.getUser)(c));if(i)return await a(Object(o.fetchMyChannelsAndMembers)(d.id)),void P_(e,t,Object(p.getRedirectChannelNameForTeam)(s,d.id));m=n}t.replace("/".concat(i,"/messages/@").concat(m.username))}}function S_(e){M.b(e)}function P_(e,t,a){const{team:n}=e.params;t.push(n?"/".concat(n,"/channels/").concat(a):"/")}async function M_(e,t,a){const{team:n}=e.params;t.push(n?"/error?type=channel_not_found&returnTo=/".concat(n,"/channels/").concat(a):"/")}var N_=a(193),I_=a(173),j_=a.n(I_);var A_=a(1416);a(1445);class R_ extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.member",defaultMessage:"Member Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18",role:"img","aria-label":e},O.a.createElement("path",{d:"M15.48 12.51L12.6 10.8C12.648 10.74 12.72 10.644 12.816 10.512C13.02 10.26 13.158 10.056 13.23 9.89999C13.602 9.26399 13.89 8.55599 14.094 7.77599C14.298 6.98399 14.4 6.19199 14.4 5.39999C14.4 4.33199 14.172 3.38999 13.716 2.57399C13.272 1.75799 12.642 1.12799 11.826 0.683987C11.01 0.227987 10.068 -1.26362e-05 9 -1.26362e-05C7.932 -1.26362e-05 6.99 0.227987 6.174 0.683987C5.358 1.12799 4.722 1.75799 4.266 2.57399C3.822 3.38999 3.6 4.33199 3.6 5.39999C3.6 6.19199 3.708 6.98999 3.924 7.79399C4.116 8.56199 4.398 9.29399 4.77 9.98999C4.95 10.35 5.16 10.65 5.4 10.89L2.52 12.6C2.04 12.78 1.65 13.11 1.35 13.59C1.05 14.058 0.9 14.562 0.9 15.102C0.9 15.642 1.026 16.134 1.278 16.578C1.53 17.022 1.878 17.37 2.322 17.622C2.766 17.874 3.252 18 3.78 18H14.22C14.748 18 15.234 17.874 15.678 17.622C16.122 17.37 16.47 17.022 16.722 16.578C16.974 16.134 17.1 15.642 17.1 15.102C17.1 14.562 16.95 14.052 16.65 13.572C16.362 13.092 15.972 12.738 15.48 12.51ZM5.4 5.39999C5.4 4.19999 5.754 3.28199 6.462 2.64599C7.098 2.08199 7.944 1.79999 9 1.79999C10.056 1.79999 10.902 2.08199 11.538 2.64599C12.246 3.28199 12.6 4.19999 12.6 5.39999C12.6 6.25199 12.468 7.06799 12.204 7.84799C11.904 8.69999 11.496 9.38399 10.98 9.89999C10.38 10.5 9.72 10.8 9 10.8C8.28 10.8 7.62 10.5 7.02 9.89999C6.504 9.38399 6.102 8.69999 5.814 7.84799C5.538 7.06799 5.4 6.25199 5.4 5.39999ZM14.22 16.2H3.78C3.468 16.2 3.21 16.098 3.006 15.894C2.802 15.69 2.7 15.432 2.7 15.12C2.7 14.904 2.754 14.712 2.862 14.544C2.982 14.364 3.138 14.226 3.33 14.13L6.84 12.06C7.56 12.42 8.28 12.6 9 12.6C9.756 12.6 10.446 12.42 11.07 12.06L14.58 14.13C14.772 14.226 14.922 14.364 15.03 14.544C15.15 14.712 15.21 14.904 15.21 15.12C15.258 15.432 15.186 15.69 14.994 15.894C14.802 16.098 14.544 16.2 14.22 16.2Z"}))))}}class k_ extends O.a.PureComponent{render(){return O.a.createElement("button",Object.assign({},this.props,{"aria-label":Object(j.lb)("members_popover.button.message","message"),className:"style--none icon icon__message",tabIndex:"-1"}),O.a.createElement(ee.a,{id:"generic_icons.message",defaultMessage:"Message Icon"},e=>O.a.createElement("svg",{width:"18px",height:"16px",viewBox:"0 0 18 16",role:"img","aria-label":e},O.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},O.a.createElement("g",{transform:"translate(-200.000000, -174.000000)",fill:"inherit"},O.a.createElement("g",{transform:"translate(200.000000, 174.000000)"},O.a.createElement("path",{d:"M7.2546625,1.42801356 C10.458475,1.42801356 12.999475,3.24528136 12.999475,5.52023729 C12.9895,8.04188475 10.6062625,9.89326102 7.40245,9.89326102 C7.40245,9.89326102 6.9134125,9.91229831 6.4115125,9.83747119 L5.82535,9.79622373 L5.15335,10.3586169 C4.997425,10.5397356 4.3199125,11.1095322 3.736375,11.4794373 C4.0915375,10.4598847 4.07605,10.1370441 4.07605,10.1370441 L4.1251375,9.49004068 L3.55315,9.19549153 C2.0986375,8.44616271 1.4444875,6.88616271 1.4444875,5.52023729 C1.4444875,3.24528136 4.05085,1.42801356 7.2546625,1.42801356 M7.2546625,0.370386441 C3.465475,0.370386441 0.3944875,2.65829831 0.3944875,5.52023729 C0.3944875,7.3028678 1.2623125,9.20342373 3.0751375,10.1370441 C3.0751375,10.1478847 3.07225,10.1560814 3.07225,10.1679797 C3.07225,10.9426915 2.43175,12.0048136 2.1794875,12.4429356 L2.1805375,12.4429356 C2.1605875,12.4902644 2.148775,12.5420881 2.148775,12.5973492 C2.148775,12.8141627 2.322025,12.9881424 2.5375375,12.9881424 C2.5693,12.9881424 2.6210125,12.9815322 2.6393875,12.9815322 C2.6446375,12.9815322 2.6467375,12.9815322 2.6462125,12.9831186 C3.986275,12.762339 5.9642125,11.2435864 6.2576875,10.8837288 C6.5585125,10.928678 6.761425,10.9358169 7.0136875,10.9358169 C7.120525,10.9358169 7.2347125,10.9342305 7.3696375,10.9342305 C11.1583,10.9342305 14.094625,8.75446102 14.049475,5.52023729 C14.049475,2.65829831 11.0435875,0.370386441 7.2546625,0.370386441"}),O.a.createElement("path",{d:"M17.2055125,9.79172881 C17.2055125,8.35811525 16.6498,7.26532203 15.2624875,6.4451322 C15.228625,6.82614237 15.120475,7.23517966 15.0031375,7.59477288 C15.8998375,8.21903729 16.1555125,8.85995932 16.1555125,9.79172881 C16.1555125,10.9323797 15.62815,11.7597085 14.40175,12.3919051 L13.879375,12.653139 C13.879375,12.653139 13.9337125,14.0082237 14.0140375,14.3511593 C12.9895,13.5946915 12.6374875,12.9630237 12.6374875,12.9630237 L12.08545,13.0486915 C11.86705,13.0809492 11.276425,13.0812136 11.276425,13.0812136 C9.85,13.0812136 8.7929125,12.7388068 7.8909625,12.0278169 C8.135875,12.0124814 6.42805,12.0132746 6.3899875,12.0468542 C7.4326375,13.3297559 9.1373125,14.1388407 11.276425,14.1388407 C11.3927125,14.1388407 11.49115,14.1398983 11.58355,14.1398983 C11.801425,14.1398983 11.9773,14.1338169 12.237175,14.095478 C12.491275,14.4058915 13.914025,15.7728746 15.0724375,15.9629831 C15.0719125,15.9619254 15.073225,15.9619254 15.078475,15.9619254 C15.0939625,15.9619254 15.13885,15.967478 15.16615,15.967478 C15.3522625,15.967478 15.5024125,15.8167661 15.5024125,15.6293017 C15.5024125,15.5817085 15.49165,15.5367593 15.47485,15.4960407 L15.4759,15.4960407 C15.258025,15.117939 14.9159875,14.0129831 14.9159875,13.3435051 C14.9159875,13.3331932 14.9128375,13.3260542 14.9128375,13.3168 C16.4797,12.5095661 17.2055125,11.3321627 17.2055125,9.79172881"})))))))}}function L_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D_ extends O.a.PureComponent{constructor(...e){super(...e),L_(this,"handleClick",()=>{this.props.onItemClick(this.props.user)})}render(){if(!this.props.user)return null;if(!this.props.displayName)return null;let e;this.props.showMessageIcon&&(e=O.a.createElement(k_,{"aria-hidden":"true"}));const t=this.props.user.is_bot?" more-modal__row--bot":"",a=this.props.user.is_bot?null:this.props.status;return O.a.createElement("div",{"data-testid":"popoverListMembersItem",tabIndex:"0","aria-label":this.props.displayName.toLowerCase(),className:"more-modal__row"+t,onClick:this.handleClick},O.a.createElement(Hr.a,{src:En.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:a,size:"md"}),O.a.createElement("div",{className:"more-modal__details d-flex whitespace--nowrap"},O.a.createElement("div",{className:"more-modal__name"},this.props.displayName),O.a.createElement(sn.a,{show:Boolean(this.props.user.is_bot),className:"badge-popoverlist"}),O.a.createElement(rn.a,{show:j.Y(this.props.user),className:"badge-popoverlist"})),O.a.createElement("div",{className:"more-modal__actions"},e))}}L_(D_,"propTypes",{showMessageIcon:C.a.bool.isRequired,onItemClick:C.a.func.isRequired,status:C.a.string.isRequired,user:C.a.object.isRequired,displayName:C.a.string.isRequired}),L_(D_,"defaultProps",{status:N.O.OFFLINE});var x_=Object(n.connect)((function(e,t){return{displayName:Object(j.x)(e,t.user)}}))(D_);function U_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class q_ extends O.a.PureComponent{constructor(e){super(e),U_(this,"handleShowDirectChannel",e=>{const{actions:t}=this.props,a=e.id;a&&t.openDirectChannelToUserId(a).then(({data:e})=>{e&&se.a.push(this.props.teamUrl+"/channels/"+e.name),this.closePopover()})}),U_(this,"closePopover",()=>{this.setState({showPopover:!1})}),U_(this,"showMembersModal",e=>{e.preventDefault(),this.closePopover();const t={modalId:N.u.CHANNEL_MEMBERS,dialogProps:this.props,dialogType:qb};this.props.actions.openModal(t)}),U_(this,"handleGetProfilesInChannel",e=>{this.setState({popoverTarget:e.target,showPopover:!this.state.showPopover}),this.props.actions.loadProfilesAndStatusesInChannel(this.props.channel.id,0,void 0,"status")}),U_(this,"getTargetPopover",()=>(this.membersList.current.focus(),this.state.popoverTarget)),this.membersList=O.a.createRef(),this.state={showPopover:!1,users:e.users,statuses:e.statuses}}static getDerivedStateFromProps(e,t){return e.users!==t.users||e.statuses!==t.statuses?{users:e.users,statuses:e.statuses}:null}render(){const e=this.props.channel.type===N.j.DM_CHANNEL,t=this.props.sortedUsers.map(t=>O.a.createElement(x_,{key:t.id,onItemClick:this.handleShowDirectChannel,showMessageIcon:this.props.currentUserId!==t.id&&!e,status:this.props.statuses[t.id],user:t})),a=0!==this.props.channel.delete_at;let n;if(this.props.channel.type!==N.j.GM_CHANNEL&&!a){let e=O.a.createElement(ee.a,{id:"members_popover.manageMembers",defaultMessage:"Manage Members"});!(this.props.channel.name===N.j.DEFAULT_CHANNEL)&&this.props.manageMembers||(e=O.a.createElement(ee.a,{id:"members_popover.viewMembers",defaultMessage:"View Members"})),n=O.a.createElement("div",{className:"more-modal__button",key:"popover-member-more"},O.a.createElement("button",{className:"btn btn-link","data-testid":"membersModal",onClick:this.showMembersModal},e))}const s=this.props.memberCount;let i="-";s>0&&(i=s.toString());const r=O.a.createElement(ee.a,{id:"members_popover.title",defaultMessage:"Channel Members"}),o=O.a.createElement(di.a,{id:"channelMembersTooltip"},O.a.createElement(ee.a,{id:"channel_header.channelMembers",defaultMessage:"Members"})),l="".concat(j.lb("channel_header.channelMembers","Members")).toLowerCase();return O.a.createElement("div",{id:"channelMember"},O.a.createElement("button",{id:"member_popover","aria-label":l,className:"member-popover__trigger channel-header__icon channel-header__icon--wide "+(this.state.showPopover?"channel-header__icon--active":""),ref:"member_popover_target",onClick:this.handleGetProfilesInChannel},O.a.createElement(mi.a,{delayShow:N.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:this.state.showPopover?O.a.createElement(O.a.Fragment,null):o},O.a.createElement("div",{className:"d-flex align-items-center"},O.a.createElement(R_,{id:"channelMemberIcon",className:"icon icon--standard","aria-hidden":"true"}),O.a.createElement("span",{id:"channelMemberCountText",className:"icon__text"},i)))),O.a.createElement(le.a,{rootClose:!0,onHide:this.closePopover,show:this.state.showPopover,target:this.getTargetPopover,placement:"bottom"},O.a.createElement(Gl.a,{className:"member-list__popover",id:"member-list-popover"},O.a.createElement("div",{className:"more-modal__header"},r,this.props.channel.group_constrained&&O.a.createElement("div",{className:"subhead"},O.a.createElement(ee.a,{id:"channel_header.groupConstrained",defaultMessage:"Members managed by linked groups."}))),O.a.createElement("div",{className:"more-modal__body"},O.a.createElement("div",{tabIndex:"-1",role:"presentation",ref:this.membersList,className:"more-modal__list"},t)),n)))}}U_(q_,"propTypes",{channel:C.a.object.isRequired,statuses:C.a.object.isRequired,users:C.a.array.isRequired,memberCount:C.a.number,currentUserId:C.a.string.isRequired,teamUrl:C.a.string,manageMembers:C.a.bool.isRequired,actions:C.a.shape({openModal:C.a.func.isRequired,loadProfilesAndStatusesInChannel:C.a.func.isRequired,openDirectChannelToUserId:C.a.func.isRequired}).isRequired,sortedUsers:C.a.array});var H_=Object(n.connect)((function(){const e=Object(u.makeGetProfilesInChannel)(),t=(e=>Object(ba.createSelector)((t,a)=>e(t,a,!0),u.getUserStatuses,d.getTeammateNameDisplaySetting,(e,t,a)=>Object(j.tb)(e,t,a)))(e);return function(a,n){const s=Object(p.getAllChannelStats)(a)[n.channel.id]||{},i=e(a,n.channel.id,!0),r=Object(u.getUserStatuses)(a);return{currentUserId:Object(u.getCurrentUserId)(a),memberCount:s.member_count,users:i,statuses:r,teamUrl:Object(h.getCurrentRelativeTeamUrl)(a),manageMembers:va(a,n.channel),sortedUsers:t(a,n.channel.id)}}}),(function(e){return{actions:Object(s.bindActionCreators)({openModal:q.b,loadProfilesAndStatusesInChannel:ls.h,openDirectChannelToUserId:pa.e},e)}}))(q_);class F_ extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.pin",defaultMessage:"Pin Icon"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18",version:"1.1",role:"img","aria-label":e},O.a.createElement("path",{d:"M17.73 7.01999L16.83 6.11999L10.98 0.251987C10.812 0.0839874 10.602 -1.26362e-05 10.35 -1.26362e-05C10.098 -1.26362e-05 9.888 0.0899873 9.72 0.269987C9.54 0.449987 9.45 0.665987 9.45 0.917987C9.45 1.15799 9.54 1.36799 9.72 1.54799L9.99 1.79999L5.994 5.75999C4.422 5.57999 2.922 5.77799 1.494 6.35399C1.35 6.40199 1.224 6.48599 1.116 6.60599C1.02 6.72599 0.954 6.86399 0.918 7.01999C0.894 7.16399 0.9 7.30799 0.936 7.45199C0.984 7.59599 1.062 7.72199 1.17 7.82999L5.004 11.664L1.35 15.3L0.45 17.55L2.7 16.65L6.354 13.014L10.17 16.83C10.278 16.938 10.404 17.01 10.548 17.046C10.704 17.094 10.854 17.1 10.998 17.064C11.154 17.04 11.286 16.974 11.394 16.866C11.514 16.77 11.598 16.644 11.646 16.488C12.246 15.024 12.444 13.524 12.24 11.988L16.2 8.02799L16.452 8.29799C16.632 8.47799 16.848 8.56799 17.1 8.56799C17.352 8.56799 17.562 8.47799 17.73 8.29799C17.91 8.11799 18 7.90799 18 7.66799C18 7.41599 17.91 7.19999 17.73 7.01999ZM10.584 11.052C10.464 11.172 10.386 11.316 10.35 11.484C10.314 11.64 10.32 11.796 10.368 11.952C10.584 12.792 10.584 13.638 10.368 14.49L3.51 7.63199C4.362 7.41599 5.208 7.41599 6.048 7.63199C6.204 7.67999 6.36 7.68599 6.516 7.64999C6.684 7.60199 6.828 7.51799 6.948 7.39799L11.25 3.07799L14.904 6.73199L10.584 11.052Z"}))))}}var B_=a(1248),G_=a(1991);class V_ extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.plugins",defaultMessage:"Plugins"},e=>O.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 18 18",version:"1.1",role:"img","aria-label":e},O.a.createElement("path",{d:"M14.58 9.14399L17.136 6.60599C17.304 6.42599 17.388 6.20999 17.388 5.95799C17.388 5.70599 17.298 5.49599 17.118 5.32799C16.95 5.14799 16.74 5.05799 16.488 5.05799C16.236 5.05799 16.026 5.14799 15.858 5.32799L13.302 7.86599L10.134 4.69799L12.672 2.14199C12.852 1.97399 12.942 1.76399 12.942 1.51199C12.942 1.25999 12.852 1.04999 12.672 0.881987C12.504 0.701987 12.294 0.611987 12.042 0.611987C11.79 0.611987 11.574 0.695987 11.394 0.863987L8.856 3.41999L6.318 0.863987C6.138 0.695987 5.922 0.611987 5.67 0.611987C5.418 0.611987 5.208 0.695987 5.04 0.863987V0.881987C4.86 1.04999 4.77 1.25999 4.77 1.51199C4.77 1.76399 4.86 1.97399 5.04 2.14199L5.67 2.78999L2.808 5.65199C2.016 6.44399 1.458 7.36799 1.134 8.42399C0.81 9.45599 0.744 10.512 0.936 11.592C1.128 12.66 1.56 13.632 2.232 14.508L0.27 16.47C0.09 16.638 0 16.848 0 17.1C0 17.352 0.09 17.562 0.27 17.73C0.45 17.898 0.66 17.982 0.9 17.982C1.152 17.994 1.362 17.91 1.53 17.73L3.492 15.768C4.368 16.44 5.34 16.872 6.408 17.064C7.488 17.256 8.544 17.19 9.576 16.866C10.632 16.542 11.556 15.984 12.348 15.192L15.21 12.33L15.858 12.96C16.026 13.14 16.236 13.23 16.488 13.23C16.74 13.23 16.95 13.14 17.118 12.96H17.136C17.304 12.792 17.388 12.582 17.388 12.33C17.388 12.078 17.304 11.862 17.136 11.682L14.58 9.14399ZM11.088 13.914C10.452 14.55 9.702 14.976 8.838 15.192C8.01 15.408 7.176 15.408 6.336 15.192C5.472 14.976 4.722 14.55 4.086 13.914C3.45 13.278 3.024 12.528 2.808 11.664C2.592 10.824 2.592 9.98999 2.808 9.16199C3.024 8.29799 3.45 7.54799 4.086 6.91199L6.948 4.04999L13.95 11.052L11.088 13.914Z"}))))}}function W_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z_ extends O.a.PureComponent{constructor(...e){super(...e),W_(this,"handleRootClose",()=>{this.props.onClose()})}render(){const{open:e,rootCloseEvent:t,children:a}=this.props;return O.a.createElement(G_.a,{disabled:!e,onRootClose:this.handleRootClose,event:t},O.a.createElement("ul",{role:"menu",className:"dropdown-menu channel-header_plugin-dropdown"},a))}}W_(z_,"propTypes",{open:C.a.bool,children:C.a.node,onClose:C.a.func.isRequired,rootCloseEvent:C.a.oneOf(["click","mousedown"])});class K_ extends O.a.PureComponent{constructor(...e){super(...e),W_(this,"handleClick",e=>{this.props.onClick(e)})}render(){const{children:e}=this.props;let t="";return this.props.dropdownOpen&&(t=" channel-header__icon--active"),O.a.createElement("button",{id:"pluginChannelHeaderButtonDropdown",className:"channel-header__icon channel-header__icon--wide "+t,type:"button",onClick:this.handleClick},e)}}W_(K_,"propTypes",{children:C.a.element,dropdownOpen:C.a.bool,onClick:C.a.func});class Y_ extends O.a.PureComponent{constructor(e){super(e),W_(this,"toggleDropdown",e=>{this.setState({dropdownOpen:e})}),W_(this,"onClose",()=>{this.toggleDropdown(!1)}),W_(this,"fireActionAndClose",e=>{e(this.props.channel,this.props.channelMember),this.onClose()}),W_(this,"createButton",e=>O.a.createElement(ac,{key:"channelHeaderButton"+e.id,buttonClass:"channel-header__icon style--none",iconComponent:e.icon,onClick:()=>e.action(this.props.channel,this.props.channelMember),buttonId:e.id,tooltipKey:"plugin",tooltipText:e.tooltipText?e.tooltipText:e.dropdownText})),W_(this,"createDropdown",e=>{const t=e.map(e=>O.a.createElement("li",{key:"channelHeaderPlug"+e.id},O.a.createElement("a",{href:"#",className:"d-flex align-items-center",onClick:()=>this.fireActionAndClose(e.action)},O.a.createElement("span",{className:"d-flex align-items-center overflow--ellipsis"},e.icon),O.a.createElement("span",null,e.dropdownText))));return O.a.createElement("div",{className:"flex-child"},O.a.createElement(B_.a,{id:"channelHeaderPlugDropdown",onToggle:this.toggleDropdown,onSelect:this.onSelect,open:this.state.dropdownOpen},O.a.createElement(K_,{dropdownOpen:this.state.dropdownOpen,bsRole:"toggle"},O.a.createElement(mi.a,{delayShow:N.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:this.state.dropdownOpen?O.a.createElement(O.a.Fragment,null):O.a.createElement(di.a,{id:"removeIcon"},O.a.createElement("div",{"aria-hidden":!0},O.a.createElement(ee.a,{id:"generic_icons.plugins",defaultMessage:"Plugins"})))},O.a.createElement(O.a.Fragment,null,O.a.createElement(V_,{id:"pluginChannelHeaderIcon",className:"icon icon--standard icon__pluginChannelHeader","aria-hidden":"true"}),O.a.createElement("span",{id:"pluginCount",className:"icon__text"},e.length)))),O.a.createElement(z_,{bsRole:"menu",open:this.state.dropdownOpen,onClose:this.onClose},t)))}),this.state={dropdownOpen:!1}}render(){const e=this.props.components||[];return 0===e.length?null:e.length<=5?e.map(this.createButton):this.createDropdown(e)}}W_(Y_,"propTypes",{components:C.a.array,channel:C.a.object.isRequired,channelMember:C.a.object.isRequired,theme:C.a.object.isRequired});var Q_=Object(n.connect)((function(e){return{components:e.plugins.components.ChannelHeaderButton,theme:Object(d.getTheme)(e)}}))(Y_);function Z_(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J_(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z_(Object(a),!0).forEach((function(t){X_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function X_(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $_={singleline:!0,mentionHighlight:!1,atMentions:!0},eE={singleline:!1,mentionHighlight:!1,atMentions:!0};class tE extends O.a.PureComponent{constructor(e){super(e),X_(this,"handleResize",()=>{this.setState({showSearchBar:tE.getShowSearchBar(this.props)})}),X_(this,"handleClose",()=>{this.props.actions.goToLastViewedChannel()}),X_(this,"toggleFavorite",e=>{e.stopPropagation(),this.props.isFavorite?this.props.actions.unfavoriteChannel(this.props.channel.id):this.props.actions.favoriteChannel(this.props.channel.id)}),X_(this,"unmute",()=>{const{actions:e,channel:t,channelMember:a,currentUser:n}=this.props;if(!a||!n||!t)return;const s={mark_unread:N.v.ALL};e.updateChannelNotifyProps(n.id,t.id,s)}),X_(this,"mute",()=>{const{actions:e,channel:t,channelMember:a,currentUser:n}=this.props;if(!a||!n||!t)return;const s={mark_unread:N.v.MENTION};e.updateChannelNotifyProps(n.id,t.id,s)}),X_(this,"searchMentions",e=>{e.preventDefault(),this.props.rhsState===N.C.MENTION?this.props.actions.closeRightHandSide():this.props.actions.showMentions()}),X_(this,"showPinnedPosts",e=>{e.preventDefault(),this.props.rhsState===N.C.PIN?this.props.actions.closeRightHandSide():this.props.actions.showPinnedPosts()}),X_(this,"getFlagged",e=>{e.preventDefault(),this.props.rhsState===N.C.FLAG?this.props.actions.closeRightHandSide():this.props.actions.showFlaggedPosts()}),X_(this,"searchButtonClick",e=>{e.preventDefault(),this.props.actions.openRHSSearch()}),X_(this,"handleShortcut",e=>{j.e(e)&&e.shiftKey&&(j.Z(e,N.j.KeyCodes.M)&&(e.preventDefault(),this.props.actions.closeModal(N.u.QUICK_SWITCH),this.searchMentions(e)),j.Z(e,N.j.KeyCodes.L)&&this.props.actions.closeModal(N.u.QUICK_SWITCH))}),X_(this,"handleQuickSwitchKeyPress",e=>{j.e(e)&&!e.shiftKey&&j.Z(e,N.j.KeyCodes.K)&&(e.altKey||(e.preventDefault(),this.toggleQuickSwitchModal()))}),X_(this,"toggleQuickSwitchModal",()=>{const{isQuickSwitcherOpen:e}=this.props;e?this.props.actions.closeModal(N.u.QUICK_SWITCH):this.props.actions.openModal({modalId:N.u.QUICK_SWITCH,dialogType:Yh})}),X_(this,"removeTooltipLink",()=>{this.toggleFavoriteRef.current.removeAttribute("aria-describedby")}),X_(this,"showEditChannelHeaderModal",()=>{this.refs.headerOverlay&&this.refs.headerOverlay.hide();const{actions:e,channel:t}=this.props,a={modalId:N.u.EDIT_CHANNEL_HEADER,dialogType:Zb,dialogProps:{channel:t}};e.openModal(a)}),X_(this,"showChannelHeaderPopover",e=>{const t=this.headerDescriptionRef.current.getBoundingClientRect();(this.headerPopoverTextMeasurerRef.current.getBoundingClientRect().width>t.width||e.match(/\n{2,}/g))&&this.setState({showChannelHeaderPopover:!0,leftOffset:this.headerDescriptionRef.current.offsetLeft}),this.setState({topOffset:32*this.props.announcementBarCount})}),X_(this,"setPopoverOverlayWidth",()=>{const e=this.headerDescriptionRef.current.getBoundingClientRect();this.setState({popoverOverlayWidth:e.width+10})}),X_(this,"handleFormattedTextClick",e=>j.L(e,this.props.currentRelativeTeamUrl)),this.toggleFavoriteRef=O.a.createRef(),this.headerDescriptionRef=O.a.createRef(),this.headerPopoverTextMeasurerRef=O.a.createRef(),this.state={showSearchBar:tE.getShowSearchBar(e),popoverOverlayWidth:0,showChannelHeaderPopover:!1,leftOffset:0,topOffset:0},this.getHeaderMarkdownOptions=Object(pd.memoizeResult)(e=>J_({},$_,{channelNamesMap:e})),this.getPopoverMarkdownOptions=Object(pd.memoizeResult)(e=>J_({},eE,{channelNamesMap:e}))}componentDidMount(){this.props.actions.getCustomEmojisInText(this.props.channel?this.props.channel.header:""),document.addEventListener("keydown",this.handleShortcut),document.addEventListener("keydown",this.handleQuickSwitchKeyPress),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut),document.removeEventListener("keydown",this.handleQuickSwitchKeyPress),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){const t=this.props.channel?this.props.channel.header:"";t!==(e.channel?e.channel.header:"")&&this.props.actions.getCustomEmojisInText(t)}static getDerivedStateFromProps(e){return{showSearchBar:tE.getShowSearchBar(e)}}static getShowSearchBar(e){return j.wb()>1140||e.rhsOpen}render(){const{teamId:e,currentUser:t,gmMembers:a,channel:n,channelMember:s,isMuted:i,isReadOnly:r,isFavorite:o,dmUser:l,rhsState:c,hasGuests:d,teammateNameDisplaySetting:m,newSideBarPreference:u}=this.props,{formatMessage:h}=this.props.intl,p=j.lb("accessibility.sections.channelHeader","channel header region");let g="";d&&(g=O.a.createElement("span",{className:"has-guest-header"},O.a.createElement(ee.a,{id:"channel_header.channelHasGuests",defaultMessage:"This channel has guests"})));const b=0!==n.delete_at;if(j.U(n)||j.U(s)||j.U(t)||!l&&n.type===N.j.DM_CHANNEL)return O.a.createElement("div",{className:"channel-header"});const f=n.props&&n.props.channel_mentions;let _=n.display_name,E=null;b&&(E=O.a.createElement(vc,{className:"icon icon__archive icon channel-header-archived-icon svg-text-color"}));const v=n.type===N.j.DM_CHANNEL,y=n.type===N.j.GM_CHANNEL,C=n.type===N.j.PRIVATE_CHANNEL;if(v){const e=l.id;_=t.id===e?O.a.createElement(ee.a,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you) ",values:{displayname:Object(an.displayUsername)(l,m)}}):Object(an.displayUsername)(l,m)+" ",_=O.a.createElement(O.a.Fragment,null,_,O.a.createElement(rn.a,{show:j.Y(l)}))}if(y){const e={};for(const n of a){if(n.id===t.id)continue;const a=Object(an.displayUsername)(n,this.props.teammateNameDisplaySetting);e[a]||(e[a]=[]),e[a].push(n)}_=n.display_name.split(", ").map((t,a)=>{if(!e[t])return t;const n=e[t].shift();return O.a.createElement(O.a.Fragment,{key:n.id},a>0&&", ",t,O.a.createElement(rn.a,{show:j.Y(n)}))}),d&&(g=O.a.createElement("span",{className:"has-guest-header"},O.a.createElement(ee.a,{id:"channel_header.groupMessageHasGuests",defaultMessage:"This group message has guests"})))}let w,T,S,P;v||(w=O.a.createElement(H_,{channel:n})),!v||l.delete_at||l.is_bot||(T=O.a.createElement(lp.a,{status:n.status}),S=O.a.createElement("span",{className:"header-status__text"},O.a.createElement(ee.a,{id:"status_dropdown.set_".concat(n.status),defaultMessage:j.ub(n.status)})));const M=v&&l.is_bot?l.bot_description:n.header;if(M){const e=O.a.createElement(Gl.a,{id:"header-popover",popoverStyle:"info",popoverSize:"lg",style:{maxWidth:"".concat(this.state.popoverOverlayWidth,"px"),transform:"translate(".concat(this.state.leftOffset,"px, ").concat(this.state.topOffset,"px)")},placement:"bottom",className:ws()(["channel-header__popover",{"chanel-header__popover--lhs_offset":this.props.hasMoreThanOneTeam,"chanel-header__popover--new_sidebar":u}])},O.a.createElement("span",{onClick:this.handleFormattedTextClick},O.a.createElement(wa.a,{message:M,options:this.getPopoverMarkdownOptions(f)})));P=O.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description"},T,S,g,O.a.createElement("div",{className:"header-popover-text-measurer",ref:this.headerPopoverTextMeasurerRef},O.a.createElement(wa.a,{message:M.replace(/\n+/g," "),options:this.getHeaderMarkdownOptions(f)})),O.a.createElement("span",{className:"header-description__text",onClick:this.handleFormattedTextClick,onMouseOver:()=>this.showChannelHeaderPopover(M),onMouseOut:()=>this.setState({showChannelHeaderPopover:!1}),ref:this.headerDescriptionRef},O.a.createElement(le.a,{show:this.state.showChannelHeaderPopover,placement:"bottom",rootClose:!0,target:this.headerDescriptionRef.current,ref:"headerOverlay",onEnter:this.setPopoverOverlayWidth,onHide:()=>this.setState({showChannelHeaderPopover:!1})},e),O.a.createElement(wa.a,{message:M,options:this.getHeaderMarkdownOptions(f)})))}else{let t;r||b||(v||y?v&&l.is_bot||(t=O.a.createElement("button",{className:"header-placeholder style--none",onClick:this.showEditChannelHeaderModal},O.a.createElement(ee.a,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"}),O.a.createElement(ee.a,{id:"channel_header.editLink",defaultMessage:"(Edit)"},e=>O.a.createElement("span",{className:"button__edit ml-1"},e)))):t=O.a.createElement(yr,{channelId:n.id,teamId:e,permissions:[C?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},O.a.createElement("button",{className:"header-placeholder style--none",onClick:this.showEditChannelHeaderModal},O.a.createElement(ee.a,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"}),O.a.createElement(ee.a,{id:"channel_header.editLink",defaultMessage:"(Edit)"},e=>O.a.createElement("span",{className:"button__edit ml-1"},e))))),P=O.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description light"},T,S,g,t)}let I,A=null,R="";if(!b){const e=o?{id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"}:{id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"};R=h(e).toLowerCase(),I=O.a.createElement(di.a,{id:"favoriteTooltip"},O.a.createElement(ee.a,e)),A=O.a.createElement(mi.a,{key:"isFavorite-".concat(o),delayShow:N.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:I,onEntering:this.removeTooltipLink},O.a.createElement("button",{id:"toggleFavorite",ref:this.toggleFavoriteRef,onClick:this.toggleFavorite,className:"style--none color--link channel-header__favorites "+(this.props.isFavorite?"active":"inactive"),"aria-label":R},O.a.createElement("i",{className:"icon fa "+(this.props.isFavorite?"fa-star":"fa-star-o")})))}const k=O.a.createElement(di.a,{id:"channelMutedTooltip"},O.a.createElement(ee.a,{id:"channelHeader.unmute",defaultMessage:"Unmute"}));let L;i&&(L=O.a.createElement(mi.a,{delayShow:N.j.OVERLAY_TIME_DELAY,placement:"bottom",overlay:k},O.a.createElement("button",{id:"toggleMute",onClick:this.unmute,className:"style--none color--link channel-header__mute inactive","aria-label":h({id:"generic_icons.muted",defaultMessage:"Muted Icon"})},O.a.createElement("i",{className:"icon fa fa-bell-slash-o"}))));let D="channel-header__icon channel-header__icon--wide";c===N.C.PIN&&(D+=" channel-header__icon--active");let U="channel-header__icon";c===N.C.MENTION&&(U+=" channel-header__icon--active");let q="channel-header__icon";c===N.C.FLAG&&(q+=" channel-header__icon--active");const H=this.props.pinnedPostsCount?O.a.createElement(O.a.Fragment,null,O.a.createElement(F_,{className:"icon icon--standard","aria-hidden":"true"}),O.a.createElement("span",{id:"channelPinnedPostCountText",className:"icon__text"},this.props.pinnedPostsCount)):O.a.createElement(F_,{className:"icon icon--standard","aria-hidden":"true"});let F=O.a.createElement(O.a.Fragment,null,A,O.a.createElement(ji.a,null,O.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},O.a.createElement("button",{className:"channel-header__trigger style--none","aria-label":h({id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"}).toLowerCase()},O.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},O.a.createElement("span",null,E,_)),O.a.createElement("span",{id:"channelHeaderDropdownIcon",className:"fa fa-angle-down header-dropdown__icon","aria-label":h({id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"}).toLowerCase()}))),O.a.createElement(Zf,null)));return v&&l.is_bot&&(F=O.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},A,O.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},O.a.createElement("span",null,E,_)),O.a.createElement(sn.a,{className:"badge-popoverlist"}))),O.a.createElement("div",{id:"channel-header","aria-label":p,role:"banner",tabIndex:"-1","data-channelid":"".concat(n.id),className:"channel-header alt a11y__region","data-a11y-sort-order":"8"},O.a.createElement("div",{className:"flex-parent"},O.a.createElement("div",{className:"flex-child"},O.a.createElement("div",{id:"channelHeaderInfo",className:"channel-header__info"},O.a.createElement("div",{className:"channel-header__title dropdown"},O.a.createElement("div",null,F),L),P)),O.a.createElement("div",{className:"flex-child"},w),O.a.createElement(Q_,{channel:n,channelMember:s}),O.a.createElement(ac,{iconComponent:H,ariaLabel:!0,buttonClass:D,buttonId:"channelHeaderPinButton",onClick:this.showPinnedPosts,tooltipKey:"pinnedPosts"}),this.state.showSearchBar?O.a.createElement("div",{id:"searchbarContainer",className:"flex-child search-bar__container"},O.a.createElement(uc,{showMentionFlagBtns:!1,isFocus:j.cb()||this.props.rhsOpen&&Boolean(this.props.rhsState)})):O.a.createElement(ac,{iconComponent:O.a.createElement(rc.a,{className:"icon icon--standard","aria-hidden":"true"}),ariaLabel:!0,buttonId:"channelHeaderSearchButton",onClick:this.searchButtonClick,tooltipKey:"search"}),O.a.createElement(ac,{iconComponent:O.a.createElement(ic.a,{className:"icon icon--standard","aria-hidden":"true"}),ariaLabel:!0,buttonClass:U,buttonId:"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions"}),O.a.createElement(ac,{iconComponent:O.a.createElement(Qr,{className:"icon icon__flag"}),ariaLabel:!0,buttonClass:q,buttonId:"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts"})))}}X_(tE,"propTypes",{teamId:C.a.string.isRequired,currentUser:C.a.object.isRequired,channel:C.a.object,channelMember:C.a.object,dmUser:C.a.object,gmMembers:C.a.array,isFavorite:C.a.bool,isReadOnly:C.a.bool,isMuted:C.a.bool,hasGuests:C.a.bool,rhsState:C.a.oneOf(Object.values(N.C)),rhsOpen:C.a.bool,isQuickSwitcherOpen:C.a.bool,intl:ne.a.isRequired,pinnedPostsCount:C.a.number,hasMoreThanOneTeam:C.a.bool,actions:C.a.shape({favoriteChannel:C.a.func.isRequired,unfavoriteChannel:C.a.func.isRequired,showFlaggedPosts:C.a.func.isRequired,showPinnedPosts:C.a.func.isRequired,showMentions:C.a.func.isRequired,openRHSSearch:C.a.func.isRequired,closeRightHandSide:C.a.func.isRequired,getCustomEmojisInText:C.a.func.isRequired,updateChannelNotifyProps:C.a.func.isRequired,goToLastViewedChannel:C.a.func.isRequired,openModal:C.a.func.isRequired,closeModal:C.a.func.isRequired}).isRequired,teammateNameDisplaySetting:C.a.string.isRequired,currentRelativeTeamUrl:C.a.string.isRequired,newSideBarPreference:C.a.bool,announcementBarCount:C.a.number});var aE=Object(te.c)(tE);var nE=Object(i.g)(Object(n.connect)((function(){const e=Object(u.makeGetProfilesInChannel)();return function(t){const a=Object(p.getCurrentChannel)(t)||{},n=Object(u.getCurrentUser)(t),s=Object(h.getMyTeams)(t).length>1;let i,r;if(a&&a.type===x.General.DM_CHANNEL){const e=Object(gn.getUserIdFromChannelName)(n.id,a.name);i=Object(u.getUser)(t,e)}else a&&a.type===x.General.GM_CHANNEL&&(r=e(t,a.id,!1));const o=Object(p.getCurrentChannelStats)(t)||{member_count:0,guest_count:0,pinnedpost_count:0};return{teamId:Object(h.getCurrentTeamId)(t),channel:a,channelMember:Object(p.getMyCurrentChannelMembership)(t),currentUser:n,dmUser:i,gmMembers:r,rhsState:Object(ys.k)(t),rhsOpen:Object(ys.c)(t),isFavorite:Object(p.isCurrentChannelFavorite)(t),isReadOnly:Object(p.isCurrentChannelReadOnly)(t),isMuted:Object(p.isCurrentChannelMuted)(t),isQuickSwitcherOpen:Object(ed.a)(t,N.u.QUICK_SWITCH),hasGuests:o.guest_count>0,pinnedPostsCount:o.pinnedpost_count,hasMoreThanOneTeam:s,teammateNameDisplaySetting:Object(d.getTeammateNameDisplaySetting)(t),currentRelativeTeamUrl:Object(h.getCurrentRelativeTeamUrl)(t),newSideBarPreference:Object(d.getNewSidebarPreference)(t),announcementBarCount:Object(A_.a)(t)}}}),e=>({actions:Object(s.bindActionCreators)({favoriteChannel:o.favoriteChannel,unfavoriteChannel:o.unfavoriteChannel,showFlaggedPosts:vs.m,showPinnedPosts:vs.o,showMentions:vs.n,openRHSSearch:vs.f,closeRightHandSide:vs.b,getCustomEmojisInText:Pt.getCustomEmojisInText,updateChannelNotifyProps:o.updateChannelNotifyProps,goToLastViewedChannel:E.c,openModal:q.b,closeModal:q.a},e)}))(aE)),sE=(a(1792),a(1148));function iE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function rE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?iE(Object(a),!0).forEach((function(t){oE(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iE(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function oE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lE=N.Q.KeyCodes;function cE(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s*$/,"")}class dE extends O.a.PureComponent{static getDerivedStateFromProps(e,t){let a={currentChannel:e.currentChannel};return e.currentChannel.id!==t.currentChannel.id&&(a=rE({},a,{message:e.draft.message,submitting:!1,serverError:null})),a}constructor(e){super(e),oE(this,"setShowPreview",e=>{this.props.actions.setShowPreview(e)}),oE(this,"setOrientationListeners",()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",this.onOrientationChange)}),oE(this,"removeOrientationListeners",()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",this.onOrientationChange)}),oE(this,"onOrientationChange",()=>{if(!I.l())return;let e="portrait";window.orientation&&(e=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(e=window.screen.orientation.type.split("-")[0]),this.lastOrientation&&e!==this.lastOrientation&&"post_textbox"===(document.activeElement||{}).id&&this.refs.textbox.getWrappedInstance().blur(),this.lastOrientation=e}),oE(this,"handlePostError",e=>{this.setState({postError:e})}),oE(this,"toggleEmojiPicker",()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})}),oE(this,"hideEmojiPicker",()=>{this.handleEmojiClose()}),oE(this,"doSubmit",async e=>{const t=this.props.currentChannel.id;if(e&&e.preventDefault(),this.props.draft.uploadsInProgress.length>0||this.state.submitting)return;let a=this.state.message,n=!1;const s=this.state.serverError;s&&Object(ae.m)(s)&&s.submittedMessage===a&&(a=s.submittedMessage,n=!0);const i={file_ids:[]};if(i.message=a,0===i.message.trim().length&&0===this.props.draft.fileInfos.length)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout(()=>{this.setState({errorClass:null})},N.Q.ANIMATION_TIMEOUT);this.props.actions.addMessageIntoHistory(this.state.message),this.setState({submitting:!0,serverError:null});const r=j.a.exec(i.message);if(0!==i.message.indexOf("/")||n)if(r&&this.props.emojiMap.has(r[2]))this.sendReaction(r),this.setState({message:""});else{const{error:e}=await this.sendMessage(i);e||this.setState({message:""})}else{this.setState({message:"",postError:null});let e={};e.channel_id=t,e.team_id=this.props.currentTeamId;const a=await this.props.actions.runSlashCommandWillBePostedHooks(i.message,e);if(a.error)this.setState({serverError:rE({},a.error,{submittedMessage:i.message}),message:i.message});else if(a.data.message||a.data.args){i.message=a.data.message,e=a.data.args;const{error:t}=await this.props.actions.executeCommand(i.message,e);t&&(t.sendMessage?await this.sendMessage(i):this.setState({serverError:rE({},t,{submittedMessage:i.message}),message:i.message}))}else;}this.setState({submitting:!1,postError:null}),cancelAnimationFrame(this.saveDraftFrame),this.props.actions.setDraft(N.I.DRAFT+t,null),this.draftsForChannel[t]=null;const o=Date.now()-this.lastBlurAt<150;this.focusTextbox(o)}),oE(this,"handleNotifyAllConfirmation",e=>{this.hideNotifyAllModal(),this.doSubmit(e)}),oE(this,"hideNotifyAllModal",()=>{this.setState({showConfirmModal:!1})}),oE(this,"showNotifyAllModal",()=>{this.setState({showConfirmModal:!0})}),oE(this,"getStatusFromSlashCommand",()=>{const{message:e}=this.state,t=e.split(" ");return t.length>0?t[0].substring(1):""}),oE(this,"isStatusSlashCommand",e=>"online"===e||"away"===e||"dnd"===e||"offline"===e),oE(this,"handleSubmit",async e=>{const{currentChannel:t,userIsOutOfOffice:a,groupsWithAllowReference:n,channelMemberCountsByGroup:s,currentChannelMembersCount:i,useGroupMentions:r}=this.props,o=this.props.enableConfirmNotificationsToChannel&&this.props.useChannelMentions;let l=0,c=0,d=[];const m=!Object(ae.c)(this.state.message);if(this.props.enableConfirmNotificationsToChannel&&m&&r&&(d=Object(ae.k)(this.state.message,n),d.length>0&&(d=d.map(e=>{const t=s[e.id];return t&&t.channel_member_count>N.Q.NOTIFY_ALL_MEMBERS&&t.channel_member_count>l&&(l=t.channel_member_count,c=t.channel_member_timezones_count),"@".concat(e.name)}),d=[...new Set(d)])),o&&i>N.Q.NOTIFY_ALL_MEMBERS&&!m&&(l=i-1,d=["@all","@channel"],this.props.isTimezoneEnabled)){const{data:e}=await this.props.actions.getChannelTimezones(this.props.currentChannel.id);c=e?e.length:0}if(l>0)return this.setState({channelTimezoneCount:c,memberNotifyCount:l,mentions:d}),void this.showNotifyAllModal();const u=this.getStatusFromSlashCommand();if(a&&this.isStatusSlashCommand(u)){const e={ModalId:N.u.RESET_STATUS,dialogType:hs,dialogProps:{newStatus:u}};return this.props.actions.openModal(e),void this.setState({message:""})}if("/header"===cE(this.state.message)){const e={modalId:N.u.EDIT_CHANNEL_HEADER,dialogType:Zb,dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}const h=t.type===N.Q.DM_CHANNEL||t.type===N.Q.GM_CHANNEL;if(!h&&"/purpose"===cE(this.state.message)){const e={modalId:N.u.EDIT_CHANNEL_PURPOSE,dialogType:ef,dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}if(!h&&"/rename"===cE(this.state.message))return M.i(t),void this.setState({message:""});await this.doSubmit(e)}),oE(this,"sendMessage",async e=>{const{actions:t,currentChannel:a,currentUserId:n,draft:s,useGroupMentions:i,useChannelMentions:r,groupsWithAllowReference:o}=this.props;let l=e;l.channel_id=a.id;const c=j.I(),d=n;l.pending_post_id="".concat(d,":").concat(c),l.user_id=d,l.create_at=c,l.parent_id=this.state.parentId,l.metadata={},l.props={},!r&&Object(ae.c)(l.message,{checkAllMentions:!0})&&(l.props.mentionHighlightDisabled=!0),!i&&Object(ae.k)(l.message,o)&&(l.props.disable_group_highlight=!0);const m=await t.runMessageWillBePostedHooks(l);return m.error?(this.setState({serverError:m.error,submitting:!1}),m):(l=m.data,t.onSubmitPost(l,s.fileInfos),t.scrollPostListToBottom(),this.setState({submitting:!1}),{data:!0})}),oE(this,"focusTextbox",(e=!1)=>{const t=this.props.readOnlyChannel||!this.props.canPost;this.refs.textbox&&t?this.refs.textbox.getWrappedInstance().blur():!this.refs.textbox||!e&&I.n()||this.refs.textbox.getWrappedInstance().focus()}),oE(this,"postMsgKeyPress",e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:a}=this.props,{allowSending:n,withClosedCodeBlock:s,ignoreKeyPress:i,message:r}=Object(ae.s)(e,this.state.message,t,a,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(i)return e.preventDefault(),void e.stopPropagation();n&&(e.persist(),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),s&&r?this.setState({message:r},()=>this.handleSubmit(e)):this.handleSubmit(e),this.setShowPreview(!1)),this.emitTypingEvent()}),oE(this,"emitTypingEvent",()=>{const e=this.props.currentChannel.id;M.d(e,"")}),oE(this,"handleChange",e=>{const t=e.target.value,a=this.props.currentChannel.id;let n=this.state.serverError;Object(ae.m)(n)&&(n=null),this.setState({message:t,serverError:n});const s=rE({},this.props.draft,{message:t});cancelAnimationFrame(this.saveDraftFrame),this.saveDraftFrame=requestAnimationFrame(()=>{this.props.actions.setDraft(N.I.DRAFT+a,s)}),this.draftsForChannel[a]=s}),oE(this,"pasteHandler",e=>{if(!e.clipboardData||!e.clipboardData.items||"post_textbox"!==e.target.id)return;const{clipboardData:t}=e,a=ii(t);if(!a)return;e.preventDefault();let n=this.state.message;if(ri(a.className)){const{formattedMessage:e,formattedCodeBlock:a}=ci(this.state.caretPosition,n,t),s=this.state.caretPosition+a.length;this.setMessageAndCaretPostion(e,s,t)}else n=li(a,n.trim()),this.setState({message:n})}),oE(this,"handleFileUploadChange",()=>{this.focusTextbox()}),oE(this,"handleUploadStart",(e,t)=>{const a=[...this.props.draft.uploadsInProgress,...e],n=rE({},this.props.draft,{uploadsInProgress:a});this.props.actions.setDraft(N.I.DRAFT+t,n),this.draftsForChannel[t]=n,this.focusTextbox()}),oE(this,"handleUploadProgress",({clientId:e,name:t,percent:a,type:n})=>{const s=rE({},this.state.uploadsProgressPercent,{[e]:{percent:a,name:t,type:n}});this.setState({uploadsProgressPercent:s})}),oE(this,"handleFileUploadComplete",(e,t,a)=>{const n=rE({},this.draftsForChannel[a]);for(let e=0;e<t.length;e++)if(n.uploadsInProgress){const a=n.uploadsInProgress.indexOf(t[e]);-1!==a&&(n.uploadsInProgress=n.uploadsInProgress.filter((e,t)=>a!==t))}n.fileInfos&&(n.fileInfos=Object(si.sortFileInfos)(n.fileInfos.concat(e),this.props.locale)),this.draftsForChannel[a]=n,this.props.actions.setDraft(N.I.DRAFT+a,n)}),oE(this,"handleUploadError",(e,t,a)=>{const n=rE({},this.draftsForChannel[a]);let s=e;if("string"==typeof e&&(s=new Error(e)),-1!==t&&n.uploadsInProgress){const e=n.uploadsInProgress.indexOf(t);if(-1!==e){const t=n.uploadsInProgress.filter((t,a)=>e!==a),s=rE({},n,{uploadsInProgress:t});this.props.actions.setDraft(N.I.DRAFT+a,s),this.draftsForChannel[a]=s}}this.setState({serverError:s})}),oE(this,"removePreview",e=>{let t={};const a=rE({},this.props.draft),n=this.props.currentChannel.id;this.setState({serverError:null});let s=a.fileInfos.findIndex(t=>t.id===e);if(-1===s){if(s=a.uploadsInProgress.indexOf(e),-1!==s){const n=a.uploadsInProgress.filter((e,t)=>s!==t);t=rE({},a,{uploadsInProgress:n}),this.refs.fileUpload&&this.refs.fileUpload.getWrappedInstance()&&this.refs.fileUpload.getWrappedInstance().cancelUpload(e)}}else{const e=a.fileInfos.filter((e,t)=>s!==t);t=rE({},a,{fileInfos:e})}this.props.actions.setDraft(N.I.DRAFT+n,t),this.draftsForChannel[n]=t,this.handleFileUploadChange()}),oE(this,"focusTextboxIfNecessary",e=>{this.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||Object(ae.t)(e,document.activeElement)&&this.focusTextbox()}),oE(this,"documentKeyHandler",e=>{const t=e.ctrlKey||e.metaKey,a=t&&j.Z(e,lE.FORWARD_SLASH),n=t&&e.shiftKey&&j.Z(e,lE.BACK_SLASH);if(a)return e.preventDefault(),void M.m();n?this.reactToLastMessage(e):this.focusTextboxIfNecessary(e)}),oE(this,"getFileCount",()=>{const e=this.props.draft;return e.fileInfos.length+e.uploadsInProgress.length}),oE(this,"getFileUploadTarget",()=>this.refs.textbox?this.refs.textbox.getWrappedInstance():null),oE(this,"getCreatePostControls",()=>this.refs.createPostControls),oE(this,"handleMouseUpKeyUp",e=>{const t=j.q(e.target);this.setState({caretPosition:t})}),oE(this,"handleKeyDown",e=>{const t=e.ctrlKey||e.metaKey,a=0===this.state.message.length,n=0===this.props.draft.message.length,s=(this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&j.Z(e,lE.ENTER)&&t,i=!t&&!e.altKey&&!e.shiftKey&&j.Z(e,lE.UP),r=!t&&!e.altKey&&e.shiftKey&&j.Z(e,lE.UP),o=t&&!e.altKey&&!e.shiftKey;j.fb(e)?this.setState({message:j.Q(e)}):s?this.postMsgKeyPress(e):i&&a?this.editLastPost(e):r&&a?this.replyToLastPost(e):o&&n&&j.Z(e,lE.UP)?this.loadPrevMessage(e):o&&n&&j.Z(e,lE.DOWN)&&this.loadNextMessage(e)}),oE(this,"editLastPost",e=>{e.preventDefault();const t=this.props.currentUsersLatestPost;if(!t)return;let a;a=t.root_id&&t.root_id.length>0?j.lb("create_post.comment",x.Posts.MESSAGE_TYPES.COMMENT):j.lb("create_post.post",x.Posts.MESSAGE_TYPES.POST),this.refs.textbox&&this.refs.textbox.getWrappedInstance().blur(),this.props.actions.setEditingPost(t.id,this.props.commentCountForPost,"post_textbox",a)}),oE(this,"replyToLastPost",e=>{e.preventDefault();const t=this.props.latestReplyablePostId,a=document.getElementById("reply_textbox");a&&a.focus(),t&&this.props.actions.selectPostFromRightHandSideSearchByPostId(t)}),oE(this,"loadPrevMessage",e=>{e.preventDefault(),this.props.actions.moveHistoryIndexBack(x.Posts.MESSAGE_TYPES.POST).then(()=>this.fillMessageFromHistory())}),oE(this,"loadNextMessage",e=>{e.preventDefault(),this.props.actions.moveHistoryIndexForward(x.Posts.MESSAGE_TYPES.POST).then(()=>this.fillMessageFromHistory())}),oE(this,"reactToLastMessage",e=>{e.preventDefault();const{rhsExpanded:t,actions:{emitShortcutReactToLastPostFrom:a}}=this.props,n=0===document.getElementsByClassName(N.b.MODAL).length,s=0===document.getElementsByClassName(N.b.POPUP).length;!t&&n&&s&&a(N.t.CENTER)}),oE(this,"handleBlur",()=>{this.lastBlurAt=Date.now()}),oE(this,"showPostDeletedModal",()=>{this.setState({showPostDeletedModal:!0})}),oE(this,"hidePostDeletedModal",()=>{this.setState({showPostDeletedModal:!1})}),oE(this,"handleEmojiClose",()=>{this.setState({showEmojiPicker:!1})}),oE(this,"setMessageAndCaretPostion",(e,t)=>{const a=this.refs.textbox.getWrappedInstance().getInputBox();this.setState({message:e,caretPosition:t},()=>{j.sb(a,t)})}),oE(this,"handleEmojiClick",e=>{const t=e.name||e.aliases[0];if(t){if(""===this.state.message)this.setState({message:":"+t+": "});else{const{message:e}=this.state,{firstPiece:a,lastPiece:n}=Object(ae.v)(this.state.caretPosition,e),s=""===a?":".concat(t,": ").concat(n):"".concat(a," :").concat(t,": ").concat(n),i=""===a?":".concat(t,": ").length:"".concat(a," :").concat(t,": ").length;this.setMessageAndCaretPostion(s,i)}this.handleEmojiClose()}}),oE(this,"handleGifClick",e=>{if(""===this.state.message)this.setState({message:e});else{const t=/\s+$/.test(this.state.message)?this.state.message+e:this.state.message+" "+e;this.setState({message:t})}this.handleEmojiClose()}),oE(this,"handleHeightChange",(e,t)=>{this.setState({renderScrollbar:e>t})}),this.state={message:this.props.draft.message,caretPosition:this.props.draft.message.length,submitting:!1,showPostDeletedModal:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1,currentChannel:e.currentChannel,mentions:[],memberNotifyCount:0},this.lastBlurAt=0,this.lastChannelSwitchAt=0,this.draftsForChannel={},this.lastOrientation=null}componentDidMount(){const{useGroupMentions:e,currentChannel:t,isTimezoneEnabled:a,actions:n}=this.props;this.onOrientationChange(),n.setShowPreview(!1),n.clearDraftUploads(N.I.DRAFT,(e,t)=>t?rE({},t,{uploadsInProgress:[]}):t),this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners(),e&&n.getChannelMemberCountsByGroup(t.id,a)}componentDidUpdate(e,t){const{useGroupMentions:a,currentChannel:n,isTimezoneEnabled:s,actions:i}=this.props;e.currentChannel.id!==n.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox(),a&&i.getChannelMemberCountsByGroup(n.id,s)),n.id!==e.currentChannel.id&&i.setShowPreview(!1),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}componentWillUnmount(){if(document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners(),this.saveDraftFrame){const e=this.props.currentChannel.id;this.props.actions.setDraft(N.I.DRAFT+e,this.draftsForChannel[e]),cancelAnimationFrame(this.saveDraftFrame)}}sendReaction(e){const t=this.props.currentChannel.id,a=e[1],n=e[2],s=this.props.latestReplyablePostId;s&&"+"===a?this.props.actions.addReaction(s,n):s&&"-"===a&&this.props.actions.removeReaction(s,n),this.props.actions.setDraft(N.I.DRAFT+t,null),this.draftsForChannel[t]=null}fillMessageFromHistory(){const e=this.props.messageInHistoryItem;e&&this.setState({message:e})}createTutorialTip(){const e=[];return e.push(O.a.createElement("div",null,O.a.createElement("h4",null,O.a.createElement(ee.a,{id:"create_post.tutorialTip.title",defaultMessage:"Sending Messages"})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"create_post.tutorialTip1",defaultMessage:"Type here to write a message and press **Enter** to post it."})),O.a.createElement("p",null,O.a.createElement(Ki.b,{id:"create_post.tutorialTip2",defaultMessage:"Click the **Attachment** button to upload an image or a file."})))),O.a.createElement(Jc,{id:"postTextboxTipMessage",placement:"top",screens:e,overlayClass:"tip-overlay--chat",diagnosticsTag:"tutorial_tip_1_sending_messages"})}shouldEnableSendButton(){return 0!==this.state.message.trim().length||0!==this.props.draft.fileInfos.length}render(){const{currentChannel:e,draft:t,fullWidthTextBox:a,showTutorialTip:n,canPost:s}=this.props,i=this.props.readOnlyChannel||!s,{formatMessage:r}=this.props.intl,{renderScrollbar:o,channelTimezoneCount:l,mentions:c,memberNotifyCount:d}=this.state,m=j.lb("accessibility.sections.centerFooter","message input complimentary region");let u="",h="";c.includes("@all")||c.includes("@channel")?(h=O.a.createElement(ee.a,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),u=l>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone",defaultMessage:"By using **@all** or **@channel** you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:d,timezones:l}}):O.a.createElement(Ki.b,{id:"notify_all.question",defaultMessage:"By using **@all** or **@channel** you are about to send notifications to **{totalMembers} people**. Are you sure you want to do this?",values:{totalMembers:d}})):c.length>0&&(h=O.a.createElement(ee.a,{id:"notify_all.title.confirm_groups",defaultMessage:"Confirm sending notifications to groups"}),u=1===c.length?l>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone_one_group",defaultMessage:"By using **{mention}** you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{mention:c[0],totalMembers:d,timezones:l}}):O.a.createElement(Ki.b,{id:"notify_all.question_one_group",defaultMessage:"By using **{mention}** you are about to send notifications to **{totalMembers} people**. Are you sure you want to do this?",values:{mention:c[0],totalMembers:d}}):l>0?O.a.createElement(Ki.b,{id:"notify_all.question_timezone_groups",defaultMessage:"By using **{mentions}** and **{finalMention}** you are about to send notifications to at least **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{mentions:c.slice(0,-1).join(", "),finalMention:c[c.length-1],totalMembers:d,timezones:l}}):O.a.createElement(Ki.b,{id:"notify_all.question_groups",defaultMessage:"By using **{mentions}** and **{finalMention}** you are about to send notifications to at least **{totalMembers} people**. Are you sure you want to do this?",values:{mentions:c.slice(0,-1).join(", "),finalMention:c[c.length-1],totalMembers:d}}));const p=O.a.createElement(ee.a,{id:"notify_all.confirm",defaultMessage:"Confirm"});let g=null;this.state.serverError&&(g=O.a.createElement(Zi,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let b=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");b=O.a.createElement("label",{className:e},this.state.postError)}let f=null;!i&&(t.fileInfos.length>0||t.uploadsInProgress.length>0)&&(f=O.a.createElement(vi,{fileInfos:t.fileInfos,onRemove:this.removePreview,uploadsInProgress:t.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));let _="post-create-footer";b&&(_+=" has-error");let E=null;n&&(E=this.createTutorialTip());let v="";a||(v="center");let y="send-button theme";this.shouldEnableSendButton()||(y+=" disabled");let C,w="";this.props.canUploadFiles||(w=" post-create--attachment-disabled"),i||this.props.shouldShowPreview||(C=O.a.createElement(Fi,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post"}));let T=null;const S=r({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let P;!this.props.enableEmojiPicker||i||this.props.shouldShowPreview||(T=O.a.createElement("div",null,O.a.createElement(ma,{show:this.state.showEmojiPicker,target:this.getCreatePostControls,onHide:this.hideEmojiPicker,onEmojiClose:this.handleEmojiClose,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:-7}),O.a.createElement("button",{type:"button","aria-label":S,onClick:this.toggleEmojiPicker,className:ws()("emoji-picker__container","post-action",{"post-action--active":this.state.showEmojiPicker})},O.a.createElement(Ot,{id:"emojiPickerButton",className:"icon icon--emoji "})))),P=i?j.lb("create_post.read_only","This channel is read-only. Only members with permission can post here."):r({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:e.display_name});let M="";return o&&(M=" scroll"),O.a.createElement("form",{id:"create_post",ref:"topDiv",className:v,onSubmit:this.handleSubmit},O.a.createElement("div",{className:"post-create"+w+M},O.a.createElement("div",{className:"post-create-body"},O.a.createElement("div",{role:"application",id:"centerChannelFooter","aria-label":m,tabIndex:"-1",className:"post-body__cell a11y__region","data-a11y-sort-order":"2"},O.a.createElement(In,{onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:i?"":this.state.message,onBlur:this.handleBlur,emojiEnabled:this.props.enableEmojiPicker,createMessage:P,channelId:e.id,id:"post_textbox",ref:"textbox",disabled:i,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0,useChannelMentions:this.props.useChannelMentions}),O.a.createElement("span",{ref:"createPostControls",className:"post-body__actions"},C,T,O.a.createElement("a",{role:"button",tabIndex:"0","aria-label":r({id:"create_post.send_message",defaultMessage:"Send a message"}),className:y,onClick:this.handleSubmit},O.a.createElement(sE.a,{className:"fa fa-paper-plane",title:{id:Object(ve.b)("create_post.icon"),defaultMessage:"Create a post"}})))),E),O.a.createElement("div",{id:"postCreateFooter",role:"form",className:_},O.a.createElement("div",{className:"d-flex justify-content-between"},O.a.createElement(Wi,{channelId:e.id,postId:""}),O.a.createElement(Ln,{characterLimit:this.props.maxPostSize,showPreview:this.props.shouldShowPreview,updatePreview:this.setShowPreview,message:i?"":this.state.message})),O.a.createElement("div",null,b,f,g))),O.a.createElement(zi,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),O.a.createElement(ns.a,{title:h,message:u,confirmButtonText:p,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}oE(dE,"propTypes",{getChannelView:C.a.func,currentChannelMembersCount:C.a.number,currentChannel:C.a.object,currentTeamId:C.a.string,currentUserId:C.a.string,codeBlockOnCtrlEnter:C.a.bool,ctrlSend:C.a.bool,fullWidthTextBox:C.a.bool,showTutorialTip:C.a.bool.isRequired,messageInHistoryItem:C.a.string,draft:C.a.shape({message:C.a.string.isRequired,uploadsInProgress:C.a.array.isRequired,fileInfos:C.a.array.isRequired}).isRequired,commentCountForPost:C.a.number,latestReplyablePostId:C.a.string,locale:C.a.string.isRequired,currentUsersLatestPost:C.a.object,readOnlyChannel:C.a.bool,canUploadFiles:C.a.bool.isRequired,enableEmojiPicker:C.a.bool.isRequired,enableGifPicker:C.a.bool.isRequired,enableConfirmNotificationsToChannel:C.a.bool.isRequired,maxPostSize:C.a.number.isRequired,emojiMap:C.a.object.isRequired,badConnection:C.a.bool.isRequired,userIsOutOfOffice:C.a.bool.isRequired,rhsExpanded:C.a.bool.isRequired,isTimezoneEnabled:C.a.bool.isRequired,canPost:C.a.bool.isRequired,useChannelMentions:C.a.bool.isRequired,intl:ne.a.isRequired,shouldShowPreview:C.a.bool.isRequired,actions:C.a.shape({setShowPreview:C.a.func.isRequired,addMessageIntoHistory:C.a.func.isRequired,moveHistoryIndexBack:C.a.func.isRequired,moveHistoryIndexForward:C.a.func.isRequired,addReaction:C.a.func.isRequired,onSubmitPost:C.a.func.isRequired,removeReaction:C.a.func.isRequired,clearDraftUploads:C.a.func.isRequired,runMessageWillBePostedHooks:C.a.func.isRequired,runSlashCommandWillBePostedHooks:C.a.func.isRequired,setDraft:C.a.func.isRequired,setEditingPost:C.a.func.isRequired,selectPostFromRightHandSideSearchByPostId:C.a.func.isRequired,openModal:C.a.func.isRequired,executeCommand:C.a.func.isRequired,getChannelTimezones:C.a.func.isRequired,scrollPostListToBottom:C.a.func.isRequired,emitShortcutReactToLastPostFrom:C.a.func,getChannelMemberCountsByGroup:C.a.func}).isRequired,groupsWithAllowReference:C.a.object,channelMemberCountsByGroup:C.a.object,useGroupMentions:C.a.bool.isRequired}),oE(dE,"defaultProps",{latestReplyablePostId:""});var mE=Object(te.c)(dE);function uE(e,t){return a=>{a(Object(Y.b)(e,t))}}var hE=Object(n.connect)((function(){const e=Object(Fa.makeGetCommentCountForPost)(),t=Object(Fa.makeGetMessageInHistoryItem)(x.Posts.MESSAGE_TYPES.POST);return(a,n)=>{const s=Object(m.getConfig)(a),i=Object(m.getLicense)(a),r=Object(p.getCurrentChannel)(a)||{},o=Object(ys.i)(a,N.I.DRAFT,r.id),l=Object(Fa.getMostRecentPostIdInChannel)(a,r.id),c=Object(Fa.getPost)(a,l),g=Object(Fa.getLatestReplyablePostId)(a),b=Object(p.getCurrentChannelStats)(a)?Object(p.getCurrentChannelStats)(a).member_count:1,f="true"===s.EnableTutorial,_=Object(d.getInt)(a,N.B.TUTORIAL_STEP,Object(u.getCurrentUserId)(a),N.K.FINISHED),E="true"===s.EnableEmojiPicker,v="true"===s.EnableGifPicker,y="true"===s.EnableConfirmNotificationsToChannel,C=Object(u.getCurrentUserId)(a),w=Object(u.getStatusForUserId)(a,C)===N.O.OUT_OF_OFFICE,O=xs(a)>1,T="true"===s.ExperimentalTimezone,S=Object(Nt.c)(a),P=Object(U.haveIChannelPermission)(a,{channel:r.id,team:r.team_id,permission:x.Permissions.CREATE_POST}),M=Object(U.haveIChannelPermission)(a,{channel:r.id,team:r.team_id,permission:x.Permissions.USE_CHANNEL_MENTIONS}),I="true"===(null==i?void 0:i.IsLicensed)&&"true"===(null==i?void 0:i.LDAPGroups),j=I&&Object(U.haveIChannelPermission)(a,{channel:r.id,team:r.team_id,permission:x.Permissions.USE_GROUP_MENTIONS}),A=Object(p.getChannelMemberCountsByGroup)(a,r.id),R=Object(h.getCurrentTeamId)(a);return{currentTeamId:R,currentChannel:r,currentChannelMembersCount:b,currentUserId:C,codeBlockOnCtrlEnter:Object(d.getBool)(a,x.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(d.getBool)(a,N.B.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:Object(d.get)(a,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.CHANNEL_DISPLAY_MODE,N.B.CHANNEL_DISPLAY_MODE_DEFAULT)===N.B.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:f&&_===N.K.POST_POPOVER,messageInHistoryItem:t(a),draft:o,commentCountForPost:e(a,{post:c}),latestReplyablePostId:g,locale:Object(Us.a)(a),currentUsersLatestPost:Object(Fa.getCurrentUsersLatestPost)(a),readOnlyChannel:n.readOnlyChannel||!Object(u.isCurrentUserSystemAdmin)(a)&&"true"===s.ExperimentalTownSquareIsReadOnly&&r.name===N.j.DEFAULT_CHANNEL,canUploadFiles:Object(hi.b)(s),enableEmojiPicker:E,enableGifPicker:v,enableConfirmNotificationsToChannel:y,maxPostSize:parseInt(s.MaxPostSize,10)||N.j.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:w,rhsExpanded:Object(ys.a)(a),emojiMap:Object(Nt.a)(a),badConnection:O,isTimezoneEnabled:T,shortcutReactToLastPostEmittedFrom:S,canPost:P,useChannelMentions:M,shouldShowPreview:W(a),groupsWithAllowReference:new Map(Object(ua.getAssociatedGroupsForReference)(a,R,r.id).map(e=>["@".concat(e.name),e])),useGroupMentions:j,channelMemberCountsByGroup:A,isLDAPEnabled:I}}}),(function(e){return{actions:Object(s.bindActionCreators)({addMessageIntoHistory:D.addMessageIntoHistory,onSubmitPost:uE,moveHistoryIndexBack:D.moveHistoryIndexBack,moveHistoryIndexForward:D.moveHistoryIndexForward,addReaction:Y.a,removeReaction:D.removeReaction,setDraft:Ks.e,clearDraftUploads:Ks.a,selectPostFromRightHandSideSearchByPostId:vs.k,setEditingPost:Y.l,emitShortcutReactToLastPostFrom:Y.d,openModal:q.b,executeCommand:Vs,getChannelTimezones:o.getChannelTimezones,runMessageWillBePostedHooks:Ws,runSlashCommandWillBePostedHooks:zs,scrollPostListToBottom:E.l,setShowPreview:F,getChannelMemberCountsByGroup:o.getChannelMemberCountsByGroup},e)}}))(mE),pE=a(1793),gE=a(2015),bE=a(321),fE=a.n(bE),_E=a(70);class EE extends O.a.PureComponent{render(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;let e=null;return this.props.fileInfos.length>1&&(e=O.a.createElement(ee.a,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),O.a.createElement("span",null,this.props.fileInfos[0].name,e)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(EE,"propTypes",{parentPostId:C.a.string.isRequired,fileInfos:C.a.arrayOf(C.a.object)});var vE=Object(n.connect)((function(){const e=Object(Bn.makeGetFilesForPost)();return function(t,a){let n;return a.parentPostId&&(n=e(t,a.parentPostId)),{fileInfos:n}}}))(EE);function yE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class CE extends w.PureComponent{constructor(...e){super(...e),yE(this,"handleOnClick",()=>{const{actions:e}=this.props,t=this.makeUsername();e.updateSearchTerms(t),e.showSearchResults()}),yE(this,"makeUsername",()=>{const e=this.props.post.props;let t=this.props.displayName;return this.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t}),yE(this,"makeCommentedOnMessage",()=>{const{post:e}=this.props;let t="";if(e.message)t=j.qb(e.message);else if(e.file_ids&&e.file_ids.length>0)t=O.a.createElement(vE,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){const a=e.props.attachments[0],n=a.pretext||a.title||a.text||a.fallback||"";t=j.qb(n)}return t})}render(){const e=this.makeUsername(),t=this.makeCommentedOnMessage(),a=O.a.createElement("a",{className:"theme",onClick:this.handleOnClick},e);return O.a.createElement("div",{"data-testid":"post-link",className:"post__link"},O.a.createElement("span",null,O.a.createElement(ee.a,{id:"post_body.commentedOn",defaultMessage:"Commented on {name}'s message: ",values:{name:a}}),O.a.createElement("a",{className:"theme",onClick:this.props.onCommentClick},Object(_E.c)(t))))}}yE(CE,"propTypes",{displayName:C.a.string,enablePostUsernameOverride:C.a.bool,onCommentClick:C.a.func.isRequired,post:C.a.object.isRequired,actions:C.a.shape({showSearchResults:C.a.func.isRequired,updateSearchTerms:C.a.func.isRequired}).isRequired});var wE=Object(n.connect)((function(e,t){let a="";if(t.post){const n=Object(u.getUser)(e,t.post.user_id);a=Object(j.x)(e,n)}return{displayName:a,enablePostUsernameOverride:"true"===Object(m.getConfig)(e).EnablePostUsernameOverride}}),(function(e){return{actions:Object(s.bindActionCreators)({showSearchResults:vs.q,updateSearchTerms:vs.v},e)}}))(CE);function OE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class TE extends O.a.PureComponent{constructor(e){super(e),this.sendingAction=new Ds(()=>{const e=this.props.post;e&&e.id===e.pending_post_id&&this.setState({sending:!0})}),this.state={sending:!1}}static getDerivedStateFromProps(e,t){return t.sending&&e.post&&e.post.id!==e.post.pending_post_id?{sending:!1}:null}componentDidUpdate(){!1===this.state.sending&&this.sendingAction.cancel()}componentDidMount(){const e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(3e3)}componentWillUnmount(){this.sendingAction.cancel()}render(){const e=this.props.post,t=this.props.parentPost;let a,n="";const s=j.db(e);let i;this.props.isFirstReply&&t&&e.type!==N.Q.PostTypes.EPHEMERAL&&(a=O.a.createElement(wE,{post:t,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(n+=" post--fail",i=O.a.createElement(Yr,{post:this.props.post})),ae.l(this.props.post)&&(n+=" post--edited");let r=null;(e.file_ids&&e.file_ids.length>0||e.filenames&&e.filenames.length>0)&&this.props.post.state!==x.Posts.POST_DELETED&&(r=O.a.createElement(qr,{post:e,compactDisplay:this.props.compactDisplay})),this.state.sending&&(n+=" post-waiting");const o=O.a.createElement(O.a.Fragment,null,i,this.state.sending&&O.a.createElement(oc.a,null),O.a.createElement(rl,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0})),l=e.type&&this.props.pluginPostTypes.hasOwnProperty(e.type)||e.props&&e.props.type&&this.props.pluginPostTypes.hasOwnProperty(e.props.type);let c;c=this.props.post.state===x.Posts.POST_DELETED||l?o:O.a.createElement(nl,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible},o);let d="";this.props.isCommentMention&&(d="mention-comment");let m="";return s&&(m="post--ephemeral"),O.a.createElement("div",null,a,O.a.createElement("div",{id:"".concat(e.id,"_message"),className:"post__body ".concat(d," ").concat(m," ").concat(n)},c,r,O.a.createElement(fo,{post:e,isReadOnly:this.props.isReadOnly})))}}OE(TE,"propTypes",{post:C.a.object.isRequired,parentPost:C.a.object,parentPostUser:C.a.object,handleCommentClick:C.a.func.isRequired,compactDisplay:C.a.bool,isCommentMention:C.a.bool,isFirstReply:C.a.bool,pluginPostTypes:C.a.object,isEmbedVisible:C.a.bool,enablePostUsernameOverride:C.a.bool.isRequired,isReadOnly:C.a.bool}),OE(TE,"defaultProps",{isReadOnly:!1});var SE=Object(n.connect)((function(e,t){let a,n;t.post.root_id&&(a=Object(Fa.getPost)(e,t.post.root_id),n=a?Object(u.getUser)(e,a.user_id):null);const s="true"===Object(m.getConfig)(e).EnablePostUsernameOverride,i=0!==Object(p.getCurrentChannel)(e).delete_at;return{parentPost:a,parentPostUser:n,pluginPostTypes:e.plugins.postTypes,enablePostUsernameOverride:s,isReadOnly:Object(p.isCurrentChannelReadOnly)(e)||i}}))(TE);function PE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ME extends O.a.PureComponent{constructor(e){super(e),PE(this,"toggleEmojiPicker",()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:e,showOptionsMenuWithoutHover:!1}),this.props.handleDropdownOpened(e||this.state.showDotMenu)}),PE(this,"removePost",()=>{this.props.actions.removePost(this.props.post)}),PE(this,"createRemovePostButton",()=>O.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:this.removePost},"×")),PE(this,"handleDotMenuOpened",e=>{this.setState({showDotMenu:e}),this.props.handleDropdownOpened(e||this.state.showEmojiPicker)}),PE(this,"getDotMenu",()=>this.refs.dotMenu),PE(this,"buildOptions",(e,t,a)=>{if(!this.props.shouldShowDotMenu)return null;const{isMobile:n,isReadOnly:s}=this.props,i=this.props.hover||this.state.showEmojiPicker||this.state.showDotMenu||this.state.showOptionsMenuWithoutHover,r=n?"":"pull-right";let o;let l;let c;return(a||!t&&(n||i||!e.root_id&&Boolean(this.props.replyCount)||this.props.isFirstReply))&&(o=O.a.createElement(Ec,{handleCommentClick:this.props.handleCommentClick,commentCount:this.props.replyCount,postId:e.id,extraClass:r})),!t&&i&&!s&&this.props.enableEmojiPicker&&(l=O.a.createElement(ro,{channelId:e.channel_id,postId:e.id,teamId:this.props.teamId,getDotMenuRef:this.getDotMenu,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker})),(n||i)&&(c=O.a.createElement(Tr,{post:e,commentCount:this.props.replyCount,isFlagged:this.props.isFlagged,handleCommentClick:this.props.handleCommentClick,handleDropdownOpened:this.handleDotMenuOpened,handleAddReactionClick:this.toggleEmojiPicker,isMenuOpen:this.state.showDotMenu,isReadOnly:s,enableEmojiPicker:this.props.enableEmojiPicker})),O.a.createElement("div",{ref:"dotMenu","data-testid":"post-menu-".concat(e.id),className:"col post-menu"},c,l,o)}),PE(this,"handleShortcutReactToLastPost",e=>{if(e){const{post:e,isReadOnly:t,enableEmojiPicker:a,isMobile:n,actions:{emitShortcutReactToLastPostFrom:s}}=this.props;s(N.t.NO_WHERE);const i=e&&e.state===x.Posts.POST_DELETED,r=e&&j.db(e),o=e&&ae.p(e),l=e&&ae.e(e),c=e&&e.failed,d=this.postHeaderRef.current.getBoundingClientRect();!(d.top-65>0&&d.bottom<window.innerHeight-85)||r||o||l||c||i||t||n||!a||this.setState({showOptionsMenuWithoutHover:!0},()=>{this.toggleEmojiPicker()})}}),this.state={showEmojiPicker:!1,showOptionsMenuWithoutHover:!1},this.postHeaderRef=O.a.createRef()}componentDidUpdate(e){const{shortcutReactToLastPostEmittedFrom:t,isLastPost:a}=this.props;e.shortcutReactToLastPostEmittedFrom!==t&&t===N.t.CENTER&&this.handleShortcutReactToLastPost(a)}render(){const e=this.props.post,t=j.db(e),a=ae.p(e),n=ae.e(e);let s,i,r,o,l;let c;if(!t&&!e.failed&&!a&&(this.props.hover||this.props.isFlagged)&&(s=O.a.createElement($r,{postId:e.id,isFlagged:this.props.isFlagged,isEphemeral:t})),e.props&&e.props.card&&(i=O.a.createElement(mi.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:O.a.createElement(di.a,null,O.a.createElement(ee.a,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},O.a.createElement("button",{className:"post-menu__item post-menu__item--show "+(this.props.isCardOpen?"active":""),onClick:e=>{e.preventDefault(),this.props.handleCardClick(this.props.post)}},O.a.createElement(cl,{className:"icon icon__info","aria-hidden":"true"})))),t?r=O.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton()):e.failed||(r=this.buildOptions(e,a,n)),t&&!this.props.compactDisplay&&e.state!==x.Posts.POST_DELETED&&(o=O.a.createElement("span",{className:"post__visibility"},O.a.createElement(ee.a,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))),e.is_pinned&&(l=O.a.createElement("span",{className:"post__pinned-badge"},O.a.createElement(ee.a,{id:"post_info.pinned",defaultMessage:"Pinned"}))),this.props.hover||this.props.showTimeWithoutHover){const a=!(t||x.Posts.POST_DELETED===e.state||Hs.isPostPendingOrFailed(e)||e.type===x.Posts.POST_TYPES.COMBINED_USER_ACTIVITY);c=O.a.createElement(no,{isPermalink:a,eventTime:e.create_at,postId:e.id})}return O.a.createElement("div",{className:"post__header--info",ref:this.postHeaderRef},O.a.createElement("div",{className:"col"},c,l,i,s,o),r)}}PE(ME,"propTypes",{post:C.a.object.isRequired,teamId:C.a.string,handleCommentClick:C.a.func.isRequired,handleCardClick:C.a.func.isRequired,handleDropdownOpened:C.a.func.isRequired,isFlagged:C.a.bool,isCardOpen:C.a.bool,replyCount:C.a.number,isFirstReply:C.a.bool,isMobile:C.a.bool,compactDisplay:C.a.bool,hover:C.a.bool.isRequired,showTimeWithoutHover:C.a.bool.isRequired,enableEmojiPicker:C.a.bool.isRequired,isReadOnly:C.a.bool,shortcutReactToLastPostEmittedFrom:C.a.string,isLastPost:C.a.bool,actions:C.a.shape({removePost:C.a.func.isRequired,emitShortcutReactToLastPostFrom:C.a.func}).isRequired,shouldShowDotMenu:C.a.bool.isRequired});var NE=Object(n.connect)((function(e,t){const a=Object(ys.p)(e),n=Object(m.getConfig)(e),s=e.entities.channels.channels[t.post.channel_id],i=s?0!==s.delete_at:null,r="true"===n.EnableEmojiPicker&&!i,o=Object(h.getCurrentTeamId)(e),l=Object(Nt.c)(e);return{teamId:o,isFlagged:null!=Object(d.get)(e,N.B.CATEGORY_FLAGGED_POST,t.post.id,null),isMobile:e.views.channel.mobileView,isCardOpen:a&&a.id===t.post.id,enableEmojiPicker:r,isReadOnly:Object(p.isCurrentChannelReadOnly)(e)||i,shouldShowDotMenu:ae.u(e,t.post,s),shortcutReactToLastPostEmittedFrom:l}}),(function(e){return{actions:Object(s.bindActionCreators)({removePost:D.removePost,emitShortcutReactToLastPostFrom:Y.d},e)}}))(ME);class IE extends O.a.PureComponent{render(){const{post:e}=this.props,t=ae.p(e),a=ae.e(e),n=e&&e.props&&"true"===e.props.from_webhook;let s,i,r=O.a.createElement(dl.a,{userId:e.user_id,hasMention:!0});return n&&!this.props.isBot?(r=e.props.override_username&&this.props.enablePostUsernameOverride?O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,overwriteName:e.props.override_username,overwriteIcon:this.props.overwriteIcon}):O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0}),s=O.a.createElement(sn.a,null)):a?(r=O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0,hasMention:!0}),s=O.a.createElement(ll.a,null,O.a.createElement(ee.a,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):t&&this.props.isBot?r=O.a.createElement(dl.a,{userId:e.user_id,hideStatus:!0}):t&&(r=O.a.createElement(dl.a,{overwriteName:O.a.createElement(ee.a,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:N.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(i=O.a.createElement("strong",{className:"colon"},":")),O.a.createElement("div",{className:"post__header"},O.a.createElement("div",{className:"col col__name"},r,i,s),O.a.createElement("div",{className:"col"},O.a.createElement(NE,{post:e,handleCommentClick:this.props.handleCommentClick,handleCardClick:this.props.handleCardClick,handleDropdownOpened:this.props.handleDropdownOpened,compactDisplay:this.props.compactDisplay,replyCount:this.props.replyCount,isFirstReply:this.props.isFirstReply,showTimeWithoutHover:this.props.showTimeWithoutHover,hover:this.props.hover,isLastPost:this.props.isLastPost})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(IE,"propTypes",{post:C.a.object.isRequired,handleCommentClick:C.a.func.isRequired,handleCardClick:C.a.func.isRequired,handleDropdownOpened:C.a.func.isRequired,compactDisplay:C.a.bool,replyCount:C.a.number,isFirstReply:C.a.bool,hover:C.a.bool.isRequired,showTimeWithoutHover:C.a.bool,enablePostUsernameOverride:C.a.bool.isRequired,isBot:C.a.bool.isRequired,isGuest:C.a.bool.isRequired,isLastPost:C.a.bool,overwriteIcon:C.a.string});var jE=Object(n.connect)((function(e,t){const a=Object(m.getConfig)(e),n="true"===a.EnablePostUsernameOverride,s="true"===a.EnablePostIconOverride&&t.post&&t.post.props&&t.post.props.override_icon_url;let i;s&&(i=En.Client4.getAbsoluteUrl(s));const r=Object(u.getUser)(e,t.post.user_id);return{enablePostUsernameOverride:n,isBot:Boolean(r&&r.is_bot),overwriteIcon:i,isGuest:Boolean(r&&Object(j.Y)(r))}}))(IE);function AE(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class RE extends O.a.PureComponent{constructor(e){super(e),AE(this,"handleCommentClick",e=>{e.preventDefault();const t=this.props.post;t&&this.props.actions.selectPost(t)}),AE(this,"handleCardClick",e=>{e&&this.props.actions.selectPostCard(e)}),AE(this,"handlePostClick",e=>{const t=this.props.post;t&&(this.props.channelIsArchived||t.system_post_ids||e.altKey&&this.props.actions.markPostAsUnread(t))}),AE(this,"handleDropdownOpened",e=>{this.props.togglePostMenu&&this.props.togglePostMenu(e),this.setState({dropdownOpened:e})}),AE(this,"hasSameRoot",e=>{const t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)}),AE(this,"getClassName",(e,t,a,n,s,i)=>{let r="post";(e.failed||e.state===x.Posts.POST_DELETED)&&(r+=" post--hide-controls"),!this.state.fadeOutHighlight&&this.props.shouldHighlight&&(r+=" post--highlight");let o="";o=this.hasSameRoot(this.props)&&!i?"same--root":"other--root";let l="";this.props.currentUserId!==e.user_id||n||t||(l="current--user");let c="";this.props.consecutivePostByUser&&(c="same--user");let d="";return e.root_id&&e.root_id.length>0?d="post--comment":this.props.replyCount>0&&(d="post--root",c="",o=""),(t||a)&&(r+=" post--system",t&&(l="",d="",o="")),s&&(d="post--comment same--root"),this.props.compactDisplay&&(r+=" post--compact"),(this.state.dropdownOpened||this.state.a11yActive)&&(r+=" post--hovered"),e.is_pinned&&(r+=" post--pinned"),!this.state.alt||this.props.channelIsArchived||e.system_post_ids||(r+=" cursor--pointer"),r+" "+c+" "+o+" "+d+" "+l}),AE(this,"setHover",()=>{this.setState({hover:!0})}),AE(this,"unsetHover",()=>{this.setState({hover:!1})}),AE(this,"handleAlt",e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})}),AE(this,"handleA11yActivateEvent",()=>{this.setState({a11yActive:!0,ariaHidden:!1})}),AE(this,"handleA11yDeactivateEvent",()=>{this.setState({a11yActive:!1,ariaHidden:!0})}),AE(this,"handlePostFocus",()=>{this.setState({currentAriaLabel:this.props.createAriaLabel(this.props.intl)})}),this.postRef=O.a.createRef(),this.state={dropdownOpened:!1,hover:!1,alt:!1,a11yActive:!1,currentAriaLabel:"",ariaHidden:!0,fadeOutHighlight:!1}}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.addEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent)),this.props.shouldHighlight&&(this.highlightTimeout=setTimeout(()=>{this.setState({fadeOutHighlight:!0})},N.Q.PERMALINK_FADEOUT))}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.removeEventListener(N.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(N.c.DEACTIVATE,this.handleA11yDeactivateEvent)),clearTimeout(this.highlightTimeout)}componentDidUpdate(){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(N.c.UPDATE))}render(){const{post:e}=this.props;if(!e.id)return null;const t=ae.p(e),a=Object(Hs.isMeMessage)(e),n=ae.e(e),s=e&&e.props&&"true"===e.props.from_webhook,i=e&&e.props&&"true"===e.props.from_bot;let r;const o=this.hasSameRoot(this.props)&&this.props.consecutivePostByUser&&!e.root_id&&0===this.props.replyCount&&!i;o||(r=O.a.createElement(Vr,{compactDisplay:this.props.compactDisplay,post:e,userId:e.user_id}),n&&(r=O.a.createElement("span",{className:"auto-responder"},r)));let l="";return this.props.center&&(l="center"),O.a.createElement(Io.Provider,{value:{handlePopupOpened:this.handleDropdownOpened}},O.a.createElement("div",{ref:this.postRef,id:"post_"+e.id,"data-testid":"postView",role:"listitem",className:"a11y__section ".concat(this.getClassName(e,t,a,s,n,i)),tabIndex:"0",onFocus:this.handlePostFocus,onBlur:this.removeFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,onClick:this.handlePostClick,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0},O.a.createElement("div",{role:"application","data-testid":"postContent",className:"post__content "+l,"aria-hidden":this.state.ariaHidden},O.a.createElement("div",{className:"post__img"},r),O.a.createElement("div",null,O.a.createElement(jE,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!o,hover:this.state.hover||this.state.a11yActive,isLastPost:this.props.isLastPost}),O.a.createElement(SE,{post:e,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply})))))}}AE(RE,"propTypes",{post:C.a.object.isRequired,createAriaLabel:C.a.func.isRequired,currentUserId:C.a.string.isRequired,center:C.a.bool,compactDisplay:C.a.bool,isFirstReply:C.a.bool,shouldHighlight:C.a.bool,consecutivePostByUser:C.a.bool,previousPostIsComment:C.a.bool,togglePostMenu:C.a.func,isCommentMention:C.a.bool,replyCount:C.a.number,isLastPost:C.a.bool,channelIsArchived:C.a.bool.isRequired,intl:ne.a.isRequired,actions:C.a.shape({selectPost:C.a.func.isRequired,selectPostCard:C.a.func.isRequired,markPostAsUnread:C.a.func.isRequired}).isRequired}),AE(RE,"defaultProps",{post:{}});var kE=Object(te.c)(RE);function LE(e,t){return!!e.root_id&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}var DE=Object(n.connect)((function(){const e=Object(ae.r)(),t=Object(Fa.makeIsPostCommentMention)(),a=Object(ae.q)();return(n,s)=>{const i=s.post||Object(Fa.getPost)(n,s.postId),r=Object(p.getChannel)(n,i.channel_id);let o=null;s.previousPostId&&(o=Object(Fa.getPost)(n,s.previousPostId));let l=!1,c=!1;return o&&(l=!(!(i.user_id===o.user_id&&i.create_at-o.create_at<=x.Posts.POST_COLLAPSE_TIMEOUT)||i.props&&i.props.from_webhook||o.props&&o.props.from_webhook||Object(Hs.isSystemMessage)(i)||Object(Hs.isSystemMessage)(o)),c=Boolean(o.root_id)),{post:i,createAriaLabel:a(n,i),currentUserId:Object(u.getCurrentUserId)(n),isFirstReply:LE(i,o),consecutivePostByUser:l,previousPostIsComment:c,replyCount:e(n,i),isCommentMention:t(n,i.id),center:Object(d.get)(n,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.CHANNEL_DISPLAY_MODE,N.B.CHANNEL_DISPLAY_MODE_DEFAULT)===N.B.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:Object(d.get)(n,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.MESSAGE_DISPLAY,N.B.MESSAGE_DISPLAY_DEFAULT)===N.B.MESSAGE_DISPLAY_COMPACT,channelIsArchived:Ca(r)}}}),(function(e){return{actions:Object(s.bindActionCreators)({selectPost:vs.g,selectPostCard:vs.h,markPostAsUnread:Y.h},e)}}))(kE);var xE=Object(n.connect)((function(){const e=Object(gr.makeGenerateCombinedPost)();return(t,a)=>({post:e(t,a.combinedId),postId:a.combinedId})}))(DE);a(1794);class UE extends O.a.PureComponent{render(){const{children:e}=this.props;return O.a.createElement("div",{className:"Separator NotificationSeparator","data-testid":"NotificationSeparator"},O.a.createElement("hr",{className:"separator__hr"}),e&&O.a.createElement("div",{className:"separator__text"},e))}}class qE extends O.a.PureComponent{render(){return O.a.createElement("div",{className:"new-separator"},O.a.createElement(UE,{id:this.props.separatorId},O.a.createElement(ee.a,{id:"posts_view.newMsg",defaultMessage:"New Messages"})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(qE,"propTypes",{separatorId:C.a.string.isRequired});var HE=a(1280),FE=a(1202),BE=a(1440);class GE extends O.a.PureComponent{render(){const{currentUserId:e,channel:t,creatorName:a,fullWidth:n,locale:s,enableUserCreation:i,isReadOnly:r,channelProfiles:o,teamIsGroupConstrained:l,teammate:c,teammateName:d}=this.props;let m="";return n||(m="channel-intro--centered"),t.type===N.j.DM_CHANNEL?function(e,t,a,n){if(a)return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},O.a.createElement(Hr.a,{src:j.O(a.id,a.last_picture_update),size:"xl",userId:a.id,username:a.username,hasMention:!0})),O.a.createElement("div",{className:"channel-intro-profile d-flex"},O.a.createElement(dl.a,{userId:a.id,disablePopover:!1,hasMention:!0})),O.a.createElement("p",{className:"channel-intro-text"},O.a.createElement(Ki.b,{id:"intro_messages.DM",defaultMessage:"This is the start of your direct message history with {teammate}.\\nDirect messages and files shared here are not shown to people outside this area.",values:{teammate:n}})),a.is_bot?null:WE(e));return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("p",{className:"channel-intro-text"},O.a.createElement(ee.a,{id:"intro_messages.teammate",defaultMessage:"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area."})))}(t,m,c,d):t.type===N.j.GM_CHANNEL?function(e,t,a,n){if(a.length>0){const s=a.filter(e=>e.id!==n).map(e=>O.a.createElement(Hr.a,{key:"introprofilepicture"+e.id,src:j.O(e.id,e.last_picture_update),size:"xl",userId:e.id,username:e.username}));return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},s),O.a.createElement("p",{className:"channel-intro-text"},O.a.createElement(Ki.b,{id:"intro_messages.GM",defaultMessage:"This is the start of your group message history with {names}.\\nMessages and files shared here are not shown to people outside this area.",values:{names:e.display_name}})),WE(e))}return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("p",{className:"channel-intro-text"},O.a.createElement(ee.a,{id:"intro_messages.group_message",defaultMessage:"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area."})))}(t,m,o,e):t.name===N.j.DEFAULT_CHANNEL?function(e,t,a,n,s){let i=null;!n&&a&&(i=O.a.createElement(Kd.a,{teamId:e.team_id,permissions:[x.Permissions.INVITE_USER]},O.a.createElement(Kd.a,{teamId:e.team_id,permissions:[x.Permissions.ADD_USER_TO_TEAM]},!s&&O.a.createElement(ee.a,{id:"intro_messages.inviteOthers",defaultMessage:"Invite others to this team"},e=>O.a.createElement(HE.a,{accessibilityLabel:e,id:"introTextInvite",className:"intro-links color--link cursor--pointer",modalId:N.u.INVITATION,dialogType:zd},O.a.createElement(ee.a,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>O.a.createElement("i",{className:"fa fa-user-plus",title:e})),e)),s&&O.a.createElement(FE.a,{className:"intro-links color--link",dialogType:Hm.a,dialogProps:{channel:e}},O.a.createElement(ee.a,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>O.a.createElement("i",{className:"fa fa-user-plus",title:e})),O.a.createElement(ee.a,{id:"intro_messages.addGroupsToTeam",defaultMessage:"Add other groups to this team"})))));const r=e.type===N.j.PRIVATE_CHANNEL;let o=null;if(!n){const t=WE(e);t&&(o=O.a.createElement(yr,{teamId:e.team_id,channelId:e.id,permissions:[r?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},t))}return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("h2",{className:"channel-intro__title"},O.a.createElement(ee.a,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),O.a.createElement("p",{className:"channel-intro__content"},!n&&O.a.createElement(Ki.b,{id:"intro_messages.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}}),n&&O.a.createElement(Ki.b,{id:"intro_messages.readonly.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}})),i,o,O.a.createElement("br",null))}(t,m,i,r,l):t.name===N.j.OFFTOPIC_CHANNEL?function(e,t){const a=e.type===N.j.PRIVATE_CHANNEL,n=WE(e);let s=null;n&&(s=O.a.createElement(yr,{teamId:e.team_id,channelId:e.id,permissions:[a?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},n));const i=VE(e);return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("h2",{className:"channel-intro__title"},O.a.createElement(ee.a,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),O.a.createElement("p",{className:"channel-intro__content"},O.a.createElement(ee.a,{id:"intro_messages.offTopic",defaultMessage:"This is the start of {display_name}, a channel for non-work-related conversations.",values:{display_name:e.display_name}})),i,s)}(t,m):t.type===N.j.OPEN_CHANNEL||t.type===N.j.PRIVATE_CHANNEL?function(e,t,a,n){var s,i=e.display_name;s=0!==e.delete_at?"":e.type===N.j.PRIVATE_CHANNEL?O.a.createElement(ee.a,{id:"intro_messages.onlyInvited",defaultMessage:" Only invited members can see this private channel."}):O.a.createElement(ee.a,{id:"intro_messages.anyMember",defaultMessage:" Any member can join and read this channel."});const r=O.a.createElement(pm.a,{value:e.create_at,month:Object(ve.a)(a),day:"2-digit",year:"numeric"});var o;""===n?e.type===N.j.PRIVATE_CHANNEL?o=O.a.createElement(ee.a,{id:"intro_messages.noCreatorPrivate",defaultMessage:"This is the start of the {name} private channel, created on {date}.",values:{name:i,date:r}}):e.type===N.j.OPEN_CHANNEL&&(o=O.a.createElement(ee.a,{id:"intro_messages.noCreator",defaultMessage:"This is the start of the {name} channel, created on {date}.",values:{name:i,date:r}})):e.type===N.j.PRIVATE_CHANNEL?o=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"intro_messages.creatorPrivate",defaultMessage:"This is the start of the {name} private channel, created by {creator} on {date}.",values:{name:i,creator:n,date:r}})):e.type===N.j.OPEN_CHANNEL&&(o=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"intro_messages.creator",defaultMessage:"This is the start of the {name} channel, created by {creator} on {date}.",values:{name:i,creator:n,date:r}})));var l="";e.purpose&&""!==e.purpose&&(e.type===N.j.PRIVATE_CHANNEL?l=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"intro_messages.purposePrivate",defaultMessage:" This private channel's purpose is: {purpose}",values:{purpose:e.purpose}})):e.type===N.j.OPEN_CHANNEL&&(l=O.a.createElement("span",null,O.a.createElement(ee.a,{id:"intro_messages.purpose",defaultMessage:" This channel's purpose is: {purpose}",values:{purpose:e.purpose}}))));const c=e.type===N.j.PRIVATE_CHANNEL;let d=null;const m=WE(e);m&&(d=O.a.createElement(yr,{teamId:e.team_id,channelId:e.id,permissions:[c?x.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:x.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},m));const u=VE(e);return O.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},O.a.createElement("h2",{className:"channel-intro__title"},O.a.createElement(ee.a,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:i}})),O.a.createElement("p",{className:"channel-intro__content"},o,s,l,O.a.createElement("br",null)),u,d)}(t,m,s,a):null}}function VE(e){const t=e.group_constrained?Ef.a:Pb.a;if(0!==e.delete_at)return null;const a=e.type===N.j.PRIVATE_CHANNEL;return O.a.createElement(yr,{channelId:e.id,teamId:e.team_id,permissions:[a?x.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:x.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS]},O.a.createElement(FE.a,{className:"intro-links color--link",dialogType:t,dialogProps:{channel:e}},O.a.createElement(ee.a,{id:"generic_icons.add",defaultMessage:"Add Icon"},e=>O.a.createElement("i",{className:"fa fa-user-plus",title:e})),a&&e.group_constrained&&O.a.createElement(ee.a,{id:"intro_messages.addGroups",defaultMessage:"Add groups to this private channel"}),a&&!e.group_constrained&&O.a.createElement(ee.a,{id:"intro_messages.invitePrivate",defaultMessage:"Invite others to this private channel"}),!a&&O.a.createElement(ee.a,{id:"intro_messages.invite",defaultMessage:"Invite others to this channel"})))}function WE(e){return 0!==e.delete_at?null:O.a.createElement(ee.a,{id:"intro_messages.setHeader",defaultMessage:"Set a Header"},t=>O.a.createElement(HE.a,{modalId:N.u.EDIT_CHANNEL_HEADER,accessibilityLabel:t,className:"intro-links color--link",dialogType:Zb,dialogProps:{channel:e}},O.a.createElement(BE.a,null),t))}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(GE,"propTypes",{currentUserId:C.a.string.isRequired,channel:C.a.object.isRequired,fullWidth:C.a.bool.isRequired,locale:C.a.string.isRequired,channelProfiles:C.a.array.isRequired,enableUserCreation:C.a.bool,isReadOnly:C.a.bool,teamIsGroupConstrained:C.a.bool,creatorName:C.a.string.isRequired,teammate:C.a.object.isRequired,teammateName:C.a.string});var zE=Object(n.connect)((function(e){const t="true"===Object(m.getConfig)(e).EnableUserCreation,a=Object(p.isCurrentChannelReadOnly)(e),n=Object(h.getCurrentTeam)(e),s=Object(p.getCurrentChannel)(e),i=Object(j.v)(e,s.id),r=Object(u.getUser)(e,s.creator_id);return{currentUserId:Object(u.getCurrentUserId)(e),channel:s,locale:Object(Us.a)(e),channelProfiles:Object(u.getProfilesInCurrentChannel)(e),enableUserCreation:t,isReadOnly:a,fullWidth:Object(d.get)(e,N.B.CATEGORY_DISPLAY_SETTINGS,N.B.CHANNEL_DISPLAY_MODE,N.B.CHANNEL_DISPLAY_MODE_DEFAULT)===N.B.CHANNEL_DISPLAY_MODE_FULL_SCREEN,teamIsGroupConstrained:Boolean(n.group_constrained),creatorName:Object(j.x)(e,r),teammate:i,teammateName:Object(j.x)(e,i)}}))(GE);class KE extends O.a.PureComponent{blockShortcutReactToLastPostForNonMessages(e){const{actions:{emitShortcutReactToLastPostFrom:t}}=this.props;Object(ae.o)(e)&&t(N.t.NO_WHERE)}componentDidUpdate(e){const{listId:t,isLastPost:a,shortcutReactToLastPostEmittedFrom:n}=this.props,s=e.shortcutReactToLastPostEmittedFrom!==n&&n===N.t.CENTER;a&&s&&this.blockShortcutReactToLastPostForNonMessages(t)}render(){const{listId:e,previousListId:t}=this.props;if(gr.isDateLine(e)){const t=gr.getDateForDateLine(e);return O.a.createElement(pr,{key:t,date:t})}if(gr.isStartOfNewMessages(e))return O.a.createElement(qE,{separatorId:e});if(e===N.y.CHANNEL_INTRO_MESSAGE)return O.a.createElement(zE,null);if(e===N.y.LOAD_OLDER_MESSAGES_TRIGGER||e===N.y.LOAD_NEWER_MESSAGES_TRIGGER)return O.a.createElement("button",{className:"more-messages-text theme style--none color--link",onClick:e===N.y.LOAD_OLDER_MESSAGES_TRIGGER?this.props.loadOlderPosts:this.props.loadNewerPosts},O.a.createElement(ee.a,{id:"posts_view.loadMore",defaultMessage:"Load More Messages"}));if(e===N.y.OLDER_MESSAGES_LOADER||e===N.y.NEWER_MESSAGES_LOADER)return O.a.createElement("div",{className:"loading-screen"},O.a.createElement("div",{className:"loading__content"},O.a.createElement("div",{className:"round round-1"}),O.a.createElement("div",{className:"round round-2"}),O.a.createElement("div",{className:"round round-3"})));const a={previousPostId:t,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu,isLastPost:this.props.isLastPost};return gr.isCombinedUserActivityPost(e)?O.a.createElement(xE,Object.assign({combinedId:e},a)):O.a.createElement(DE,Object.assign({postId:e},a))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(KE,"propTypes",{listId:C.a.string.isRequired,previousListId:C.a.string,fullWidth:C.a.bool,shouldHighlight:C.a.bool,loadOlderPosts:C.a.func,loadNewerPosts:C.a.func,togglePostMenu:C.a.func,isLastPost:C.a.bool,shortcutReactToLastPostEmittedFrom:C.a.string,actions:C.a.shape({emitShortcutReactToLastPostFrom:C.a.func})});var YE=Object(n.connect)((function(e,t){const a=Object(Nt.c)(e);return{post:t.post,channel:t.channel,shortcutReactToLastPostEmittedFrom:a}}),(function(e){return{actions:Object(s.bindActionCreators)({emitShortcutReactToLastPostFrom:Y.d},e)}}))(KE);class QE extends O.a.PureComponent{render(){return O.a.createElement("span",this.props,O.a.createElement(ee.a,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},e=>O.a.createElement("svg",{x:"0px",y:"0px",viewBox:"-239 239 21 23",style:ZE,role:"img","aria-label":e},O.a.createElement("path",{d:"M-239,241.4l2.4-2.4l8.1,8.2l8.1-8.2l2.4,2.4l-10.5,10.6L-239,241.4z M-228.5,257.2l8.1-8.2l2.4,2.4l-10.5,10.6l-10.5-10.6 l2.4-2.4L-228.5,257.2z"}))))}}const ZE={enableBackground:"new -239 239 21 23"};class JE extends O.a.PureComponent{render(){if(As()(window).width()>768)return null;let e="post-list__arrows";return this.props.isScrolling&&!1===this.props.atBottom&&(e+=" scrolling"),O.a.createElement("div",{className:e,onClick:this.props.onClick},O.a.createElement(QE,null))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(JE,"propTypes",{isScrolling:C.a.bool.isRequired,atBottom:C.a.bool,onClick:C.a.func.isRequired});var XE=a(1302);a(1795);function $E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ev extends O.a.PureComponent{constructor(...e){super(...e),$E(this,"handleDismiss",()=>{"function"==typeof this.props.onDismiss&&this.props.onDismiss()})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){let e="toast";const{show:t,extraClasses:a,showActions:n,width:s}=this.props;a&&(e+=" ".concat(a)),t&&(e+=" toast__visible");let i="toast__message";n&&(i+=" toast__pointer");let r=O.a.createElement("div",null);return n&&t&&(r=O.a.createElement(di.a,{id:"toast-close__tooltip"},O.a.createElement(ee.a,{id:"general_button.close",defaultMessage:"Close"}),O.a.createElement("div",{className:"tooltip__shortcut--txt"},O.a.createElement(ee.a,{id:"general_button.esc",defaultMessage:"esc"})))),O.a.createElement("div",{className:e},O.a.createElement("div",{className:i,onClick:n?this.props.onClick:null},n&&(()=>O.a.createElement("div",{className:"toast__jump"},O.a.createElement(ip,null),s>N.Q.MOBILE_SCREEN_WIDTH&&this.props.onClickMessage))(),this.props.children),O.a.createElement("div",{className:"toast__dismiss",onClick:this.handleDismiss,"data-testid":a?"dismissToast-".concat(a):"dismissToast"},O.a.createElement(XE.a,{delayShow:N.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:r},O.a.createElement(nd,{className:"close-btn",id:"dismissToast"}))))}}function tv(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function av(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tv(Object(a),!0).forEach((function(t){nv(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tv(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function nv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}$E(ev,"propTypes",{onClick:C.a.func,onClickMessage:C.a.string,onDismiss:C.a.func,children:C.a.element,show:C.a.bool.isRequired,showActions:C.a.bool,width:C.a.number,extraClasses:C.a.string});class sv extends O.a.PureComponent{constructor(e){super(e),nv(this,"handleShortcut",e=>{j.Z(e,N.Q.KeyCodes.ESCAPE)&&(this.state.showUnreadToast?this.hideUnreadToast():this.state.showNewMessagesToast?this.hideNewMessagesToast():this.hideArchiveToast())}),nv(this,"hideUnreadToast",()=>{this.state.showUnreadToast&&this.setState({showUnreadToast:!1})}),nv(this,"hideArchiveToast",()=>{this.state.showMessageHistoryToast&&this.setState({showMessageHistoryToast:!1})}),nv(this,"hideNewMessagesToast",(e=!0)=>{this.state.showNewMessagesToast&&(this.setState({showNewMessagesToast:!1}),e&&this.props.updateLastViewedBottomAt())}),nv(this,"newMessagesToastText",(e,t)=>this.props.width>500&&void 0!==t?O.a.createElement(ee.a,{id:"postlist.toast.newMessagesSince",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}} since {date} at {time}",values:{count:e,date:O.a.createElement(pm.a,{value:t,weekday:"short",day:"2-digit",month:"short"}),time:O.a.createElement(eo.a,{eventTime:t})}}):O.a.createElement(ee.a,{id:"postlist.toast.newMessages",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}}",values:{count:e}})),nv(this,"archiveToastText",()=>O.a.createElement(ee.a,{id:"postlist.toast.history",defaultMessage:"Viewing message history"})),nv(this,"changeUrlToRemountChannelView",()=>{const{match:e}=this.props;se.a.replace("/".concat(e.params.team))}),nv(this,"scrollToNewMessage",()=>{const{focusedPostId:e,atLatestPost:t,scrollToNewMessage:a,updateLastViewedBottomAt:n}=this.props;!e||t?(a(),n(),this.hideNewMessagesToast()):this.changeUrlToRemountChannelView()}),nv(this,"scrollToLatestMessages",()=>{const{focusedPostId:e,atLatestPost:t,scrollToLatestMessages:a}=this.props;if(e){if(!t)return void this.changeUrlToRemountChannelView();this.hideArchiveToast()}a(),this.hideUnreadToast()}),this.state={unreadCountInChannel:e.unreadCountInChannel}}static getDerivedStateFromProps(e,t){let a,{showUnreadToast:n,showNewMessagesToast:s,showMessageHistoryToast:i}=t;return a=e.atLatestPost?sv.countNewMessages(e.postListIds):e.channelMarkedAsUnread?t.unreadCountInChannel:t.unreadCountInChannel+e.newRecentMessagesCount,void 0===n&&null!==e.atBottom&&(n=a>0&&!e.atBottom),void 0===i&&""!==e.focusedPostId&&null!==e.atBottom&&(i=e.initScrollOffsetFromBottom>1e3||!e.atLatestPost),!e.channelMarkedAsUnread||e.atBottom||t.channelMarkedAsUnread||t.showUnreadToast||(n=!0),e.channelMarkedAsUnread&&e.lastViewedAt!==t.lastViewedAt&&!e.atBottom&&(n=!0),!n&&a>0&&!e.atBottom&&e.lastViewedBottom<e.latestPostTimeStamp&&(s=!0),a||(s=!1,n=!1),{unreadCount:a,showUnreadToast:n,showNewMessagesToast:s,lastViewedAt:e.lastViewedAt,channelMarkedAsUnread:e.channelMarkedAsUnread,showMessageHistoryToast:i}}componentDidMount(){this.mounted=!0;const{showUnreadToast:e,showNewMessagesToast:t,showMessageHistoryToast:a}=this.state,n=Boolean(e||t||a);document.addEventListener("keydown",this.handleShortcut),this.props.actions.updateToastStatus(n)}componentDidUpdate(e,t){const{showUnreadToast:a,showNewMessagesToast:n,showMessageHistoryToast:s}=this.state,{atBottom:i,atLatestPost:r,postListIds:o,lastViewedBottom:l,updateNewMessagesAtInChannel:c,actions:d}=this.props;!e.atBottom&&i&&r&&(this.hideNewMessagesToast(!1),this.hideUnreadToast(),this.hideArchiveToast());const m=e.postListIds.length,u=o.length;if(u!==m&&o[0]!==e.postListIds[0]&&(!1===i&&r&&u>0)&&!a&&c(l),t.showUnreadToast!==a||t.showNewMessagesToast!==n||t.showMessageHistoryToast!==s){const e=Boolean(a||n||s);d.updateToastStatus(e)}}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut)}render(){const{atLatestPost:e,atBottom:t,width:a,lastViewedAt:n}=this.props,{showUnreadToast:s,showNewMessagesToast:i,showMessageHistoryToast:r,unreadCount:o}=this.state;let l={show:!1,width:a};const c={show:Boolean(r),width:a,onDismiss:this.hideArchiveToast,onClick:this.scrollToLatestMessages,onClickMessage:j.lb("postlist.toast.scrollToBottom","Jump to recents"),showActions:!0,extraClasses:"toast__history"};return s&&o>0?l=av({},l,{onDismiss:this.hideUnreadToast,onClick:this.scrollToLatestMessages,onClickMessage:j.lb("postlist.toast.scrollToBottom","Jump to recents"),show:!0,showActions:!e||e&&!t}):i&&(l=av({},l,{onDismiss:this.hideNewMessagesToast,onClick:this.scrollToNewMessage,onClickMessage:j.lb("postlist.toast.scrollToLatest","Jump to new messages"),show:!0,showActions:!e||e&&!t})),O.a.createElement(O.a.Fragment,null,O.a.createElement(ev,l,this.newMessagesToastText(o,n)),O.a.createElement(ev,c,this.archiveToastText()))}}nv(sv,"propTypes",{unreadCountInChannel:C.a.number,newRecentMessagesCount:C.a.number,channelMarkedAsUnread:C.a.bool,atLatestPost:C.a.bool,postListIds:C.a.array,latestPostTimeStamp:C.a.number,atBottom:C.a.bool,lastViewedBottom:C.a.number,width:C.a.number,lastViewedAt:C.a.number,focusedPostId:C.a.string,initScrollOffsetFromBottom:C.a.number,updateNewMessagesAtInChannel:C.a.func,scrollToNewMessage:C.a.func,scrollToLatestMessages:C.a.func,updateLastViewedBottomAt:C.a.func,match:C.a.shape({params:C.a.shape({team:C.a.string}).isRequired}).isRequired,actions:C.a.shape({updateToastStatus:C.a.func.isRequired}).isRequired}),nv(sv,"defaultProps",{focusedPostId:""}),nv(sv,"countNewMessages",e=>{const t=Object(ae.h)(e);return t<=0?0:e.slice(0,t).filter(e=>!Object(ae.o)(e)).length});var iv=Object(te.c)(sv);var rv=Object(i.g)(Object(n.connect)((function(){const e=Object(ba.createSelector)(Fa.getAllPosts,u.getCurrentUserId,(e,t)=>t,(e,t,a)=>a,(e,t,a,n)=>a?a.map(t=>e[t]).filter(e=>e&&e.user_id!==t&&e.state!==x.Posts.POST_DELETED&&e.create_at>n).length:0),t=Object(gr.makePreparePostIdsForPostList)();return function(a,n){let s=0;const i=Object(p.isManuallyUnread)(a,n.channelId),r=a.views.channel.lastChannelViewTime[n.channelId];if(!n.atLatestPost){let i=Object(Fa.getPostIdsInChannel)(a,n.channelId);i&&(i=t(a,{postIds:i,lastViewedAt:r,channelId:n.channelId})),s=e(a,i,r)}return{lastViewedAt:r,newRecentMessagesCount:s,unreadCountInChannel:Object(p.countCurrentChannelUnreadMessages)(a),channelMarkedAsUnread:i}}}),(function(e){return{actions:Object(s.bindActionCreators)({updateToastStatus:E.p},e)}}))(iv));function ov(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function lv(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ov(Object(a),!0).forEach((function(t){cv(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ov(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function cv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const dv=window.OVERSCAN_COUNT_BACKWARD||80,mv=window.OVERSCAN_COUNT_FORWARD||80,uv=window.HEIGHT_TRIGGER_FOR_MORE_POSTS||1e3,hv=50,pv=100,gv={padding:"14px 0px 7px"},bv={position:"absolute",bottom:"0",maxHeight:"100%"};class fv extends O.a.PureComponent{constructor(e){super(e),cv(this,"getNewMessagesSeparatorIndex",e=>e.findIndex(e=>0===e.indexOf(N.y.START_OF_NEW_MESSAGES))),cv(this,"handleWindowResize",()=>{this.props.actions.checkAndSetMobileView();const e=j.cb();if(e!==this.state.isMobile){const t=this.state.dynamicListStyle;this.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),this.setState({isMobile:e,dynamicListStyle:t}),this.scrollStopAction=new Ds(this.handleScrollStop)}}),cv(this,"togglePostMenu",e=>{const t=this.state.dynamicListStyle;this.state.isMobile&&(t.willChange=e?"unset":"transform"),this.setState({postMenuOpened:e,dynamicListStyle:t})}),cv(this,"renderRow",({data:e,itemId:t,style:a})=>{const n=e.indexOf(t);let s="";const i=-1!==n&&n<e.length-1?e[n+1]:"",r=n>0&&n<e.length?e[n-1]:"";(Object(gr.isDateLine)(r)||Object(gr.isStartOfNewMessages)(r))&&(s+="post-row__padding bottom"),(Object(gr.isDateLine)(i)||Object(gr.isStartOfNewMessages)(i))&&(s.includes("post-row__padding")?s+=" top":s+="post-row__padding top");const o=t===this.state.postListIds[0];return O.a.createElement("div",{style:a,className:s},O.a.createElement(YE,{listId:t,previousListId:Object(ae.j)(e,n),shouldHighlight:t===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu,isLastPost:o}))}),cv(this,"itemKey",e=>{const{postListIds:t}=this.state;return t[e]?t[e]:e}),cv(this,"scrollToFailed",e=>{0===e?this.props.actions.changeUnreadChunkTimeStamp(""):this.props.actions.changeUnreadChunkTimeStamp(this.props.lastViewedAt)}),cv(this,"onScroll",({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:a,clientHeight:n,scrollHeight:s})=>{if(s<=0)return;const i="forward"===e&&!a,r=s-n-t<uv;if("backward"===e&&!a&&t<uv&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():i&&r&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.state.isMobile&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(N.Q.SCROLL_DELAY)),this.checkBottom(t,s,n),a){if(this.listRef.current._getRangeToRender()[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(N.z.AFTER_ID),!this.state.atBottom&&s){const e=s-n-t;this.setState({initScrollOffsetFromBottom:e})}}}),cv(this,"checkBottom",(e,t,a)=>{this.updateAtBottom(this.isAtBottom(e,t,a))}),cv(this,"isAtBottom",(e,t,a)=>t-a-e<=10&&t>0),cv(this,"updateAtBottom",e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}}),cv(this,"updateLastViewedBottomAt",(e=Date.now())=>{this.setState({lastViewedBottom:e})}),cv(this,"handleScrollStop",()=>{this.mounted&&this.setState({isScrolling:!1})}),cv(this,"updateFloatingTimestamp",e=>{this.state.isMobile&&this.props.postListIds&&this.setState({topPostId:Object(ae.g)(this.props.postListIds.slice(e))})}),cv(this,"onItemsRendered",({visibleStartIndex:e})=>{this.updateFloatingTimestamp(e)}),cv(this,"initScrollToIndex",()=>{if(this.props.focusedPostId){return{index:this.state.postListIds.findIndex(e=>e===this.props.focusedPostId),position:"center"}}const e=Object(ae.h)(this.state.postListIds);return e>0?Object(gr.isDateLine)(this.state.postListIds[e+1])?{index:e+1,position:"start",offset:-50}:{index:e,position:"start",offset:-50}:{index:0,position:"end"}}),cv(this,"scrollToLatestMessages",()=>{this.props.atLatestPost?this.scrollToBottom():(this.updateNewMessagesAtInChannel(),this.props.actions.changeUnreadChunkTimeStamp(""))}),cv(this,"scrollToBottom",()=>{this.listRef.current.scrollToItem(0,"end")}),cv(this,"scrollToNewMessage",()=>{this.listRef.current.scrollToItem(Object(ae.h)(this.state.postListIds),"start",-50)}),cv(this,"updateNewMessagesAtInChannel",(e=Date.now())=>{this.props.actions.updateNewMessagesAtInChannel(this.props.channelId,e)}),cv(this,"renderToasts",e=>O.a.createElement(rv,{atLatestPost:this.props.atLatestPost,postListIds:this.state.postListIds,atBottom:this.state.atBottom,width:e,lastViewedBottom:this.state.lastViewedBottom,latestPostTimeStamp:this.props.latestPostTimeStamp,scrollToNewMessage:this.scrollToNewMessage,scrollToLatestMessages:this.scrollToLatestMessages,updateNewMessagesAtInChannel:this.updateNewMessagesAtInChannel,updateLastViewedBottomAt:this.updateLastViewedBottomAt,channelId:this.props.channelId,focusedPostId:this.props.focusedPostId,initScrollOffsetFromBottom:this.state.initScrollOffsetFromBottom}));const t=N.y.CHANNEL_INTRO_MESSAGE,a=j.cb();this.state={isScrolling:!1,isMobile:a,atBottom:null,lastViewedBottom:Date.now(),postListIds:[t],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"},initScrollCompleted:!1,initScrollOffsetFromBottom:0},this.listRef=O.a.createRef(),this.postListRef=O.a.createRef(),a&&(this.scrollStopAction=new Ds(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,pv]:[0,hv];let n=0;n=e.focusedPostId?this.props.postListIds.findIndex(e=>e===this.props.focusedPostId):this.getNewMessagesSeparatorIndex(e.postListIds);const s=e.focusedPostId?pv:hv;this.initRangeToRender=[Math.max(n-30,0),Math.max(n+30,Math.min(e.postListIds.length-1,s))]}componentDidMount(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),fE.a.addListener(N.m.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const t=this.props.postListIds&&this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],a=this.props.atOldestPost!==e.atOldestPost;if((t||a)&&!1===this.state.atBottom){const e=this.postListRef.current;return{previousScrollTop:e.parentElement.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,a){if(!this.postListRef.current)return;const n=e.postListIds.length,s=this.props.postListIds.length;if(a){const t=this.postListRef.current.scrollHeight,i=s!==n&&this.props.postListIds[0]===e.postListIds[0],r=this.props.atOldestPost!==e.atOldestPost;if((i||r)&&!this.state.atBottom&&a){const e=a.previousScrollTop+(t-a.previousScrollHeight);0!==e&&e-a.previousScrollTop!=0&&this.listRef.current.scrollTo(e,e-a.previousScrollTop,!0)}}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),fE.a.removeListener(N.m.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}static getDerivedStateFromProps(e){const t=e.postListIds;let a;return a=e.atOldestPost?[...t,N.y.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...t,N.y.OLDER_MESSAGES_LOADER]:[...t,N.y.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(a=e.autoRetryEnable?[N.y.NEWER_MESSAGES_LOADER,...a]:[N.y.LOAD_NEWER_MESSAGES_TRIGGER,...a]),{postListIds:a}}render(){const e=this.props.channelId;let t;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(N.y.START_OF_NEW_MESSAGES)>=0&&(t=this.props.latestAriaLabelFunc(this.props.intl));const{dynamicListStyle:a}=this.state;return O.a.createElement("div",{role:"list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1,"aria-label":j.lb("accessibility.sections.centerContent","message list main region")},this.state.isMobile&&O.a.createElement(O.a.Fragment,null,O.a.createElement(_r,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),O.a.createElement(JE,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})),O.a.createElement("div",{role:"presentation",className:"post-list-holder-by-time",key:"postlist-"+e},O.a.createElement("div",{role:"presentation",className:"post-list__table"},O.a.createElement("div",{id:"postListContent",className:"post-list__content"},O.a.createElement("span",{className:"sr-only","aria-live":"polite"},t),O.a.createElement(pE.a,null,({height:e,width:t})=>O.a.createElement(O.a.Fragment,null,O.a.createElement("div",null,this.renderToasts(t)),O.a.createElement(gE.a,{ref:this.listRef,height:e,width:t,className:"post-list__dynamic",itemCount:this.state.postListIds.length,itemData:this.state.postListIds,itemKey:this.itemKey,overscanCountForward:mv,overscanCountBackward:dv,onScroll:this.onScroll,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,skipResizeClass:"post-menu",innerRef:this.postListRef,style:lv({},bv,{},a),innerListStyle:gv,initRangeToRender:this.initRangeToRender,loaderId:N.y.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost,onItemsRendered:this.onItemsRendered,scrollToFailed:this.scrollToFailed},this.renderRow)))))))}}cv(fv,"propTypes",{postListIds:C.a.array.isRequired,focusedPostId:C.a.string,channelId:C.a.string.isRequired,autoRetryEnable:C.a.bool,atOldestPost:C.a.bool,atLatestPost:C.a.bool,intl:ne.a.isRequired,latestPostTimeStamp:C.a.number,latestAriaLabelFunc:C.a.func,lastViewedAt:C.a.string,actions:C.a.shape({loadOlderPosts:C.a.func.isRequired,loadNewerPosts:C.a.func.isRequired,canLoadMorePosts:C.a.func.isRequired,checkAndSetMobileView:C.a.func.isRequired,changeUnreadChunkTimeStamp:C.a.func.isRequired,updateNewMessagesAtInChannel:C.a.func.isRequired}).isRequired});var _v=Object(te.c)(fv);function Ev(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vv extends O.a.PureComponent{constructor(e){super(e),Ev(this,"postsOnLoad",async e=>{this.props.focusedPostId?await this.props.actions.loadPostsAround(e,this.props.focusedPostId):this.props.isFirstLoad?await this.props.actions.loadUnreads(e):this.props.latestPostTimeStamp?await this.props.actions.syncPostsInChannel(e,this.props.latestPostTimeStamp,!1):await this.props.actions.loadLatestPosts(e),this.props.focusedPostId||this.markChannelAsReadAndViewed(this.props.channelId),this.mounted&&this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})}),Ev(this,"callLoadPosts",async(e,t,a)=>{const{error:n}=await this.props.actions.loadPosts({channelId:e,postId:t,type:a});return a===N.z.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),n?this.autoRetriesCount<3?(this.autoRetriesCount++,await this.callLoadPosts(e,t,a)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:n}}),Ev(this,"markChannelAsReadAndViewed",e=>{this.props.actions.markChannelAsViewed(e),this.props.actions.markChannelAsRead(e)}),Ev(this,"getOldestVisiblePostId",()=>Object(ae.i)(this.props.postListIds)),Ev(this,"getLatestVisiblePostId",()=>Object(ae.g)(this.props.postListIds)),Ev(this,"canLoadMorePosts",async(e=N.z.BEFORE_ID)=>{if(this.props.postListIds&&!this.state.loadingOlderPosts&&!this.state.loadingNewerPosts)if(this.extraPagesLoaded>10)this.state.autoRetryEnable&&this.setState({autoRetryEnable:!1});else{if(this.props.atOldestPost||e!==N.z.BEFORE_ID){if(!this.props.atLatestPost){const e=this.getLatestVisiblePostId();await this.getPostsAfter(e)}}else{const e=this.getOldestVisiblePostId();await this.getPostsBefore(e)}this.extraPagesLoaded+=1}}),Ev(this,"getPostsBefore",async()=>{if(this.state.loadingOlderPosts)return;const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,N.z.BEFORE_ID)}),Ev(this,"getPostsAfter",async()=>{if(this.state.loadingNewerPosts)return;const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,N.z.AFTER_ID)}),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.autoRetriesCount=0,this.loadingMorePosts=null,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp,updateNewMessagesAtInChannel:this.props.actions.updateNewMessagesAtInChannel}}componentDidMount(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}componentWillUnmount(){this.props.channelManuallyUnread||this.markChannelAsReadAndViewed(this.props.channelId),this.mounted=!1}render(){return this.props.postListIds?O.a.createElement("div",{ref:"postlist",className:"post-list-holder-by-time",key:"postlist-"+this.props.channelId},O.a.createElement("div",{className:"post-list__table"},O.a.createElement("div",{id:"virtualizedPostListContent",ref:"postListContent",className:"post-list__content"},O.a.createElement(_v,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc,latestPostId:this.props.latestPostId})))):O.a.createElement(Ym.a,{position:"absolute",key:"loading"})}}Ev(vv,"propTypes",{formattedPostIds:C.a.array,postListIds:C.a.array,channelId:C.a.string,focusedPostId:C.a.string,atLatestPost:C.a.bool,atOldestPost:C.a.bool,isFirstLoad:C.a.bool,latestPostTimeStamp:C.a.number,latestAriaLabelFunc:C.a.func,channelManuallyUnread:C.a.bool.isRequired,latestPostId:C.a.string,changeUnreadChunkTimeStamp:C.a.func.isRequired,actions:C.a.shape({loadPostsAround:C.a.func.isRequired,loadUnreads:C.a.func.isRequired,loadPosts:C.a.func.isRequired,checkAndSetMobileView:C.a.func.isRequired,syncPostsInChannel:C.a.func.isRequired,loadLatestPosts:C.a.func.isRequired,markChannelAsViewed:C.a.func.isRequired,markChannelAsRead:C.a.func.isRequired,updateNewMessagesAtInChannel:C.a.func.isRequired}).isRequired});const yv=(e,t)=>!e.entities.posts.postsInChannel[t],Cv=Object(pd.memoizeResult)(e=>Object(ae.g)(e));var wv=Object(i.g)(Object(n.connect)((function(){const e=Object(Fa.makeGetPostsChunkAroundPost)(),t=Object(gr.makePreparePostIdsForPostList)(),a=Object(ae.q)();return function(n,s){let i,r,o,l,c=0,d=!1,m=!1;const u=n.views.channel.lastChannelViewTime[s.channelId],h=Object(p.isManuallyUnread)(n,s.channelId);if(r=s.focusedPostId&&""!==s.unreadChunkTimeStamp?e(n,s.focusedPostId,s.channelId):s.unreadChunkTimeStamp?Object(Fa.getUnreadPostsChunk)(n,s.channelId,s.unreadChunkTimeStamp):Object(Fa.getRecentPostsChunkInChannel)(n,s.channelId),r&&(i=r.order,d=r.recent,m=r.oldest),i&&(o=t(n,{postIds:i,lastViewedAt:u,indicateNewMessages:!0,channelId:s.channelId}),i.length)){const e=Cv(i),t=Object(Fa.getPost)(n,e);c=t.create_at,l=a(n,t)}return{lastViewedAt:u,isFirstLoad:yv(n,s.channelId),formattedPostIds:o,atLatestPost:d,atOldestPost:m,latestPostTimeStamp:c,postListIds:i,latestAriaLabelFunc:l,channelManuallyUnread:h}}}),(function(e){return{actions:Object(s.bindActionCreators)({loadUnreads:E.j,loadPosts:E.h,loadLatestPosts:E.g,loadPostsAround:E.i,checkAndSetMobileView:E.b,syncPostsInChannel:E.o,markChannelAsViewed:o.markChannelAsViewed,markChannelAsRead:o.markChannelAsRead,updateNewMessagesAtInChannel:M.o},e)}}))(vv));function Ov(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tv extends O.a.PureComponent{constructor(e){super(e),Ov(this,"changeUnreadChunkTimeStamp",e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!0},()=>{window.requestAnimationFrame(()=>{this.setState({loaderForChangeOfPostsChunk:!1})})})}),this.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?O.a.createElement("div",{id:"post-list"},O.a.createElement(Ym.a,{position:"absolute",key:"loading"})):O.a.createElement("div",{id:"post-list",role:"main"},O.a.createElement(wv,{unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId}))}}Ov(Tv,"propTypes",{lastViewedAt:C.a.number,channelLoading:C.a.bool,channelId:C.a.string,focusedPostId:C.a.string});var Sv=Object(i.g)(Object(n.connect)((function(){return function(e,t){const a=Object(h.getTeamByName)(e,t.match.params.team);let n;const s=Object(p.getChannel)(e,t.channelId);let i=e.views.channel.lastChannelViewTime[t.channelId];s&&(s.type===N.j.DM_CHANNEL&&s.teammate_id&&(n=Object(u.getUser)(e,s.teammate_id)),i=s.last_post_at?i:s.last_post_at);const r=Object(h.getTeamMemberships)(e);return{lastViewedAt:i,channelLoading:((e,t,a,n,s)=>{if(e.postid)return!1;if(t&&a){if(t.type!==N.j.DM_CHANNEL&&t.name!==e.identifier)return!0;if(t.type===N.j.DM_CHANNEL&&n&&e.identifier!=="@".concat(n.username))return!0;const i=a.id;return!!(t.team_id&&t.team_id!==i||s&&!s[i])}return!0})(t.match.params,s,a,n,r),channel:s}}}))(Tv)),Pv=a(1796),Mv=a.n(Pv);function Nv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Iv extends O.a.PureComponent{constructor(e){super(e),Nv(this,"handleNext",()=>{switch(this.state.currentScreen){case 0:Object(qe.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_next");break;case 1:Object(qe.d)("tutorial","tutorial_screen_2_how_mattermost_works_next");break;case 2:Object(qe.d)("tutorial","tutorial_screen_3_youre_all_set_next")}if(this.state.currentScreen<2)return void this.setState({currentScreen:this.state.currentScreen+1});const{currentUserId:e}=this.props,t=[{user_id:e,category:N.B.TUTORIAL_STEP,name:e,value:(this.props.step+1).toString()}];this.props.actions.savePreferences(e,t)}),Nv(this,"skipTutorial",e=>{switch(e.preventDefault(),this.state.currentScreen){case 0:Object(qe.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_skip");break;case 1:Object(qe.d)("tutorial","tutorial_screen_2_how_mattermost_works_skip");break;case 2:Object(qe.d)("tutorial","tutorial_screen_3_youre_all_set_skip")}const{currentUserId:t}=this.props,a=[{user_id:t,category:N.B.TUTORIAL_STEP,name:t,value:N.j.TutorialSteps.FINISHED.toString()}];this.props.actions.savePreferences(t,a)}),Nv(this,"createScreen",()=>{switch(this.state.currentScreen){case 0:return this.createScreenOne();case 1:return this.createScreenTwo();case 2:return this.createScreenThree()}return null}),Nv(this,"handleCircleClick",(e,t)=>{e.preventDefault(),this.setState({currentScreen:t})}),Nv(this,"createCircles",()=>{const e=[];for(let t=0;t<3;t++){let a="circle";t===this.state.currentScreen&&(a+=" active"),e.push(O.a.createElement("a",{id:"tutorialIntroCircle"+t,href:"#",key:"circle"+t,className:a,"data-screen":t,onClick:e=>this.handleCircleClick(e,t)}))}return O.a.createElement("div",{className:"tutorial__circles"},e)}),this.state={currentScreen:0}}createScreenOne(){const e=this.createCircles();return O.a.createElement("div",{id:"tutorialIntroOne"},O.a.createElement("h3",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenOne.title1",defaultMessage:"Welcome to:"})),O.a.createElement("h1",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenOne.title2",defaultMessage:"Mattermost"})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenOne.body1",defaultMessage:"Your team communication all in one place, instantly searchable and available anywhere."})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenOne.body2",defaultMessage:"Keep your team connected to help them achieve what matters most."})),e)}createScreenTwo(){const e=this.createCircles();let t=null,a=null;if(this.props.appDownloadLink){const e=Object(Bs.g)(this.props.appDownloadLink);t=O.a.createElement(ee.a,{id:"tutorial_intro.mobileApps",defaultMessage:"Install the apps for {link} for easy access and notifications on the go.",values:{link:O.a.createElement("a",{id:"appDownloadLink",href:e,target:"_blank",rel:"noopener noreferrer"},O.a.createElement(ee.a,{id:"tutorial_intro.mobileAppsLinkText",defaultMessage:"PC, Mac, iOS and Android"}))}}),a=O.a.createElement("a",{id:"appDownloadImage",href:e,target:"_blank",rel:"noopener noreferrer"},O.a.createElement("img",{alt:"tutorial icons",className:"tutorial__app-icons",src:Mv.a}))}return O.a.createElement("div",{id:"tutorialIntroTwo"},O.a.createElement("h3",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenTwo.title",defaultMessage:"How Mattermost Works:"})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenTwo.body1",defaultMessage:"Communication happens in public discussion channels, private channels and direct messages."})),O.a.createElement("p",null,O.a.createElement(ee.a,{id:"tutorial_intro.screenTwo.body2",defaultMessage:"Everything is archived and searchable from any web-enabled desktop, laptop or phone."})),t,a,e)}createScreenThree(){let e,t;this.props.isLicensed&&this.props.restrictTeamInvite||(e=O.a.createElement(HE.a,{id:"tutorialIntroInvite",className:"intro-links color--link style--none",modalId:N.u.INVITATION,dialogType:zd},O.a.createElement(ee.a,{id:"tutorial_intro.invite",defaultMessage:"Invite Teammates"})),t=O.a.createElement("p",null,e,O.a.createElement(ee.a,{id:"tutorial_intro.whenReady",defaultMessage:" when you're ready."})));const a=this.createCircles();let n=null;return this.props.supportEmail&&(n=O.a.createElement("p",{id:"supportInfo"},O.a.createElement(ee.a,{id:"tutorial_intro.support",defaultMessage:"Need anything, just email us at "}),O.a.createElement("a",{href:"mailto:"+this.props.supportEmail,target:"_blank",rel:"noopener noreferrer"},this.props.supportEmail),".")),O.a.createElement("div",{id:"tutorialIntroThree"},O.a.createElement("h3",null,O.a.createElement(ee.a,{id:"tutorial_intro.allSet",defaultMessage:"You're all set"})),t,n,O.a.createElement(ee.a,{id:"tutorial_intro.end",defaultMessage:'Click "Next" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.',values:{channel:this.props.townSquareDisplayName}}),a)}render(){const e=this.createScreen();return O.a.createElement("div",{className:"tutorial-steps__container"},O.a.createElement("div",{id:"tutorialIntroContent",className:"tutorial__content"},O.a.createElement("div",{className:"tutorial__steps"},e,O.a.createElement("div",{className:"tutorial__footer"},O.a.createElement("button",{id:"tutorialNextButton",className:"btn btn-primary",onClick:this.handleNext},O.a.createElement(ee.a,{id:"tutorial_intro.next",defaultMessage:"Next"})),O.a.createElement("a",{id:"tutorialSkipLink",className:"tutorial-skip",href:"#",onClick:this.skipTutorial},O.a.createElement(ee.a,{id:"tutorial_intro.skip",defaultMessage:"Skip Tutorial"}))))))}}Nv(Iv,"propTypes",{currentUserId:C.a.string.isRequired,step:C.a.number,townSquareDisplayName:C.a.string.isRequired,appDownloadLink:C.a.string,isLicensed:C.a.bool.isRequired,restrictTeamInvite:C.a.bool.isRequired,supportEmail:C.a.string.isRequired,actions:C.a.shape({savePreferences:C.a.func.isRequired}).isRequired});var jv=Object(n.connect)((function(e){const t=Object(u.getCurrentUserId)(e);return{currentUserId:t,step:Object(d.getInt)(e,N.B.TUTORIAL_STEP,t,0)}}),(function(e){return{actions:Object(s.bindActionCreators)({savePreferences:os.savePreferences},e)}}))(Iv);class Av extends O.a.PureComponent{componentDidMount(){this.props.isRoot&&As()("body").addClass("app__body")}componentWillUnmount(){this.props.isRoot&&As()("body").removeClass("app__body")}render(){return O.a.createElement("div",{id:"app-content",className:"app__content"},O.a.createElement(jv,{townSquareDisplayName:this.props.townSquareDisplayName,appDownloadLink:this.props.appDownloadLink,isLicensed:this.props.isLicensed,restrictTeamInvite:this.props.restrictTeamInvite,supportEmail:this.props.supportEmail}))}}Av.propTypes={isRoot:C.a.bool,townSquareDisplayName:C.a.string.isRequired,appDownloadLink:C.a.string,isLicensed:C.a.bool.isRequired,restrictTeamInvite:C.a.bool.isRequired,supportEmail:C.a.string.isRequired},Av.defaultProps={isRoot:!0};var Rv=Object(n.connect)((function(e){const t=Object(m.getLicense)(e),a=Object(m.getConfig)(e),n=Object(h.getCurrentTeam)(e),s=Object(p.getChannelsNameMapInCurrentTeam)(e)[N.Q.DEFAULT_CHANNEL];return{townSquareDisplayName:s?s.display_name:N.Q.DEFAULT_CHANNEL_UI_NAME,appDownloadLink:a.AppDownloadLink,isLicensed:"true"===t.IsLicensed,restrictTeamInvite:!Object(U.haveITeamPermission)(e,{team:n.id,permission:x.Permissions.INVITE_USER}),supportEmail:a.SupportEmail}}))(Av);function kv(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lv(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kv(Object(a),!0).forEach((function(t){Dv(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kv(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Dv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xv extends O.a.PureComponent{static getDerivedStateFromProps(e,t){let a={};const n=e.match.params.postid;return e.match.url!==t.url&&e.channelId!==t.channelId&&(a={deferredPostView:xv.createDeferredPostView(),url:e.match.url,focusedPostId:n}),e.channelId!==t.channelId&&(a=Lv({},a,{channelId:e.channelId,focusedPostId:n})),n&&n!==t.focusedPostId&&(a=Lv({},a,{focusedPostId:n})),Object.keys(a).length?a:null}constructor(e){super(e),Dv(this,"getChannelView",()=>this.refs.channelView),Dv(this,"onClickCloseChannel",()=>{this.props.actions.goToLastViewedChannel()}),this.state={url:e.match.url,channelId:e.channelId,deferredPostView:xv.createDeferredPostView()}}componentDidUpdate(e){if(e.channelId!==this.props.channelId||e.channelIsArchived!==this.props.channelIsArchived){Object(qe.b)("ChannelView#componentDidUpdate");const[e]=Object(qe.c)("SidebarChannelLink#click","ChannelView#componentDidUpdate"),[t]=Object(qe.c)("TeamLink#click","ChannelView#componentDidUpdate");Object(qe.a)(["SidebarChannelLink#click","ChannelView#componentDidUpdate","TeamLink#click"]),-1!==e&&Object(qe.d)("performance","channel_switch",{duration:Math.round(e)}),-1!==t&&Object(qe.d)("performance","team_switch",{duration:Math.round(t)}),this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel()}}render(){const{channelIsArchived:e}=this.props;if(this.props.showTutorial)return O.a.createElement(Rv,{isRoot:!1});let t;this.props.deactivatedChannel?t=O.a.createElement("div",{className:"post-create-message"},O.a.createElement(ee.a,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})):e?t=O.a.createElement("div",{className:"post-create__container",id:"post-create"},O.a.createElement("div",{id:"channelArchivedMessage",className:"channel-archived__message"},O.a.createElement(Ki.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),O.a.createElement("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel},O.a.createElement(ee.a,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})))):this.props.channelRolesLoading||(t=O.a.createElement("div",{className:"post-create__container",id:"post-create"},O.a.createElement(hE,{getChannelView:this.getChannelView})));const a=this.state.deferredPostView;return O.a.createElement("div",{ref:"channelView",id:"app-content",className:"app__content"},O.a.createElement(Ns,{overlayType:"center"}),O.a.createElement(nE,{channelId:this.props.channelId}),O.a.createElement(a,{channelId:this.props.channelId,focusedPostId:this.state.focusedPostId}),t)}}Dv(xv,"propTypes",{channelId:C.a.string.isRequired,deactivatedChannel:C.a.bool.isRequired,channelRolesLoading:C.a.bool.isRequired,match:C.a.shape({url:C.a.string.isRequired,params:C.a.shape({postid:C.a.string}).isRequired}).isRequired,showTutorial:C.a.bool.isRequired,channelIsArchived:C.a.bool.isRequired,viewArchivedChannels:C.a.bool.isRequired,actions:C.a.shape({goToLastViewedChannel:C.a.func.isRequired})}),Dv(xv,"createDeferredPostView",()=>function(e,t=null){class a extends O.a.PureComponent{constructor(e,t){super(e,t),this.state={shouldRender:!1}}componentDidMount(){window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>this.setState({shouldRender:!0}))})}render(){return this.state.shouldRender?O.a.createElement(e,this.props):t}}return j_()(a,e)}(Sv,O.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0})));const Uv=Object(ba.createSelector)((e,t)=>Object(j.v)(e,t),e=>Boolean(e&&e.delete_at));var qv=Object(i.g)(Object(n.connect)((function(e){const t=Object(p.getCurrentChannel)(e),a=Object(m.getConfig)(e),n="true"===a.EnableTutorial,s=Object(d.getInt)(e,N.B.TUTORIAL_STEP,Object(u.getCurrentUserId)(e),N.K.FINISHED),i="true"===a.ExperimentalViewArchivedChannels;let r=!0;if(t&&t.id){const a=Object(N_.getRoles)(e),n=Object(U.getMyChannelRoles)(e);if(n[t.id]){const e=n[t.id].values();for(const t of e){a[t]&&(r=!1);break}}}return{channelId:t?t.id:"",channelRolesLoading:r,deactivatedChannel:!!t&&Uv(e,t.id),showTutorial:n&&s<=N.K.INTRO_SCREENS,channelIsArchived:!!t&&0!==t.delete_at,viewArchivedChannels:i}}),(function(e){return{actions:Object(s.bindActionCreators)({goToLastViewedChannel:E.c},e)}}))(xv));function Hv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fv extends O.a.PureComponent{constructor(e){super(e),Hv(this,"replaceUrlIfPermalink",()=>{this.props.match.params.postid&&(this.replaceUrlTimeout=setTimeout(()=>{const e=this.props.match.url.split("/").slice(0,-1).join("/");se.a.replace(e)},N.Q.PERMALINK_FADEOUT))}),this.state={prevProps:e}}componentDidUpdate(e){this.props.match.params.team===e.match.params.team&&this.props.match.params.identifier===e.match.params.identifier||(clearTimeout(this.replaceUrlTimeout),this.props.actions.onChannelByIdentifierEnter(this.props),this.replaceUrlIfPermalink())}componentDidMount(){this.props.actions.onChannelByIdentifierEnter(this.props),this.replaceUrlIfPermalink()}componentWillUnmount(){clearTimeout(this.replaceUrlTimeout)}render(){return O.a.createElement(qv,null)}}Hv(Fv,"propTypes",{match:C.a.shape({params:C.a.shape({identifier:C.a.string.isRequired,team:C.a.string.isRequired,postid:C.a.string}).isRequired,url:C.a.string.isRequired}).isRequired,actions:C.a.shape({onChannelByIdentifierEnter:C.a.func.isRequired}).isRequired});var Bv=Object(i.g)(Object(n.connect)(null,(function(e){return{actions:Object(s.bindActionCreators)({onChannelByIdentifierEnter:w_},e)}}))(Fv));class Gv extends O.a.PureComponent{constructor(e){super(e),this.state={returnTo:"",lastReturnTo:""}}static getDerivedStateFromProps(e,t){return t.lastReturnTo!==e.location.pathname&&e.location.pathname.includes("/pl/")?{lastReturnTo:e.location.pathname,returnTo:t.lastReturnTo}:{lastReturnTo:e.location.pathname}}render(){const{lastChannelPath:e}=this.props,t=this.props.match.url;return O.a.createElement("div",{key:"inner-wrap",className:ws()("inner-wrap","channel__wrap",{"move--right":this.props.lhsOpen,"move--left":this.props.rhsOpen,"move--left-small":this.props.rhsMenuOpen})},O.a.createElement("div",{className:"row header"},O.a.createElement("div",{id:"navbar_wrapper"},O.a.createElement(y_,null))),O.a.createElement("div",{className:"row main"},O.a.createElement(i.d,null,O.a.createElement(i.b,{path:"".concat(t,"/pl/:postid"),render:e=>O.a.createElement(mb,Object.assign({},e,{returnTo:this.state.returnTo}))}),O.a.createElement(i.b,{path:["/:team/:path(channels|messages)/:identifier/:postid","/:team/:path(channels|messages)/:identifier"],component:Bv}),O.a.createElement(i.a,{to:e}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Gv,"propTypes",{match:C.a.shape({url:C.a.string.isRequired}).isRequired,location:C.a.shape({pathname:C.a.string.isRequired}).isRequired,lastChannelPath:C.a.string.isRequired,lhsOpen:C.a.bool.isRequired,rhsOpen:C.a.bool.isRequired,rhsMenuOpen:C.a.bool.isRequired});var Vv=Object(n.connect)((e,t)=>{let a=Object(b.b)(e,t.match.params.team);if(!a){const n=Object(h.getTeamByName)(e,t.match.params.team);a=Object(p.getRedirectChannelNameForTeam)(e,n.id)}return{lastChannelPath:"".concat(t.match.url,"/channels/").concat(a),lhsOpen:qu(e),rhsOpen:Object(ys.c)(e),rhsMenuOpen:Object(ys.b)(e)}})(Gv),Wv=a(1797),zv=a.n(Wv),Kv=a(1798),Yv=a.n(Kv),Qv=a(1799),Zv=a.n(Qv),Jv=a(1800),Xv=a.n(Jv),$v=a(1801),ey=a.n($v),ty=a(1802),ay=a.n(ty);function ny(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class sy extends O.a.PureComponent{constructor(e){super(e),ny(this,"badgesActive",void 0),ny(this,"lastBadgesActive",void 0),ny(this,"updateTitle",()=>{const{siteName:e,currentChannel:t,currentTeam:a,currentTeammate:n,unreads:s}=this.props,{formatMessage:i}=this.props.intl,r=e||"";if(t&&a&&t.id){let e=t.display_name;t.type===N.j.DM_CHANNEL&&null!=n&&(e=n.display_name);const i=s.mentionCount>0?"("+s.mentionCount+") ":"",o=s.messageCount>0?"* ":"";document.title=i+o+e+" - "+a.display_name+" "+r}else document.title=i({id:"sidebar.team_select",defaultMessage:"{siteName} - Join a team"},{siteName:r||"Mattermost"})}),ny(this,"updateFavicon",e=>{const t=document.querySelector('link[rel="icon"][sizes="16x16"]'),a=document.querySelector('link[rel="icon"][sizes="32x32"]'),n=document.querySelector('link[rel="icon"][sizes="96x96"]');e?(t.href="string"==typeof Xv.a?Xv.a:"",a.href="string"==typeof ey.a?ey.a:"",n.href="string"==typeof ay.a?ay.a:""):(t.href="string"==typeof zv.a?zv.a:"",a.href="string"==typeof Yv.a?Yv.a:"",n.href="string"==typeof Zv.a?Zv.a:"")}),this.badgesActive=!1,this.lastBadgesActive=!1}componentDidUpdate(e){this.updateTitle(),this.setBadgesActiveAndFavicon(e.unreads.mentionCount>0)}setBadgesActiveAndFavicon(e){if(!I.f()&&!I.c())return;document.querySelector('link[rel="icon"]')&&(this.badgesActive=this.props.unreads.mentionCount>0,e!==this.badgesActive&&this.updateFavicon(this.badgesActive))}render(){return null}}ny(sy,"propTypes",{intl:C.a.any.isRequired,unreads:C.a.shape({messageCount:C.a.number.isRequired,mentionCount:C.a.number.isRequired}).isRequired,siteName:C.a.string,currentChannel:C.a.any.isRequired,currentTeam:C.a.any.isRequired,currentTeammate:C.a.oneOfType([C.a.any,C.a.oneOf([null])])});var iy=Object(te.c)(sy);var ry=Object(n.connect)((function(e){const t=Object(m.getConfig)(e),a=Object(p.getCurrentChannel)(e),n=a&&a.teammate_id?a:null;return{currentChannel:a,currentTeam:Object(h.getCurrentTeam)(e),currentTeammate:n,siteName:t.SiteName,unreads:Object(p.getUnreads)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({},e)}}))(iy);class oy extends O.a.Component{shouldComponentUpdate(e){return this.props.teamType!==e.teamType||this.props.pathName!==e.pathName||this.props.fetchingChannels!==e.fetchingChannels||this.props.useLegacyLHS!==e.useLegacyLHS}componentDidMount(){const e=window.navigator.platform;document.body.classList.add("app__body","channel-view"),(I.g()||I.e())&&document.body.classList.add("browser--ie"),"Win32"===e||"Win64"===e?document.body.classList.add("os--windows"):"MacIntel"!==e&&"MacPPC"!==e||document.body.classList.add("os--mac")}componentWillUnmount(){document.body.classList.remove("app__body","channel-view")}render(){const e=th,t=this.props.useLegacyLHS?eg:rb;return O.a.createElement("div",{id:"channel_view",className:"channel-view"},O.a.createElement(R.a,null),O.a.createElement(L.a,null),O.a.createElement(ry,null),O.a.createElement("div",{className:"container-fluid"},O.a.createElement(Fc,null),O.a.createElement(ku,{teamType:this.props.teamType}),O.a.createElement(i.b,{component:e}),O.a.createElement(i.b,{component:t}),!this.props.fetchingChannels&&O.a.createElement(i.b,{component:Vv}),this.props.fetchingChannels&&O.a.createElement(Ym.a,null),O.a.createElement(k.a,{pluggableName:"Root"}),O.a.createElement(as,null),O.a.createElement(xu,null),O.a.createElement(Hn,null),O.a.createElement(hs,null),O.a.createElement(rs,null),O.a.createElement(Es,{isMac:j.bb()}),O.a.createElement(Uu.a,null)))}}function ly(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(oy,"propTypes",{pathName:C.a.string.isRequired,teamType:C.a.string.isRequired,fetchingChannels:C.a.bool.isRequired,useLegacyLHS:C.a.bool.isRequired});const cy=O.a.lazy(()=>a.e(9).then(a.bind(null,2020))),dy=Object(A.a)(cy);let my,uy=Date.now();class hy extends O.a.PureComponent{constructor(e){if(super(e),ly(this,"blurTime",void 0),ly(this,"handleBlur",()=>{window.isActive=!1,this.blurTime=(new Date).getTime(),this.props.currentUser&&this.props.actions.viewChannel("")}),ly(this,"handleFocus",()=>{this.props.currentChannelId&&(this.props.actions.markChannelAsReadOnFocus(this.props.currentChannelId),window.isActive=!0),Date.now()-this.blurTime>1e4&&this.props.currentTeamId&&(this.props.actions.fetchMyChannelsAndMembers(this.props.currentTeamId),this.props.actions.loadProfilesForDirect())}),ly(this,"joinTeam",async e=>{const{data:t}=await this.props.actions.getTeamByName(e.match.params.team);if(t){const{error:a}=await e.actions.addUserToTeam(t.id,e.currentUser&&e.currentUser.id);a?e.history.push("/error?type=team_not_found"):(this.setState({team:t}),this.initTeam(t))}else e.history.push("/error?type=team_not_found")}),ly(this,"initTeam",e=>(e.id!==this.props.previousTeamId&&M.c(),this.props.actions.getMyTeamUnreads(),this.props.actions.selectTeam(e),this.props.actions.setPreviousTeamId(e.id),j.Y(this.props.currentUser)&&this.setState({finishedFetchingChannels:!1}),this.props.actions.fetchMyChannelsAndMembers(e.id).then(()=>{this.setState({finishedFetchingChannels:!0})}),this.props.actions.loadStatusesForChannelAndSidebar(),this.props.actions.loadProfilesForDirect(),this.props.license&&"true"===this.props.license.IsLicensed&&"true"===this.props.license.LDAPGroups&&(this.props.currentUser&&this.props.actions.getGroupsByUserId(this.props.currentUser.id),this.props.actions.getAllGroupsAssociatedToChannelsInTeam(e.id,!0),e.group_constrained?this.props.actions.getAllGroupsAssociatedToTeam(e.id,!0):this.props.actions.getGroups(!0)),e)),ly(this,"updateCurrentTeam",e=>{const t=e.teamsList?e.teamsList.find(t=>t.name===e.match.params.team):null;return t?(this.initTeam(t),t):null}),ly(this,"onShortcutKeyDown",e=>{if(e.shiftKey&&j.e(e)&&j.Z(e,N.Q.KeyCodes.L)){const e=document.getElementById("sidebar-right");if(e)if(e.className.match("sidebar--right sidebar--right--expanded move--left")){const e=document.getElementById("reply_textbox");e&&e.focus()}else{const e=document.getElementById("post_textbox");e&&e.focus()}}}),this.blurTime=(new Date).getTime(),this.props.mfaRequired)return void this.props.history.push("/mfa/setup");clearInterval(my),my=window.setInterval(()=>{const e=(new Date).getTime();e>uy+6e4&&(console.log("computer woke up - fetching latest"),Object(P.c)(!1)),uy=e},3e4);const t=this.updateCurrentTeam(this.props);this.state={team:t,finishedFetchingChannels:!1,prevTeam:this.props.match.params.team,teamsList:this.props.teamsList},t||this.joinTeam(this.props)}static getDerivedStateFromProps(e,t){if(t.prevTeam!==e.match.params.team){const t=e.teamsList?e.teamsList.find(t=>t.name===e.match.params.team):null;return{prevTeam:e.match.params.team,team:t||null}}return{prevTeam:e.match.params.team}}componentDidMount(){Object(f.d)(),Object(P.f)(),window.isActive=!0,j.b(this.props.theme),I.k()&&S.a.enable(),window.addEventListener("focus",this.handleFocus),window.addEventListener("blur",this.handleBlur),window.addEventListener("keydown",this.onShortcutKeyDown)}componentDidUpdate(e){const{theme:t}=this.props;j.c(e.theme,t)||j.b(t),this.props.match.params.team!==e.match.params.team&&(this.state.team&&this.initTeam(this.state.team),this.state.team||this.joinTeam(this.props))}componentWillUnmount(){window.isActive=!1,Object(f.e)(),Object(P.g)(),I.k()&&S.a.disable(),clearInterval(my),window.removeEventListener("focus",this.handleFocus),window.removeEventListener("blur",this.handleBlur),window.removeEventListener("keydown",this.onShortcutKeyDown)}render(){var e;if(null===this.state.team)return O.a.createElement("div",null);const t=this.state.team?this.state.team.type:"";return O.a.createElement(i.d,null,O.a.createElement(i.b,{path:"/:team/integrations",component:dy}),O.a.createElement(i.b,{path:"/:team/emoji",component:dy}),null===(e=this.props.plugins)||void 0===e?void 0:e.map(e=>O.a.createElement(i.b,{key:e.id,path:"/:team/"+e.route,render:()=>O.a.createElement(k.a,{pluggableName:"NeedsTeamComponent",pluggableId:e.id})})),O.a.createElement(i.b,{render:e=>O.a.createElement(oy,{pathName:e.location.pathname,teamType:t,fetchingChannels:!this.state.finishedFetchingChannels,useLegacyLHS:this.props.useLegacyLHS})}))}}ly(hy,"propTypes",{license:C.a.any.isRequired,currentUser:C.a.shape({id:C.a.string.isRequired}),currentChannelId:C.a.string,currentTeamId:C.a.string,useLegacyLHS:C.a.bool.isRequired,actions:C.a.shape({fetchMyChannelsAndMembers:C.a.func.isRequired,getMyTeamUnreads:C.a.func.isRequired,viewChannel:C.a.func.isRequired,markChannelAsReadOnFocus:C.a.func.isRequired,getTeamByName:C.a.func.isRequired,addUserToTeam:C.a.func.isRequired,selectTeam:C.a.func.isRequired,setPreviousTeamId:C.a.func.isRequired,loadStatusesForChannelAndSidebar:C.a.func.isRequired,loadProfilesForDirect:C.a.func.isRequired,getAllGroupsAssociatedToChannelsInTeam:C.a.func.isRequired,getAllGroupsAssociatedToTeam:C.a.func.isRequired,getGroupsByUserId:C.a.func.isRequired,getGroups:C.a.func.isRequired}).isRequired,mfaRequired:C.a.bool.isRequired,match:C.a.shape({params:C.a.shape({team:C.a.string.isRequired}).isRequired}).isRequired,previousTeamId:C.a.string,history:C.a.shape({}).isRequired,teamsList:C.a.arrayOf(C.a.any).isRequired,theme:C.a.any.isRequired,plugins:C.a.any});t.a=Object(i.g)(Object(n.connect)((function(e,t){const a=Object(m.getLicense)(e),n=Object(m.getConfig)(e),s=Object(u.getCurrentUser)(e),i=e.plugins.components.NeedsTeamComponent;return{license:a,theme:Object(d.getTheme)(e),mfaRequired:Object(v.a)(s,a,n,t.match.url),currentUser:s,currentTeamId:Object(h.getCurrentTeamId)(e),previousTeamId:Object(b.d)(e),teamsList:Object(h.getMyTeams)(e),currentChannelId:Object(p.getCurrentChannelId)(e),useLegacyLHS:!Object(d.getNewSidebarPreference)(e),plugins:i}}),(function(e){return{actions:Object(s.bindActionCreators)({fetchMyChannelsAndMembers:o.fetchMyChannelsAndMembers,getMyTeamUnreads:l.getMyTeamUnreads,viewChannel:o.viewChannel,markChannelAsReadOnFocus:E.k,getTeamByName:l.getTeamByName,addUserToTeam:_.a,setPreviousTeamId:g.a,selectTeam:l.selectTeam,loadStatusesForChannelAndSidebar:f.a,loadProfilesForDirect:r.loadProfilesForDirect,getAllGroupsAssociatedToChannelsInTeam:c.getAllGroupsAssociatedToChannelsInTeam,getAllGroupsAssociatedToTeam:c.getAllGroupsAssociatedToTeam,getGroupsByUserId:c.getGroupsByUserId,getGroups:c.getGroups},e)}}))(hy))},2001:function(e,t,a){"use strict";var n=a(1356),s=a(37),i=a(87),r=a(5),o=a(1132),l=a(0),c=a(1510),d=a(20);let m="";d.a.subscribe(()=>{const e=d.a.getState(),t=e.entities.integrations.dialogTriggerId;t!==m&&(m=t,(e.entities.integrations.dialog||{}).trigger_id===t&&d.a.dispatch(Object(o.b)({modalId:l.u.INTERACTIVE_DIALOG,dialogType:c.a})))}),window.React=a(6),window.ReactDOM=a(316),window.Redux=a(11),window.ReactRedux=a(315),window.ReactBootstrap=a(1117),window.PostUtils={formatText:s.f,messageHtmlToComponent:n.a},window.PropTypes=a(33),window.PDFJS=a(332),window.openInteractiveDialog=function(e){d.a.dispatch({type:r.IntegrationTypes.RECEIVED_DIALOG,data:e}),d.a.dispatch(Object(o.b)({modalId:l.u.INTERACTIVE_DIALOG,dialogType:c.a}))},window.WebappUtils={browserHistory:i.a}},2002:function(e,t,a){"use strict";var n=a(315),s=a(11),i=a(1250),r=a(182),o=(a(35),a(33)),l=a.n(o),c=a(6),d=a.n(c),m=a(1355),u=a(22),h=a(617),p=a(192),g=a(15);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends d.a.PureComponent{constructor(...e){super(...e),b(this,"handleLocaleChange",e=>{u.Client4.setAcceptLanguage(e),this.loadTranslationsIfNecessary(e)}),b(this,"loadTranslationsIfNecessary",e=>{if(this.props.translations)return;const t=p.c(e);t&&this.props.actions.loadTranslations(e,t.url)})}componentDidMount(){p.a(),Object(h.setLocalizeFunction)(g.lb),this.handleLocaleChange(this.props.locale)}componentDidUpdate(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}render(){return this.props.translations?d.a.createElement(m.a,{key:this.props.locale,locale:this.props.locale,messages:this.props.translations,textComponent:"span"},this.props.children):null}}b(f,"propTypes",{children:l.a.element.isRequired,locale:l.a.string.isRequired,translations:l.a.object,actions:l.a.shape({loadTranslations:l.a.func.isRequired}).isRequired});t.a=Object(n.connect)((function(e){const t=Object(r.a)(e);return{locale:t,translations:Object(r.b)(e,t)}}),(function(e){return{actions:Object(s.bindActionCreators)({loadTranslations:i.b},e)}}))(f)},2014:function(e,t,a){"use strict";var n=a(315),s=a(9),i=a(33),r=a.n(i),o=a(6),l=a.n(o),c=a(1365),d=a(1113);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends l.a.PureComponent{constructor(e){super(e),m(this,"onHide",()=>{this.setState({show:!1})}),this.state={show:!0}}render(){let e,t;return e=l.a.createElement(d.a,{id:"removed_channel.channelName",defaultMessage:"the channel"}),this.props.channelName&&(e=this.props.channelName),t=l.a.createElement(d.a,{id:"removed_channel.someone",defaultMessage:"Someone"}),this.props.remover&&(t=this.props.remover),""===this.props.currentUserId?null:l.a.createElement(c.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"removeFromChannelModalLabel"},l.a.createElement(c.a.Header,{closeButton:!0},l.a.createElement(c.a.Title,{componentClass:"h1",id:"removeFromChannelModalLabel"},l.a.createElement(d.a,{id:"removed_channel.from",defaultMessage:"Removed from "}),l.a.createElement("span",{className:"name"},e))),l.a.createElement(c.a.Body,null,l.a.createElement("p",null,l.a.createElement(d.a,{id:"removed_channel.remover",defaultMessage:"{remover} removed you from {channel}",values:{remover:t,channel:e}}))),l.a.createElement(c.a.Footer,null,l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onHide,id:"removedChannelBtn"},l.a.createElement(d.a,{id:"removed_channel.okay",defaultMessage:"Okay"}))))}}m(u,"propTypes",{currentUserId:r.a.string.isRequired,onHide:r.a.func.isRequired,channelName:r.a.string,remover:r.a.string});t.a=Object(n.connect)((function(e,t){const a=Object(s.getUser)(e,t.removerId);return{currentUserId:Object(s.getCurrentUserId)(e),remover:a&&a.username}}))(u)},2016:function(e,t,a){"use strict";a.r(t);var n=a(11),s=a(315),i=a(16),r=a(9),o=a(19),l=a(1250),c=a(123),d=a(1522);t.default=Object(s.connect)((function(e){const t=Object(i.getConfig)(e),a=Object(r.shouldShowTermsOfService)(e),n=e.plugins.components.CustomRouteComponent,s=c.a.getPreviousTeamId(Object(r.getCurrentUserId)(e)),l=Object(o.getTeam)(e,s);return{diagnosticsEnabled:"true"===t.DiagnosticsEnabled,noAccounts:"true"===t.NoAccounts,diagnosticId:t.DiagnosticId,permalinkRedirectTeamName:l?l.name:"",showTermsOfService:a,plugins:n}}),(function(e){return{actions:Object(n.bindActionCreators)({loadMeAndConfig:l.a},e)}}))(d.a)}},0,[1,21,17,3]]);
//# sourceMappingURL=6.a3160771256c5b01cd29.js.map